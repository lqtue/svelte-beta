import"../chunks/DsnmJJEf.js";import{i as de}from"../chunks/CUqaGiYm.js";import{o as ge,s as P}from"../chunks/6ds4e1Hj.js";import{A as fe,I as Q,J as me,y as _,t as ye,z as C,x as p,C as _e,$ as be,K as w,L as k,l as e,M as ae,G as x,D as d,u as g,F as c,N as q,q as we,v as xe}from"../chunks/obLiwMeQ.js";import{i as E}from"../chunks/uRYNcqzp.js";import{D as Se,e as J,i as te}from"../chunks/iPpcYJ_L.js";import{a as W,s as D}from"../chunks/d6K977q5.js";const ke=!1,ze=Object.freeze(Object.defineProperty({__proto__:null,ssr:ke},Symbol.toStringTag,{value:"Module"}));var Ce=_('<meta name="description" content="Explore georeferenced historical maps of Vietnam. Overlay vintage cartography on modern basemaps, track your location through history." class="svelte-1uha8ag"/> <link href="https://fonts.googleapis.com/css2?family=Spectral:wght@400;600;700;800&amp;family=Noto+Serif:ital,wght@0,400;0,600;0,700;1,400&amp;family=Be+Vietnam+Pro:wght@400;500;600;700&amp;display=swap" rel="stylesheet" class="svelte-1uha8ag"/>',1),Ae=_("<button> </button>"),Me=_('<div class="city-filter svelte-1uha8ag"><button>All</button> <!></div>'),$e=_('<div class="maps-loading svelte-1uha8ag"><span class="loading-icon svelte-1uha8ag">‚è≥</span> <span class="svelte-1uha8ag">Loading collection...</span></div>'),Le=_('<img loading="lazy" class="svelte-1uha8ag"/>'),Ve=_('<span class="map-year svelte-1uha8ag"> </span>'),Ee=_('<span class="map-city svelte-1uha8ag"> </span>'),Fe=_('<a class="map-card svelte-1uha8ag"><div class="map-thumbnail svelte-1uha8ag"><!></div> <div class="map-info svelte-1uha8ag"><h3 class="map-name svelte-1uha8ag"> </h3> <div class="map-meta svelte-1uha8ag"><!> <!></div></div></a>'),Te=_('<div class="maps-grid svelte-1uha8ag"></div>'),Ue=_('<p class="maps-empty svelte-1uha8ag">No maps found in collection.</p>'),je=_('<a class="city-tag svelte-1uha8ag"> </a>'),Be=_('<section class="cities svelte-1uha8ag"><div class="cities-header svelte-1uha8ag"><span class="cities-icon svelte-1uha8ag">üèõÔ∏è</span> <h2 class="cities-title svelte-1uha8ag">Browse by City</h2></div> <div class="cities-grid svelte-1uha8ag"></div></section>'),Pe=_(`<div><header class="hero svelte-1uha8ag"><div class="hero-content svelte-1uha8ag"><div class="hero-icon svelte-1uha8ag">üó∫Ô∏è</div> <h1 class="hero-title svelte-1uha8ag">Vietnam Map Archive</h1> <p class="hero-subtitle svelte-1uha8ag">Explore historical maps of Vietnam overlaid on the modern world</p></div> <div class="hero-decoration svelte-1uha8ag"></div></header> <main class="main svelte-1uha8ag"><section class="features svelte-1uha8ag"><a href="/trip" class="feature-card featured svelte-1uha8ag"><div class="feature-icon svelte-1uha8ag">üìç</div> <div class="feature-content svelte-1uha8ag"><h2 class="feature-title svelte-1uha8ag">Viewer</h2> <p class="feature-description svelte-1uha8ag">Walk through history with real-time GPS tracking on vintage maps.
						See where you are on maps from decades past.</p> <span class="feature-cta svelte-1uha8ag"><span class="cta-text svelte-1uha8ag">Start Exploring</span> <span class="cta-arrow svelte-1uha8ag">‚Üí</span></span></div></a> <a href="/temp-viewer" class="feature-card svelte-1uha8ag"><div class="feature-icon svelte-1uha8ag">üñºÔ∏è</div> <div class="feature-content svelte-1uha8ag"><h2 class="feature-title svelte-1uha8ag">Studio <span class="beta-badge svelte-1uha8ag">Beta</span></h2> <p class="feature-description svelte-1uha8ag">Browse and annotate historical maps. Draw points, lines, and regions
						to mark places of interest.</p> <span class="feature-cta svelte-1uha8ag"><span class="cta-text svelte-1uha8ag">Open Studio</span> <span class="cta-arrow svelte-1uha8ag">‚Üí</span></span></div></a></section> <section class="maps-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><span class="section-icon svelte-1uha8ag">üó∫Ô∏è</span> <h2 class="section-title svelte-1uha8ag">Featured Maps</h2></div> <!> <!></section> <section class="about svelte-1uha8ag"><div class="about-header svelte-1uha8ag"><span class="about-icon svelte-1uha8ag">‚ú¶</span> <h2 class="about-title svelte-1uha8ag">About This Project</h2></div> <p class="about-text svelte-1uha8ag">Vietnam Map Archive brings historical cartography to life by georeferencing vintage maps
				and overlaying them on modern satellite imagery. Using the <a href="https://allmaps.org" target="_blank" rel="noopener" class="svelte-1uha8ag">Allmaps</a> platform,
				we transform static historical documents into interactive explorations of how places have changed over time.</p> <p class="about-text svelte-1uha8ag">Our collection spans maps of Saigon, Hanoi, Hu·∫ø, ƒê√† N·∫µng, and other Vietnamese cities
				from various periods of history.</p></section> <!></main> <footer class="footer svelte-1uha8ag"><div class="footer-content svelte-1uha8ag"><p class="footer-text svelte-1uha8ag">Built with <a href="https://allmaps.org" target="_blank" rel="noopener" class="svelte-1uha8ag">Allmaps</a>, <a href="https://openlayers.org" target="_blank" rel="noopener" class="svelte-1uha8ag">OpenLayers</a>, and <a href="https://svelte.dev" target="_blank" rel="noopener" class="svelte-1uha8ag">SvelteKit</a></p> <p class="footer-contact svelte-1uha8ag">Contact: <a href="mailto:vietnamma.project@gmail.com" class="svelte-1uha8ag">vietnamma.project@gmail.com</a></p></div></footer></div>`);function Ge(se,re){fe(re,!1);const I=k(),N=k(),O=k();let X=k(!1),H=k([]),S=k([]),R=k(!0),A=k(new Map),M=k("all");async function le(a){try{const s=await fetch(`https://annotations.allmaps.org/images/${a}`);if(!s.ok)return null;const f=(await s.json()).items;if(!f||f.length===0)return null;const i=f[0]?.target?.source;return i?.id?`${i.id}/full/,400/0/default.jpg`:null}catch(s){return console.error(`Failed to fetch thumbnail for ${a}:`,s),null}}async function oe(){try{const a=await fetch(Se);if(!a.ok)throw new Error(`HTTP ${a.status}`);const u=(await a.text()).trim().split(/\r?\n/),f=u.shift()||"",i=[];let r="",v=!1;for(let l=0;l<f.length;l++){const h=f[l];h==='"'?v=!v:h===","&&!v?(i.push(r.replace(/^"|"$/g,"").trim().toLowerCase()),r=""):r+=h}i.push(r.replace(/^"|"$/g,"").trim().toLowerCase());const n=[];for(const l of u){if(!l.trim())continue;const h=[];let F="",T=!1;for(let m=0;m<l.length;m++){const L=l[m];L==='"'?T=!T:L===","&&!T?(h.push(F.replace(/^"|"$/g,"").trim()),F=""):F+=L}h.push(F.replace(/^"|"$/g,"").trim());const o={};i.forEach((m,L)=>{o[m]=h[L]||""});const $=i.find(m=>m==="id"),U=i.find(m=>m==="name"),j=i.find(m=>m==="type");if(!$||!U||!o[$]||!o[U])continue;const B=parseInt(o.year,10),G={id:o[$],name:o[U],type:j&&o[j]||"",summary:o.summary||void 0,description:o.description||o.details||o.detail||void 0,thumbnail:o.thumbnail||o.image||void 0,isFeatured:o.featured?.toLowerCase()==="true"||o.featured?.toLowerCase()==="x"||o.is_featured==="TRUE",year:isNaN(B)?void 0:B};n.push(G)}w(H,n),w(S,n.filter(l=>l.isFeatured)),e(S).length===0&&w(S,n.slice(0,6)),w(R,!1);const t=e(S).map(async l=>{const h=await le(l.id);h&&(e(A).set(l.id,h),w(A,e(A)))});await Promise.all(t)}catch(a){console.error("Failed to load map catalog:",a)}finally{w(R,!1)}}ge(()=>{w(X,!0),oe()});function ie(a,s){const u=a.target;u.style.display="none"}Q(()=>e(H),()=>{w(I,Array.from(new Set(e(H).map(a=>a.type).filter(Boolean))).sort())}),Q(()=>e(S),()=>{w(N,Array.from(new Set(e(S).map(a=>a.type).filter(Boolean))).sort())}),Q(()=>(e(M),e(S)),()=>{w(O,e(M)==="all"?e(S):e(S).filter(a=>a.type===e(M)))}),me(),de();var K=Pe();ye(a=>{var s=Ce();be.title="Vietnam Map Archive ‚Äî Historical Maps of Vietnam",ae(2),p(a,s)});let Y;var Z=x(d(K),2),z=x(d(Z),2),ee=x(d(z),2);{var ne=a=>{var s=Me(),u=d(s);let f;var i=x(u,2);J(i,1,()=>e(N),te,(r,v)=>{var n=Ae();let t;var l=d(n,!0);c(n),C(()=>{t=W(n,1,"city-filter-btn svelte-1uha8ag",null,t,{active:e(M)===e(v)}),P(l,e(v))}),q("click",n,()=>w(M,e(v))),p(r,n)}),c(s),C(()=>f=W(u,1,"city-filter-btn svelte-1uha8ag",null,f,{active:e(M)==="all"})),q("click",u,()=>w(M,"all")),p(a,s)};E(ee,a=>{e(N),g(()=>e(N).length>1)&&a(ne)})}var ce=x(ee,2);{var ve=a=>{var s=$e();p(a,s)},ue=a=>{var s=we(),u=xe(s);{var f=r=>{var v=Te();J(v,5,()=>e(O),n=>n.id,(n,t)=>{var l=Fe(),h=d(l),F=d(h);{var T=y=>{var b=Le();C(V=>{D(b,"src",V),D(b,"alt",(e(t),g(()=>e(t).name)))},[()=>(e(A),e(t),g(()=>e(A).get(e(t).id)))]),q("error",b,V=>ie(V,e(t).id)),p(y,b)};E(F,y=>{e(A),e(t),g(()=>e(A).get(e(t).id))&&y(T)})}c(h);var o=x(h,2),$=d(o),U=d($,!0);c($);var j=x($,2),B=d(j);{var G=y=>{var b=Ve(),V=d(b,!0);c(b),C(()=>P(V,(e(t),g(()=>e(t).year)))),p(y,b)};E(B,y=>{e(t),g(()=>e(t).year)&&y(G)})}var m=x(B,2);{var L=y=>{var b=Ee(),V=d(b,!0);c(b),C(()=>P(V,(e(t),g(()=>e(t).type)))),p(y,b)};E(m,y=>{e(t),g(()=>e(t).type)&&y(L)})}c(j),c(o),c(l),C(y=>{D(l,"href",`/trip?map=${e(t),g(()=>e(t).id)??""}${y??""}`),P(U,(e(t),g(()=>e(t).name)))},[()=>(e(t),g(()=>e(t).type?`&city=${encodeURIComponent(e(t).type)}`:""))]),p(n,l)}),c(v),p(r,v)},i=r=>{var v=Ue();p(r,v)};E(u,r=>{e(O),g(()=>e(O).length>0)?r(f):r(i,!1)},!0)}p(a,s)};E(ce,a=>{e(R)?a(ve):a(ue,!1)})}c(z);var he=x(z,4);{var pe=a=>{var s=Be(),u=x(d(s),2);J(u,5,()=>e(I),te,(f,i)=>{var r=je(),v=d(r,!0);c(r),C(n=>{D(r,"href",`/trip?city=${n??""}`),P(v,e(i))},[()=>(e(i),g(()=>encodeURIComponent(e(i))))]),p(f,r)}),c(u),c(s),p(a,s)};E(he,a=>{e(I),g(()=>e(I).length>0)&&a(pe)})}c(Z),ae(2),c(K),C(()=>Y=W(K,1,"page svelte-1uha8ag",null,Y,{mounted:e(X)})),p(se,K),_e()}export{Ge as component,ze as universal};
