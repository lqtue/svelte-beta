{
  "version": 3,
  "sources": ["../../is-any-array/src/index.ts", "../../ml-array-max/lib-es6/index.js", "../../ml-array-min/lib-es6/index.js", "../../ml-array-rescale/lib-es6/index.js", "../../ml-matrix/matrix.js", "../../@allmaps/openlayers/node_modules/ol/events/Event.js", "../../@allmaps/openlayers/node_modules/ol/ObjectEventType.js", "../../@allmaps/openlayers/node_modules/ol/Disposable.js", "../../@allmaps/openlayers/node_modules/ol/array.js", "../../@allmaps/openlayers/node_modules/ol/functions.js", "../../@allmaps/openlayers/node_modules/ol/obj.js", "../../@allmaps/openlayers/node_modules/ol/events/Target.js", "../../@allmaps/openlayers/node_modules/ol/events/EventType.js", "../../@allmaps/openlayers/node_modules/ol/events.js", "../../@allmaps/openlayers/node_modules/ol/Observable.js", "../../@allmaps/openlayers/node_modules/ol/util.js", "../../@allmaps/openlayers/node_modules/ol/Object.js", "../../@allmaps/openlayers/node_modules/ol/layer/Property.js", "../../@allmaps/openlayers/node_modules/ol/asserts.js", "../../@allmaps/openlayers/node_modules/ol/math.js", "../../@allmaps/openlayers/node_modules/ol/layer/Base.js", "../../@allmaps/openlayers/node_modules/ol/render/EventType.js", "../../@allmaps/openlayers/node_modules/ol/ViewHint.js", "../../@allmaps/openlayers/node_modules/ol/ViewProperty.js", "../../@allmaps/openlayers/node_modules/ol/tilegrid/common.js", "../../@allmaps/openlayers/node_modules/ol/proj/Units.js", "../../@allmaps/openlayers/node_modules/ol/proj/Projection.js", "../../@allmaps/openlayers/node_modules/ol/proj/epsg3857.js", "../../@allmaps/openlayers/node_modules/ol/proj/epsg4326.js", "../../@allmaps/openlayers/node_modules/ol/proj/projections.js", "../../@allmaps/openlayers/node_modules/ol/proj/transforms.js", "../../@allmaps/openlayers/node_modules/ol/extent/Relationship.js", "../../@allmaps/openlayers/node_modules/ol/extent.js", "../../@allmaps/openlayers/node_modules/ol/coordinate.js", "../../@allmaps/openlayers/node_modules/ol/console.js", "../../@allmaps/openlayers/node_modules/ol/proj.js", "../../@allmaps/openlayers/node_modules/ol/centerconstraint.js", "../../@allmaps/openlayers/node_modules/ol/resolutionconstraint.js", "../../@allmaps/openlayers/node_modules/ol/rotationconstraint.js", "../../@allmaps/openlayers/node_modules/ol/easing.js", "../../@allmaps/openlayers/node_modules/ol/has.js", "../../@allmaps/openlayers/node_modules/ol/transform.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/transform.js", "../../@allmaps/openlayers/node_modules/ol/geom/Geometry.js", "../../@allmaps/openlayers/node_modules/ol/geom/SimpleGeometry.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/closest.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/deflate.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/simplify.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/inflate.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/area.js", "../../@allmaps/openlayers/node_modules/ol/geom/LinearRing.js", "../../@allmaps/openlayers/node_modules/ol/geom/Point.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/contains.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/interiorpoint.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/segments.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/intersectsextent.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/reverse.js", "../../@allmaps/openlayers/node_modules/ol/geom/flat/orient.js", "../../@allmaps/openlayers/node_modules/ol/geom/Polygon.js", "../../@allmaps/openlayers/node_modules/ol/View.js", "../../@allmaps/openlayers/node_modules/ol/layer/Layer.js", "../../lodash-es/_freeGlobal.js", "../../lodash-es/_root.js", "../../lodash-es/_Symbol.js", "../../lodash-es/_getRawTag.js", "../../lodash-es/_objectToString.js", "../../lodash-es/_baseGetTag.js", "../../lodash-es/isObjectLike.js", "../../lodash-es/isSymbol.js", "../../lodash-es/_baseToNumber.js", "../../lodash-es/_arrayMap.js", "../../lodash-es/isArray.js", "../../lodash-es/_baseToString.js", "../../lodash-es/_createMathOperation.js", "../../lodash-es/add.js", "../../lodash-es/_trimmedEndIndex.js", "../../lodash-es/_baseTrim.js", "../../lodash-es/isObject.js", "../../lodash-es/toNumber.js", "../../lodash-es/toFinite.js", "../../lodash-es/toInteger.js", "../../lodash-es/after.js", "../../lodash-es/identity.js", "../../lodash-es/isFunction.js", "../../lodash-es/_coreJsData.js", "../../lodash-es/_isMasked.js", "../../lodash-es/_toSource.js", "../../lodash-es/_baseIsNative.js", "../../lodash-es/_getValue.js", "../../lodash-es/_getNative.js", "../../lodash-es/_WeakMap.js", "../../lodash-es/_metaMap.js", "../../lodash-es/_baseSetData.js", "../../lodash-es/_baseCreate.js", "../../lodash-es/_createCtor.js", "../../lodash-es/_createBind.js", "../../lodash-es/_apply.js", "../../lodash-es/_composeArgs.js", "../../lodash-es/_composeArgsRight.js", "../../lodash-es/_countHolders.js", "../../lodash-es/_baseLodash.js", "../../lodash-es/_LazyWrapper.js", "../../lodash-es/noop.js", "../../lodash-es/_getData.js", "../../lodash-es/_realNames.js", "../../lodash-es/_getFuncName.js", "../../lodash-es/_LodashWrapper.js", "../../lodash-es/_copyArray.js", "../../lodash-es/_wrapperClone.js", "../../lodash-es/wrapperLodash.js", "../../lodash-es/_isLaziable.js", "../../lodash-es/_shortOut.js", "../../lodash-es/_setData.js", "../../lodash-es/_getWrapDetails.js", "../../lodash-es/_insertWrapDetails.js", "../../lodash-es/constant.js", "../../lodash-es/_defineProperty.js", "../../lodash-es/_baseSetToString.js", "../../lodash-es/_setToString.js", "../../lodash-es/_arrayEach.js", "../../lodash-es/_baseFindIndex.js", "../../lodash-es/_baseIsNaN.js", "../../lodash-es/_strictIndexOf.js", "../../lodash-es/_baseIndexOf.js", "../../lodash-es/_arrayIncludes.js", "../../lodash-es/_updateWrapDetails.js", "../../lodash-es/_setWrapToString.js", "../../lodash-es/_createRecurry.js", "../../lodash-es/_getHolder.js", "../../lodash-es/_isIndex.js", "../../lodash-es/_reorder.js", "../../lodash-es/_replaceHolders.js", "../../lodash-es/_createHybrid.js", "../../lodash-es/_createCurry.js", "../../lodash-es/_createPartial.js", "../../lodash-es/_mergeData.js", "../../lodash-es/_createWrap.js", "../../lodash-es/ary.js", "../../lodash-es/_baseAssignValue.js", "../../lodash-es/eq.js", "../../lodash-es/_assignValue.js", "../../lodash-es/_copyObject.js", "../../lodash-es/_overRest.js", "../../lodash-es/_baseRest.js", "../../lodash-es/isLength.js", "../../lodash-es/isArrayLike.js", "../../lodash-es/_isIterateeCall.js", "../../lodash-es/_createAssigner.js", "../../lodash-es/_isPrototype.js", "../../lodash-es/_baseTimes.js", "../../lodash-es/_baseIsArguments.js", "../../lodash-es/isArguments.js", "../../lodash-es/stubFalse.js", "../../lodash-es/isBuffer.js", "../../lodash-es/_baseIsTypedArray.js", "../../lodash-es/_baseUnary.js", "../../lodash-es/_nodeUtil.js", "../../lodash-es/isTypedArray.js", "../../lodash-es/_arrayLikeKeys.js", "../../lodash-es/_overArg.js", "../../lodash-es/_nativeKeys.js", "../../lodash-es/_baseKeys.js", "../../lodash-es/keys.js", "../../lodash-es/assign.js", "../../lodash-es/_nativeKeysIn.js", "../../lodash-es/_baseKeysIn.js", "../../lodash-es/keysIn.js", "../../lodash-es/assignIn.js", "../../lodash-es/assignInWith.js", "../../lodash-es/assignWith.js", "../../lodash-es/_isKey.js", "../../lodash-es/_nativeCreate.js", "../../lodash-es/_hashClear.js", "../../lodash-es/_hashDelete.js", "../../lodash-es/_hashGet.js", "../../lodash-es/_hashHas.js", "../../lodash-es/_hashSet.js", "../../lodash-es/_Hash.js", "../../lodash-es/_listCacheClear.js", "../../lodash-es/_assocIndexOf.js", "../../lodash-es/_listCacheDelete.js", "../../lodash-es/_listCacheGet.js", "../../lodash-es/_listCacheHas.js", "../../lodash-es/_listCacheSet.js", "../../lodash-es/_ListCache.js", "../../lodash-es/_Map.js", "../../lodash-es/_mapCacheClear.js", "../../lodash-es/_isKeyable.js", "../../lodash-es/_getMapData.js", "../../lodash-es/_mapCacheDelete.js", "../../lodash-es/_mapCacheGet.js", "../../lodash-es/_mapCacheHas.js", "../../lodash-es/_mapCacheSet.js", "../../lodash-es/_MapCache.js", "../../lodash-es/memoize.js", "../../lodash-es/_memoizeCapped.js", "../../lodash-es/_stringToPath.js", "../../lodash-es/toString.js", "../../lodash-es/_castPath.js", "../../lodash-es/_toKey.js", "../../lodash-es/_baseGet.js", "../../lodash-es/get.js", "../../lodash-es/_baseAt.js", "../../lodash-es/_arrayPush.js", "../../lodash-es/_isFlattenable.js", "../../lodash-es/_baseFlatten.js", "../../lodash-es/flatten.js", "../../lodash-es/_flatRest.js", "../../lodash-es/at.js", "../../lodash-es/_getPrototype.js", "../../lodash-es/isPlainObject.js", "../../lodash-es/isError.js", "../../lodash-es/attempt.js", "../../lodash-es/before.js", "../../lodash-es/bind.js", "../../lodash-es/bindAll.js", "../../lodash-es/bindKey.js", "../../lodash-es/_baseSlice.js", "../../lodash-es/_castSlice.js", "../../lodash-es/_hasUnicode.js", "../../lodash-es/_asciiToArray.js", "../../lodash-es/_unicodeToArray.js", "../../lodash-es/_stringToArray.js", "../../lodash-es/_createCaseFirst.js", "../../lodash-es/upperFirst.js", "../../lodash-es/capitalize.js", "../../lodash-es/_arrayReduce.js", "../../lodash-es/_basePropertyOf.js", "../../lodash-es/_deburrLetter.js", "../../lodash-es/deburr.js", "../../lodash-es/_asciiWords.js", "../../lodash-es/_hasUnicodeWord.js", "../../lodash-es/_unicodeWords.js", "../../lodash-es/words.js", "../../lodash-es/_createCompounder.js", "../../lodash-es/camelCase.js", "../../lodash-es/castArray.js", "../../lodash-es/_createRound.js", "../../lodash-es/ceil.js", "../../lodash-es/chain.js", "../../lodash-es/chunk.js", "../../lodash-es/_baseClamp.js", "../../lodash-es/clamp.js", "../../lodash-es/_stackClear.js", "../../lodash-es/_stackDelete.js", "../../lodash-es/_stackGet.js", "../../lodash-es/_stackHas.js", "../../lodash-es/_stackSet.js", "../../lodash-es/_Stack.js", "../../lodash-es/_baseAssign.js", "../../lodash-es/_baseAssignIn.js", "../../lodash-es/_cloneBuffer.js", "../../lodash-es/_arrayFilter.js", "../../lodash-es/stubArray.js", "../../lodash-es/_getSymbols.js", "../../lodash-es/_copySymbols.js", "../../lodash-es/_getSymbolsIn.js", "../../lodash-es/_copySymbolsIn.js", "../../lodash-es/_baseGetAllKeys.js", "../../lodash-es/_getAllKeys.js", "../../lodash-es/_getAllKeysIn.js", "../../lodash-es/_DataView.js", "../../lodash-es/_Promise.js", "../../lodash-es/_Set.js", "../../lodash-es/_getTag.js", "../../lodash-es/_initCloneArray.js", "../../lodash-es/_Uint8Array.js", "../../lodash-es/_cloneArrayBuffer.js", "../../lodash-es/_cloneDataView.js", "../../lodash-es/_cloneRegExp.js", "../../lodash-es/_cloneSymbol.js", "../../lodash-es/_cloneTypedArray.js", "../../lodash-es/_initCloneByTag.js", "../../lodash-es/_initCloneObject.js", "../../lodash-es/_baseIsMap.js", "../../lodash-es/isMap.js", "../../lodash-es/_baseIsSet.js", "../../lodash-es/isSet.js", "../../lodash-es/_baseClone.js", "../../lodash-es/clone.js", "../../lodash-es/cloneDeep.js", "../../lodash-es/cloneDeepWith.js", "../../lodash-es/cloneWith.js", "../../lodash-es/commit.js", "../../lodash-es/compact.js", "../../lodash-es/concat.js", "../../lodash-es/_setCacheAdd.js", "../../lodash-es/_setCacheHas.js", "../../lodash-es/_SetCache.js", "../../lodash-es/_arraySome.js", "../../lodash-es/_cacheHas.js", "../../lodash-es/_equalArrays.js", "../../lodash-es/_mapToArray.js", "../../lodash-es/_setToArray.js", "../../lodash-es/_equalByTag.js", "../../lodash-es/_equalObjects.js", "../../lodash-es/_baseIsEqualDeep.js", "../../lodash-es/_baseIsEqual.js", "../../lodash-es/_baseIsMatch.js", "../../lodash-es/_isStrictComparable.js", "../../lodash-es/_getMatchData.js", "../../lodash-es/_matchesStrictComparable.js", "../../lodash-es/_baseMatches.js", "../../lodash-es/_baseHasIn.js", "../../lodash-es/_hasPath.js", "../../lodash-es/hasIn.js", "../../lodash-es/_baseMatchesProperty.js", "../../lodash-es/_baseProperty.js", "../../lodash-es/_basePropertyDeep.js", "../../lodash-es/property.js", "../../lodash-es/_baseIteratee.js", "../../lodash-es/cond.js", "../../lodash-es/_baseConformsTo.js", "../../lodash-es/_baseConforms.js", "../../lodash-es/conforms.js", "../../lodash-es/conformsTo.js", "../../lodash-es/_arrayAggregator.js", "../../lodash-es/_createBaseFor.js", "../../lodash-es/_baseFor.js", "../../lodash-es/_baseForOwn.js", "../../lodash-es/_createBaseEach.js", "../../lodash-es/_baseEach.js", "../../lodash-es/_baseAggregator.js", "../../lodash-es/_createAggregator.js", "../../lodash-es/countBy.js", "../../lodash-es/create.js", "../../lodash-es/curry.js", "../../lodash-es/curryRight.js", "../../lodash-es/now.js", "../../lodash-es/debounce.js", "../../lodash-es/defaultTo.js", "../../lodash-es/defaults.js", "../../lodash-es/_assignMergeValue.js", "../../lodash-es/isArrayLikeObject.js", "../../lodash-es/_safeGet.js", "../../lodash-es/toPlainObject.js", "../../lodash-es/_baseMergeDeep.js", "../../lodash-es/_baseMerge.js", "../../lodash-es/_customDefaultsMerge.js", "../../lodash-es/mergeWith.js", "../../lodash-es/defaultsDeep.js", "../../lodash-es/_baseDelay.js", "../../lodash-es/defer.js", "../../lodash-es/delay.js", "../../lodash-es/_arrayIncludesWith.js", "../../lodash-es/_baseDifference.js", "../../lodash-es/difference.js", "../../lodash-es/last.js", "../../lodash-es/differenceBy.js", "../../lodash-es/differenceWith.js", "../../lodash-es/divide.js", "../../lodash-es/drop.js", "../../lodash-es/dropRight.js", "../../lodash-es/_baseWhile.js", "../../lodash-es/dropRightWhile.js", "../../lodash-es/dropWhile.js", "../../lodash-es/_castFunction.js", "../../lodash-es/forEach.js", "../../lodash-es/_arrayEachRight.js", "../../lodash-es/_baseForRight.js", "../../lodash-es/_baseForOwnRight.js", "../../lodash-es/_baseEachRight.js", "../../lodash-es/forEachRight.js", "../../lodash-es/endsWith.js", "../../lodash-es/_baseToPairs.js", "../../lodash-es/_setToPairs.js", "../../lodash-es/_createToPairs.js", "../../lodash-es/toPairs.js", "../../lodash-es/toPairsIn.js", "../../lodash-es/_escapeHtmlChar.js", "../../lodash-es/escape.js", "../../lodash-es/escapeRegExp.js", "../../lodash-es/_arrayEvery.js", "../../lodash-es/_baseEvery.js", "../../lodash-es/every.js", "../../lodash-es/toLength.js", "../../lodash-es/_baseFill.js", "../../lodash-es/fill.js", "../../lodash-es/_baseFilter.js", "../../lodash-es/filter.js", "../../lodash-es/_createFind.js", "../../lodash-es/findIndex.js", "../../lodash-es/find.js", "../../lodash-es/_baseFindKey.js", "../../lodash-es/findKey.js", "../../lodash-es/findLastIndex.js", "../../lodash-es/findLast.js", "../../lodash-es/findLastKey.js", "../../lodash-es/head.js", "../../lodash-es/_baseMap.js", "../../lodash-es/map.js", "../../lodash-es/flatMap.js", "../../lodash-es/flatMapDeep.js", "../../lodash-es/flatMapDepth.js", "../../lodash-es/flattenDeep.js", "../../lodash-es/flattenDepth.js", "../../lodash-es/flip.js", "../../lodash-es/floor.js", "../../lodash-es/_createFlow.js", "../../lodash-es/flow.js", "../../lodash-es/flowRight.js", "../../lodash-es/forIn.js", "../../lodash-es/forInRight.js", "../../lodash-es/forOwn.js", "../../lodash-es/forOwnRight.js", "../../lodash-es/fromPairs.js", "../../lodash-es/_baseFunctions.js", "../../lodash-es/functions.js", "../../lodash-es/functionsIn.js", "../../lodash-es/groupBy.js", "../../lodash-es/_baseGt.js", "../../lodash-es/_createRelationalOperation.js", "../../lodash-es/gt.js", "../../lodash-es/gte.js", "../../lodash-es/_baseHas.js", "../../lodash-es/has.js", "../../lodash-es/_baseInRange.js", "../../lodash-es/inRange.js", "../../lodash-es/isString.js", "../../lodash-es/_baseValues.js", "../../lodash-es/values.js", "../../lodash-es/includes.js", "../../lodash-es/indexOf.js", "../../lodash-es/initial.js", "../../lodash-es/_baseIntersection.js", "../../lodash-es/_castArrayLikeObject.js", "../../lodash-es/intersection.js", "../../lodash-es/intersectionBy.js", "../../lodash-es/intersectionWith.js", "../../lodash-es/_baseInverter.js", "../../lodash-es/_createInverter.js", "../../lodash-es/invert.js", "../../lodash-es/invertBy.js", "../../lodash-es/_parent.js", "../../lodash-es/_baseInvoke.js", "../../lodash-es/invoke.js", "../../lodash-es/invokeMap.js", "../../lodash-es/_baseIsArrayBuffer.js", "../../lodash-es/isArrayBuffer.js", "../../lodash-es/isBoolean.js", "../../lodash-es/_baseIsDate.js", "../../lodash-es/isDate.js", "../../lodash-es/isElement.js", "../../lodash-es/isEmpty.js", "../../lodash-es/isEqual.js", "../../lodash-es/isEqualWith.js", "../../lodash-es/isFinite.js", "../../lodash-es/isInteger.js", "../../lodash-es/isMatch.js", "../../lodash-es/isMatchWith.js", "../../lodash-es/isNumber.js", "../../lodash-es/isNaN.js", "../../lodash-es/_isMaskable.js", "../../lodash-es/isNative.js", "../../lodash-es/isNil.js", "../../lodash-es/isNull.js", "../../lodash-es/_baseIsRegExp.js", "../../lodash-es/isRegExp.js", "../../lodash-es/isSafeInteger.js", "../../lodash-es/isUndefined.js", "../../lodash-es/isWeakMap.js", "../../lodash-es/isWeakSet.js", "../../lodash-es/iteratee.js", "../../lodash-es/join.js", "../../lodash-es/kebabCase.js", "../../lodash-es/keyBy.js", "../../lodash-es/_strictLastIndexOf.js", "../../lodash-es/lastIndexOf.js", "../../lodash-es/lowerCase.js", "../../lodash-es/lowerFirst.js", "../../lodash-es/_baseLt.js", "../../lodash-es/lt.js", "../../lodash-es/lte.js", "../../lodash-es/mapKeys.js", "../../lodash-es/mapValues.js", "../../lodash-es/matches.js", "../../lodash-es/matchesProperty.js", "../../lodash-es/_baseExtremum.js", "../../lodash-es/max.js", "../../lodash-es/maxBy.js", "../../lodash-es/_baseSum.js", "../../lodash-es/_baseMean.js", "../../lodash-es/mean.js", "../../lodash-es/meanBy.js", "../../lodash-es/merge.js", "../../lodash-es/method.js", "../../lodash-es/methodOf.js", "../../lodash-es/min.js", "../../lodash-es/minBy.js", "../../lodash-es/mixin.js", "../../lodash-es/multiply.js", "../../lodash-es/negate.js", "../../lodash-es/_iteratorToArray.js", "../../lodash-es/toArray.js", "../../lodash-es/next.js", "../../lodash-es/_baseNth.js", "../../lodash-es/nth.js", "../../lodash-es/nthArg.js", "../../lodash-es/_baseUnset.js", "../../lodash-es/_customOmitClone.js", "../../lodash-es/omit.js", "../../lodash-es/_baseSet.js", "../../lodash-es/_basePickBy.js", "../../lodash-es/pickBy.js", "../../lodash-es/omitBy.js", "../../lodash-es/once.js", "../../lodash-es/_baseSortBy.js", "../../lodash-es/_compareAscending.js", "../../lodash-es/_compareMultiple.js", "../../lodash-es/_baseOrderBy.js", "../../lodash-es/orderBy.js", "../../lodash-es/_createOver.js", "../../lodash-es/over.js", "../../lodash-es/_castRest.js", "../../lodash-es/overArgs.js", "../../lodash-es/overEvery.js", "../../lodash-es/overSome.js", "../../lodash-es/_baseRepeat.js", "../../lodash-es/_asciiSize.js", "../../lodash-es/_unicodeSize.js", "../../lodash-es/_stringSize.js", "../../lodash-es/_createPadding.js", "../../lodash-es/pad.js", "../../lodash-es/padEnd.js", "../../lodash-es/padStart.js", "../../lodash-es/parseInt.js", "../../lodash-es/partial.js", "../../lodash-es/partialRight.js", "../../lodash-es/partition.js", "../../lodash-es/_basePick.js", "../../lodash-es/pick.js", "../../lodash-es/plant.js", "../../lodash-es/propertyOf.js", "../../lodash-es/_baseIndexOfWith.js", "../../lodash-es/_basePullAll.js", "../../lodash-es/pullAll.js", "../../lodash-es/pull.js", "../../lodash-es/pullAllBy.js", "../../lodash-es/pullAllWith.js", "../../lodash-es/_basePullAt.js", "../../lodash-es/pullAt.js", "../../lodash-es/_baseRandom.js", "../../lodash-es/random.js", "../../lodash-es/_baseRange.js", "../../lodash-es/_createRange.js", "../../lodash-es/range.js", "../../lodash-es/rangeRight.js", "../../lodash-es/rearg.js", "../../lodash-es/_baseReduce.js", "../../lodash-es/reduce.js", "../../lodash-es/_arrayReduceRight.js", "../../lodash-es/reduceRight.js", "../../lodash-es/reject.js", "../../lodash-es/remove.js", "../../lodash-es/repeat.js", "../../lodash-es/replace.js", "../../lodash-es/rest.js", "../../lodash-es/result.js", "../../lodash-es/reverse.js", "../../lodash-es/round.js", "../../lodash-es/_arraySample.js", "../../lodash-es/_baseSample.js", "../../lodash-es/sample.js", "../../lodash-es/_shuffleSelf.js", "../../lodash-es/_arraySampleSize.js", "../../lodash-es/_baseSampleSize.js", "../../lodash-es/sampleSize.js", "../../lodash-es/set.js", "../../lodash-es/setWith.js", "../../lodash-es/_arrayShuffle.js", "../../lodash-es/_baseShuffle.js", "../../lodash-es/shuffle.js", "../../lodash-es/size.js", "../../lodash-es/slice.js", "../../lodash-es/snakeCase.js", "../../lodash-es/_baseSome.js", "../../lodash-es/some.js", "../../lodash-es/sortBy.js", "../../lodash-es/_baseSortedIndexBy.js", "../../lodash-es/_baseSortedIndex.js", "../../lodash-es/sortedIndex.js", "../../lodash-es/sortedIndexBy.js", "../../lodash-es/sortedIndexOf.js", "../../lodash-es/sortedLastIndex.js", "../../lodash-es/sortedLastIndexBy.js", "../../lodash-es/sortedLastIndexOf.js", "../../lodash-es/_baseSortedUniq.js", "../../lodash-es/sortedUniq.js", "../../lodash-es/sortedUniqBy.js", "../../lodash-es/split.js", "../../lodash-es/spread.js", "../../lodash-es/startCase.js", "../../lodash-es/startsWith.js", "../../lodash-es/stubObject.js", "../../lodash-es/stubString.js", "../../lodash-es/stubTrue.js", "../../lodash-es/subtract.js", "../../lodash-es/sum.js", "../../lodash-es/sumBy.js", "../../lodash-es/tail.js", "../../lodash-es/take.js", "../../lodash-es/takeRight.js", "../../lodash-es/takeRightWhile.js", "../../lodash-es/takeWhile.js", "../../lodash-es/tap.js", "../../lodash-es/_customDefaultsAssignIn.js", "../../lodash-es/_escapeStringChar.js", "../../lodash-es/_reInterpolate.js", "../../lodash-es/_reEscape.js", "../../lodash-es/_reEvaluate.js", "../../lodash-es/templateSettings.js", "../../lodash-es/template.js", "../../lodash-es/throttle.js", "../../lodash-es/thru.js", "../../lodash-es/times.js", "../../lodash-es/toIterator.js", "../../lodash-es/_baseWrapperValue.js", "../../lodash-es/wrapperValue.js", "../../lodash-es/toLower.js", "../../lodash-es/toPath.js", "../../lodash-es/toSafeInteger.js", "../../lodash-es/toUpper.js", "../../lodash-es/transform.js", "../../lodash-es/_charsEndIndex.js", "../../lodash-es/_charsStartIndex.js", "../../lodash-es/trim.js", "../../lodash-es/trimEnd.js", "../../lodash-es/trimStart.js", "../../lodash-es/truncate.js", "../../lodash-es/unary.js", "../../lodash-es/_unescapeHtmlChar.js", "../../lodash-es/unescape.js", "../../lodash-es/_createSet.js", "../../lodash-es/_baseUniq.js", "../../lodash-es/union.js", "../../lodash-es/unionBy.js", "../../lodash-es/unionWith.js", "../../lodash-es/uniq.js", "../../lodash-es/uniqBy.js", "../../lodash-es/uniqWith.js", "../../lodash-es/uniqueId.js", "../../lodash-es/unset.js", "../../lodash-es/unzip.js", "../../lodash-es/unzipWith.js", "../../lodash-es/_baseUpdate.js", "../../lodash-es/update.js", "../../lodash-es/updateWith.js", "../../lodash-es/upperCase.js", "../../lodash-es/valuesIn.js", "../../lodash-es/without.js", "../../lodash-es/wrap.js", "../../lodash-es/wrapperAt.js", "../../lodash-es/wrapperChain.js", "../../lodash-es/wrapperReverse.js", "../../lodash-es/_baseXor.js", "../../lodash-es/xor.js", "../../lodash-es/xorBy.js", "../../lodash-es/xorWith.js", "../../lodash-es/zip.js", "../../lodash-es/_baseZipObject.js", "../../lodash-es/zipObject.js", "../../lodash-es/zipObjectDeep.js", "../../lodash-es/zipWith.js", "../../lodash-es/array.default.js", "../../lodash-es/collection.default.js", "../../lodash-es/date.default.js", "../../lodash-es/function.default.js", "../../lodash-es/lang.default.js", "../../lodash-es/math.default.js", "../../lodash-es/number.default.js", "../../lodash-es/object.default.js", "../../lodash-es/seq.default.js", "../../lodash-es/string.default.js", "../../lodash-es/util.default.js", "../../lodash-es/_lazyClone.js", "../../lodash-es/_lazyReverse.js", "../../lodash-es/_getView.js", "../../lodash-es/_lazyValue.js", "../../lodash-es/lodash.default.js", "../../comlink/src/comlink.ts", "../../@allmaps/transform/dist/shared/distortion.js", "../../@allmaps/transform/dist/transformation-types/BaseTransformation.js", "../../@allmaps/transform/dist/transformation-types/BaseLinearWeightsTransformation.js", "../../ml-matrix/matrix.mjs", "../../@allmaps/transform/dist/shared/solve-functions.js", "../../@allmaps/transform/dist/transformation-types/Helmert.js", "../../@allmaps/transform/dist/transformation-types/Straight.js", "../../@allmaps/transform/dist/transformation-types/BaseIndependentLinearWeightsTransformation.js", "../../@allmaps/transform/dist/transformation-types/BasePolynomialTransformation.js", "../../@allmaps/transform/dist/transformation-types/Polynomial1.js", "../../@allmaps/transform/dist/transformation-types/Polynomial2.js", "../../@allmaps/transform/dist/transformation-types/Polynomial3.js", "../../@allmaps/transform/dist/transformation-types/Projective.js", "../../@allmaps/transform/dist/transformation-types/RBF.js", "../../@allmaps/transform/dist/shared/kernel-functions.js", "../../@allmaps/transform/dist/shared/norm-functions.js", "../../@turf/bearing/index.ts", "../../@turf/destination/index.ts", "../../@turf/distance/index.ts", "../../@turf/midpoint/index.ts", "../../@allmaps/transform/dist/shared/refinement-functions.js", "../../@allmaps/transform/dist/shared/transform-functions.js", "../../@allmaps/transform/dist/shared/conversion-functions.js", "../../@allmaps/transform/dist/transformers/BaseGcpTransformer.js", "../../@allmaps/transform/dist/transformers/GcpTransformer.js", "../../@allmaps/tailwind/dist/colors.js", "../../@allmaps/tailwind/dist/theme-colors.js", "../../@allmaps/tailwind/dist/theme.js", "../../@allmaps/render/src/shared/events.ts", "../../@allmaps/render/src/shared/tiles.ts", "../../@allmaps/render/src/tilecache/TileCache.ts", "../../@allmaps/id/dist/checksum.js", "../../@allmaps/id/dist/index.js", "../../@allmaps/annotation/dist/schemas/shared.js", "../../@allmaps/annotation/dist/schemas/annotation/annotation.0.js", "../../@allmaps/annotation/dist/schemas/annotation/annotation.1.js", "../../@allmaps/annotation/dist/schemas/annotation.js", "../../@allmaps/annotation/dist/before-parse.js", "../../@allmaps/annotation/dist/guards.js", "../../@allmaps/annotation/dist/parser.js", "../../@allmaps/annotation/dist/schemas/georeferenced-map/georeferenced-map.1.js", "../../@allmaps/annotation/dist/schemas/georeferenced-map/georeferenced-map.2.js", "../../@allmaps/annotation/dist/schemas/georeferenced-map.js", "../../@allmaps/annotation/dist/generator.js", "../../@allmaps/annotation/dist/convert.js", "../../@allmaps/annotation/dist/validator.js", "../../proj4/lib/global.js", "../../proj4/lib/constants/values.js", "../../proj4/lib/constants/PrimeMeridian.js", "../../proj4/lib/constants/units.js", "../../proj4/lib/match.js", "../../proj4/lib/projString.js", "../../wkt-parser/PROJJSONBuilderBase.js", "../../wkt-parser/PROJJSONBuilder2015.js", "../../wkt-parser/PROJJSONBuilder2019.js", "../../wkt-parser/buildPROJJSON.js", "../../wkt-parser/detectWKTVersion.js", "../../wkt-parser/parser.js", "../../wkt-parser/process.js", "../../wkt-parser/util.js", "../../wkt-parser/transformPROJJSON.js", "../../wkt-parser/index.js", "../../proj4/lib/defs.js", "../../proj4/lib/parseCode.js", "../../proj4/lib/extend.js", "../../proj4/lib/common/msfnz.js", "../../proj4/lib/common/sign.js", "../../proj4/lib/common/adjust_lon.js", "../../proj4/lib/common/tsfnz.js", "../../proj4/lib/common/phi2z.js", "../../proj4/lib/projections/merc.js", "../../proj4/lib/projections/longlat.js", "../../proj4/lib/projections.js", "../../proj4/lib/constants/Ellipsoid.js", "../../proj4/lib/deriveConstants.js", "../../proj4/lib/constants/Datum.js", "../../proj4/lib/datum.js", "../../proj4/lib/nadgrid.js", "../../proj4/lib/Proj.js", "../../proj4/lib/datumUtils.js", "../../proj4/lib/datum_transform.js", "../../proj4/lib/adjust_axis.js", "../../proj4/lib/common/toPoint.js", "../../proj4/lib/checkSanity.js", "../../proj4/lib/transform.js", "../../proj4/lib/core.js", "../../mgrs/mgrs.js", "../../proj4/lib/Point.js", "../../proj4/lib/common/pj_enfn.js", "../../proj4/lib/common/pj_mlfn.js", "../../proj4/lib/common/pj_inv_mlfn.js", "../../proj4/lib/projections/tmerc.js", "../../proj4/lib/common/sinh.js", "../../proj4/lib/common/hypot.js", "../../proj4/lib/common/log1py.js", "../../proj4/lib/common/asinhy.js", "../../proj4/lib/common/gatg.js", "../../proj4/lib/common/clens.js", "../../proj4/lib/common/cosh.js", "../../proj4/lib/common/clens_cmplx.js", "../../proj4/lib/projections/etmerc.js", "../../proj4/lib/common/adjust_zone.js", "../../proj4/lib/projections/utm.js", "../../proj4/lib/common/srat.js", "../../proj4/lib/projections/gauss.js", "../../proj4/lib/projections/sterea.js", "../../proj4/lib/projections/stere.js", "../../proj4/lib/projections/somerc.js", "../../proj4/lib/projections/omerc.js", "../../proj4/lib/projections/lcc.js", "../../proj4/lib/projections/krovak.js", "../../proj4/lib/common/mlfn.js", "../../proj4/lib/common/e0fn.js", "../../proj4/lib/common/e1fn.js", "../../proj4/lib/common/e2fn.js", "../../proj4/lib/common/e3fn.js", "../../proj4/lib/common/gN.js", "../../proj4/lib/common/adjust_lat.js", "../../proj4/lib/common/imlfn.js", "../../proj4/lib/projections/cass.js", "../../proj4/lib/common/qsfnz.js", "../../proj4/lib/projections/laea.js", "../../proj4/lib/common/asinz.js", "../../proj4/lib/projections/aea.js", "../../proj4/lib/projections/gnom.js", "../../proj4/lib/common/iqsfnz.js", "../../proj4/lib/projections/cea.js", "../../proj4/lib/projections/eqc.js", "../../proj4/lib/projections/poly.js", "../../proj4/lib/projections/nzmg.js", "../../proj4/lib/projections/mill.js", "../../proj4/lib/projections/sinu.js", "../../proj4/lib/projections/moll.js", "../../proj4/lib/projections/eqdc.js", "../../proj4/lib/projections/vandg.js", "../../proj4/lib/common/vincenty.js", "../../proj4/lib/projections/aeqd.js", "../../proj4/lib/projections/ortho.js", "../../proj4/lib/projections/qsc.js", "../../proj4/lib/projections/robin.js", "../../proj4/lib/projections/geocent.js", "../../proj4/lib/projections/tpers.js", "../../proj4/lib/projections/geos.js", "../../proj4/lib/projections/eqearth.js", "../../proj4/lib/projections/bonne.js", "../../proj4/projs.js", "../../proj4/lib/index.js", "../../@allmaps/project/dist/shared/project-functions.js", "../../@allmaps/project/dist/projected-transformers/ProjectedGcpTransformer.js", "../../robust-predicates/esm/util.js", "../../robust-predicates/esm/orient2d.js", "../../robust-predicates/esm/orient3d.js", "../../robust-predicates/esm/incircle.js", "../../robust-predicates/esm/insphere.js", "../../point-in-polygon-hao/dist/esm/index.js", "../../@allmaps/render/src/maps/RTree.ts", "../../@allmaps/render/src/maps/WarpedMapList.ts", "../../@allmaps/render/src/tilecache/FetchableTile.ts", "../../@allmaps/render/src/renderers/BaseRenderer.ts", "../../@allmaps/triangulate/dist/shared.js", "../../delaunator/index.js", "../../@kninnug/constrainautor/lib/Constrainautor.mjs", "../../@allmaps/triangulate/dist/index.js", "../../@allmaps/render/src/shared/homogeneous-transform.ts", "../../@allmaps/render/src/maps/WarpedMap.ts", "../../@allmaps/render/src/maps/TriangulatedWarpedMap.ts", "../../@allmaps/render/src/shared/webgl2.ts", "../../@allmaps/render/src/maps/WebGL2WarpedMap.ts", "../../@allmaps/render/src/tilecache/CacheableTile.ts", "../../@allmaps/render/src/tilecache/CacheableWorkerImageDataTile.ts", "../../@allmaps/render/src/viewport/Viewport.ts", "../../@allmaps/render/src/shaders/map/vertex-shader.glsl", "../../@allmaps/render/src/shaders/map/fragment-shader.glsl", "../../@allmaps/render/src/shaders/lines/vertex-shader.glsl", "../../@allmaps/render/src/shaders/lines/fragment-shader.glsl", "../../@allmaps/render/src/shaders/points/vertex-shader.glsl", "../../@allmaps/render/src/shaders/points/fragment-shader.glsl", "../../@allmaps/render/dist/workers/fetch-and-get-image-data.js", "../../@allmaps/render/src/renderers/WebGL2Renderer.ts", "../../@allmaps/openlayers/src/OLWarpedMapEvent.ts", "../../@allmaps/openlayers/src/WarpedMapLayer.ts"],
  "sourcesContent": ["// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toString = Object.prototype.toString;\n\nexport type AnyArray =\n  | any[] // eslint-disable-line @typescript-eslint/no-explicit-any\n  | Int8Array\n  | Uint8Array\n  | Uint8ClampedArray\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Float32Array\n  | Float64Array;\n\n/**\n * Checks if an object is an instance of an Array (array or typed array, except those that contain bigint values).\n *\n * @param value - Object to check.\n * @returns True if the object is an array or a typed array.\n */\nexport function isAnyArray(value: unknown): value is AnyArray {\n  const tag = toString.call(value);\n  return tag.endsWith('Array]') && !tag.includes('Big');\n}\n", "import { isAnyArray } from 'is-any-array';\n\nfunction max(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var maxValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport { max as default };\n", "import { isAnyArray } from 'is-any-array';\n\nfunction min(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var minValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport { min as default };\n", "import { isAnyArray } from 'is-any-array';\nimport max from 'ml-array-max';\nimport min from 'ml-array-min';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isAnyArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport { rescale as default };\n", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar isAnyArray = require('is-any-array');\nvar rescale = require('ml-array-rescale');\n\nconst indent = ' '.repeat(2);\nconst indentData = ' '.repeat(4);\n\n/**\n * @this {Matrix}\n * @returns {string}\n */\nfunction inspectMatrix() {\n  return inspectMatrixWithOptions(this);\n}\n\nfunction inspectMatrixWithOptions(matrix, options = {}) {\n  const {\n    maxRows = 15,\n    maxColumns = 10,\n    maxNumSize = 8,\n    padMinus = 'auto',\n  } = options;\n  return `${matrix.constructor.name} {\n${indent}[\n${indentData}${inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus)}\n${indent}]\n${indent}rows: ${matrix.rows}\n${indent}columns: ${matrix.columns}\n}`;\n}\n\nfunction inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n\n  if (padMinus === 'auto') {\n    padMinus = false;\n    loop: for (let i = 0; i < maxI; i++) {\n      for (let j = 0; j < maxJ; j++) {\n        if (matrix.get(i, j) < 0) {\n          padMinus = true;\n          break loop;\n        }\n      }\n    }\n  }\n\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j), maxNumSize, padMinus));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indentData}`);\n}\n\nfunction formatNumber(num, maxNumSize, padMinus) {\n  return (\n    num >= 0 && padMinus\n      ? ` ${formatNumber2(num, maxNumSize - 1)}`\n      : formatNumber2(num, maxNumSize)\n  ).padEnd(maxNumSize);\n}\n\nfunction formatNumber2(num, len) {\n  // small.length numbers should be as is\n  let str = num.toString();\n  if (str.length <= len) return str;\n\n  // (7)'0.00123' is better then (7)'1.23e-2'\n  // (8)'0.000123' is worse then (7)'1.23e-3',\n  let fix = num.toFixed(len);\n  if (fix.length > len) {\n    fix = num.toFixed(Math.max(0, len - (fix.length - len)));\n  }\n  if (\n    fix.length <= len &&\n    !fix.startsWith('0.000') &&\n    !fix.startsWith('-0.000')\n  ) {\n    return fix;\n  }\n\n  // well, if it's still too long the user should've used longer numbers\n  let exp = num.toExponential(len);\n  if (exp.length > len) {\n    exp = num.toExponential(Math.max(0, len - (exp.length - len)));\n  }\n  return exp.slice(0);\n}\n\nfunction installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ** value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ** matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n}\n\n/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nfunction checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nfunction checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nfunction checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nfunction checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nfunction checkRowIndices(matrix, rowIndices) {\n  if (!isAnyArray.isAnyArray(rowIndices)) {\n    throw new TypeError('row indices must be an array');\n  }\n\n  for (let i = 0; i < rowIndices.length; i++) {\n    if (rowIndices[i] < 0 || rowIndices[i] >= matrix.rows) {\n      throw new RangeError('row indices are out of range');\n    }\n  }\n}\n\nfunction checkColumnIndices(matrix, columnIndices) {\n  if (!isAnyArray.isAnyArray(columnIndices)) {\n    throw new TypeError('column indices must be an array');\n  }\n\n  for (let i = 0; i < columnIndices.length; i++) {\n    if (columnIndices[i] < 0 || columnIndices[i] >= matrix.columns) {\n      throw new RangeError('column indices are out of range');\n    }\n  }\n}\n\nfunction checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nfunction newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n\nfunction checkNonEmpty(matrix) {\n  if (matrix.isEmpty()) {\n    throw new Error('Empty matrix has no elements to index');\n  }\n}\n\nfunction sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nfunction productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nfunction varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nfunction varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nfunction varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nfunction centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nfunction centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nfunction centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nfunction getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += matrix.get(i, j) ** 2 / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nfunction scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nfunction getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += matrix.get(i, j) ** 2 / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nfunction scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nfunction getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += matrix.get(i, j) ** 2 / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nfunction scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n\nclass AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isEmpty() {\n    return this.rows === 0 || this.columns === 0;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isDistance() {\n    if (!this.isSymmetric()) return false;\n\n    for (let i = 0; i < this.rows; i++) {\n      if (this.get(i, i) !== 0) return false;\n    }\n\n    return true;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    switch (by) {\n      case 'row': {\n        const max = new Array(this.rows).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[row]) {\n              max[row] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case 'column': {\n        const max = new Array(this.columns).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[column]) {\n              max[column] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case undefined: {\n        let max = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max) {\n              max = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  maxIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n\n    switch (by) {\n      case 'row': {\n        const min = new Array(this.rows).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[row]) {\n              min[row] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case 'column': {\n        const min = new Array(this.columns).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[column]) {\n              min[column] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case undefined: {\n        let min = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min) {\n              min = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  minIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    switch (type) {\n      case 'max':\n        return this.max();\n      case 'frobenius':\n        return Math.sqrt(this.dot(this));\n      default:\n        throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  mpow(scalar) {\n    if (!this.isSquare()) {\n      throw new RangeError('Matrix must be square');\n    }\n    if (!Number.isInteger(scalar) || scalar < 0) {\n      throw new RangeError('Exponent must be a non-negative integer');\n    }\n    // Russian Peasant exponentiation, i.e. exponentiation by squaring\n    let result = Matrix.eye(this.rows);\n    let bb = this;\n    // Note: Don't bit shift. In JS, that would truncate at 32 bits\n    for (let e = scalar; e >= 1; e /= 2) {\n      if ((e & 1) !== 0) {\n        result = result.mmul(bb);\n      }\n      bb = bb.mmul(bb);\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let result = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      result = result.setSubMatrix(c11, 0, 0);\n      result = result.setSubMatrix(c12, c11.rows, 0);\n      result = result.setSubMatrix(c21, 0, c11.columns);\n      result = result.setSubMatrix(c22, c11.rows, c11.columns);\n      return result.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      if (row.length > 0) {\n        rescale(row, { min, max, output: row });\n      }\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      if (column.length) {\n        rescale(column, {\n          min,\n          max,\n          output: column,\n        });\n      }\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  kroneckerSum(other) {\n    other = Matrix.checkMatrix(other);\n    if (!this.isSquare() || !other.isSquare()) {\n      throw new Error('Kronecker Sum needs two Square Matrices');\n    }\n    let m = this.rows;\n    let n = other.rows;\n    let AxI = this.kroneckerProduct(Matrix.eye(n, n));\n    let IxB = Matrix.eye(m, m).kroneckerProduct(other);\n    return AxI.add(IxB);\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (matrix.isEmpty()) {\n      return this;\n    }\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    checkRowIndices(this, rowIndices);\n    checkColumnIndices(this, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < rowIndices.length; i++) {\n      let rowIndex = rowIndices[i];\n      for (let j = 0; j < columnIndices.length; j++) {\n        let columnIndex = columnIndices[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    return this.constructor.copy(this, new Matrix(this.rows, this.columns));\n  }\n\n  /**\n   * @template {AbstractMatrix} M\n   * @param {AbstractMatrix} from\n   * @param {M} to\n   * @return {M}\n   */\n  static copy(from, to) {\n    for (const [row, column, value] of from.entries()) {\n      to.set(row, column, value);\n    }\n\n    return to;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray.isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!isAnyArray.isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray.isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!isAnyArray.isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!isAnyArray.isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!isAnyArray.isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n\n  /**\n   * iterator from left to right, from top to bottom\n   * yield [row, column, value]\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *entries() {\n    for (let row = 0; row < this.rows; row++) {\n      for (let col = 0; col < this.columns; col++) {\n        yield [row, col, this.get(row, col)];\n      }\n    }\n  }\n\n  /**\n   * iterator from left to right, from top to bottom\n   * yield value\n   * @returns {Generator<number, void, void>}\n   */\n  *values() {\n    for (let row = 0; row < this.rows; row++) {\n      for (let col = 0; col < this.columns; col++) {\n        yield this.get(row, col);\n      }\n    }\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction isArrayOfNumbers(array) {\n  return array.every((element) => {\n    return typeof element === 'number';\n  });\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nclass Matrix extends AbstractMatrix {\n  /**\n   * @type {Float64Array[]}\n   */\n  data;\n\n  /**\n   * Init an empty matrix\n   * @param {number} nRows\n   * @param {number} nColumns\n   */\n  #initData(nRows, nColumns) {\n    this.data = [];\n\n    if (Number.isInteger(nColumns) && nColumns >= 0) {\n      for (let i = 0; i < nRows; i++) {\n        this.data.push(new Float64Array(nColumns));\n      }\n    } else {\n      throw new TypeError('nColumns must be a positive integer');\n    }\n\n    this.rows = nRows;\n    this.columns = nColumns;\n  }\n\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      this.#initData(nRows.rows, nRows.columns);\n      Matrix.copy(nRows, this);\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      this.#initData(nRows, nColumns);\n    } else if (isAnyArray.isAnyArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n      if (typeof nColumns !== 'number') {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        if (!isArrayOfNumbers(arrayData[i])) {\n          throw new TypeError('Input data contains non-numeric values');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n\n      this.rows = nRows;\n      this.columns = nColumns;\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n\n/**\n * @typedef {0 | 1 | number | boolean} Mask\n */\n\nclass SymmetricMatrix extends AbstractMatrix {\n  /** @type {Matrix} */\n  #matrix;\n\n  get size() {\n    return this.#matrix.size;\n  }\n\n  get rows() {\n    return this.#matrix.rows;\n  }\n\n  get columns() {\n    return this.#matrix.columns;\n  }\n\n  get diagonalSize() {\n    return this.rows;\n  }\n\n  /**\n   * not the same as matrix.isSymmetric()\n   * Here is to check if it's instanceof SymmetricMatrix without bundling issues\n   *\n   * @param value\n   * @returns {boolean}\n   */\n  static isSymmetricMatrix(value) {\n    return Matrix.isMatrix(value) && value.klassType === 'SymmetricMatrix';\n  }\n\n  /**\n   * @param diagonalSize\n   * @return {SymmetricMatrix}\n   */\n  static zeros(diagonalSize) {\n    return new this(diagonalSize);\n  }\n\n  /**\n   * @param diagonalSize\n   * @return {SymmetricMatrix}\n   */\n  static ones(diagonalSize) {\n    return new this(diagonalSize).fill(1);\n  }\n\n  /**\n   * @param {number | AbstractMatrix | ArrayLike<ArrayLike<number>>} diagonalSize\n   * @return {this}\n   */\n  constructor(diagonalSize) {\n    super();\n\n    if (Matrix.isMatrix(diagonalSize)) {\n      if (!diagonalSize.isSymmetric()) {\n        throw new TypeError('not symmetric data');\n      }\n\n      this.#matrix = Matrix.copy(\n        diagonalSize,\n        new Matrix(diagonalSize.rows, diagonalSize.rows),\n      );\n    } else if (Number.isInteger(diagonalSize) && diagonalSize >= 0) {\n      this.#matrix = new Matrix(diagonalSize, diagonalSize);\n    } else {\n      this.#matrix = new Matrix(diagonalSize);\n\n      if (!this.isSymmetric()) {\n        throw new TypeError('not symmetric data');\n      }\n    }\n  }\n\n  clone() {\n    const matrix = new SymmetricMatrix(this.diagonalSize);\n\n    for (const [row, col, value] of this.upperRightEntries()) {\n      matrix.set(row, col, value);\n    }\n\n    return matrix;\n  }\n\n  toMatrix() {\n    return new Matrix(this);\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.#matrix.get(rowIndex, columnIndex);\n  }\n  set(rowIndex, columnIndex, value) {\n    // symmetric set\n    this.#matrix.set(rowIndex, columnIndex, value);\n    this.#matrix.set(columnIndex, rowIndex, value);\n\n    return this;\n  }\n\n  removeCross(index) {\n    // symmetric remove side\n    this.#matrix.removeRow(index);\n    this.#matrix.removeColumn(index);\n\n    return this;\n  }\n\n  addCross(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.diagonalSize;\n    }\n\n    const row = array.slice();\n    row.splice(index, 1);\n\n    this.#matrix.addRow(index, row);\n    this.#matrix.addColumn(index, array);\n\n    return this;\n  }\n\n  /**\n   * @param {Mask[]} mask\n   */\n  applyMask(mask) {\n    if (mask.length !== this.diagonalSize) {\n      throw new RangeError('Mask size do not match with matrix size');\n    }\n\n    // prepare sides to remove from matrix from mask\n    /** @type {number[]} */\n    const sidesToRemove = [];\n    for (const [index, passthroughs] of mask.entries()) {\n      if (passthroughs) continue;\n      sidesToRemove.push(index);\n    }\n    // to remove from highest to lowest for no mutation shifting\n    sidesToRemove.reverse();\n\n    // remove sides\n    for (const sideIndex of sidesToRemove) {\n      this.removeCross(sideIndex);\n    }\n\n    return this;\n  }\n\n  /**\n   * Compact format upper-right corner of matrix\n   * iterate from left to right, from top to bottom.\n   *\n   * ```\n   *   A B C D\n   * A 1 2 3 4\n   * B 2 5 6 7\n   * C 3 6 8 9\n   * D 4 7 9 10\n   * ```\n   *\n   * will return compact 1D array `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`\n   *\n   * length is S(i=0, n=sideSize) => 10 for a 4 sideSized matrix\n   *\n   * @returns {number[]}\n   */\n  toCompact() {\n    const { diagonalSize } = this;\n\n    /** @type {number[]} */\n    const compact = new Array((diagonalSize * (diagonalSize + 1)) / 2);\n    for (let col = 0, row = 0, index = 0; index < compact.length; index++) {\n      compact[index] = this.get(row, col);\n\n      if (++col >= diagonalSize) col = ++row;\n    }\n\n    return compact;\n  }\n\n  /**\n   * @param {number[]} compact\n   * @return {SymmetricMatrix}\n   */\n  static fromCompact(compact) {\n    const compactSize = compact.length;\n    // compactSize = (sideSize * (sideSize + 1)) / 2\n    // https://mathsolver.microsoft.com/fr/solve-problem/y%20%3D%20%20x%20%60cdot%20%20%20%60frac%7B%20%20%60left(%20x%2B1%20%20%60right)%20%20%20%20%7D%7B%202%20%20%7D\n    // sideSize = (Sqrt(8  compactSize + 1) - 1) / 2\n    const diagonalSize = (Math.sqrt(8 * compactSize + 1) - 1) / 2;\n\n    if (!Number.isInteger(diagonalSize)) {\n      throw new TypeError(\n        `This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(\n          compact,\n        )}`,\n      );\n    }\n\n    const matrix = new SymmetricMatrix(diagonalSize);\n    for (let col = 0, row = 0, index = 0; index < compactSize; index++) {\n      matrix.set(col, row, compact[index]);\n      if (++col >= diagonalSize) col = ++row;\n    }\n\n    return matrix;\n  }\n\n  /**\n   * half iterator upper-right-corner from left to right, from top to bottom\n   * yield [row, column, value]\n   *\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *upperRightEntries() {\n    for (let row = 0, col = 0; row < this.diagonalSize; void 0) {\n      const value = this.get(row, col);\n\n      yield [row, col, value];\n\n      // at the end of row, move cursor to next row at diagonal position\n      if (++col >= this.diagonalSize) col = ++row;\n    }\n  }\n\n  /**\n   * half iterator upper-right-corner from left to right, from top to bottom\n   * yield value\n   *\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *upperRightValues() {\n    for (let row = 0, col = 0; row < this.diagonalSize; void 0) {\n      const value = this.get(row, col);\n\n      yield value;\n\n      // at the end of row, move cursor to next row at diagonal position\n      if (++col >= this.diagonalSize) col = ++row;\n    }\n  }\n}\nSymmetricMatrix.prototype.klassType = 'SymmetricMatrix';\n\nclass DistanceMatrix extends SymmetricMatrix {\n  /**\n   * not the same as matrix.isSymmetric()\n   * Here is to check if it's instanceof SymmetricMatrix without bundling issues\n   *\n   * @param value\n   * @returns {boolean}\n   */\n  static isDistanceMatrix(value) {\n    return (\n      SymmetricMatrix.isSymmetricMatrix(value) &&\n      value.klassSubType === 'DistanceMatrix'\n    );\n  }\n\n  constructor(sideSize) {\n    super(sideSize);\n\n    if (!this.isDistance()) {\n      throw new TypeError('Provided arguments do no produce a distance matrix');\n    }\n  }\n\n  set(rowIndex, columnIndex, value) {\n    // distance matrix diagonal is 0\n    if (rowIndex === columnIndex) value = 0;\n\n    return super.set(rowIndex, columnIndex, value);\n  }\n\n  addCross(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.diagonalSize;\n    }\n\n    // ensure distance\n    array = array.slice();\n    array[index] = 0;\n\n    return super.addCross(index, array);\n  }\n\n  toSymmetricMatrix() {\n    return new SymmetricMatrix(this);\n  }\n\n  clone() {\n    const matrix = new DistanceMatrix(this.diagonalSize);\n\n    for (const [row, col, value] of this.upperRightEntries()) {\n      if (row === col) continue;\n      matrix.set(row, col, value);\n    }\n\n    return matrix;\n  }\n\n  /**\n   * Compact format upper-right corner of matrix\n   * no diagonal (only zeros)\n   * iterable from left to right, from top to bottom.\n   *\n   * ```\n   *   A B C D\n   * A 0 1 2 3\n   * B 1 0 4 5\n   * C 2 4 0 6\n   * D 3 5 6 0\n   * ```\n   *\n   * will return compact 1D array `[1, 2, 3, 4, 5, 6]`\n   *\n   * length is S(i=0, n=sideSize-1) => 6 for a 4 side sized matrix\n   *\n   * @returns {number[]}\n   */\n  toCompact() {\n    const { diagonalSize } = this;\n    const compactLength = ((diagonalSize - 1) * diagonalSize) / 2;\n\n    /** @type {number[]} */\n    const compact = new Array(compactLength);\n    for (let col = 1, row = 0, index = 0; index < compact.length; index++) {\n      compact[index] = this.get(row, col);\n\n      if (++col >= diagonalSize) col = ++row + 1;\n    }\n\n    return compact;\n  }\n\n  /**\n   * @param {number[]} compact\n   */\n  static fromCompact(compact) {\n    const compactSize = compact.length;\n\n    if (compactSize === 0) {\n      return new this(0);\n    }\n\n    // compactSize in Natural integer range ]0;]\n    // compactSize = (sideSize * (sideSize - 1)) / 2\n    // sideSize = (Sqrt(8  compactSize + 1) + 1) / 2\n    const diagonalSize = (Math.sqrt(8 * compactSize + 1) + 1) / 2;\n\n    if (!Number.isInteger(diagonalSize)) {\n      throw new TypeError(\n        `This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(\n          compact,\n        )}`,\n      );\n    }\n\n    const matrix = new this(diagonalSize);\n    for (let col = 1, row = 0, index = 0; index < compactSize; index++) {\n      matrix.set(col, row, compact[index]);\n      if (++col >= diagonalSize) col = ++row + 1;\n    }\n\n    return matrix;\n  }\n}\nDistanceMatrix.prototype.klassSubType = 'DistanceMatrix';\n\nclass BaseView extends AbstractMatrix {\n  constructor(matrix, rows, columns) {\n    super();\n    this.matrix = matrix;\n    this.rows = rows;\n    this.columns = columns;\n  }\n}\n\nclass MatrixColumnView extends BaseView {\n  constructor(matrix, column) {\n    checkColumnIndex(matrix, column);\n    super(matrix, matrix.rows, 1);\n    this.column = column;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.column, value);\n    return this;\n  }\n\n  get(rowIndex) {\n    return this.matrix.get(rowIndex, this.column);\n  }\n}\n\nclass MatrixColumnSelectionView extends BaseView {\n  constructor(matrix, columnIndices) {\n    checkColumnIndices(matrix, columnIndices);\n    super(matrix, matrix.rows, columnIndices.length);\n    this.columnIndices = columnIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\n  }\n}\n\nclass MatrixFlipColumnView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.rows, matrix.columns);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\n  }\n}\n\nclass MatrixFlipRowView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.rows, matrix.columns);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\n  }\n}\n\nclass MatrixRowView extends BaseView {\n  constructor(matrix, row) {\n    checkRowIndex(matrix, row);\n    super(matrix, 1, matrix.columns);\n    this.row = row;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.row, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.row, columnIndex);\n  }\n}\n\nclass MatrixRowSelectionView extends BaseView {\n  constructor(matrix, rowIndices) {\n    checkRowIndices(matrix, rowIndices);\n    super(matrix, rowIndices.length, matrix.columns);\n    this.rowIndices = rowIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\n  }\n}\n\nclass MatrixSelectionView extends BaseView {\n  constructor(matrix, rowIndices, columnIndices) {\n    checkRowIndices(matrix, rowIndices);\n    checkColumnIndices(matrix, columnIndices);\n    super(matrix, rowIndices.length, columnIndices.length);\n    this.rowIndices = rowIndices;\n    this.columnIndices = columnIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n    );\n  }\n}\n\nclass MatrixSubView extends BaseView {\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\n    this.startRow = startRow;\n    this.startColumn = startColumn;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n    );\n  }\n}\n\nclass MatrixTransposeView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.columns, matrix.rows);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(columnIndex, rowIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(columnIndex, rowIndex);\n  }\n}\n\nclass WrapperMatrix1D extends AbstractMatrix {\n  constructor(data, options = {}) {\n    const { rows = 1 } = options;\n\n    if (data.length % rows !== 0) {\n      throw new Error('the data length is not divisible by the number of rows');\n    }\n    super();\n    this.rows = rows;\n    this.columns = data.length / rows;\n    this.data = data;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    this.data[index] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    return this.data[index];\n  }\n\n  _calculateIndex(row, column) {\n    return row * this.columns + column;\n  }\n}\n\nclass WrapperMatrix2D extends AbstractMatrix {\n  constructor(data) {\n    super();\n    this.data = data;\n    this.rows = data.length;\n    this.columns = data[0].length;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n}\n\nfunction wrap(array, options) {\n  if (isAnyArray.isAnyArray(array)) {\n    if (array[0] && isAnyArray.isAnyArray(array[0])) {\n      return new WrapperMatrix2D(array);\n    } else {\n      return new WrapperMatrix1D(array, options);\n    }\n  } else {\n    throw new Error('the argument is not an array');\n  }\n}\n\nclass LuDecomposition {\n  constructor(matrix) {\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n\n    let lu = matrix.clone();\n    let rows = lu.rows;\n    let columns = lu.columns;\n    let pivotVector = new Float64Array(rows);\n    let pivotSign = 1;\n    let i, j, k, p, s, t, v;\n    let LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n      pivotVector[i] = i;\n    }\n\n    LUcolj = new Float64Array(rows);\n\n    for (j = 0; j < columns; j++) {\n      for (i = 0; i < rows; i++) {\n        LUcolj[i] = lu.get(i, j);\n      }\n\n      for (i = 0; i < rows; i++) {\n        kmax = Math.min(i, j);\n        s = 0;\n        for (k = 0; k < kmax; k++) {\n          s += lu.get(i, k) * LUcolj[k];\n        }\n        LUcolj[i] -= s;\n        lu.set(i, j, LUcolj[i]);\n      }\n\n      p = j;\n      for (i = j + 1; i < rows; i++) {\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n          p = i;\n        }\n      }\n\n      if (p !== j) {\n        for (k = 0; k < columns; k++) {\n          t = lu.get(p, k);\n          lu.set(p, k, lu.get(j, k));\n          lu.set(j, k, t);\n        }\n\n        v = pivotVector[p];\n        pivotVector[p] = pivotVector[j];\n        pivotVector[j] = v;\n\n        pivotSign = -pivotSign;\n      }\n\n      if (j < rows && lu.get(j, j) !== 0) {\n        for (i = j + 1; i < rows; i++) {\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\n        }\n      }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n  }\n\n  isSingular() {\n    let data = this.LU;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      if (data.get(j, j) === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let lu = this.LU;\n    let rows = lu.rows;\n\n    if (rows !== value.rows) {\n      throw new Error('Invalid matrix dimensions');\n    }\n    if (this.isSingular()) {\n      throw new Error('LU matrix is singular');\n    }\n\n    let count = value.columns;\n    let X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n    let columns = lu.columns;\n    let i, j, k;\n\n    for (k = 0; k < columns; k++) {\n      for (i = k + 1; i < columns; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    for (k = columns - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / lu.get(k, k));\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    return X;\n  }\n\n  get determinant() {\n    let data = this.LU;\n    if (!data.isSquare()) {\n      throw new Error('Matrix must be square');\n    }\n    let determinant = this.pivotSign;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      determinant *= data.get(j, j);\n    }\n    return determinant;\n  }\n\n  get lowerTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i > j) {\n          X.set(i, j, data.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, 1);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get upperTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i <= j) {\n          X.set(i, j, data.get(i, j));\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get pivotPermutationVector() {\n    return Array.from(this.pivotVector);\n  }\n}\n\nfunction hypotenuse(a, b) {\n  let r = 0;\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n  return 0;\n}\n\nclass QrDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let qr = value.clone();\n    let m = value.rows;\n    let n = value.columns;\n    let rdiag = new Float64Array(n);\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      let nrm = 0;\n      for (i = k; i < m; i++) {\n        nrm = hypotenuse(nrm, qr.get(i, k));\n      }\n      if (nrm !== 0) {\n        if (qr.get(k, k) < 0) {\n          nrm = -nrm;\n        }\n        for (i = k; i < m; i++) {\n          qr.set(i, k, qr.get(i, k) / nrm);\n        }\n        qr.set(k, k, qr.get(k, k) + 1);\n        for (j = k + 1; j < n; j++) {\n          s = 0;\n          for (i = k; i < m; i++) {\n            s += qr.get(i, k) * qr.get(i, j);\n          }\n          s = -s / qr.get(k, k);\n          for (i = k; i < m; i++) {\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n      rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let qr = this.QR;\n    let m = qr.rows;\n\n    if (value.rows !== m) {\n      throw new Error('Matrix row dimensions must agree');\n    }\n    if (!this.isFullRank()) {\n      throw new Error('Matrix is rank deficient');\n    }\n\n    let count = value.columns;\n    let X = value.clone();\n    let n = qr.columns;\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      for (j = 0; j < count; j++) {\n        s = 0;\n        for (i = k; i < m; i++) {\n          s += qr.get(i, k) * X.get(i, j);\n        }\n        s = -s / qr.get(k, k);\n        for (i = k; i < m; i++) {\n          X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n        }\n      }\n    }\n    for (k = n - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / this.Rdiag[k]);\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * qr.get(i, k));\n        }\n      }\n    }\n\n    return X.subMatrix(0, n - 1, 0, count - 1);\n  }\n\n  isFullRank() {\n    let columns = this.QR.columns;\n    for (let i = 0; i < columns; i++) {\n      if (this.Rdiag[i] === 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get upperTriangularMatrix() {\n    let qr = this.QR;\n    let n = qr.columns;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        if (i < j) {\n          X.set(i, j, qr.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, this.Rdiag[i]);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get orthogonalMatrix() {\n    let qr = this.QR;\n    let rows = qr.rows;\n    let columns = qr.columns;\n    let X = new Matrix(rows, columns);\n    let i, j, k, s;\n\n    for (k = columns - 1; k >= 0; k--) {\n      for (i = 0; i < rows; i++) {\n        X.set(i, k, 0);\n      }\n      X.set(k, k, 1);\n      for (j = k; j < columns; j++) {\n        if (qr.get(k, k) !== 0) {\n          s = 0;\n          for (i = k; i < rows; i++) {\n            s += qr.get(i, k) * X.get(i, j);\n          }\n\n          s = -s / qr.get(k, k);\n\n          for (i = k; i < rows; i++) {\n            X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n    }\n    return X;\n  }\n}\n\nclass SingularValueDecomposition {\n  constructor(value, options = {}) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    if (value.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    let m = value.rows;\n    let n = value.columns;\n\n    const {\n      computeLeftSingularVectors = true,\n      computeRightSingularVectors = true,\n      autoTranspose = false,\n    } = options;\n\n    let wantu = Boolean(computeLeftSingularVectors);\n    let wantv = Boolean(computeRightSingularVectors);\n\n    let swapped = false;\n    let a;\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone();\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose',\n        );\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        let aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    let nu = Math.min(m, n);\n    let ni = Math.min(m + 1, n);\n    let s = new Float64Array(ni);\n    let U = new Matrix(m, nu);\n    let V = new Matrix(n, n);\n\n    let e = new Float64Array(n);\n    let work = new Float64Array(m);\n\n    let si = new Float64Array(ni);\n    for (let i = 0; i < ni; i++) si[i] = i;\n\n    let nct = Math.min(m - 1, n);\n    let nrt = Math.max(0, Math.min(n - 2, m));\n    let mrc = Math.max(nct, nrt);\n\n    for (let k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n        for (let i = k; i < m; i++) {\n          s[k] = hypotenuse(s[k], a.get(i, k));\n        }\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n          for (let i = k; i < m; i++) {\n            a.set(i, k, a.get(i, k) / s[k]);\n          }\n          a.set(k, k, a.get(k, k) + 1);\n        }\n        s[k] = -s[k];\n      }\n\n      for (let j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          let t = 0;\n          for (let i = k; i < m; i++) {\n            t += a.get(i, k) * a.get(i, j);\n          }\n          t = -t / a.get(k, k);\n          for (let i = k; i < m; i++) {\n            a.set(i, j, a.get(i, j) + t * a.get(i, k));\n          }\n        }\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (let i = k; i < m; i++) {\n          U.set(i, k, a.get(i, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n        for (let i = k + 1; i < n; i++) {\n          e[k] = hypotenuse(e[k], e[i]);\n        }\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n          for (let i = k + 1; i < n; i++) {\n            e[i] /= e[k];\n          }\n          e[k + 1] += 1;\n        }\n        e[k] = -e[k];\n        if (k + 1 < m && e[k] !== 0) {\n          for (let i = k + 1; i < m; i++) {\n            work[i] = 0;\n          }\n          for (let i = k + 1; i < m; i++) {\n            for (let j = k + 1; j < n; j++) {\n              work[i] += e[j] * a.get(i, j);\n            }\n          }\n          for (let j = k + 1; j < n; j++) {\n            let t = -e[j] / e[k + 1];\n            for (let i = k + 1; i < m; i++) {\n              a.set(i, j, a.get(i, j) + t * work[i]);\n            }\n          }\n        }\n        if (wantv) {\n          for (let i = k + 1; i < n; i++) {\n            V.set(i, k, e[i]);\n          }\n        }\n      }\n    }\n\n    let p = Math.min(n, m + 1);\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (let j = nct; j < nu; j++) {\n        for (let i = 0; i < m; i++) {\n          U.set(i, j, 0);\n        }\n        U.set(j, j, 1);\n      }\n      for (let k = nct - 1; k >= 0; k--) {\n        if (s[k] !== 0) {\n          for (let j = k + 1; j < nu; j++) {\n            let t = 0;\n            for (let i = k; i < m; i++) {\n              t += U.get(i, k) * U.get(i, j);\n            }\n            t = -t / U.get(k, k);\n            for (let i = k; i < m; i++) {\n              U.set(i, j, U.get(i, j) + t * U.get(i, k));\n            }\n          }\n          for (let i = k; i < m; i++) {\n            U.set(i, k, -U.get(i, k));\n          }\n          U.set(k, k, 1 + U.get(k, k));\n          for (let i = 0; i < k - 1; i++) {\n            U.set(i, k, 0);\n          }\n        } else {\n          for (let i = 0; i < m; i++) {\n            U.set(i, k, 0);\n          }\n          U.set(k, k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (let k = n - 1; k >= 0; k--) {\n        if (k < nrt && e[k] !== 0) {\n          for (let j = k + 1; j < n; j++) {\n            let t = 0;\n            for (let i = k + 1; i < n; i++) {\n              t += V.get(i, k) * V.get(i, j);\n            }\n            t = -t / V.get(k + 1, k);\n            for (let i = k + 1; i < n; i++) {\n              V.set(i, j, V.get(i, j) + t * V.get(i, k));\n            }\n          }\n        }\n        for (let i = 0; i < n; i++) {\n          V.set(i, k, 0);\n        }\n        V.set(k, k, 1);\n      }\n    }\n\n    let pp = p - 1;\n    let eps = Number.EPSILON;\n    while (p > 0) {\n      let k, kase;\n      for (k = p - 2; k >= -1; k--) {\n        if (k === -1) {\n          break;\n        }\n        const alpha =\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\n          e[k] = 0;\n          break;\n        }\n      }\n      if (k === p - 2) {\n        kase = 4;\n      } else {\n        let ks;\n        for (ks = p - 1; ks >= k; ks--) {\n          if (ks === k) {\n            break;\n          }\n          let t =\n            (ks !== p ? Math.abs(e[ks]) : 0) +\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n          if (Math.abs(s[ks]) <= eps * t) {\n            s[ks] = 0;\n            break;\n          }\n        }\n        if (ks === k) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          k = ks;\n        }\n      }\n\n      k++;\n\n      switch (kase) {\n        case 1: {\n          let f = e[p - 2];\n          e[p - 2] = 0;\n          for (let j = p - 2; j >= k; j--) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            if (j !== k) {\n              f = -sn * e[j - 1];\n              e[j - 1] = cs * e[j - 1];\n            }\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, p - 1);\n                V.set(i, p - 1, -sn * V.get(i, j) + cs * V.get(i, p - 1));\n                V.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 2: {\n          let f = e[k - 1];\n          e[k - 1] = 0;\n          for (let j = k; j < p; j++) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            f = -sn * e[j];\n            e[j] = cs * e[j];\n            if (wantu) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, k - 1);\n                U.set(i, k - 1, -sn * U.get(i, j) + cs * U.get(i, k - 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 3: {\n          const scale = Math.max(\n            Math.abs(s[p - 1]),\n            Math.abs(s[p - 2]),\n            Math.abs(e[p - 2]),\n            Math.abs(s[k]),\n            Math.abs(e[k]),\n          );\n          const sp = s[p - 1] / scale;\n          const spm1 = s[p - 2] / scale;\n          const epm1 = e[p - 2] / scale;\n          const sk = s[k] / scale;\n          const ek = e[k] / scale;\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n          const c = sp * epm1 * (sp * epm1);\n          let shift = 0;\n          if (b !== 0 || c !== 0) {\n            if (b < 0) {\n              shift = 0 - Math.sqrt(b * b + c);\n            } else {\n              shift = Math.sqrt(b * b + c);\n            }\n            shift = c / (b + shift);\n          }\n          let f = (sk + sp) * (sk - sp) + shift;\n          let g = sk * ek;\n          for (let j = k; j < p - 1; j++) {\n            let t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            let cs = f / t;\n            let sn = g / t;\n            if (j !== k) {\n              e[j - 1] = t;\n            }\n            f = cs * s[j] + sn * e[j];\n            e[j] = cs * e[j] - sn * s[j];\n            g = sn * s[j + 1];\n            s[j + 1] = cs * s[j + 1];\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, j + 1);\n                V.set(i, j + 1, -sn * V.get(i, j) + cs * V.get(i, j + 1));\n                V.set(i, j, t);\n              }\n            }\n            t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            cs = f / t;\n            sn = g / t;\n            s[j] = t;\n            f = cs * e[j] + sn * s[j + 1];\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\n            g = sn * e[j + 1];\n            e[j + 1] = cs * e[j + 1];\n            if (wantu && j < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, j + 1);\n                U.set(i, j + 1, -sn * U.get(i, j) + cs * U.get(i, j + 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          e[p - 2] = f;\n          break;\n        }\n        case 4: {\n          if (s[k] <= 0) {\n            s[k] = s[k] < 0 ? -s[k] : 0;\n            if (wantv) {\n              for (let i = 0; i <= pp; i++) {\n                V.set(i, k, -V.get(i, k));\n              }\n            }\n          }\n          while (k < pp) {\n            if (s[k] >= s[k + 1]) {\n              break;\n            }\n            let t = s[k];\n            s[k] = s[k + 1];\n            s[k + 1] = t;\n            if (wantv && k < n - 1) {\n              for (let i = 0; i < n; i++) {\n                t = V.get(i, k + 1);\n                V.set(i, k + 1, V.get(i, k));\n                V.set(i, k, t);\n              }\n            }\n            if (wantu && k < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = U.get(i, k + 1);\n                U.set(i, k + 1, U.get(i, k));\n                U.set(i, k, t);\n              }\n            }\n            k++;\n          }\n          p--;\n          break;\n        }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      let tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  solve(value) {\n    let Y = value;\n    let e = this.threshold;\n    let scols = this.s.length;\n    let Ls = Matrix.zeros(scols, scols);\n\n    for (let i = 0; i < scols; i++) {\n      if (Math.abs(this.s[i]) <= e) {\n        Ls.set(i, i, 0);\n      } else {\n        Ls.set(i, i, 1 / this.s[i]);\n      }\n    }\n\n    let U = this.U;\n    let V = this.rightSingularVectors;\n\n    let VL = V.mmul(Ls);\n    let vrows = V.rows;\n    let urows = U.rows;\n    let VLU = Matrix.zeros(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < scols; k++) {\n          sum += VL.get(i, k) * U.get(j, k);\n        }\n        VLU.set(i, j, sum);\n      }\n    }\n\n    return VLU.mmul(Y);\n  }\n\n  solveForDiagonal(value) {\n    return this.solve(Matrix.diag(value));\n  }\n\n  inverse() {\n    let V = this.V;\n    let e = this.threshold;\n    let vrows = V.rows;\n    let vcols = V.columns;\n    let X = new Matrix(vrows, this.s.length);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < vcols; j++) {\n        if (Math.abs(this.s[j]) > e) {\n          X.set(i, j, V.get(i, j) / this.s[j]);\n        }\n      }\n    }\n\n    let U = this.U;\n\n    let urows = U.rows;\n    let ucols = U.columns;\n    let Y = new Matrix(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < ucols; k++) {\n          sum += X.get(i, k) * U.get(j, k);\n        }\n        Y.set(i, j, sum);\n      }\n    }\n\n    return Y;\n  }\n\n  get condition() {\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n  }\n\n  get norm2() {\n    return this.s[0];\n  }\n\n  get rank() {\n    let tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n    let r = 0;\n    let s = this.s;\n    for (let i = 0, ii = s.length; i < ii; i++) {\n      if (s[i] > tol) {\n        r++;\n      }\n    }\n    return r;\n  }\n\n  get diagonal() {\n    return Array.from(this.s);\n  }\n\n  get threshold() {\n    return (Number.EPSILON / 2) * Math.max(this.m, this.n) * this.s[0];\n  }\n\n  get leftSingularVectors() {\n    return this.U;\n  }\n\n  get rightSingularVectors() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    return Matrix.diag(this.s);\n  }\n}\n\nfunction inverse(matrix, useSVD = false) {\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\n  if (useSVD) {\n    return new SingularValueDecomposition(matrix).inverse();\n  } else {\n    return solve(matrix, Matrix.eye(matrix.rows));\n  }\n}\n\nfunction solve(leftHandSide, rightHandSide, useSVD = false) {\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\n  if (useSVD) {\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\n  } else {\n    return leftHandSide.isSquare()\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\n  }\n}\n\nfunction determinant(matrix) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isSquare()) {\n    if (matrix.columns === 0) {\n      return 1;\n    }\n\n    let a, b, c, d;\n    if (matrix.columns === 2) {\n      // 2 x 2 matrix\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(1, 0);\n      d = matrix.get(1, 1);\n\n      return a * d - b * c;\n    } else if (matrix.columns === 3) {\n      // 3 x 3 matrix\n      let subMatrix0, subMatrix1, subMatrix2;\n      subMatrix0 = new MatrixSelectionView(matrix, [1, 2], [1, 2]);\n      subMatrix1 = new MatrixSelectionView(matrix, [1, 2], [0, 2]);\n      subMatrix2 = new MatrixSelectionView(matrix, [1, 2], [0, 1]);\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(0, 2);\n\n      return (\n        a * determinant(subMatrix0) -\n        b * determinant(subMatrix1) +\n        c * determinant(subMatrix2)\n      );\n    } else {\n      // general purpose determinant using the LU decomposition\n      return new LuDecomposition(matrix).determinant;\n    }\n  } else {\n    throw Error('determinant can only be calculated for a square matrix');\n  }\n}\n\nfunction xrange(n, exception) {\n  let range = [];\n  for (let i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\n\nfunction dependenciesOneRow(\n  error,\n  matrix,\n  index,\n  thresholdValue = 10e-10,\n  thresholdError = 10e-10,\n) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    let returnArray = matrix.addRow(index, [0]);\n    for (let i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\n\nfunction linearDependencies(matrix, options = {}) {\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\n  matrix = Matrix.checkMatrix(matrix);\n\n  let n = matrix.rows;\n  let results = new Matrix(n, n);\n\n  for (let i = 0; i < n; i++) {\n    let b = Matrix.columnVector(matrix.getRow(i));\n    let Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    let svd = new SingularValueDecomposition(Abis);\n    let x = svd.solve(b);\n    let error = Matrix.sub(b, Abis.mmul(x)).abs().max();\n    results.setRow(\n      i,\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError),\n    );\n  }\n  return results;\n}\n\nfunction pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isEmpty()) {\n    // with a zero dimension, the pseudo-inverse is the transpose, since all 0xn and nx0 matrices are singular\n    // (0xn)*(nx0)*(0xn) = 0xn\n    // (nx0)*(0xn)*(nx0) = nx0\n    return matrix.transpose();\n  }\n  let svdSolution = new SingularValueDecomposition(matrix, { autoTranspose: true });\n\n  let U = svdSolution.leftSingularVectors;\n  let V = svdSolution.rightSingularVectors;\n  let s = svdSolution.diagonal;\n\n  for (let i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}\n\nfunction covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray.isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const { center = true } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const cov = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < cov.rows; i++) {\n    for (let j = 0; j < cov.columns; j++) {\n      cov.set(i, j, cov.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return cov;\n}\n\nfunction correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray.isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame\n    ? sdx\n    : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(\n        i,\n        j,\n        corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)),\n      );\n    }\n  }\n  return corr;\n}\n\nclass EigenvalueDecomposition {\n  constructor(matrix, options = {}) {\n    const { assumeSymmetric = false } = options;\n\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n    if (!matrix.isSquare()) {\n      throw new Error('Matrix is not a square matrix');\n    }\n\n    if (matrix.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    let n = matrix.columns;\n    let V = new Matrix(n, n);\n    let d = new Float64Array(n);\n    let e = new Float64Array(n);\n    let value = matrix;\n    let i, j;\n\n    let isSymmetric = false;\n    if (assumeSymmetric) {\n      isSymmetric = true;\n    } else {\n      isSymmetric = matrix.isSymmetric();\n    }\n\n    if (isSymmetric) {\n      for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          V.set(i, j, value.get(i, j));\n        }\n      }\n      tred2(n, e, d, V);\n      tql2(n, e, d, V);\n    } else {\n      let H = new Matrix(n, n);\n      let ort = new Float64Array(n);\n      for (j = 0; j < n; j++) {\n        for (i = 0; i < n; i++) {\n          H.set(i, j, value.get(i, j));\n        }\n      }\n      orthes(n, H, ort, V);\n      hqr2(n, e, d, V, H);\n    }\n\n    this.n = n;\n    this.e = e;\n    this.d = d;\n    this.V = V;\n  }\n\n  get realEigenvalues() {\n    return Array.from(this.d);\n  }\n\n  get imaginaryEigenvalues() {\n    return Array.from(this.e);\n  }\n\n  get eigenvectorMatrix() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    let n = this.n;\n    let e = this.e;\n    let d = this.d;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        X.set(i, j, 0);\n      }\n      X.set(i, i, d[i]);\n      if (e[i] > 0) {\n        X.set(i, i + 1, e[i]);\n      } else if (e[i] < 0) {\n        X.set(i, i - 1, e[i]);\n      }\n    }\n    return X;\n  }\n}\n\nfunction tred2(n, e, d, V) {\n  let f, g, h, i, j, k, hh, scale;\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n  }\n\n  for (i = n - 1; i > 0; i--) {\n    scale = 0;\n    h = 0;\n    for (k = 0; k < i; k++) {\n      scale = scale + Math.abs(d[k]);\n    }\n\n    if (scale === 0) {\n      e[i] = d[i - 1];\n      for (j = 0; j < i; j++) {\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n        V.set(j, i, 0);\n      }\n    } else {\n      for (k = 0; k < i; k++) {\n        d[k] /= scale;\n        h += d[k] * d[k];\n      }\n\n      f = d[i - 1];\n      g = Math.sqrt(h);\n      if (f > 0) {\n        g = -g;\n      }\n\n      e[i] = scale * g;\n      h = h - f * g;\n      d[i - 1] = f - g;\n      for (j = 0; j < i; j++) {\n        e[j] = 0;\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        V.set(j, i, f);\n        g = e[j] + V.get(j, j) * f;\n        for (k = j + 1; k <= i - 1; k++) {\n          g += V.get(k, j) * d[k];\n          e[k] += V.get(k, j) * f;\n        }\n        e[j] = g;\n      }\n\n      f = 0;\n      for (j = 0; j < i; j++) {\n        e[j] /= h;\n        f += e[j] * d[j];\n      }\n\n      hh = f / (h + h);\n      for (j = 0; j < i; j++) {\n        e[j] -= hh * d[j];\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        g = e[j];\n        for (k = j; k <= i - 1; k++) {\n          V.set(k, j, V.get(k, j) - (f * e[k] + g * d[k]));\n        }\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n      }\n    }\n    d[i] = h;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    V.set(n - 1, i, V.get(i, i));\n    V.set(i, i, 1);\n    h = d[i + 1];\n    if (h !== 0) {\n      for (k = 0; k <= i; k++) {\n        d[k] = V.get(k, i + 1) / h;\n      }\n\n      for (j = 0; j <= i; j++) {\n        g = 0;\n        for (k = 0; k <= i; k++) {\n          g += V.get(k, i + 1) * V.get(k, j);\n        }\n        for (k = 0; k <= i; k++) {\n          V.set(k, j, V.get(k, j) - g * d[k]);\n        }\n      }\n    }\n\n    for (k = 0; k <= i; k++) {\n      V.set(k, i + 1, 0);\n    }\n  }\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n    V.set(n - 1, j, 0);\n  }\n\n  V.set(n - 1, n - 1, 1);\n  e[0] = 0;\n}\n\nfunction tql2(n, e, d, V) {\n  let g, h, i, j, k, l, m, p, r, dl1, c, c2, c3, el1, s, s2;\n\n  for (i = 1; i < n; i++) {\n    e[i - 1] = e[i];\n  }\n\n  e[n - 1] = 0;\n\n  let f = 0;\n  let tst1 = 0;\n  let eps = Number.EPSILON;\n\n  for (l = 0; l < n; l++) {\n    tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\n    m = l;\n    while (m < n) {\n      if (Math.abs(e[m]) <= eps * tst1) {\n        break;\n      }\n      m++;\n    }\n\n    if (m > l) {\n      do {\n\n        g = d[l];\n        p = (d[l + 1] - g) / (2 * e[l]);\n        r = hypotenuse(p, 1);\n        if (p < 0) {\n          r = -r;\n        }\n\n        d[l] = e[l] / (p + r);\n        d[l + 1] = e[l] * (p + r);\n        dl1 = d[l + 1];\n        h = g - d[l];\n        for (i = l + 2; i < n; i++) {\n          d[i] -= h;\n        }\n\n        f = f + h;\n\n        p = d[m];\n        c = 1;\n        c2 = c;\n        c3 = c;\n        el1 = e[l + 1];\n        s = 0;\n        s2 = 0;\n        for (i = m - 1; i >= l; i--) {\n          c3 = c2;\n          c2 = c;\n          s2 = s;\n          g = c * e[i];\n          h = c * p;\n          r = hypotenuse(p, e[i]);\n          e[i + 1] = s * r;\n          s = e[i] / r;\n          c = p / r;\n          p = c * d[i] - s * g;\n          d[i + 1] = h + s * (c * g + s * d[i]);\n\n          for (k = 0; k < n; k++) {\n            h = V.get(k, i + 1);\n            V.set(k, i + 1, s * V.get(k, i) + c * h);\n            V.set(k, i, c * V.get(k, i) - s * h);\n          }\n        }\n\n        p = (-s * s2 * c3 * el1 * e[l]) / dl1;\n        e[l] = s * p;\n        d[l] = c * p;\n      } while (Math.abs(e[l]) > eps * tst1);\n    }\n    d[l] = d[l] + f;\n    e[l] = 0;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    k = i;\n    p = d[i];\n    for (j = i + 1; j < n; j++) {\n      if (d[j] < p) {\n        k = j;\n        p = d[j];\n      }\n    }\n\n    if (k !== i) {\n      d[k] = d[i];\n      d[i] = p;\n      for (j = 0; j < n; j++) {\n        p = V.get(j, i);\n        V.set(j, i, V.get(j, k));\n        V.set(j, k, p);\n      }\n    }\n  }\n}\n\nfunction orthes(n, H, ort, V) {\n  let low = 0;\n  let high = n - 1;\n  let f, g, h, i, j, m;\n  let scale;\n\n  for (m = low + 1; m <= high - 1; m++) {\n    scale = 0;\n    for (i = m; i <= high; i++) {\n      scale = scale + Math.abs(H.get(i, m - 1));\n    }\n\n    if (scale !== 0) {\n      h = 0;\n      for (i = high; i >= m; i--) {\n        ort[i] = H.get(i, m - 1) / scale;\n        h += ort[i] * ort[i];\n      }\n\n      g = Math.sqrt(h);\n      if (ort[m] > 0) {\n        g = -g;\n      }\n\n      h = h - ort[m] * g;\n      ort[m] = ort[m] - g;\n\n      for (j = m; j < n; j++) {\n        f = 0;\n        for (i = high; i >= m; i--) {\n          f += ort[i] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (i = m; i <= high; i++) {\n          H.set(i, j, H.get(i, j) - f * ort[i]);\n        }\n      }\n\n      for (i = 0; i <= high; i++) {\n        f = 0;\n        for (j = high; j >= m; j--) {\n          f += ort[j] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (j = m; j <= high; j++) {\n          H.set(i, j, H.get(i, j) - f * ort[j]);\n        }\n      }\n\n      ort[m] = scale * ort[m];\n      H.set(m, m - 1, scale * g);\n    }\n  }\n\n  for (i = 0; i < n; i++) {\n    for (j = 0; j < n; j++) {\n      V.set(i, j, i === j ? 1 : 0);\n    }\n  }\n\n  for (m = high - 1; m >= low + 1; m--) {\n    if (H.get(m, m - 1) !== 0) {\n      for (i = m + 1; i <= high; i++) {\n        ort[i] = H.get(i, m - 1);\n      }\n\n      for (j = m; j <= high; j++) {\n        g = 0;\n        for (i = m; i <= high; i++) {\n          g += ort[i] * V.get(i, j);\n        }\n\n        g = g / ort[m] / H.get(m, m - 1);\n        for (i = m; i <= high; i++) {\n          V.set(i, j, V.get(i, j) + g * ort[i]);\n        }\n      }\n    }\n  }\n}\n\nfunction hqr2(nn, e, d, V, H) {\n  let n = nn - 1;\n  let low = 0;\n  let high = nn - 1;\n  let eps = Number.EPSILON;\n  let exshift = 0;\n  let norm = 0;\n  let p = 0;\n  let q = 0;\n  let r = 0;\n  let s = 0;\n  let z = 0;\n  let iter = 0;\n  let i, j, k, l, m, t, w, x, y;\n  let ra, sa, vr, vi;\n  let notlast, cdivres;\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      d[i] = H.get(i, i);\n      e[i] = 0;\n    }\n\n    for (j = Math.max(i - 1, 0); j < nn; j++) {\n      norm = norm + Math.abs(H.get(i, j));\n    }\n  }\n\n  while (n >= low) {\n    l = n;\n    while (l > low) {\n      s = Math.abs(H.get(l - 1, l - 1)) + Math.abs(H.get(l, l));\n      if (s === 0) {\n        s = norm;\n      }\n      if (Math.abs(H.get(l, l - 1)) < eps * s) {\n        break;\n      }\n      l--;\n    }\n\n    if (l === n) {\n      H.set(n, n, H.get(n, n) + exshift);\n      d[n] = H.get(n, n);\n      e[n] = 0;\n      n--;\n      iter = 0;\n    } else if (l === n - 1) {\n      w = H.get(n, n - 1) * H.get(n - 1, n);\n      p = (H.get(n - 1, n - 1) - H.get(n, n)) / 2;\n      q = p * p + w;\n      z = Math.sqrt(Math.abs(q));\n      H.set(n, n, H.get(n, n) + exshift);\n      H.set(n - 1, n - 1, H.get(n - 1, n - 1) + exshift);\n      x = H.get(n, n);\n\n      if (q >= 0) {\n        z = p >= 0 ? p + z : p - z;\n        d[n - 1] = x + z;\n        d[n] = d[n - 1];\n        if (z !== 0) {\n          d[n] = x - w / z;\n        }\n        e[n - 1] = 0;\n        e[n] = 0;\n        x = H.get(n, n - 1);\n        s = Math.abs(x) + Math.abs(z);\n        p = x / s;\n        q = z / s;\n        r = Math.sqrt(p * p + q * q);\n        p = p / r;\n        q = q / r;\n\n        for (j = n - 1; j < nn; j++) {\n          z = H.get(n - 1, j);\n          H.set(n - 1, j, q * z + p * H.get(n, j));\n          H.set(n, j, q * H.get(n, j) - p * z);\n        }\n\n        for (i = 0; i <= n; i++) {\n          z = H.get(i, n - 1);\n          H.set(i, n - 1, q * z + p * H.get(i, n));\n          H.set(i, n, q * H.get(i, n) - p * z);\n        }\n\n        for (i = low; i <= high; i++) {\n          z = V.get(i, n - 1);\n          V.set(i, n - 1, q * z + p * V.get(i, n));\n          V.set(i, n, q * V.get(i, n) - p * z);\n        }\n      } else {\n        d[n - 1] = x + p;\n        d[n] = x + p;\n        e[n - 1] = z;\n        e[n] = -z;\n      }\n\n      n = n - 2;\n      iter = 0;\n    } else {\n      x = H.get(n, n);\n      y = 0;\n      w = 0;\n      if (l < n) {\n        y = H.get(n - 1, n - 1);\n        w = H.get(n, n - 1) * H.get(n - 1, n);\n      }\n\n      if (iter === 10) {\n        exshift += x;\n        for (i = low; i <= n; i++) {\n          H.set(i, i, H.get(i, i) - x);\n        }\n        s = Math.abs(H.get(n, n - 1)) + Math.abs(H.get(n - 1, n - 2));\n        // eslint-disable-next-line no-multi-assign\n        x = y = 0.75 * s;\n        w = -0.4375 * s * s;\n      }\n\n      if (iter === 30) {\n        s = (y - x) / 2;\n        s = s * s + w;\n        if (s > 0) {\n          s = Math.sqrt(s);\n          if (y < x) {\n            s = -s;\n          }\n          s = x - w / ((y - x) / 2 + s);\n          for (i = low; i <= n; i++) {\n            H.set(i, i, H.get(i, i) - s);\n          }\n          exshift += s;\n          // eslint-disable-next-line no-multi-assign\n          x = y = w = 0.964;\n        }\n      }\n\n      iter = iter + 1;\n\n      m = n - 2;\n      while (m >= l) {\n        z = H.get(m, m);\n        r = x - z;\n        s = y - z;\n        p = (r * s - w) / H.get(m + 1, m) + H.get(m, m + 1);\n        q = H.get(m + 1, m + 1) - z - r - s;\n        r = H.get(m + 2, m + 1);\n        s = Math.abs(p) + Math.abs(q) + Math.abs(r);\n        p = p / s;\n        q = q / s;\n        r = r / s;\n        if (m === l) {\n          break;\n        }\n        if (\n          Math.abs(H.get(m, m - 1)) * (Math.abs(q) + Math.abs(r)) <\n          eps *\n            (Math.abs(p) *\n              (Math.abs(H.get(m - 1, m - 1)) +\n                Math.abs(z) +\n                Math.abs(H.get(m + 1, m + 1))))\n        ) {\n          break;\n        }\n        m--;\n      }\n\n      for (i = m + 2; i <= n; i++) {\n        H.set(i, i - 2, 0);\n        if (i > m + 2) {\n          H.set(i, i - 3, 0);\n        }\n      }\n\n      for (k = m; k <= n - 1; k++) {\n        notlast = k !== n - 1;\n        if (k !== m) {\n          p = H.get(k, k - 1);\n          q = H.get(k + 1, k - 1);\n          r = notlast ? H.get(k + 2, k - 1) : 0;\n          x = Math.abs(p) + Math.abs(q) + Math.abs(r);\n          if (x !== 0) {\n            p = p / x;\n            q = q / x;\n            r = r / x;\n          }\n        }\n\n        if (x === 0) {\n          break;\n        }\n\n        s = Math.sqrt(p * p + q * q + r * r);\n        if (p < 0) {\n          s = -s;\n        }\n\n        if (s !== 0) {\n          if (k !== m) {\n            H.set(k, k - 1, -s * x);\n          } else if (l !== m) {\n            H.set(k, k - 1, -H.get(k, k - 1));\n          }\n\n          p = p + s;\n          x = p / s;\n          y = q / s;\n          z = r / s;\n          q = q / p;\n          r = r / p;\n\n          for (j = k; j < nn; j++) {\n            p = H.get(k, j) + q * H.get(k + 1, j);\n            if (notlast) {\n              p = p + r * H.get(k + 2, j);\n              H.set(k + 2, j, H.get(k + 2, j) - p * z);\n            }\n\n            H.set(k, j, H.get(k, j) - p * x);\n            H.set(k + 1, j, H.get(k + 1, j) - p * y);\n          }\n\n          for (i = 0; i <= Math.min(n, k + 3); i++) {\n            p = x * H.get(i, k) + y * H.get(i, k + 1);\n            if (notlast) {\n              p = p + z * H.get(i, k + 2);\n              H.set(i, k + 2, H.get(i, k + 2) - p * r);\n            }\n\n            H.set(i, k, H.get(i, k) - p);\n            H.set(i, k + 1, H.get(i, k + 1) - p * q);\n          }\n\n          for (i = low; i <= high; i++) {\n            p = x * V.get(i, k) + y * V.get(i, k + 1);\n            if (notlast) {\n              p = p + z * V.get(i, k + 2);\n              V.set(i, k + 2, V.get(i, k + 2) - p * r);\n            }\n\n            V.set(i, k, V.get(i, k) - p);\n            V.set(i, k + 1, V.get(i, k + 1) - p * q);\n          }\n        }\n      }\n    }\n  }\n\n  if (norm === 0) {\n    return;\n  }\n\n  for (n = nn - 1; n >= 0; n--) {\n    p = d[n];\n    q = e[n];\n\n    if (q === 0) {\n      l = n;\n      H.set(n, n, 1);\n      for (i = n - 1; i >= 0; i--) {\n        w = H.get(i, i) - p;\n        r = 0;\n        for (j = l; j <= n; j++) {\n          r = r + H.get(i, j) * H.get(j, n);\n        }\n\n        if (e[i] < 0) {\n          z = w;\n          s = r;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            H.set(i, n, w !== 0 ? -r / w : -r / (eps * norm));\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\n            t = (x * s - z * r) / q;\n            H.set(i, n, t);\n            H.set(\n              i + 1,\n              n,\n              Math.abs(x) > Math.abs(z) ? (-r - w * t) / x : (-s - y * t) / z,\n            );\n          }\n\n          t = Math.abs(H.get(i, n));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    } else if (q < 0) {\n      l = n - 1;\n\n      if (Math.abs(H.get(n, n - 1)) > Math.abs(H.get(n - 1, n))) {\n        H.set(n - 1, n - 1, q / H.get(n, n - 1));\n        H.set(n - 1, n, -(H.get(n, n) - p) / H.get(n, n - 1));\n      } else {\n        cdivres = cdiv(0, -H.get(n - 1, n), H.get(n - 1, n - 1) - p, q);\n        H.set(n - 1, n - 1, cdivres[0]);\n        H.set(n - 1, n, cdivres[1]);\n      }\n\n      H.set(n, n - 1, 0);\n      H.set(n, n, 1);\n      for (i = n - 2; i >= 0; i--) {\n        ra = 0;\n        sa = 0;\n        for (j = l; j <= n; j++) {\n          ra = ra + H.get(i, j) * H.get(j, n - 1);\n          sa = sa + H.get(i, j) * H.get(j, n);\n        }\n\n        w = H.get(i, i) - p;\n\n        if (e[i] < 0) {\n          z = w;\n          r = ra;\n          s = sa;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            cdivres = cdiv(-ra, -sa, w, q);\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\n            vi = (d[i] - p) * 2 * q;\n            if (vr === 0 && vi === 0) {\n              vr =\n                eps *\n                norm *\n                (Math.abs(w) +\n                  Math.abs(q) +\n                  Math.abs(x) +\n                  Math.abs(y) +\n                  Math.abs(z));\n            }\n            cdivres = cdiv(\n              x * r - z * ra + q * sa,\n              x * s - z * sa - q * ra,\n              vr,\n              vi,\n            );\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n            if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {\n              H.set(\n                i + 1,\n                n - 1,\n                (-ra - w * H.get(i, n - 1) + q * H.get(i, n)) / x,\n              );\n              H.set(\n                i + 1,\n                n,\n                (-sa - w * H.get(i, n) - q * H.get(i, n - 1)) / x,\n              );\n            } else {\n              cdivres = cdiv(\n                -r - y * H.get(i, n - 1),\n                -s - y * H.get(i, n),\n                z,\n                q,\n              );\n              H.set(i + 1, n - 1, cdivres[0]);\n              H.set(i + 1, n, cdivres[1]);\n            }\n          }\n\n          t = Math.max(Math.abs(H.get(i, n - 1)), Math.abs(H.get(i, n)));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n - 1, H.get(j, n - 1) / t);\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      for (j = i; j < nn; j++) {\n        V.set(i, j, H.get(i, j));\n      }\n    }\n  }\n\n  for (j = nn - 1; j >= low; j--) {\n    for (i = low; i <= high; i++) {\n      z = 0;\n      for (k = low; k <= Math.min(j, high); k++) {\n        z = z + V.get(i, k) * H.get(k, j);\n      }\n      V.set(i, j, z);\n    }\n  }\n}\n\nfunction cdiv(xr, xi, yr, yi) {\n  let r, d;\n  if (Math.abs(yr) > Math.abs(yi)) {\n    r = yi / yr;\n    d = yr + r * yi;\n    return [(xr + r * xi) / d, (xi - r * xr) / d];\n  } else {\n    r = yr / yi;\n    d = yi + r * yr;\n    return [(r * xr + xi) / d, (r * xi - xr) / d];\n  }\n}\n\nclass CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    let a = value;\n    let dimension = a.rows;\n    let l = new Matrix(dimension, dimension);\n    let positiveDefinite = true;\n    let i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      let d = 0;\n      for (k = 0; k < j; k++) {\n        let s = 0;\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n\n      positiveDefinite &&= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    this.L = l;\n    this.positiveDefinite = positiveDefinite;\n  }\n\n  isPositiveDefinite() {\n    return this.positiveDefinite;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let l = this.L;\n    let dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n    if (this.isPositiveDefinite() === false) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    let count = value.columns;\n    let B = value.clone();\n    let i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n}\n\nclass nipals {\n  constructor(X, options = {}) {\n    X = WrapperMatrix2D.checkMatrix(X);\n    let { Y } = options;\n    const {\n      scaleScores = false,\n      maxIterations = 1000,\n      terminationCriteria = 1e-10,\n    } = options;\n\n    let u;\n    if (Y) {\n      if (isAnyArray.isAnyArray(Y) && typeof Y[0] === 'number') {\n        Y = Matrix.columnVector(Y);\n      } else {\n        Y = WrapperMatrix2D.checkMatrix(Y);\n      }\n      if (Y.rows !== X.rows) {\n        throw new Error('Y should have the same number of rows as X');\n      }\n      u = Y.getColumnVector(0);\n    } else {\n      u = X.getColumnVector(0);\n    }\n\n    let diff = 1;\n    let t, q, w, tOld;\n\n    for (\n      let counter = 0;\n      counter < maxIterations && diff > terminationCriteria;\n      counter++\n    ) {\n      w = X.transpose().mmul(u).div(u.transpose().mmul(u).get(0, 0));\n      w = w.div(w.norm());\n\n      t = X.mmul(w).div(w.transpose().mmul(w).get(0, 0));\n\n      if (counter > 0) {\n        diff = t.clone().sub(tOld).pow(2).sum();\n      }\n      tOld = t.clone();\n\n      if (Y) {\n        q = Y.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n        q = q.div(q.norm());\n\n        u = Y.mmul(q).div(q.transpose().mmul(q).get(0, 0));\n      } else {\n        u = t;\n      }\n    }\n\n    if (Y) {\n      let p = X.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n      p = p.div(p.norm());\n      let xResidual = X.clone().sub(t.clone().mmul(p.transpose()));\n      let residual = u.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n      let yResidual = Y.clone().sub(\n        t.clone().mulS(residual.get(0, 0)).mmul(q.transpose()),\n      );\n\n      this.t = t;\n      this.p = p.transpose();\n      this.w = w.transpose();\n      this.q = q;\n      this.u = u;\n      this.s = t.transpose().mmul(t);\n      this.xResidual = xResidual;\n      this.yResidual = yResidual;\n      this.betas = residual;\n    } else {\n      this.w = w.transpose();\n      this.s = t.transpose().mmul(t).sqrt();\n      if (scaleScores) {\n        this.t = t.clone().div(this.s.get(0, 0));\n      } else {\n        this.t = t;\n      }\n      this.xResidual = X.sub(t.mmul(w.transpose()));\n    }\n  }\n}\n\nexports.AbstractMatrix = AbstractMatrix;\nexports.CHO = CholeskyDecomposition;\nexports.CholeskyDecomposition = CholeskyDecomposition;\nexports.DistanceMatrix = DistanceMatrix;\nexports.EVD = EigenvalueDecomposition;\nexports.EigenvalueDecomposition = EigenvalueDecomposition;\nexports.LU = LuDecomposition;\nexports.LuDecomposition = LuDecomposition;\nexports.Matrix = Matrix;\nexports.MatrixColumnSelectionView = MatrixColumnSelectionView;\nexports.MatrixColumnView = MatrixColumnView;\nexports.MatrixFlipColumnView = MatrixFlipColumnView;\nexports.MatrixFlipRowView = MatrixFlipRowView;\nexports.MatrixRowSelectionView = MatrixRowSelectionView;\nexports.MatrixRowView = MatrixRowView;\nexports.MatrixSelectionView = MatrixSelectionView;\nexports.MatrixSubView = MatrixSubView;\nexports.MatrixTransposeView = MatrixTransposeView;\nexports.NIPALS = nipals;\nexports.Nipals = nipals;\nexports.QR = QrDecomposition;\nexports.QrDecomposition = QrDecomposition;\nexports.SVD = SingularValueDecomposition;\nexports.SingularValueDecomposition = SingularValueDecomposition;\nexports.SymmetricMatrix = SymmetricMatrix;\nexports.WrapperMatrix1D = WrapperMatrix1D;\nexports.WrapperMatrix2D = WrapperMatrix2D;\nexports.correlation = correlation;\nexports.covariance = covariance;\nexports.default = Matrix;\nexports.determinant = determinant;\nexports.inverse = inverse;\nexports.linearDependencies = linearDependencies;\nexports.pseudoInverse = pseudoInverse;\nexports.solve = solve;\nexports.wrap = wrap;\n", "/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * @type {boolean}\n     */\n    this.defaultPrevented;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n   * will be fired.\n   * @api\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n", "/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange',\n};\n\n/**\n * @typedef {'propertychange'} Types\n */\n", "/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n", "/**\n * @module ol/array\n */\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, comparator) {\n  let mid, cmp;\n  comparator = comparator || ascending;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + ((high - low) >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) {\n      /* Too low. */\n      low = mid + 1;\n    } else {\n      /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n/**\n * Compare function sorting arrays in ascending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function ascending(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n/**\n * Compare function sorting arrays in descending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is greater than, equal to, or less than the second.\n */\nexport function descending(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  if (arr[0] <= target) {\n    return 0;\n  }\n\n  const n = arr.length;\n  if (target <= arr[n - 1]) {\n    return n - 1;\n  }\n\n  if (typeof direction === 'function') {\n    for (let i = 1; i < n; ++i) {\n      const candidate = arr[i];\n      if (candidate === target) {\n        return i;\n      }\n      if (candidate < target) {\n        if (direction(target, arr[i - 1], candidate) > 0) {\n          return i - 1;\n        }\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction > 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] < target) {\n        return i - 1;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction < 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] <= target) {\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  for (let i = 1; i < n; ++i) {\n    if (arr[i] == target) {\n      return i;\n    }\n    if (arr[i] < target) {\n      if (arr[i - 1] - target < target - arr[i]) {\n        return i - 1;\n      }\n      return i;\n    }\n  }\n  return n - 1;\n}\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n/**\n * @param {Array<any>|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array<any>|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function (a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [func] Comparison function.\n * @param {boolean} [strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, func, strict) {\n  const compare = func || ascending;\n  return arr.every(function (currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || (strict && res === 0));\n  });\n}\n", "/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type {ReturnType} */\n  let lastResult;\n\n  /** @type {Array<any>} */\n  let lastArgs;\n\n  let lastThis;\n\n  return function () {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n  function promiseGetter() {\n    let value;\n    try {\n      value = getter();\n    } catch (err) {\n      return Promise.reject(err);\n    }\n    if (value instanceof Promise) {\n      return value;\n    }\n    return Promise.resolve(value);\n  }\n  return promiseGetter();\n}\n", "/**\n * @module ol/obj\n */\n\n/**\n * Removes all properties from an object.\n * @param {Object<string, unknown>} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n", "/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport {VOID} from '../functions.js';\nimport {clear} from '../obj.js';\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  /**\n   * @param {*} [target] Default event target for dispatched events.\n   */\n  constructor(target) {\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.eventTarget_ = target;\n\n    /**\n     * @private\n     * @type {Object<string, number>|null}\n     */\n    this.pendingRemovals_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, number>|null}\n     */\n    this.dispatching_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").Listener>>|null}\n     */\n    this.listeners_ = null;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    const listeners = this.listeners_ || (this.listeners_ = {});\n    const listenersForType = listeners[type] || (listeners[type] = []);\n    if (!listenersForType.includes(listener)) {\n      listenersForType.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const isString = typeof event === 'string';\n    const type = isString ? event : event.type;\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n\n    const evt = isString ? new Event(event) : /** @type {Event} */ (event);\n    if (!evt.target) {\n      evt.target = this.eventTarget_ || this;\n    }\n    const dispatching = this.dispatching_ || (this.dispatching_ = {});\n    const pendingRemovals =\n      this.pendingRemovals_ || (this.pendingRemovals_ = {});\n    if (!(type in dispatching)) {\n      dispatching[type] = 0;\n      pendingRemovals[type] = 0;\n    }\n    ++dispatching[type];\n    let propagate;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if ('handleEvent' in listeners[i]) {\n        propagate = /** @type {import(\"../events.js\").ListenerObject} */ (\n          listeners[i]\n        ).handleEvent(evt);\n      } else {\n        propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (\n          listeners[i]\n        ).call(this, evt);\n      }\n      if (propagate === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    if (--dispatching[type] === 0) {\n      let pr = pendingRemovals[type];\n      delete pendingRemovals[type];\n      while (pr--) {\n        this.removeEventListener(type, VOID);\n      }\n      delete dispatching[type];\n    }\n    return propagate;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.listeners_ && clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n   */\n  getListeners(type) {\n    return (this.listeners_ && this.listeners_[type]) || undefined;\n  }\n\n  /**\n   * @param {string} [type] Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(type) {\n    if (!this.listeners_) {\n      return false;\n    }\n    return type\n      ? type in this.listeners_\n      : Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    if (!this.listeners_) {\n      return;\n    }\n    const listeners = this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n      if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n        // make listener a no-op, and remove later in #dispatchEvent()\n        listeners[index] = VOID;\n        ++this.pendingRemovals_[type];\n      } else {\n        listeners.splice(index, 1);\n        if (listeners.length === 0) {\n          delete this.listeners_[type];\n        }\n      }\n    }\n  }\n}\n\nexport default Target;\n", "/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~BaseEvent#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~BaseEvent#error\n   * @api\n   */\n  ERROR: 'error',\n\n  BLUR: 'blur',\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  FOCUS: 'focus',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  TOUCHMOVE: 'touchmove',\n  WHEEL: 'wheel',\n};\n", "/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  if (once) {\n    const originalListener = listener;\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n", "/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {listen, listenOnce, unlistenByKey} from './events.js';\n\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n    super();\n\n    this.on =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onInternal\n      );\n\n    this.once =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onceInternal\n      );\n\n    this.un = /** @type {ObservableOnSignature<void>} */ (this.unInternal);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onInternal(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    }\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onceInternal(type, listener) {\n    let key;\n    if (Array.isArray(type)) {\n      const len = type.length;\n      key = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        key[i] = listenOnce(this, type[i], listener);\n      }\n    } else {\n      key = listenOnce(this, /** @type {string} */ (type), listener);\n    }\n    /** @type {Object} */ (listener).ol_key = key;\n    return key;\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @protected\n   */\n  unInternal(type, listener) {\n    const key = /** @type {Object} */ (listener).ol_key;\n    if (key) {\n      unByKey(key);\n    } else if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\nexport default Observable;\n", "/**\n * @module ol/util\n */\n\n/**\n * @return {never} Any return.\n */\nexport function abstract() {\n  throw new Error('Unimplemented abstract method.');\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '8.2.0';\n", "/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport {getUid} from './util.js';\nimport {isEmpty} from './obj.js';\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n  /**\n   * @param {Object<string, *>} [values] An object with key-value pairs.\n   */\n  constructor(values) {\n    super();\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ObjectOnSignature<void>}\n     */\n    this.un;\n\n    // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {Object<string, *>|null}\n     */\n    this.values_ = null;\n\n    if (values !== undefined) {\n      this.setProperties(values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_ && this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return (this.values_ && Object.keys(this.values_)) || [];\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return (this.values_ && Object.assign({}, this.values_)) || {};\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>?} Object.\n   */\n  getPropertiesInternal() {\n    return this.values_;\n  }\n\n  /**\n   * @return {boolean} The object has properties.\n   */\n  hasProperties() {\n    return !!this.values_;\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = `change:${key}`;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  addChangeListener(key, listener) {\n    this.addEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  removeChangeListener(key, listener) {\n    this.removeEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  set(key, value, silent) {\n    const values = this.values_ || (this.values_ = {});\n    if (silent) {\n      values[key] = value;\n    } else {\n      const oldValue = values[key];\n      values[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  setProperties(values, silent) {\n    for (const key in values) {\n      this.set(key, values[key], silent);\n    }\n  }\n\n  /**\n   * Apply any properties from another object without triggering events.\n   * @param {BaseObject} source The source object.\n   * @protected\n   */\n  applyProperties(source) {\n    if (!source.values_) {\n      return;\n    }\n    Object.assign(this.values_ || (this.values_ = {}), source.values_);\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean} [silent] Unset without triggering an event.\n   * @api\n   */\n  unset(key, silent) {\n    if (this.values_ && key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (isEmpty(this.values_)) {\n        this.values_ = null;\n      }\n      if (!silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\nexport default BaseObject;\n", "/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  MAX_ZOOM: 'maxZoom',\n  MIN_ZOOM: 'minZoom',\n  SOURCE: 'source',\n  MAP: 'map',\n};\n", "/**\n * @module ol/asserts\n */\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {string} errorMessage Error message.\n */\nexport function assert(assertion, errorMessage) {\n  if (!assertion) {\n    throw new Error(errorMessage);\n  }\n}\n", "/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>|null} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return (angleInRadians * 180) / Math.PI;\n}\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return (angleInDegrees * Math.PI) / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n  const factor = Math.pow(10, decimals);\n  return Math.round(n * factor) / factor;\n}\n\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n  return Math.round(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n  return Math.floor(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n  return Math.ceil(toFixed(n, decimals));\n}\n", "/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {abstract} from '../util.js';\nimport {assert} from '../asserts.js';\nimport {clamp} from '../math.js';\n\n/**\n * A css color, or a function called with a view resolution returning a css color.\n *\n * @typedef {string|function(number):string} BackgroundColor\n * @api\n */\n\n/**\n * @typedef {import(\"../ObjectEventType\").Types|'change:extent'|'change:maxResolution'|'change:maxZoom'|\n *    'change:minResolution'|'change:minZoom'|'change:opacity'|'change:visible'|'change:zIndex'} BaseLayerObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<BaseLayerObjectEventTypes, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|BaseLayerObjectEventTypes, Return>} BaseLayerOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number | undefined} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base~BaseLayer} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object~BaseObject} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {BaseLayerOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @type {BackgroundColor|false}\n     * @private\n     */\n    this.background_ = options.background;\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = Object.assign({}, options);\n    if (typeof options.properties === 'object') {\n      delete properties.properties;\n      Object.assign(properties, options.properties);\n    }\n\n    properties[LayerProperty.OPACITY] =\n      options.opacity !== undefined ? options.opacity : 1;\n    assert(\n      typeof properties[LayerProperty.OPACITY] === 'number',\n      'Layer opacity must be a number'\n    );\n\n    properties[LayerProperty.VISIBLE] =\n      options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n      options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n      options.minResolution !== undefined ? options.minResolution : 0;\n    properties[LayerProperty.MIN_ZOOM] =\n      options.minZoom !== undefined ? options.minZoom : -Infinity;\n    properties[LayerProperty.MAX_ZOOM] =\n      options.maxZoom !== undefined ? options.maxZoom : Infinity;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.className_ =\n      properties.className !== undefined ? properties.className : 'ol-layer';\n    delete properties.className;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n  }\n\n  /**\n   * Get the background for this layer.\n   * @return {BackgroundColor|false} Layer background.\n   */\n  getBackground() {\n    return this.background_;\n  }\n\n  /**\n   * @return {string} CSS class name.\n   */\n  getClassName() {\n    return this.className_;\n  }\n\n  /**\n   * This method is not meant to be called by layers or layer renderers because the state\n   * is incorrect if the layer is included in a layer group.\n   *\n   * @param {boolean} [managed] Layer is managed.\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  getLayerState(managed) {\n    /** @type {import(\"./Layer.js\").State} */\n    const state =\n      this.state_ ||\n      /** @type {?} */ ({\n        layer: this,\n        managed: managed === undefined ? true : managed,\n      });\n    const zIndex = this.getZIndex();\n    state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = zIndex === undefined && !state.managed ? Infinity : zIndex;\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    state.minZoom = this.getMinZoom();\n    state.maxZoom = this.getMaxZoom();\n    this.state_ = state;\n\n    return state;\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>} [array] Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(array) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>} [states] Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(states) {\n    return abstract();\n  }\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  getExtent() {\n    return /** @type {import(\"../extent.js\").Extent|undefined} */ (\n      this.get(LayerProperty.EXTENT)\n    );\n  }\n\n  /**\n   * Return the maximum resolution of the layer. Returns Infinity if\n   * the layer has no maximum resolution set.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum resolution of the layer. Returns 0 if\n   * the layer has no minimum resolution set.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum zoom level of the layer. Returns -Infinity if\n   * the layer has no minimum zoom set.\n   * @return {number} The minimum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n  }\n\n  /**\n   * Return the maximum zoom level of the layer. Returns Infinity if\n   * the layer has no maximum zoom set.\n   * @return {number} The maximum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n  }\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../source/Source.js\").State} Source state.\n   */\n  getSourceState() {\n    return abstract();\n  }\n\n  /**\n   * Return the value of this layer's `visible` property. To find out whether the layer\n   * is visible on a map, use `isVisible()` instead.\n   * @return {boolean} The value of the `visible` property of the layer.\n   * @observable\n   * @api\n   */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. Returns undefined if the layer is unmanaged.\n   * @return {number|undefined} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  getZIndex() {\n    return /** @type {number|undefined} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n   * Sets the background color.\n   * @param {BackgroundColor} [background] Background color.\n   */\n  setBackground(background) {\n    this.background_ = background;\n    this.changed();\n  }\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n   * Set the maximum zoom (exclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} maxZoom The maximum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMaxZoom(maxZoom) {\n    this.set(LayerProperty.MAX_ZOOM, maxZoom);\n  }\n\n  /**\n   * Set the minimum zoom (inclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} minZoom The minimum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMinZoom(minZoom) {\n    this.set(LayerProperty.MIN_ZOOM, minZoom);\n  }\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  setOpacity(opacity) {\n    assert(typeof opacity === 'number', 'Layer opacity must be a number');\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.state_) {\n      this.state_.layer = null;\n      this.state_ = null;\n    }\n    super.disposeInternal();\n  }\n}\n\nexport default BaseLayer;\n", "/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered before a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#prerender\n   * @api\n   */\n  PRERENDER: 'prerender',\n\n  /**\n   * Triggered after a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered before layers are composed.  When dispatched by the map, the event object will not have\n   * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n   * WebGL layers currently dispatch this event.\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n\n  /**\n   * Triggered after layers are composed.  When dispatched by the map, the event object will not have\n   * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n   * WebGL layers currently dispatch this event.\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * The event object will not have a `context` set.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete',\n};\n\n/**\n * @typedef {'postrender'|'precompose'|'postcompose'|'rendercomplete'} MapRenderEventTypes\n */\n\n/**\n * @typedef {'postrender'|'prerender'} LayerRenderEventTypes\n */\n", "/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1,\n};\n", "/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation',\n};\n", "/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n", "/**\n * @module ol/proj/Units\n */\n\n/**\n * @typedef {'radians' | 'degrees' | 'ft' | 'm' | 'pixels' | 'tile-pixels' | 'us-ft'} Units\n * Projection units.\n */\n\n/**\n * See http://duff.ess.washington.edu/data/raster/drg/docs/geotiff.txt\n * @type {Object<number, Units>}\n */\nconst unitByCode = {\n  '9001': 'm',\n  '9002': 'ft',\n  '9003': 'us-ft',\n  '9101': 'radians',\n  '9102': 'degrees',\n};\n\n/**\n * @param {number} code Unit code.\n * @return {Units} Units.\n */\nexport function fromCode(code) {\n  return unitByCode[code];\n}\n\n/**\n * @typedef {Object} MetersPerUnitLookup\n * @property {number} radians Radians\n * @property {number} degrees Degrees\n * @property {number} ft  Feet\n * @property {number} m Meters\n * @property {number} us-ft US feet\n */\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {MetersPerUnitLookup}\n * @api\n */\nexport const METERS_PER_UNIT = {\n  // use the radius of the Normal sphere\n  'radians': 6370997 / (2 * Math.PI),\n  'degrees': (2 * Math.PI * 6370997) / 360,\n  'ft': 0.3048,\n  'm': 1,\n  'us-ft': 1200 / 3937,\n};\n", "/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").Units} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `number` view resolution and a {@link module:ol/coordinate~Coordinate} as arguments, and returns\n * the `number` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj.getPointResolution} function will be used.\n */\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4.register} function.\n *\n * @api\n */\nclass Projection {\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").Units}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").Units} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ =\n      options.worldExtent !== undefined ? options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ =\n      options.axisOrientation !== undefined ? options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").Units} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj.getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n", "/**\n * @module ol/proj/epsg3857\n */\nimport Projection from './Projection.js';\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-HALF_SIZE, -HALF_SIZE, HALF_SIZE, HALF_SIZE];\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n/**\n * Maximum safe value in y direction\n * @const\n * @type {number}\n */\nexport const MAX_SAFE_Y = RADIUS * Math.log(Math.tan(Math.PI / 2));\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: 'm',\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function (resolution, point) {\n        return resolution / Math.cosh(point[1] / RADIUS);\n      },\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('http://www.opengis.net/def/crs/EPSG/0/3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857'),\n];\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (HALF_SIZE * input[i]) / 180;\n    let y = RADIUS * Math.log(Math.tan((Math.PI * (+input[i + 1] + 90)) / 360));\n    if (y > MAX_SAFE_Y) {\n      y = MAX_SAFE_Y;\n    } else if (y < -MAX_SAFE_Y) {\n      y = -MAX_SAFE_Y;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (180 * input[i]) / HALF_SIZE;\n    output[i + 1] =\n      (360 * Math.atan(Math.exp(input[i + 1] / RADIUS))) / Math.PI - 90;\n  }\n  return output;\n}\n", "/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = (Math.PI * RADIUS) / 180;\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   * @param {string} [axisOrientation] Axis orientation.\n   */\n  constructor(code, axisOrientation) {\n    super({\n      code: code,\n      units: 'degrees',\n      extent: EXTENT,\n      axisOrientation: axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT,\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/OGC/1.3/CRS84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu'),\n];\n", "/**\n * @module ol/proj/projections\n */\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return (\n    cache[code] ||\n    cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\\w+)$/, 'EPSG:$3')] ||\n    null\n  );\n}\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n", "/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n", "/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16,\n};\n", "/**\n * @module ol/extent\n */\nimport Relationship from './extent/Relationship.js';\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Extent corner.\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} Corner\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [dest] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, dest) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, dest);\n}\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, dest) {\n  if (dest) {\n    dest[0] = extent[0] - value;\n    dest[1] = extent[1] - value;\n    dest[2] = extent[2] + value;\n    dest[3] = extent[3] + value;\n    return dest;\n  }\n  return [\n    extent[0] - value,\n    extent[1] - value,\n    extent[2] + value,\n    extent[3] + value,\n  ];\n}\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [dest] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent.slice();\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[0] &&\n    extent2[2] <= extent1[2] &&\n    extent1[1] <= extent2[1] &&\n    extent2[3] <= extent1[3]\n  );\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, dest) {\n  if (dest) {\n    dest[0] = minX;\n    dest[1] = minY;\n    dest[2] = maxX;\n    dest[3] = maxY;\n    return dest;\n  }\n  return [minX, minY, maxX, maxY];\n}\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(dest) {\n  return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, dest);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, dest) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, dest);\n}\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendCoordinates(extent, coordinates);\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  dest\n) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendRings(extent, rings);\n}\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return (\n    extent1[0] == extent2[0] &&\n    extent1[2] == extent2[2] &&\n    extent1[1] == extent2[1] &&\n    extent1[3] == extent2[3]\n  );\n}\n\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n  return (\n    Math.abs(extent1[0] - extent2[0]) < tolerance &&\n    Math.abs(extent1[2] - extent2[2]) < tolerance &&\n    Math.abs(extent1[1] - extent2[1]) < tolerance &&\n    Math.abs(extent1[3] - extent2[3]) < tolerance\n  );\n}\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(\n  extent,\n  flatCoordinates,\n  offset,\n  end,\n  stride\n) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n  let val;\n  val = callback(getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === 'bottom-left') {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === 'bottom-right') {\n    coordinate = getBottomRight(extent);\n  } else if (corner === 'top-left') {\n    coordinate = getTopLeft(extent);\n  } else if (corner === 'top-right') {\n    coordinate = getTopRight(extent);\n  } else {\n    throw new Error('Invalid corner');\n  }\n  return coordinate;\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, dest) {\n  const [x0, y0, x1, y1, x2, y2, x3, y3] = getRotatedViewport(\n    center,\n    resolution,\n    rotation,\n    size\n  );\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3),\n    Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3),\n    Math.max(y0, y1, y2, y3),\n    dest\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @return {Array<number>} Linear ring representing the viewport.\n */\nexport function getRotatedViewport(center, resolution, rotation, size) {\n  const dx = (resolution * size[0]) / 2;\n  const dy = (resolution * size[1]) / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  return [\n    x - xCos + ySin,\n    y - xSin - yCos,\n    x - xCos - ySin,\n    y - xSin + yCos,\n    x + xCos - ySin,\n    y + xSin + yCos,\n    x + xCos + ySin,\n    y + xSin - yCos,\n    x - xCos + ySin,\n    y - xSin - yCos,\n  ];\n}\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [dest] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, dest) {\n  const intersection = dest ? dest : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n  );\n}\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (\n    startRel === Relationship.INTERSECTING ||\n    endRel === Relationship.INTERSECTING\n  ) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - (endY - maxY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.RIGHT) &&\n      !(startRel & Relationship.RIGHT)\n    ) {\n      // potentially intersects right\n      y = endY - (endX - maxX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.BELOW) &&\n      !(startRel & Relationship.BELOW)\n    ) {\n      // potentially intersects bottom\n      x = endX - (endY - minY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.LEFT) &&\n      !(startRel & Relationship.LEFT)\n    ) {\n      // potentially intersects left\n      y = endY - (endX - minX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n  }\n  return intersects;\n}\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [dest] Destination extent.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, dest, stops) {\n  if (isEmpty(extent)) {\n    return createOrUpdateEmpty(dest);\n  }\n  let coordinates = [];\n  if (stops > 1) {\n    const width = extent[2] - extent[0];\n    const height = extent[3] - extent[1];\n    for (let i = 0; i < stops; ++i) {\n      coordinates.push(\n        extent[0] + (width * i) / stops,\n        extent[1],\n        extent[2],\n        extent[1] + (height * i) / stops,\n        extent[2] - (width * i) / stops,\n        extent[3],\n        extent[0],\n        extent[3] - (height * i) / stops\n      );\n    }\n  } else {\n    coordinates = [\n      extent[0],\n      extent[1],\n      extent[2],\n      extent[1],\n      extent[2],\n      extent[3],\n      extent[0],\n      extent[3],\n    ];\n  }\n  transformFn(coordinates, coordinates, 2);\n  const xs = [];\n  const ys = [];\n  for (let i = 0, l = coordinates.length; i < l; i += 2) {\n    xs.push(coordinates[i]);\n    ys.push(coordinates[i + 1]);\n  }\n  return _boundingExtentXYs(xs, ys, dest);\n}\n\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n  const projectionExtent = projection.getExtent();\n  const center = getCenter(extent);\n  if (\n    projection.canWrapX() &&\n    (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])\n  ) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.floor(\n      (center[0] - projectionExtent[0]) / worldWidth\n    );\n    const offset = worldsAway * worldWidth;\n    extent[0] -= offset;\n    extent[2] -= offset;\n  }\n  return extent;\n}\n\n/**\n * Fits the extent to the real world\n *\n * If the extent does not cross the anti meridian, this will return the extent in an array\n * If the extent crosses the anti meridian, the extent will be sliced, so each part fits within the\n * real world\n *\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Array<Extent>} The extent within the real world extent.\n */\nexport function wrapAndSliceX(extent, projection) {\n  if (projection.canWrapX()) {\n    const projectionExtent = projection.getExtent();\n\n    if (!isFinite(extent[0]) || !isFinite(extent[2])) {\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n\n    wrapX(extent, projection);\n    const worldWidth = getWidth(projectionExtent);\n\n    if (getWidth(extent) > worldWidth) {\n      // the extent wraps around on itself\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n    if (extent[0] < projectionExtent[0]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0] + worldWidth, extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2], extent[3]],\n      ];\n    }\n    if (extent[2] > projectionExtent[2]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0], extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2] - worldWidth, extent[3]],\n      ];\n    }\n  }\n\n  return [extent];\n}\n", "/**\n * @module ol/coordinate\n */\nimport {getWidth} from './extent.js';\nimport {modulo, toFixed} from './math.js';\nimport {padNumber} from './string.js';\n\n/**\n * An array of numbers representing an `xy`, `xyz` or `xyzm` coordinate.\n * Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += +delta[0];\n  coordinate[1] += +delta[1];\n  return coordinate;\n}\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + (r * dx) / d;\n  const y = y0 + (r * dy) / d;\n\n  return [x, y];\n}\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along =\n    dx === 0 && dy === 0\n      ? 0\n      : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const stringifyFunc = createStringXY();\n *     const out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const stringifyFunc = createStringXY(2);\n *     const out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(fractionDigits) {\n  return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function (coordinate) {\n      return toStringXY(coordinate, fractionDigits);\n    }\n  );\n}\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const decimals = fractionDigits || 0;\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = toFixed(x - deg * 3600 - min * 60, decimals);\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  let hdms = deg + '\\u00b0';\n  if (min !== 0 || sec !== 0) {\n    hdms += ' ' + padNumber(min, 2) + '\\u2032';\n  }\n  if (sec !== 0) {\n    hdms += ' ' + padNumber(sec, 2, decimals) + '\\u2033';\n  }\n  if (normalizedDegrees !== 0) {\n    hdms += ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);\n  }\n\n  return hdms;\n}\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const template = 'Coordinate is ({x}|{y}).';\n *     const out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const template = 'Coordinate is ({x}|{y}).';\n *     const out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(fractionDigits));\n  }\n  return '';\n}\n\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate, closestOnSegment(coordinate, segment));\n}\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, fractionDigits) {\n  if (coordinate) {\n    return (\n      degreesToStringHDMS('NS', coordinate[1], fractionDigits) +\n      ' ' +\n      degreesToStringHDMS('EW', coordinate[0], fractionDigits)\n    );\n  }\n  return '';\n}\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate.js';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, fractionDigits) {\n  return format(coordinate, '{x}, {y}', fractionDigits);\n}\n\n/**\n * Modifies the provided coordinate in-place to be within the real world\n * extent. The lower projection extent boundary is inclusive, the upper one\n * exclusive.\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {Coordinate} The coordinate within the real world extent.\n */\nexport function wrapX(coordinate, projection) {\n  if (projection.canWrapX()) {\n    const worldWidth = getWidth(projection.getExtent());\n    const worldsAway = getWorldsAway(coordinate, projection, worldWidth);\n    if (worldsAway) {\n      coordinate[0] -= worldsAway * worldWidth;\n    }\n  }\n  return coordinate;\n}\n/**\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {number} [sourceExtentWidth] Width of the source extent.\n * @return {number} Offset in world widths.\n */\nexport function getWorldsAway(coordinate, projection, sourceExtentWidth) {\n  const projectionExtent = projection.getExtent();\n  let worldsAway = 0;\n  if (\n    projection.canWrapX() &&\n    (coordinate[0] < projectionExtent[0] || coordinate[0] > projectionExtent[2])\n  ) {\n    sourceExtentWidth = sourceExtentWidth || getWidth(projectionExtent);\n    worldsAway = Math.floor(\n      (coordinate[0] - projectionExtent[0]) / sourceExtentWidth\n    );\n  }\n  return worldsAway;\n}\n", "/**\n * @module ol/console\n */\n\n/**\n * @typedef {'info'|'warn'|'error'|'none'} Level\n */\n\n/**\n * @type {Object<Level, number>}\n */\nconst levels = {\n  info: 1,\n  warn: 2,\n  error: 3,\n  none: 4,\n};\n\n/**\n * @type {number}\n */\nlet level = levels.info;\n\n/**\n * Set the logging level.  By default, the level is set to 'info' and all\n * messages will be logged.  Set to 'warn' to only display warnings and errors.\n * Set to 'error' to only display errors.  Set to 'none' to silence all messages.\n *\n * @param {Level} l The new level.\n */\nexport function setLevel(l) {\n  level = levels[l];\n}\n\n/**\n * @param  {...any} args Arguments to log\n */\nexport function log(...args) {\n  if (level > levels.info) {\n    return;\n  }\n  console.log(...args); // eslint-disable-line no-console\n}\n\n/**\n * @param  {...any} args Arguments to log\n */\nexport function warn(...args) {\n  if (level > levels.warn) {\n    return;\n  }\n  console.warn(...args); // eslint-disable-line no-console\n}\n\n/**\n * @param  {...any} args Arguments to log\n */\nexport function error(...args) {\n  if (level > levels.error) {\n    return;\n  }\n  console.error(...args); // eslint-disable-line no-console\n}\n", "/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection~Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj.addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection~Projection} object for the new projection and add it with\n * {@link module:ol/proj.addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj.addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection~Projection} with\n * {@link module:ol/proj.addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport Projection from './proj/Projection.js';\nimport {\n  PROJECTIONS as EPSG3857_PROJECTIONS,\n  fromEPSG4326,\n  toEPSG4326,\n} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport {METERS_PER_UNIT} from './proj/Units.js';\nimport {\n  add as addProj,\n  clear as clearProj,\n  get as getProj,\n} from './proj/projections.js';\nimport {\n  add as addTransformFunc,\n  clear as clearTransformFuncs,\n  get as getTransformFunc,\n} from './proj/transforms.js';\nimport {applyTransform, getWidth} from './extent.js';\nimport {clamp, modulo} from './math.js';\nimport {equals, getWorldsAway} from './coordinate.js';\nimport {getDistance} from './sphere.js';\nimport {warn} from './console.js';\n\n/**\n * A projection as {@link module:ol/proj/Projection~Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\nlet showCoordinateWarning = true;\n\n/**\n * @param {boolean} [disable = true] Disable console info about `useGeographic()`\n */\nexport function disableCoordinateWarning(disable) {\n  const hide = disable === undefined ? true : disable;\n  showCoordinateWarning = !hide;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, output) {\n  if (output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    output = output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, output) {\n  if (output !== undefined && input !== output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    input = output;\n  }\n  return input;\n}\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  addProj(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection|null} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string'\n    ? getProj(/** @type {string} */ (projectionLike))\n    : /** @type {Projection} */ (projectionLike) || null;\n}\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the `point` pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {import(\"./proj/Units.js\").Units} [units] Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n    if (units && units !== projection.getUnits()) {\n      const metersPerUnit = projection.getMetersPerUnit();\n      if (metersPerUnit) {\n        pointResolution =\n          (pointResolution * metersPerUnit) / METERS_PER_UNIT[units];\n      }\n    }\n  } else {\n    const projUnits = projection.getUnits();\n    if ((projUnits == 'degrees' && !units) || units == 'degrees') {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(\n        projection,\n        get('EPSG:4326')\n      );\n      if (toEPSG4326 === identityTransform && projUnits !== 'degrees') {\n        // no transform is available\n        pointResolution = resolution * projection.getMetersPerUnit();\n      } else {\n        let vertices = [\n          point[0] - resolution / 2,\n          point[1],\n          point[0] + resolution / 2,\n          point[1],\n          point[0],\n          point[1] - resolution / 2,\n          point[0],\n          point[1] + resolution / 2,\n        ];\n        vertices = toEPSG4326(vertices, vertices, 2);\n        const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n        const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n        pointResolution = (width + height) / 2;\n      }\n      const metersPerUnit = units\n        ? METERS_PER_UNIT[units]\n        : projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function (source) {\n    projections.forEach(function (destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(\n  projections1,\n  projections2,\n  forwardTransform,\n  inverseTransform\n) {\n  projections1.forEach(function (projection1) {\n    projections2.forEach(function (projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  clearProj();\n  clearTransformFuncs();\n}\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  }\n  if (typeof projection === 'string') {\n    return get(projection);\n  }\n  return /** @type {Projection} */ (projection);\n}\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>} [output] Output.\n     * @param {number} [dimension] Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, output, dimension) {\n      const length = input.length;\n      dimension = dimension !== undefined ? dimension : 2;\n      output = output !== undefined ? output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform(input.slice(i, i + dimension));\n        const pointLength = point.length;\n        for (let j = 0, jj = dimension; j < jj; ++j) {\n          output[i + j] = j >= pointLength ? input[i + j] : point[j];\n        }\n      }\n      return output;\n    }\n  );\n}\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}. If the transform function can only\n *     transform less dimensions than the input coordinate, it is supposeed to return a coordinate\n *     with only the length it can transform. The other dimensions will be taken unchanged from the\n *     source.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(\n    sourceProj,\n    destProj,\n    createTransformFromCoordinateTransform(forward)\n  );\n  addTransformFunc(\n    destProj,\n    sourceProj,\n    createTransformFromCoordinateTransform(inverse)\n  );\n}\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike} [projection] Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, projection) {\n  disableCoordinateWarning();\n  return transform(\n    coordinate,\n    'EPSG:4326',\n    projection !== undefined ? projection : 'EPSG:3857'\n  );\n}\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike} [projection] Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, projection) {\n  const lonLat = transform(\n    coordinate,\n    projection !== undefined ? projection : 'EPSG:3857',\n    'EPSG:4326'\n  );\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  }\n  const transformFunc = getTransformFromProjections(projection1, projection2);\n  return transformFunc === cloneTransform && equalUnits;\n}\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(\n  sourceProjection,\n  destinationProjection\n) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj.transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination, stops) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc, undefined, stops);\n}\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(\n  point,\n  sourceProjection,\n  destinationProjection\n) {\n  const transformFunc = getTransformFromProjections(\n    sourceProjection,\n    destinationProjection\n  );\n  return transformFunc(point);\n}\n\n/**\n * @type {Projection|null}\n */\nlet userProjection = null;\n\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * This includes all API methods except for those interacting with tile grids,\n * plus {@link import(\"./Map.js\").FrameState} and {@link import(\"./View.js\").State}.\n * @param {ProjectionLike} projection The user projection.\n * @api\n */\nexport function setUserProjection(projection) {\n  userProjection = get(projection);\n}\n\n/**\n * Clear the user projection if set.\n * @api\n */\nexport function clearUserProjection() {\n  userProjection = null;\n}\n\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * @return {Projection|null} The user projection (or null if not set).\n * @api\n */\nexport function getUserProjection() {\n  return userProjection;\n}\n\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.\n * This includes all API methods except for those interacting with tile grids,\n * plus {@link import(\"./Map.js\").FrameState} and {@link import(\"./View.js\").State}.\n * @api\n */\nexport function useGeographic() {\n  setUserProjection('EPSG:4326');\n}\n\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @return {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n  if (!userProjection) {\n    return coordinate;\n  }\n  return transform(coordinate, sourceProjection, userProjection);\n}\n\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n  if (!userProjection) {\n    if (\n      showCoordinateWarning &&\n      !equals(coordinate, [0, 0]) &&\n      coordinate[0] >= -180 &&\n      coordinate[0] <= 180 &&\n      coordinate[1] >= -90 &&\n      coordinate[1] <= 90\n    ) {\n      showCoordinateWarning = false;\n      warn(\n        'Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.'\n      );\n    }\n    return coordinate;\n  }\n  return transform(coordinate, userProjection, destProjection);\n}\n\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @return {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, sourceProjection, userProjection);\n}\n\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, userProjection, destProjection);\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in input projection units per pixel.\n * @param {ProjectionLike} sourceProjection The input projection.\n * @return {number} Resolution in user projection units per pixel.\n */\nexport function toUserResolution(resolution, sourceProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const sourceMetersPerUnit = get(sourceProjection).getMetersPerUnit();\n  const userMetersPerUnit = userProjection.getMetersPerUnit();\n  return sourceMetersPerUnit && userMetersPerUnit\n    ? (resolution * sourceMetersPerUnit) / userMetersPerUnit\n    : resolution;\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in user projection units per pixel.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {number} Resolution in destination projection units per pixel.\n */\nexport function fromUserResolution(resolution, destProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const destMetersPerUnit = get(destProjection).getMetersPerUnit();\n  const userMetersPerUnit = userProjection.getMetersPerUnit();\n  return destMetersPerUnit && userMetersPerUnit\n    ? (resolution * userMetersPerUnit) / destMetersPerUnit\n    : resolution;\n}\n\n/**\n * Creates a safe coordinate transform function from a coordinate transform function.\n * \"Safe\" means that it can handle wrapping of x-coordinates for global projections,\n * and that coordinates exceeding the source projection validity extent's range will be\n * clamped to the validity range.\n * @param {Projection} sourceProj Source projection.\n * @param {Projection} destProj Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} transform Transform function (source to destination).\n * @return {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} Safe transform function (source to destination).\n */\nexport function createSafeCoordinateTransform(sourceProj, destProj, transform) {\n  return function (coord) {\n    let transformed, worldsAway;\n    if (sourceProj.canWrapX()) {\n      const sourceExtent = sourceProj.getExtent();\n      const sourceExtentWidth = getWidth(sourceExtent);\n      coord = coord.slice(0);\n      worldsAway = getWorldsAway(coord, sourceProj, sourceExtentWidth);\n      if (worldsAway) {\n        // Move x to the real world\n        coord[0] = coord[0] - worldsAway * sourceExtentWidth;\n      }\n      coord[0] = clamp(coord[0], sourceExtent[0], sourceExtent[2]);\n      coord[1] = clamp(coord[1], sourceExtent[1], sourceExtent[3]);\n      transformed = transform(coord);\n    } else {\n      transformed = transform(coord);\n    }\n    if (worldsAway && destProj.canWrapX()) {\n      // Move transformed coordinate back to the offset world\n      transformed[0] += worldsAway * getWidth(destProj.getExtent());\n    }\n    return transformed;\n  };\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(\n    EPSG4326_PROJECTIONS,\n    EPSG3857_PROJECTIONS,\n    fromEPSG4326,\n    toEPSG4326\n  );\n}\n\naddCommon();\n", "/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=, Array<number>=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number|undefined} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @param {Array<number>} [centerShift] Shift between map center and viewport center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, isMoving, centerShift) {\n      if (!center) {\n        return undefined;\n      }\n      if (!resolution && !onlyCenter) {\n        return center;\n      }\n      const viewWidth = onlyCenter ? 0 : size[0] * resolution;\n      const viewHeight = onlyCenter ? 0 : size[1] * resolution;\n      const shiftX = centerShift ? centerShift[0] : 0;\n      const shiftY = centerShift ? centerShift[1] : 0;\n      let minX = extent[0] + viewWidth / 2 + shiftX;\n      let maxX = extent[2] - viewWidth / 2 + shiftX;\n      let minY = extent[1] + viewHeight / 2 + shiftY;\n      let maxY = extent[3] - viewHeight / 2 + shiftY;\n\n      // note: when zooming out of bounds, min and max values for x and y may\n      // end up inverted (min > max); this has to be accounted for\n      if (minX > maxX) {\n        minX = (maxX + minX) / 2;\n        maxX = minX;\n      }\n      if (minY > maxY) {\n        minY = (maxY + minY) / 2;\n        maxY = minY;\n      }\n\n      let x = clamp(center[0], minX, maxX);\n      let y = clamp(center[1], minY, maxY);\n\n      // during an interaction, allow some overscroll\n      if (isMoving && smooth && resolution) {\n        const ratio = 30 * resolution;\n        x +=\n          -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n        y +=\n          -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n      }\n\n      return [x, y];\n    }\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} [center] Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n", "/**\n * @module ol/resolutionconstraint\n */\nimport {clamp} from './math.js';\nimport {getHeight, getWidth} from './extent.js';\nimport {linearFindNearest} from './array.js';\n\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n\n/**\n * Returns a modified resolution taking into account the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @param {boolean} showFullExtent Whether to show the full extent.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(\n  resolution,\n  maxExtent,\n  viewportSize,\n  showFullExtent\n) {\n  const xResolution = getWidth(maxExtent) / viewportSize[0];\n  const yResolution = getHeight(maxExtent) / viewportSize[1];\n\n  if (showFullExtent) {\n    return Math.min(resolution, Math.max(xResolution, yResolution));\n  }\n  return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n  let result = Math.min(resolution, maxResolution);\n  const ratio = 50;\n\n  result *=\n    Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio +\n    1;\n  if (minResolution) {\n    result = Math.max(result, minResolution);\n    result /=\n      Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) /\n        ratio +\n      1;\n  }\n  return clamp(result, minResolution / 2, maxResolution * 2);\n}\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(\n  resolutions,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const maxResolution = resolutions[0];\n        const minResolution = resolutions[resolutions.length - 1];\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        // during interacting or animating, allow intermediary values\n        if (isMoving) {\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(\n            resolution,\n            cappedMaxRes,\n            minResolution\n          );\n        }\n\n        const capped = Math.min(cappedMaxRes, resolution);\n        const z = Math.floor(linearFindNearest(resolutions, capped, direction));\n        if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n          return resolutions[z + 1];\n        }\n        return resolutions[z];\n      }\n      return undefined;\n    }\n  );\n}\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number} [minResolution] Minimum resolution.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(\n  power,\n  maxResolution,\n  minResolution,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n  minResolution = minResolution !== undefined ? minResolution : 0;\n\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        // during interacting or animating, allow intermediary values\n        if (isMoving) {\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(\n            resolution,\n            cappedMaxRes,\n            minResolution\n          );\n        }\n\n        const tolerance = 1e-9;\n        const minZoomLevel = Math.ceil(\n          Math.log(maxResolution / cappedMaxRes) / Math.log(power) - tolerance\n        );\n        const offset = -direction * (0.5 - tolerance) + 0.5;\n        const capped = Math.min(cappedMaxRes, resolution);\n        const cappedZoomLevel = Math.floor(\n          Math.log(maxResolution / capped) / Math.log(power) + offset\n        );\n        const zoomLevel = Math.max(minZoomLevel, cappedZoomLevel);\n        const newResolution = maxResolution / Math.pow(power, zoomLevel);\n        return clamp(newResolution, minResolution, cappedMaxRes);\n      }\n      return undefined;\n    }\n  );\n}\n\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(\n  maxResolution,\n  minResolution,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        if (!smooth || !isMoving) {\n          return clamp(resolution, minResolution, cappedMaxRes);\n        }\n        return getSmoothClampedResolution(\n          resolution,\n          cappedMaxRes,\n          minResolution\n        );\n      }\n      return undefined;\n    }\n  );\n}\n", "/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n  if (rotation !== undefined) {\n    return 0;\n  }\n  return undefined;\n}\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n  if (rotation !== undefined) {\n    return rotation;\n  }\n  return undefined;\n}\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = (2 * Math.PI) / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, isMoving) {\n      if (isMoving) {\n        return rotation;\n      }\n\n      if (rotation !== undefined) {\n        rotation = Math.floor(rotation / theta + 0.5) * theta;\n        return rotation;\n      }\n      return undefined;\n    }\n  );\n}\n\n/**\n * @param {number} [tolerance] Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(tolerance) {\n  const t = tolerance === undefined ? toRadians(5) : tolerance;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, isMoving) {\n      if (isMoving || rotation === undefined) {\n        return rotation;\n      }\n\n      if (Math.abs(rotation) <= t) {\n        return 0;\n      }\n      return rotation;\n    }\n  );\n}\n", "/**\n * @module ol/easing\n */\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing.inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  }\n  return 1 - inAndOut(2 * (t - 0.5));\n}\n", "/**\n * @module ol/has\n */\n\nconst ua =\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.includes('firefox');\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\n\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport const SAFARI_BUG_237906 =\n  SAFARI &&\n  (ua.includes('version/15.4') ||\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.includes('macintosh');\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO =\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport const WORKER_OFFSCREEN_CANVAS =\n  typeof WorkerGlobalScope !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' &&\n  self instanceof WorkerGlobalScope; //eslint-disable-line\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE =\n  typeof Image !== 'undefined' && Image.prototype.decode;\n\n/**\n * createImageBitmap() is supported.\n * @type {boolean}\n */\nexport const CREATE_IMAGE_BITMAP = typeof createImageBitmap === 'function';\n\n/**\n * @type {boolean}\n */\nexport const PASSIVE_EVENT_LISTENERS = (function () {\n  let passive = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive = true;\n      },\n    });\n\n    // @ts-ignore Ignore invalid event type '_'\n    window.addEventListener('_', null, options);\n    // @ts-ignore Ignore invalid event type '_'\n    window.removeEventListener('_', null, options);\n  } catch (error) {\n    // passive not supported\n  }\n  return passive;\n})();\n", "/**\n * @module ol/transform\n */\nimport {WORKER_OFFSCREEN_CANVAS} from './has.js';\nimport {assert} from './asserts.js';\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n  return set(target, x, 0, 0, y, 0, 0);\n}\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` property of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n  return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n  return makeInverse(source, source);\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n  const det = determinant(source);\n  assert(det !== 0, 'Transformation matrix cannot be inverted');\n\n  const a = source[0];\n  const b = source[1];\n  const c = source[2];\n  const d = source[3];\n  const e = source[4];\n  const f = source[5];\n\n  target[0] = d / det;\n  target[1] = -b / det;\n  target[2] = -c / det;\n  target[3] = a / det;\n  target[4] = (c * f - d * e) / det;\n  target[5] = -(a * f - b * e) / det;\n\n  return target;\n}\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n\n/**\n * @type {HTMLElement}\n * @private\n */\nlet transformStringDiv;\n\n/**\n * A rounded string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n  const transformString = 'matrix(' + mat.join(', ') + ')';\n  if (WORKER_OFFSCREEN_CANVAS) {\n    return transformString;\n  }\n  const node =\n    transformStringDiv || (transformStringDiv = document.createElement('div'));\n  node.style.transform = transformString;\n  return node.style.transform;\n}\n", "/**\n * @module ol/geom/flat/transform\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  transform,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  angle,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  sx,\n  sy,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  deltaX,\n  deltaY,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n", "/**\n * @module ol/geom/Geometry\n */\nimport BaseObject from '../Object.js';\nimport {abstract} from '../util.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n} from '../transform.js';\nimport {\n  createEmpty,\n  createOrUpdateEmpty,\n  getHeight,\n  returnOrUpdate,\n} from '../extent.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport {memoizeOne} from '../functions.js';\nimport {transform2D} from './flat/transform.js';\n\n/**\n * @typedef {'XY' | 'XYZ' | 'XYM' | 'XYZM'} GeometryLayout\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available.\n */\n\n/**\n * @typedef {'Point' | 'LineString' | 'LinearRing' | 'Polygon' | 'MultiPoint' | 'MultiLineString' | 'MultiPolygon' | 'GeometryCollection' | 'Circle'} Type\n * The geometry type.  One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, or `'Circle'`.\n */\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} revision The geometry revision.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n     * @return {Geometry} Simplified geometry.\n     */\n    this.simplifyTransformedInternal = memoizeOne(\n      (revision, squaredTolerance, transform) => {\n        if (!transform) {\n          return this.getSimplifiedGeometry(squaredTolerance);\n        }\n        const clone = this.clone();\n        clone.applyTransform(transform);\n        return clone.getSimplifiedGeometry(squaredTolerance);\n      }\n    );\n  }\n\n  /**\n   * Get a transformed and simplified version of the geometry.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n   * @return {Geometry} Simplified geometry.\n   */\n  simplifyTransformed(squaredTolerance, transform) {\n    return this.simplifyTransformedInternal(\n      this.getRevision(),\n      squaredTolerance,\n      transform\n    );\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!Geometry} Clone.\n   */\n  clone() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    return abstract();\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    const coord = this.getClosestPoint([x, y]);\n    return coord[0] === x && coord[1] === y;\n  }\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} point Point.\n   * @param {import(\"../coordinate.js\").Coordinate} [closestPoint] Closest point.\n   * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, closestPoint) {\n    closestPoint = closestPoint ? closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Get the extent of the geometry.\n   * @param {import(\"../extent.js\").Extent} [extent] Extent.\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  getExtent(extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      const extent = this.computeExtent(this.extent_);\n      if (isNaN(extent[0]) || isNaN(extent[1])) {\n        createOrUpdateEmpty(extent);\n      }\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    abstract();\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, sy, anchor) {\n    abstract();\n  }\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n   * algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {Geometry} A new, simplified version of the original geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return abstract();\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {Type} Geometry type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   */\n  applyTransform(transformFn) {\n    abstract();\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    abstract();\n  }\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    /** @type {import(\"../proj/Projection.js\").default} */\n    const sourceProj = getProjection(source);\n    const transformFn =\n      sourceProj.getUnits() == 'tile-pixels'\n        ? function (inCoordinates, outCoordinates, stride) {\n            const pixelExtent = sourceProj.getExtent();\n            const projectedExtent = sourceProj.getWorldExtent();\n            const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n            composeTransform(\n              tmpTransform,\n              projectedExtent[0],\n              projectedExtent[3],\n              scale,\n              -scale,\n              0,\n              0,\n              0\n            );\n            transform2D(\n              inCoordinates,\n              0,\n              inCoordinates.length,\n              stride,\n              tmpTransform,\n              outCoordinates\n            );\n            return getTransform(sourceProj, destination)(\n              inCoordinates,\n              outCoordinates,\n              stride\n            );\n          }\n        : getTransform(sourceProj, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n}\n\nexport default Geometry;\n", "/**\n * @module ol/geom/SimpleGeometry\n */\nimport Geometry from './Geometry.js';\nimport {abstract} from '../util.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport {rotate, scale, transform2D, translate} from './flat/transform.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./Geometry.js\").GeometryLayout}\n     */\n    this.layout = 'XY';\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      extent\n    );\n  }\n\n  /**\n   * @abstract\n   * @return {Array<*> | null} Coordinates.\n   */\n  getCoordinates() {\n    return abstract();\n  }\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(\n      this.flatCoordinates.length - this.stride\n    );\n  }\n\n  /**\n   * Return the {@link import(\"./Geometry.js\").GeometryLayout layout} of the geometry.\n   * @return {import(\"./Geometry.js\").GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (\n      squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n        squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)\n    ) {\n      return this;\n    }\n\n    const simplifiedGeometry =\n      this.getSimplifiedGeometryInternal(squaredTolerance);\n    const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      return simplifiedGeometry;\n    }\n    // Simplification did not actually remove any coordinates.  We now know\n    // that any calls to getSimplifiedGeometry with a squaredTolerance less\n    // than or equal to the current squaredTolerance will also not have any\n    // effect.  This allows us to short circuit simplification (saving CPU\n    // cycles) and prevents the cache of simplified geometries from filling\n    // up with useless identical copies of this geometry (saving memory).\n    this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n    return this;\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array<*>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  setCoordinates(coordinates, layout) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"./Geometry.js\").GeometryLayout|undefined} layout Layout.\n   * @param {Array<*>} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = 'XY';\n          this.stride = 2;\n          return;\n        }\n        coordinates = /** @type {Array<unknown>} */ (coordinates[0]);\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @param {number} angle Rotation angle in counter-clockwise radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        angle,\n        anchor,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, sy, anchor) {\n    if (sy === undefined) {\n      sy = sx;\n    }\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        sx,\n        sy,\n        anchor,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        deltaX,\n        deltaY,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n}\n\n/**\n * @param {number} stride Stride.\n * @return {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n */\nexport function getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = 'XY';\n  } else if (stride == 3) {\n    layout = 'XYZ';\n  } else if (stride == 4) {\n    layout = 'XYZM';\n  }\n  return /** @type {import(\"./Geometry.js\").GeometryLayout} */ (layout);\n}\n\n/**\n * @param {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == 'XY') {\n    stride = 2;\n  } else if (layout == 'XYZ' || layout == 'XYM') {\n    stride = 3;\n  } else if (layout == 'XYZM') {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  }\n  const stride = simpleGeometry.getStride();\n  return transform2D(\n    flatCoordinates,\n    0,\n    flatCoordinates.length,\n    stride,\n    transform,\n    dest\n  );\n}\n\nexport default SimpleGeometry;\n", "/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(\n  flatCoordinates,\n  offset1,\n  offset2,\n  stride,\n  x,\n  y,\n  closestPoint\n) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(\n          flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i],\n          t\n        );\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  max\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  max\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x,\n      y,\n      flatCoordinates[offset],\n      flatCoordinates[offset + 1]\n    );\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    }\n    return minSquaredDistance;\n  }\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates,\n      index - stride,\n      index,\n      stride,\n      x,\n      y,\n      tmpPoint\n    );\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index +=\n        stride *\n        Math.max(\n          ((Math.sqrt(squaredDistance) - Math.sqrt(minSquaredDistance)) /\n            maxDelta) |\n            0,\n          1\n        );\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates,\n      end - stride,\n      offset,\n      stride,\n      x,\n      y,\n      tmpPoint\n    );\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      maxDelta,\n      isRing,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance,\n      tmpPoint\n    );\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      maxDelta,\n      isRing,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance,\n      tmpPoint\n    );\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n", "/**\n * @module ol/geom/flat/deflate\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(\n  flatCoordinates,\n  offset,\n  coordinates,\n  stride\n) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>} [ends] Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(\n  flatCoordinates,\n  offset,\n  coordinatess,\n  stride,\n  ends\n) {\n  ends = ends ? ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates,\n      offset,\n      coordinatess[j],\n      stride\n    );\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>} [endss] Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(\n  flatCoordinates,\n  offset,\n  coordinatesss,\n  stride,\n  endss\n) {\n  endss = endss ? endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates,\n      offset,\n      coordinatesss[j],\n      stride,\n      endss[i]\n    );\n    if (ends.length === 0) {\n      ends[0] = offset;\n    }\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n", "/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredDistance, squaredSegmentDistance} from '../../math.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>} [simplifiedFlatCoordinates] Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  highQuality,\n  simplifiedFlatCoordinates\n) {\n  simplifiedFlatCoordinates =\n    simplifiedFlatCoordinates !== undefined ? simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      0\n    );\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    squaredTolerance,\n    simplifiedFlatCoordinates,\n    0\n  );\n  return simplifiedFlatCoordinates;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    /** @type {Array<number>} */\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if (\n      dx1 * dy2 == dy1 * dx2 &&\n      ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n      ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))\n    ) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    /** @type {Array<number>} */\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n", "/**\n * @module ol/geom/flat/inflate\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} [coordinates] Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  coordinates\n) {\n  coordinates = coordinates !== undefined ? coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} [coordinatess] Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  coordinatess\n) {\n  coordinatess = coordinatess !== undefined ? coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      coordinatess[i]\n    );\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} [coordinatesss]\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  coordinatesss\n) {\n  coordinatesss = coordinatesss !== undefined ? coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] =\n      ends.length === 1 && ends[0] === offset\n        ? []\n        : inflateCoordinatesArray(\n            flatCoordinates,\n            offset,\n            ends,\n            stride,\n            coordinatesss[i]\n          );\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n", "/**\n * @module ol/geom/flat/area\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n", "/**\n * @module ol/geom/LinearRing\n */\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {douglasPeucker} from './flat/simplify.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {linearRing as linearRingArea} from './flat/area.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `layout` are also accepted.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  constructor(coordinates, layout) {\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(\n        layout,\n        /** @type {Array<number>} */ (coordinates)\n      );\n    } else {\n      this.setCoordinates(\n        /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (\n          coordinates\n        ),\n        layout\n      );\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LinearRing} Clone.\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(\n        maxSquaredDelta(\n          this.flatCoordinates,\n          0,\n          this.flatCoordinates.length,\n          this.stride,\n          0\n        )\n      );\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      this.maxDelta_,\n      true,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance\n    );\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride\n    );\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride\n    );\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LinearRing} Simplified LinearRing.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    /** @type {Array<number>} */\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      0\n    );\n    return new LinearRing(simplifiedFlatCoordinates, 'XY');\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'LinearRing';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride\n    );\n    this.changed();\n  }\n}\n\nexport default LinearRing;\n", "/**\n * @module ol/geom/Point\n */\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {containsXY, createOrUpdateFromCoordinate} from '../extent.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  constructor(coordinates, layout) {\n    super();\n    this.setCoordinates(coordinates, layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Point} Clone.\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    point.applyProperties(this);\n    return point;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(\n      x,\n      y,\n      flatCoordinates[0],\n      flatCoordinates[1]\n    );\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n   * @api\n   */\n  getCoordinates() {\n    return this.flatCoordinates.slice();\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'Point';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @param {!Array<*>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride\n    );\n    this.changed();\n  }\n}\n\nexport default Point;\n", "/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  const outside = forEachCorner(\n    extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n      return !linearRingContainsXY(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        coordinate[0],\n        coordinate[1]\n      );\n    }\n  );\n  return !outside;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  x,\n  y\n) {\n  // https://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  x,\n  y\n) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (\n      linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  x,\n  y\n) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n", "/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {ascending} from '../../array.js';\nimport {linearRingsContainsXY} from './contains.js';\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  flatCenters,\n  flatCentersOffset,\n  dest\n) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = ((y - y1) / (y2 - y1)) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(ascending);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (dest) {\n    dest.push(pointX, y, maxSegmentLength);\n    return dest;\n  }\n  return [pointX, y, maxSegmentLength];\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  flatCenters\n) {\n  /** @type {Array<number>} */\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      flatCenters,\n      2 * i,\n      interiorPoints\n    );\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n", "/**\n * @module ol/geom/flat/segments\n */\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n  let ret;\n  offset += stride;\n  for (; offset < end; offset += stride) {\n    ret = callback(\n      flatCoordinates.slice(offset - stride, offset),\n      flatCoordinates.slice(offset, offset + stride)\n    );\n    if (ret) {\n      return ret;\n    }\n  }\n  return false;\n}\n", "/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {\n  containsExtent,\n  createEmpty,\n  extendFlatCoordinates,\n  intersects,\n  intersectsSegment,\n} from '../../extent.js';\nimport {forEach as forEachSegment} from './segments.js';\nimport {linearRingContainsExtent, linearRingContainsXY} from './contains.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(),\n    flatCoordinates,\n    offset,\n    end,\n    stride\n  );\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] && coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] && coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function (point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    }\n  );\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  extent\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (\n      intersectsLineString(flatCoordinates, offset, ends[i], stride, extent)\n    ) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  if (intersectsLineString(flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[0],\n      extent[1]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[0],\n      extent[3]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[2],\n      extent[1]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[2],\n      extent[3]\n    )\n  ) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  extent\n) {\n  if (!intersectsLinearRing(flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (\n      linearRingContainsExtent(\n        flatCoordinates,\n        ends[i - 1],\n        ends[i],\n        stride,\n        extent\n      )\n    ) {\n      if (\n        !intersectsLineString(\n          flatCoordinates,\n          ends[i - 1],\n          ends[i],\n          stride,\n          extent\n        )\n      ) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  extent\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (\n      intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent)\n    ) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n", "/**\n * @module ol/geom/flat/reverse\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n", "/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n/**\n * Is the linear ring oriented clockwise in a coordinate system with a bottom-left\n * coordinate origin? For a coordinate system with a top-left coordinate origin,\n * the ring's orientation is clockwise when this function returns false.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean|undefined} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // https://stackoverflow.com/q/1165647/clockwise-method#1165943\n  // https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge === 0 ? undefined : edge > 0;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, right)) {\n      return false;\n    }\n    if (ends.length) {\n      offset = ends[ends.length - 1];\n    }\n  }\n  return true;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    const reverse =\n      i === 0\n        ? (right && isClockwise) || (!right && !isClockwise)\n        : (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates,\n      offset,\n      endss[i],\n      stride,\n      right\n    );\n  }\n  return offset;\n}\n\n/**\n * Return a two-dimensional endss\n * @param {Array<number>} flatCoordinates Flat coordinates\n * @param {Array<number>} ends Linear ring end indexes\n * @return {Array<Array<number>>} Two dimensional endss array that can\n * be used to construct a MultiPolygon\n */\nexport function inflateEnds(flatCoordinates, ends) {\n  const endss = [];\n  let offset = 0;\n  let prevEndIndex = 0;\n  let startOrientation;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    // classifies an array of rings into polygons with outer rings and holes\n    const orientation = linearRingIsClockwise(flatCoordinates, offset, end, 2);\n    if (startOrientation === undefined) {\n      startOrientation = orientation;\n    }\n    if (orientation === startOrientation) {\n      endss.push(ends.slice(prevEndIndex, i + 1));\n    } else {\n      if (endss.length === 0) {\n        continue;\n      }\n      endss[endss.length - 1].push(ends[prevEndIndex]);\n    }\n    prevEndIndex = i + 1;\n    offset = end;\n  }\n  return endss;\n}\n", "/**\n * @module ol/geom/Polygon\n */\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {arrayMaxSquaredDelta, assignClosestArrayPoint} from './flat/closest.js';\nimport {closestSquaredDistanceXY, getCenter, isEmpty} from '../extent.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {extend} from '../array.js';\nimport {getInteriorPointOfArray} from './flat/interiorpoint.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {intersectsLinearRingArray} from './flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRings} from './flat/orient.js';\nimport {linearRings as linearRingsArea} from './flat/area.js';\nimport {linearRingsContainsXY} from './flat/contains.js';\nimport {modulo} from '../math.js';\nimport {quantizeArray} from './flat/simplify.js';\nimport {offset as sphereOffset} from '../sphere.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n  /**\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `layout` and `ends` are also accepted.)\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @param {Array<number>} [ends] Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, layout, ends) {\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate|null}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>|null}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (layout !== undefined && ends) {\n      this.setFlatCoordinates(\n        layout,\n        /** @type {Array<number>} */ (coordinates)\n      );\n      this.ends_ = ends;\n    } else {\n      this.setCoordinates(\n        /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (\n          coordinates\n        ),\n        layout\n      );\n    }\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Polygon} Clone.\n   * @api\n   */\n  clone() {\n    const polygon = new Polygon(\n      this.flatCoordinates.slice(),\n      this.layout,\n      this.ends_.slice()\n    );\n    polygon.applyProperties(this);\n    return polygon;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(\n        arrayMaxSquaredDelta(\n          this.flatCoordinates,\n          0,\n          this.ends_,\n          this.stride,\n          0\n        )\n      );\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates,\n      0,\n      this.ends_,\n      this.stride,\n      this.maxDelta_,\n      true,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance\n    );\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride,\n      x,\n      y\n    );\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride\n    );\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean} [right] Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @api\n   */\n  getCoordinates(right) {\n    let flatCoordinates;\n    if (right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(flatCoordinates, 0, this.ends_, this.stride, right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(),\n        0,\n        this.ends_,\n        this.stride,\n        flatCenter,\n        0\n      );\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return /** @type {import(\"../coordinate.js\").Coordinate} */ (\n      this.flatInteriorPoint_\n    );\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), 'XYM');\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {LinearRing|null} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(\n      this.flatCoordinates.slice(\n        index === 0 ? 0 : this.ends_[index - 1],\n        this.ends_[index]\n      ),\n      this.layout\n    );\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(\n        flatCoordinates.slice(offset, end),\n        layout\n      );\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length = orientLinearRings(\n          this.orientedFlatCoordinates_,\n          0,\n          this.ends_,\n          this.stride\n        );\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return /** @type {Array<number>} */ (this.orientedFlatCoordinates_);\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Polygon} Simplified Polygon.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    /** @type {Array<number>} */\n    const simplifiedFlatCoordinates = [];\n    /** @type {Array<number>} */\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates,\n      0,\n      this.ends_,\n      this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates,\n      0,\n      simplifiedEnds\n    );\n    return new Polygon(simplifiedFlatCoordinates, 'XY', simplifiedEnds);\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'Polygon';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride,\n      extent\n    );\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride,\n      this.ends_\n    );\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\nexport default Polygon;\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices in meters.\n * @param {number} [n] Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number} [sphereRadius] Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, n, sphereRadius) {\n  n = n ? n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(\n      flatCoordinates,\n      sphereOffset(center, radius, (2 * Math.PI * i) / n, sphereRadius)\n    );\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, 'XY', [flatCoordinates.length]);\n}\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  if (isEmpty(extent)) {\n    throw new Error('Cannot create polygon from empty extent');\n  }\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates = [\n    minX,\n    minY,\n    minX,\n    maxY,\n    maxX,\n    maxY,\n    maxX,\n    minY,\n    minX,\n    minY,\n  ];\n  return new Polygon(flatCoordinates, 'XY', [flatCoordinates.length]);\n}\n\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number} [sides] Number of sides of the polygon. Default is 32.\n * @param {number} [angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, sides, angle) {\n  sides = sides ? sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), angle);\n  return polygon;\n}\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number} [angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = angle ? angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI) / sides;\n    flatCoordinates[offset] = center[0] + radius * Math.cos(angle);\n    flatCoordinates[offset + 1] = center[1] + radius * Math.sin(angle);\n  }\n  polygon.changed();\n}\n", "/**\n * @module ol/View\n */\nimport BaseObject from './Object.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {\n  METERS_PER_UNIT,\n  createProjection,\n  disableCoordinateWarning,\n  fromUserCoordinate,\n  fromUserExtent,\n  getUserProjection,\n  toUserCoordinate,\n  toUserExtent,\n} from './proj.js';\nimport {VOID} from './functions.js';\nimport {\n  add as addCoordinate,\n  equals as coordinatesEqual,\n  equals,\n  rotate as rotateCoordinate,\n} from './coordinate.js';\nimport {assert} from './asserts.js';\nimport {none as centerNone, createExtent} from './centerconstraint.js';\nimport {clamp, modulo} from './math.js';\nimport {\n  createMinMaxResolution,\n  createSnapToPower,\n  createSnapToResolutions,\n} from './resolutionconstraint.js';\nimport {\n  createSnapToN,\n  createSnapToZero,\n  disable,\n  none as rotationNone,\n} from './rotationconstraint.js';\nimport {easeOut, inAndOut} from './easing.js';\nimport {\n  getCenter,\n  getForViewAndSize,\n  getHeight,\n  getWidth,\n  isEmpty,\n} from './extent.js';\nimport {linearFindNearest} from './array.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter] Source center.\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter] Target center.\n * @property {number} [sourceResolution] Source resolution.\n * @property {number} [targetResolution] Target resolution.\n * @property {number} [sourceRotation] Source rotation.\n * @property {number} [targetRotation] Target rotation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Anchor.\n * @property {number} start Start.\n * @property {number} duration Duration.\n * @property {boolean} complete Complete.\n * @property {function(number):number} easing Easing.\n * @property {function(boolean):void} callback Callback.\n */\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center Center.\n * @property {import(\"./resolutionconstraint.js\").Type} resolution Resolution.\n * @property {import(\"./rotationconstraint.js\").Type} rotation Rotation.\n */\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to\n * fit the extent into. Defaults to the size of the map the view is associated with.\n * If no map or multiple maps are connected to the view, provide the desired box size\n * (e.g. `map.getSize()`).\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean):void} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {boolean} [showFullExtent=false] Allow the view to be zoomed out to\n * show the full configured extent. By default, when a view is configured with an\n * extent, users will not be able to zoom out so the viewport exceeds the extent in\n * either dimension. This means the full extent may not be visible if the viewport\n * is taller or wider than the aspect ratio of the configured extent. If\n * showFullExtent is true, the user will be able to zoom out so that the viewport\n * exceeds the height or width of the configured extent, but not both, allowing the\n * full extent to be shown.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions that determine the\n * zoom levels if specified. The index in the array corresponds to the zoom level,\n * therefore the resolution values have to be in descending order. It also constrains\n * the resolution by the minimum and maximum value. If set the `maxResolution`,\n * `minResolution`, `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in css pixels).\n * If the map viewport is partially covered with other content (overlays) along\n * its edges, this setting allows to shift the center of the viewport away from\n * that content. The order of the values is top, right, bottom, left.\n */\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center Center (in view projection coordinates).\n * @property {import(\"./proj/Projection.js\").default} projection Projection.\n * @property {number} resolution Resolution.\n * @property {import(\"./coordinate.js\").Coordinate} [nextCenter] The next center during an animation series.\n * @property {number} [nextResolution] The next resolution during an animation series.\n * @property {number} [nextRotation] The next rotation during an animation series.\n * @property {number} rotation Rotation.\n * @property {number} zoom Zoom.\n */\n\n/**\n * Like {@link import(\"./Map.js\").FrameState}, but just `viewState` and `extent`.\n * @typedef {Object} ViewStateLayerStateExtent\n * @property {State} viewState View state.\n * @property {import(\"./extent.js\").Extent} extent Extent (in user projection coordinates).\n * @property {Array<import(\"./layer/Layer.js\").State>} [layerStatesArray] Layer states.\n */\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:center'|'change:resolution'|'change:rotation'} ViewObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<ViewObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|ViewObjectEventTypes, Return>} ViewOnSignature\n */\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Web Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nclass View extends BaseObject {\n  /**\n   * @param {ViewOptions} [options] View options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ViewOnSignature<void>}\n     */\n    this.un;\n\n    options = Object.assign({}, options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    /**\n     * @private\n     * @type {import(\"./size.js\").Size}\n     */\n    this.viewportSize_ = [100, 100];\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate|undefined}\n     */\n    this.targetCenter_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetResolution_;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetRotation_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.nextCenter_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.nextResolution_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.nextRotation_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate|undefined}\n     */\n    this.cancelAnchor_ = undefined;\n\n    if (options.projection) {\n      disableCoordinateWarning();\n    }\n    if (options.center) {\n      options.center = fromUserCoordinate(options.center, this.projection_);\n    }\n    if (options.extent) {\n      options.extent = fromUserExtent(options.extent, this.projection_);\n    }\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n    const properties = Object.assign({}, options);\n    for (const key in ViewProperty) {\n      delete properties[key];\n    }\n    this.setProperties(properties, true);\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @type {Array<number>|undefined}\n     * @private\n     */\n    this.padding_ = options.padding;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint,\n    };\n\n    this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n    this.setCenterInternal(\n      options.center !== undefined ? options.center : null\n    );\n    if (options.resolution !== undefined) {\n      this.setResolution(options.resolution);\n    } else if (options.zoom !== undefined) {\n      this.setZoom(options.zoom);\n    }\n  }\n\n  /**\n   * Padding (in css pixels).\n   * If the map viewport is partially covered with other content (overlays) along\n   * its edges, this setting allows to shift the center of the viewport away from that\n   * content. The order of the values in the array is top, right, bottom, left.\n   * The default is no padding, which is equivalent to `[0, 0, 0, 0]`.\n   * @type {Array<number>|undefined}\n   * @api\n   */\n  get padding() {\n    return this.padding_;\n  }\n  set padding(padding) {\n    let oldPadding = this.padding_;\n    this.padding_ = padding;\n    const center = this.getCenterInternal();\n    if (center) {\n      const newPadding = padding || [0, 0, 0, 0];\n      oldPadding = oldPadding || [0, 0, 0, 0];\n      const resolution = this.getResolution();\n      const offsetX =\n        (resolution / 2) *\n        (newPadding[3] - oldPadding[3] + oldPadding[1] - newPadding[1]);\n      const offsetY =\n        (resolution / 2) *\n        (newPadding[0] - oldPadding[0] + oldPadding[2] - newPadding[2]);\n      this.setCenterInternal([center[0] + offsetX, center[1] - offsetY]);\n    }\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = this.getProperties();\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenterInternal();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return Object.assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    if (this.isDef() && !this.getAnimating()) {\n      this.resolveConstraints(0);\n    }\n    const args = new Array(arguments.length);\n    for (let i = 0; i < args.length; ++i) {\n      let options = arguments[i];\n      if (options.center) {\n        options = Object.assign({}, options);\n        options.center = fromUserCoordinate(\n          options.center,\n          this.getProjection()\n        );\n      }\n      if (options.anchor) {\n        options = Object.assign({}, options);\n        options.anchor = fromUserCoordinate(\n          options.anchor,\n          this.getProjection()\n        );\n      }\n      args[i] = options;\n    }\n    this.animateInternal.apply(this, args);\n  }\n\n  /**\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n   */\n  animateInternal(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (\n      animationCount > 1 &&\n      typeof arguments[animationCount - 1] === 'function'\n    ) {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n\n    let i = 0;\n    for (; i < animationCount && !this.isDef(); ++i) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[i];\n      if (state.center) {\n        this.setCenterInternal(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      } else if (state.resolution) {\n        this.setResolution(state.resolution);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n    }\n    if (i === animationCount) {\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n\n    let start = Date.now();\n    let center = this.targetCenter_.slice();\n    let resolution = this.targetResolution_;\n    let rotation = this.targetRotation_;\n    const series = [];\n    for (; i < animationCount; ++i) {\n      const options = /** @type {AnimationOptions} */ (arguments[i]);\n\n      const animation = {\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut,\n        callback: callback,\n      };\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center.slice();\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.getResolutionForZoom(options.zoom);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta =\n          modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    let anchor;\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n      if (!anchor) {\n        for (let j = 0, jj = series.length; j < jj; ++j) {\n          const animation = series[j];\n          if (!animation.complete) {\n            anchor = animation.anchor;\n            break;\n          }\n        }\n      }\n    }\n    this.animations_.length = 0;\n    this.cancelAnchor_ = anchor;\n    this.nextCenter_ = null;\n    this.nextResolution_ = NaN;\n    this.nextRotation_ = NaN;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction =\n          animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          this.nextCenter_ = animation.targetCenter;\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.targetCenter_ = [x, y];\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution =\n            progress === 1\n              ? animation.targetResolution\n              : animation.sourceResolution +\n                progress *\n                  (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            const size = this.getViewportSize_(this.getRotation());\n            const constrainedResolution = this.constraints_.resolution(\n              resolution,\n              0,\n              size,\n              true\n            );\n            this.targetCenter_ = this.calculateCenterZoom(\n              constrainedResolution,\n              animation.anchor\n            );\n          }\n          this.nextResolution_ = animation.targetResolution;\n          this.targetResolution_ = resolution;\n          this.applyTargetState_(true);\n        }\n        if (\n          animation.sourceRotation !== undefined &&\n          animation.targetRotation !== undefined\n        ) {\n          const rotation =\n            progress === 1\n              ? modulo(animation.targetRotation + Math.PI, 2 * Math.PI) -\n                Math.PI\n              : animation.sourceRotation +\n                progress *\n                  (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            const constrainedRotation = this.constraints_.rotation(\n              rotation,\n              true\n            );\n            this.targetCenter_ = this.calculateCenterRotate(\n              constrainedRotation,\n              animation.anchor\n            );\n          }\n          this.nextRotation_ = animation.targetRotation;\n          this.targetRotation_ = rotation;\n        }\n        this.applyTargetState_(true);\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        this.nextCenter_ = null;\n        this.nextResolution_ = NaN;\n        this.nextRotation_ = NaN;\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(\n        this.updateAnimations_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x =\n        anchor[0] -\n        (resolution * (anchor[0] - currentCenter[0])) / currentResolution;\n      const y =\n        anchor[1] -\n        (resolution * (anchor[1] - currentCenter[1])) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * Returns the current viewport size.\n   * @private\n   * @param {number} [rotation] Take into account the rotation of the viewport when giving the size\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getViewportSize_(rotation) {\n    const size = this.viewportSize_;\n    if (rotation) {\n      const w = size[0];\n      const h = size[1];\n      return [\n        Math.abs(w * Math.cos(rotation)) + Math.abs(h * Math.sin(rotation)),\n        Math.abs(w * Math.sin(rotation)) + Math.abs(h * Math.cos(rotation)),\n      ];\n    }\n    return size;\n  }\n\n  /**\n   * Stores the viewport size on the view. The viewport size is not read every time from the DOM\n   * to avoid performance hit and layout reflow.\n   * This should be done on map size change.\n   * Note: the constraints are not resolved during an animation to avoid stopping it\n   * @param {import(\"./size.js\").Size} [size] Viewport size; if undefined, [100, 100] is assumed\n   */\n  setViewportSize(size) {\n    this.viewportSize_ = Array.isArray(size) ? size.slice() : [100, 100];\n    if (!this.getAnimating()) {\n      this.resolveConstraints(0);\n    }\n  }\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    const center = this.getCenterInternal();\n    if (!center) {\n      return center;\n    }\n    return toUserCoordinate(center, this.getProjection());\n  }\n\n  /**\n   * Get the view center without transforming to user projection.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   */\n  getCenterInternal() {\n    return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (\n      this.get(ViewProperty.CENTER)\n    );\n  }\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @return {boolean} Resolution constraint is set\n   */\n  getConstrainResolution() {\n    return this.get('constrainResolution');\n  }\n\n  /**\n   * @param {Array<number>} [hints] Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(hints) {\n    if (hints !== undefined) {\n      hints[0] = this.hints_[0];\n      hints[1] = this.hints_[1];\n      return hints;\n    }\n    return this.hints_.slice();\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed box size.\n   * @param {import(\"./size.js\").Size} [size] The pixel dimensions of the box\n   * into which the calculated extent should fit. Defaults to the size of the\n   * map the view is associated with.\n   * If no map or multiple maps are connected to the view, provide the desired\n   * box size (e.g. `map.getSize()`).\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  calculateExtent(size) {\n    const extent = this.calculateExtentInternal(size);\n    return toUserExtent(extent, this.getProjection());\n  }\n\n  /**\n   * @param {import(\"./size.js\").Size} [size] Box pixel size. If not provided,\n   * the map's last known viewport size will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  calculateExtentInternal(size) {\n    size = size || this.getViewportSizeMinusPadding_();\n    const center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (\n      this.getCenterInternal()\n    );\n    assert(center, 'The view center is not defined');\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 'The view resolution is not defined');\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 'The view rotation is not defined');\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (\n      this.getZoomForResolution(this.minResolution_)\n    );\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (\n      this.getZoomForResolution(this.maxResolution_)\n    );\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Set whether the view should allow intermediary zoom levels.\n   * @param {boolean} enabled Whether the resolution is constrained.\n   * @api\n   */\n  setConstrainResolution(enabled) {\n    this.applyOptions_(this.getUpdatedOptions_({constrainResolution: enabled}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size} [size] Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, size) {\n    return this.getResolutionForExtentInternal(\n      fromUserExtent(extent, this.getProjection()),\n      size\n    );\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size} [size] Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   */\n  getResolutionForExtentInternal(extent, size) {\n    size = size || this.getViewportSizeMinusPadding_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number} [power] Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(power) {\n    power = power || 2;\n    const maxResolution = this.getConstrainedResolution(this.maxResolution_);\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function (value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      }\n    );\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number} [power] Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(power) {\n    const logPower = Math.log(power || 2);\n    const maxResolution = this.getConstrainedResolution(this.maxResolution_);\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / logPower;\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function (resolution) {\n        const value = Math.log(maxResolution / resolution) / logPower / max;\n        return value;\n      }\n    );\n  }\n\n  /**\n   * Returns the size of the viewport minus padding.\n   * @private\n   * @param {number} [rotation] Take into account the rotation of the viewport when giving the size\n   * @return {import(\"./size.js\").Size} Viewport size reduced by the padding.\n   */\n  getViewportSizeMinusPadding_(rotation) {\n    let size = this.getViewportSize_(rotation);\n    const padding = this.padding_;\n    if (padding) {\n      size = [\n        size[0] - padding[1] - padding[3],\n        size[1] - padding[0] - padding[2],\n      ];\n    }\n    return size;\n  }\n\n  /**\n   * @return {State} View state.\n   */\n  getState() {\n    const projection = this.getProjection();\n    const resolution = this.getResolution();\n    const rotation = this.getRotation();\n    let center = /** @type {import(\"./coordinate.js\").Coordinate} */ (\n      this.getCenterInternal()\n    );\n    const padding = this.padding_;\n    if (padding) {\n      const reducedSize = this.getViewportSizeMinusPadding_();\n      center = calculateCenterOn(\n        center,\n        this.getViewportSize_(),\n        [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]],\n        resolution,\n        rotation\n      );\n    }\n    return {\n      center: center.slice(0),\n      projection: projection !== undefined ? projection : null,\n      resolution: resolution,\n      nextCenter: this.nextCenter_,\n      nextResolution: this.nextResolution_,\n      nextRotation: this.nextRotation_,\n      rotation: rotation,\n      zoom: this.getZoom(),\n    };\n  }\n\n  /**\n   * @return {ViewStateLayerStateExtent} Like `FrameState`, but just `viewState` and `extent`.\n   */\n  getViewStateAndExtent() {\n    return {\n      viewState: this.getState(),\n      extent: this.calculateExtent(),\n    };\n  }\n\n  /**\n   * Get the current zoom level. This method may return non-integer zoom levels\n   * if the view does not constrain the resolution, or if an interaction or\n   * animation is underway.\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    if (this.resolutions_) {\n      if (this.resolutions_.length <= 1) {\n        return 0;\n      }\n      const baseLevel = clamp(\n        Math.floor(zoom),\n        0,\n        this.resolutions_.length - 2\n      );\n      const zoomFactor =\n        this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n      return (\n        this.resolutions_[baseLevel] /\n        Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1))\n      );\n    }\n    return (\n      this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_)\n    );\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions} [options] Options.\n   * @api\n   */\n  fit(geometryOrExtent, options) {\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    let geometry;\n    assert(\n      Array.isArray(geometryOrExtent) ||\n        typeof (/** @type {?} */ (geometryOrExtent).getSimplifiedGeometry) ===\n          'function',\n      'Invalid extent or geometry provided as `geometry`'\n    );\n    if (Array.isArray(geometryOrExtent)) {\n      assert(\n        !isEmpty(geometryOrExtent),\n        'Cannot fit empty extent provided as `geometry`'\n      );\n      const extent = fromUserExtent(geometryOrExtent, this.getProjection());\n      geometry = polygonFromExtent(extent);\n    } else if (geometryOrExtent.getType() === 'Circle') {\n      const extent = fromUserExtent(\n        geometryOrExtent.getExtent(),\n        this.getProjection()\n      );\n      geometry = polygonFromExtent(extent);\n      geometry.rotate(this.getRotation(), getCenter(extent));\n    } else {\n      const userProjection = getUserProjection();\n      if (userProjection) {\n        geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n          geometryOrExtent\n            .clone()\n            .transform(userProjection, this.getProjection())\n        );\n      } else {\n        geometry = geometryOrExtent;\n      }\n    }\n\n    this.fitInternal(geometry, options);\n  }\n\n  /**\n   * Calculate rotated extent\n   * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n   * @return {import(\"./extent\").Extent} The rotated extent for the geometry.\n   */\n  rotatedExtentForGeometry(geometry) {\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(rotation);\n    const sinAngle = Math.sin(-rotation);\n    const coords = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n    return [minRotX, minRotY, maxRotX, maxRotY];\n  }\n\n  /**\n   * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n   * @param {FitOptions} [options] Options.\n   */\n  fitInternal(geometry, options) {\n    options = options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getViewportSizeMinusPadding_();\n    }\n    const padding =\n      options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.getResolutionForZoom(options.maxZoom);\n    } else {\n      minResolution = 0;\n    }\n\n    const rotatedExtent = this.rotatedExtentForGeometry(geometry);\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtentInternal(rotatedExtent, [\n      size[0] - padding[1] - padding[3],\n      size[1] - padding[0] - padding[2],\n    ]);\n    resolution = isNaN(resolution)\n      ? minResolution\n      : Math.max(resolution, minResolution);\n    resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n\n    // calculate center\n    const rotation = this.getRotation();\n    const sinAngle = Math.sin(rotation);\n    const cosAngle = Math.cos(rotation);\n    const centerRot = getCenter(rotatedExtent);\n    centerRot[0] += ((padding[1] - padding[3]) / 2) * resolution;\n    centerRot[1] += ((padding[0] - padding[2]) / 2) * resolution;\n    const centerX = centerRot[0] * cosAngle - centerRot[1] * sinAngle;\n    const centerY = centerRot[1] * cosAngle + centerRot[0] * sinAngle;\n    const center = this.getConstrainedCenter([centerX, centerY], resolution);\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animateInternal(\n        {\n          resolution: resolution,\n          center: center,\n          duration: options.duration,\n          easing: options.easing,\n        },\n        callback\n      );\n    } else {\n      this.targetResolution_ = resolution;\n      this.targetCenter_ = center;\n      this.applyTargetState_(false, true);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    this.centerOnInternal(\n      fromUserCoordinate(coordinate, this.getProjection()),\n      size,\n      position\n    );\n  }\n\n  /**\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   */\n  centerOnInternal(coordinate, size, position) {\n    this.setCenterInternal(\n      calculateCenterOn(\n        coordinate,\n        size,\n        position,\n        this.getResolution(),\n        this.getRotation()\n      )\n    );\n  }\n\n  /**\n   * Calculates the shift between map and viewport center.\n   * @param {import(\"./coordinate.js\").Coordinate} center Center.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {import(\"./size.js\").Size} size Size.\n   * @return {Array<number>|undefined} Center shift.\n   */\n  calculateCenterShift(center, resolution, rotation, size) {\n    let centerShift;\n    const padding = this.padding_;\n    if (padding && center) {\n      const reducedSize = this.getViewportSizeMinusPadding_(-rotation);\n      const shiftedCenter = calculateCenterOn(\n        center,\n        size,\n        [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]],\n        resolution,\n        rotation\n      );\n      centerShift = [\n        center[0] - shiftedCenter[0],\n        center[1] - shiftedCenter[1],\n      ];\n    }\n    return centerShift;\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenterInternal() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   * @api\n   */\n  adjustCenter(deltaCoordinates) {\n    const center = toUserCoordinate(this.targetCenter_, this.getProjection());\n    this.setCenter([\n      center[0] + deltaCoordinates[0],\n      center[1] + deltaCoordinates[1],\n    ]);\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   */\n  adjustCenterInternal(deltaCoordinates) {\n    const center = this.targetCenter_;\n    this.setCenterInternal([\n      center[0] + deltaCoordinates[0],\n      center[1] + deltaCoordinates[1],\n    ]);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  adjustResolution(ratio, anchor) {\n    anchor = anchor && fromUserCoordinate(anchor, this.getProjection());\n    this.adjustResolutionInternal(ratio, anchor);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  adjustResolutionInternal(ratio, anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const size = this.getViewportSize_(this.getRotation());\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_ * ratio,\n      0,\n      size,\n      isMoving\n    );\n\n    if (anchor) {\n      this.targetCenter_ = this.calculateCenterZoom(newResolution, anchor);\n    }\n\n    this.targetResolution_ *= ratio;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom level.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  adjustZoom(delta, anchor) {\n    this.adjustResolution(Math.pow(this.zoomFactor_, -delta), anchor);\n  }\n\n  /**\n   * Adds a value to the view rotation, optionally using an anchor. Any rotation\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The rotation center.\n   * @api\n   */\n  adjustRotation(delta, anchor) {\n    if (anchor) {\n      anchor = fromUserCoordinate(anchor, this.getProjection());\n    }\n    this.adjustRotationInternal(delta, anchor);\n  }\n\n  /**\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The rotation center.\n   */\n  adjustRotationInternal(delta, anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const newRotation = this.constraints_.rotation(\n      this.targetRotation_ + delta,\n      isMoving\n    );\n    if (anchor) {\n      this.targetCenter_ = this.calculateCenterRotate(newRotation, anchor);\n    }\n    this.targetRotation_ += delta;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the center of the current view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.setCenterInternal(\n      center ? fromUserCoordinate(center, this.getProjection()) : center\n    );\n  }\n\n  /**\n   * Set the center using the view projection (not the user projection).\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   */\n  setCenterInternal(center) {\n    this.targetCenter_ = center;\n    this.applyTargetState_();\n  }\n\n  /**\n   * @param {import(\"./ViewHint.js\").default} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view. Any resolution constraint will apply.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.targetResolution_ = resolution;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the rotation for this view. Any rotation constraint will apply.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.targetRotation_ = rotation;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Zoom to a specific zoom level. Any resolution constrain will apply.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n\n  /**\n   * Recompute rotation/resolution/center based on target values.\n   * Note: we have to compute rotation first, then resolution and center considering that\n   * parameters can influence one another in case a view extent constraint is present.\n   * @param {boolean} [doNotCancelAnims] Do not cancel animations.\n   * @param {boolean} [forceMoving] Apply constraints as if the view is moving.\n   * @private\n   */\n  applyTargetState_(doNotCancelAnims, forceMoving) {\n    const isMoving =\n      this.getAnimating() || this.getInteracting() || forceMoving;\n\n    // compute rotation\n    const newRotation = this.constraints_.rotation(\n      this.targetRotation_,\n      isMoving\n    );\n    const size = this.getViewportSize_(newRotation);\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_,\n      0,\n      size,\n      isMoving\n    );\n    const newCenter = this.constraints_.center(\n      this.targetCenter_,\n      newResolution,\n      size,\n      isMoving,\n      this.calculateCenterShift(\n        this.targetCenter_,\n        newResolution,\n        newRotation,\n        size\n      )\n    );\n\n    if (this.get(ViewProperty.ROTATION) !== newRotation) {\n      this.set(ViewProperty.ROTATION, newRotation);\n    }\n    if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n      this.set(ViewProperty.RESOLUTION, newResolution);\n      this.set('zoom', this.getZoom(), true);\n    }\n    if (\n      !newCenter ||\n      !this.get(ViewProperty.CENTER) ||\n      !equals(this.get(ViewProperty.CENTER), newCenter)\n    ) {\n      this.set(ViewProperty.CENTER, newCenter);\n    }\n\n    if (this.getAnimating() && !doNotCancelAnims) {\n      this.cancelAnimations();\n    }\n    this.cancelAnchor_ = undefined;\n  }\n\n  /**\n   * If any constraints need to be applied, an animation will be triggered.\n   * This is typically done on interaction end.\n   * Note: calling this with a duration of 0 will apply the constrained values straight away,\n   * without animation.\n   * @param {number} [duration] The animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  resolveConstraints(duration, resolutionDirection, anchor) {\n    duration = duration !== undefined ? duration : 200;\n    const direction = resolutionDirection || 0;\n\n    const newRotation = this.constraints_.rotation(this.targetRotation_);\n    const size = this.getViewportSize_(newRotation);\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_,\n      direction,\n      size\n    );\n    const newCenter = this.constraints_.center(\n      this.targetCenter_,\n      newResolution,\n      size,\n      false,\n      this.calculateCenterShift(\n        this.targetCenter_,\n        newResolution,\n        newRotation,\n        size\n      )\n    );\n\n    if (duration === 0 && !this.cancelAnchor_) {\n      this.targetResolution_ = newResolution;\n      this.targetRotation_ = newRotation;\n      this.targetCenter_ = newCenter;\n      this.applyTargetState_();\n      return;\n    }\n\n    anchor = anchor || (duration === 0 ? this.cancelAnchor_ : undefined);\n    this.cancelAnchor_ = undefined;\n\n    if (\n      this.getResolution() !== newResolution ||\n      this.getRotation() !== newRotation ||\n      !this.getCenterInternal() ||\n      !equals(this.getCenterInternal(), newCenter)\n    ) {\n      if (this.getAnimating()) {\n        this.cancelAnimations();\n      }\n\n      this.animateInternal({\n        rotation: newRotation,\n        center: newCenter,\n        resolution: newResolution,\n        duration: duration,\n        easing: easeOut,\n        anchor: anchor,\n      });\n    }\n  }\n\n  /**\n   * Notify the View that an interaction has started.\n   * The view state will be resolved to a stable one if needed\n   * (depending on its constraints).\n   * @api\n   */\n  beginInteraction() {\n    this.resolveConstraints(0);\n\n    this.setHint(ViewHint.INTERACTING, 1);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number} [duration] Animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  endInteraction(duration, resolutionDirection, anchor) {\n    anchor = anchor && fromUserCoordinate(anchor, this.getProjection());\n    this.endInteractionInternal(duration, resolutionDirection, anchor);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number} [duration] Animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  endInteractionInternal(duration, resolutionDirection, anchor) {\n    if (!this.getInteracting()) {\n      return;\n    }\n    this.setHint(ViewHint.INTERACTING, -1);\n    this.resolveConstraints(duration, resolutionDirection, anchor);\n  }\n\n  /**\n   * Get a valid position for the view center according to the current constraints.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n   * @param {number} [targetResolution] Target resolution. If not supplied, the current one will be used.\n   * This is useful to guess a valid center position at a different zoom level.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n   */\n  getConstrainedCenter(targetCenter, targetResolution) {\n    const size = this.getViewportSize_(this.getRotation());\n    return this.constraints_.center(\n      targetCenter,\n      targetResolution || this.getResolution(),\n      size\n    );\n  }\n\n  /**\n   * Get a valid zoom level according to the current view constraints.\n   * @param {number|undefined} targetZoom Target zoom.\n   * @param {number} [direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid zoom level.\n   */\n  getConstrainedZoom(targetZoom, direction) {\n    const targetRes = this.getResolutionForZoom(targetZoom);\n    return this.getZoomForResolution(\n      this.getConstrainedResolution(targetRes, direction)\n    );\n  }\n\n  /**\n   * Get a valid resolution according to the current view constraints.\n   * @param {number|undefined} targetResolution Target resolution.\n   * @param {number} [direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid resolution.\n   */\n  getConstrainedResolution(targetResolution, direction) {\n    direction = direction || 0;\n    const size = this.getViewportSize_(this.getRotation());\n\n    return this.constraints_.resolution(targetResolution, direction, size);\n  }\n}\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function () {\n    callback(returnValue);\n  }, 0);\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    const smooth =\n      options.smoothExtentConstraint !== undefined\n        ? options.smoothExtentConstraint\n        : true;\n    return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n  }\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  if (options.multiWorld !== true && projection.isGlobal()) {\n    const extent = projection.getExtent().slice();\n    extent[0] = -Infinity;\n    extent[2] = Infinity;\n    return createExtent(extent, false, false);\n  }\n\n  return centerNone;\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom =\n    options.minZoom !== undefined ? options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom =\n    options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor =\n    options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n\n  const multiWorld =\n    options.multiWorld !== undefined ? options.multiWorld : false;\n\n  const smooth =\n    options.smoothResolutionConstraint !== undefined\n      ? options.smoothResolutionConstraint\n      : true;\n\n  const showFullExtent =\n    options.showFullExtent !== undefined ? options.showFullExtent : false;\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  const projExtent = projection.getExtent();\n  let constrainOnlyCenter = options.constrainOnlyCenter;\n  let extent = options.extent;\n  if (!multiWorld && !extent && projection.isGlobal()) {\n    constrainOnlyCenter = false;\n    extent = projExtent;\n  }\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution =\n      resolutions[maxZoom] !== undefined\n        ? resolutions[maxZoom]\n        : resolutions[resolutions.length - 1];\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToResolutions(\n        resolutions,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    } else {\n      resolutionConstraint = createMinMaxResolution(\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    }\n  } else {\n    // calculate the default min and max resolution\n    const size = !projExtent\n      ? // use an extent that can fit the whole world if need be\n        (360 * METERS_PER_UNIT.degrees) / projection.getMetersPerUnit()\n      : Math.max(getWidth(projExtent), getHeight(projExtent));\n\n    const defaultMaxResolution =\n      size / DEFAULT_TILE_SIZE / Math.pow(defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution =\n      defaultMaxResolution /\n      Math.pow(defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom =\n      minZoom +\n      Math.floor(\n        Math.log(maxResolution / minResolution) / Math.log(zoomFactor)\n      );\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToPower(\n        zoomFactor,\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    } else {\n      resolutionConstraint = createMinMaxResolution(\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    }\n  }\n  return {\n    constraint: resolutionConstraint,\n    maxResolution: maxResolution,\n    minResolution: minResolution,\n    minZoom: minZoom,\n    zoomFactor: zoomFactor,\n  };\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation =\n    options.enableRotation !== undefined ? options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    }\n    if (constrainRotation === false) {\n      return rotationNone;\n    }\n    if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    }\n    return rotationNone;\n  }\n  return disable;\n}\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {import(\"./size.js\").Size} size Box pixel size.\n * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {import(\"./coordinate.js\").Coordinate} Shifted center.\n */\nfunction calculateCenterOn(coordinate, size, position, resolution, rotation) {\n  // calculate rotated position\n  const cosAngle = Math.cos(-rotation);\n  let sinAngle = Math.sin(-rotation);\n  let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  rotX += (size[0] / 2 - position[0]) * resolution;\n  rotY += (position[1] - size[1] / 2) * resolution;\n\n  // go back to original angle\n  sinAngle = -sinAngle; // go back to original rotation\n  const centerX = rotX * cosAngle - rotY * sinAngle;\n  const centerY = rotY * cosAngle + rotX * sinAngle;\n\n  return [centerX, centerY];\n}\n\nexport default View;\n", "/**\n * @module ol/layer/Layer\n */\nimport BaseLayer from './Base.js';\nimport EventType from '../events/EventType.js';\nimport LayerProperty from './Property.js';\nimport RenderEventType from '../render/EventType.js';\nimport View from '../View.js';\nimport {assert} from '../asserts.js';\nimport {intersects} from '../extent.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n/**\n * @typedef {function(import(\"../Map.js\").FrameState):HTMLElement} RenderFunction\n */\n\n/**\n * @typedef {'sourceready'|'change:source'} LayerEventType\n */\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     LayerEventType, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|LayerEventType|\n *     import(\"../render/EventType\").LayerRenderEventTypes, Return>} LayerOnSignature\n */\n\n/**\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {SourceType} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer~Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../Map.js\").default|null} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Layer.js\").default} layer Layer.\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {boolean} visible Visible.\n * @property {boolean} managed Managed.\n * @property {import(\"../extent.js\").Extent} [extent] Extent.\n * @property {number | undefined} zIndex ZIndex.\n * @property {number} maxResolution Maximum resolution.\n * @property {number} minResolution Minimum resolution.\n * @property {number} minZoom Minimum zoom.\n * @property {number} maxZoom Maximum zoom.\n */\n\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with [map.addLayer()]{@link import(\"../Map.js\").default#addLayer}.\n * Components like {@link module:ol/interaction/Draw~Draw} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * [layer.setMap()]{@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n * A `sourceready` event is fired when the layer's source is ready.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n * @fires import(\"../events/Event.js\").BaseEvent#sourceready\n *\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @template {import(\"../renderer/Layer.js\").default} [RendererType=import(\"../renderer/Layer.js\").default]\n * @api\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {Options<SourceType>} options Layer options.\n   */\n  constructor(options) {\n    const baseOptions = Object.assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /***\n     * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {LayerOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    /**\n     * @private\n     * @type {RendererType}\n     */\n    this.renderer_ = null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.sourceReady_ = false;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.rendered = false;\n\n    // Overwrite default render method with a custom one\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    this.addChangeListener(\n      LayerProperty.SOURCE,\n      this.handleSourcePropertyChange_\n    );\n\n    const source = options.source\n      ? /** @type {SourceType} */ (options.source)\n      : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @param {Array<import(\"./Layer.js\").default>} [array] Array of layers (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(array) {\n    array = array ? array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @param {Array<import(\"./Layer.js\").State>} [states] Optional list of layer states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(states) {\n    states = states ? states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {SourceType|null} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n  }\n\n  /**\n   * @return {SourceType|null} The source being rendered.\n   */\n  getRenderSource() {\n    return this.getSource();\n  }\n\n  /**\n   * @return {import(\"../source/Source.js\").State} Source state.\n   */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? 'undefined' : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n    if (this.sourceReady_ || this.getSource().getState() !== 'ready') {\n      return;\n    }\n    this.sourceReady_ = true;\n    this.dispatchEvent('sourceready');\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    this.sourceReady_ = false;\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(\n        source,\n        EventType.CHANGE,\n        this.handleSourceChange_,\n        this\n      );\n      if (source.getState() === 'ready') {\n        this.sourceReady_ = true;\n        setTimeout(() => {\n          this.dispatchEvent('sourceready');\n        }, 0);\n      }\n    }\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").FeatureLike>>} Promise that resolves with\n   * an array of features.\n   */\n  getFeatures(pixel) {\n    if (!this.renderer_) {\n      return Promise.resolve([]);\n    }\n    return this.renderer_.getFeatures(pixel);\n  }\n\n  /**\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   */\n  getData(pixel) {\n    if (!this.renderer_ || !this.rendered) {\n      return null;\n    }\n    return this.renderer_.getData(pixel);\n  }\n\n  /**\n   * The layer is visible on the map view, i.e. within its min/max resolution or zoom and\n   * extent, not set to `visible: false`, and not inside a layer group that is set\n   * to `visible: false`.\n   * @param {View|import(\"../View.js\").ViewStateLayerStateExtent} [view] View or {@link import(\"../Map.js\").FrameState}.\n   * Only required when the layer is not added to a map.\n   * @return {boolean} The layer is visible in the map view.\n   * @api\n   */\n  isVisible(view) {\n    let frameState;\n    const map = this.getMapInternal();\n    if (!view && map) {\n      view = map.getView();\n    }\n    if (view instanceof View) {\n      frameState = {\n        viewState: view.getState(),\n        extent: view.calculateExtent(),\n      };\n    } else {\n      frameState = view;\n    }\n    if (!frameState.layerStatesArray && map) {\n      frameState.layerStatesArray = map.getLayerGroup().getLayerStatesArray();\n    }\n    let layerState;\n    if (frameState.layerStatesArray) {\n      layerState = frameState.layerStatesArray.find(\n        (layerState) => layerState.layer === this\n      );\n    } else {\n      layerState = this.getLayerState();\n    }\n\n    const layerExtent = this.getExtent();\n\n    return (\n      inView(layerState, frameState.viewState) &&\n      (!layerExtent || intersects(layerExtent, frameState.extent))\n    );\n  }\n\n  /**\n   * Get the attributions of the source of this layer for the given view.\n   * @param {View|import(\"../View.js\").ViewStateLayerStateExtent} [view] View or {@link import(\"../Map.js\").FrameState}.\n   * Only required when the layer is not added to a map.\n   * @return {Array<string>} Attributions for this layer at the given view.\n   * @api\n   */\n  getAttributions(view) {\n    if (!this.isVisible(view)) {\n      return [];\n    }\n    let getAttributions;\n    const source = this.getSource();\n    if (source) {\n      getAttributions = source.getAttributions();\n    }\n    if (!getAttributions) {\n      return [];\n    }\n    const frameState =\n      view instanceof View ? view.getViewStateAndExtent() : view;\n    let attributions = getAttributions(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n    return attributions;\n  }\n\n  /**\n   * In charge to manage the rendering of the layer. One layer type is\n   * bounded with one layer renderer.\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target which the renderer may (but need not) use\n   * for rendering its content.\n   * @return {HTMLElement|null} The rendered element.\n   */\n  render(frameState, target) {\n    const layerRenderer = this.getRenderer();\n\n    if (layerRenderer.prepareFrame(frameState)) {\n      this.rendered = true;\n      return layerRenderer.renderFrame(frameState, target);\n    }\n    return null;\n  }\n\n  /**\n   * Called when a layer is not visible during a map render.\n   */\n  unrender() {\n    this.rendered = false;\n  }\n\n  /**\n   * For use inside the library only.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMapInternal(map) {\n    if (!map) {\n      this.unrender();\n    }\n    this.set(LayerProperty.MAP, map);\n  }\n\n  /**\n   * For use inside the library only.\n   * @return {import(\"../Map.js\").default|null} Map.\n   */\n  getMapInternal() {\n    return this.get(LayerProperty.MAP);\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map~Map#addLayer} instead.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(\n        map,\n        RenderEventType.PRECOMPOSE,\n        function (evt) {\n          const renderEvent =\n            /** @type {import(\"../render/Event.js\").default} */ (evt);\n          const layerStatesArray = renderEvent.frameState.layerStatesArray;\n          const layerState = this.getLayerState(false);\n          assert(\n            !layerStatesArray.some(function (arrayLayerState) {\n              return arrayLayerState.layer === layerState.layer;\n            }),\n            'A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.'\n          );\n          layerStatesArray.push(layerState);\n        },\n        this\n      );\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {SourceType|null} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n\n  /**\n   * Get the renderer for this layer.\n   * @return {RendererType|null} The layer renderer.\n   */\n  getRenderer() {\n    if (!this.renderer_) {\n      this.renderer_ = this.createRenderer();\n    }\n    return this.renderer_;\n  }\n\n  /**\n   * @return {boolean} The layer has a renderer.\n   */\n  hasRenderer() {\n    return !!this.renderer_;\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {RendererType} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return null;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.renderer_) {\n      this.renderer_.dispose();\n      delete this.renderer_;\n    }\n\n    this.setSource(null);\n    super.disposeInternal();\n  }\n}\n\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n  if (!layerState.visible) {\n    return false;\n  }\n  const resolution = viewState.resolution;\n  if (\n    resolution < layerState.minResolution ||\n    resolution >= layerState.maxResolution\n  ) {\n    return false;\n  }\n  const zoom = viewState.zoom;\n  return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\n\nexport default Layer;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n", "import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n", "import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n", "import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/**\n * The base implementation of `_.toNumber` which doesn't ensure correct\n * conversions of binary, hexadecimal, or octal string values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n */\nfunction baseToNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  return +value;\n}\n\nexport default baseToNumber;\n", "/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n", "/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n", "import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n", "import baseToNumber from './_baseToNumber.js';\nimport baseToString from './_baseToString.js';\n\n/**\n * Creates a function that performs a mathematical operation on two values.\n *\n * @private\n * @param {Function} operator The function to perform the operation.\n * @param {number} [defaultValue] The value used for `undefined` arguments.\n * @returns {Function} Returns the new mathematical operation function.\n */\nfunction createMathOperation(operator, defaultValue) {\n  return function(value, other) {\n    var result;\n    if (value === undefined && other === undefined) {\n      return defaultValue;\n    }\n    if (value !== undefined) {\n      result = value;\n    }\n    if (other !== undefined) {\n      if (result === undefined) {\n        return other;\n      }\n      if (typeof value == 'string' || typeof other == 'string') {\n        value = baseToString(value);\n        other = baseToString(other);\n      } else {\n        value = baseToNumber(value);\n        other = baseToNumber(other);\n      }\n      result = operator(value, other);\n    }\n    return result;\n  };\n}\n\nexport default createMathOperation;\n", "import createMathOperation from './_createMathOperation.js';\n\n/**\n * Adds two numbers.\n *\n * @static\n * @memberOf _\n * @since 3.4.0\n * @category Math\n * @param {number} augend The first number in an addition.\n * @param {number} addend The second number in an addition.\n * @returns {number} Returns the total.\n * @example\n *\n * _.add(6, 4);\n * // => 10\n */\nvar add = createMathOperation(function(augend, addend) {\n  return augend + addend;\n}, 0);\n\nexport default add;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n", "import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n", "import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n", "import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n", "import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n", "import toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * The opposite of `_.before`; this method creates a function that invokes\n * `func` once it's called `n` or more times.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {number} n The number of calls before `func` is invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var saves = ['profile', 'settings'];\n *\n * var done = _.after(saves.length, function() {\n *   console.log('done saving!');\n * });\n *\n * _.forEach(saves, function(type) {\n *   asyncSave({ 'type': type, 'complete': done });\n * });\n * // => Logs 'done saving!' after the two async saves have completed.\n */\nfunction after(n, func) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n\nexport default after;\n", "/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n", "import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n", "import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n", "/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n", "import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n", "/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n", "import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n", "import WeakMap from './_WeakMap.js';\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nexport default metaMap;\n", "import identity from './identity.js';\nimport metaMap from './_metaMap.js';\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nexport default baseSetData;\n", "import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n", "import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nexport default createCtor;\n", "import createCtor from './_createCtor.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nexport default createBind;\n", "/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nexport default composeArgs;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nexport default composeArgsRight;\n", "/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nexport default countHolders;\n", "/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nexport default baseLodash;\n", "import baseCreate from './_baseCreate.js';\nimport baseLodash from './_baseLodash.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nexport default LazyWrapper;\n", "/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n", "import metaMap from './_metaMap.js';\nimport noop from './noop.js';\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nexport default getData;\n", "/** Used to lookup unminified function names. */\nvar realNames = {};\n\nexport default realNames;\n", "import realNames from './_realNames.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nexport default getFuncName;\n", "import baseCreate from './_baseCreate.js';\nimport baseLodash from './_baseLodash.js';\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nexport default LodashWrapper;\n", "/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport copyArray from './_copyArray.js';\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nexport default wrapperClone;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport baseLodash from './_baseLodash.js';\nimport isArray from './isArray.js';\nimport isObjectLike from './isObjectLike.js';\nimport wrapperClone from './_wrapperClone.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nexport default lodash;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport getData from './_getData.js';\nimport getFuncName from './_getFuncName.js';\nimport lodash from './wrapperLodash.js';\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nexport default isLaziable;\n", "/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n", "import baseSetData from './_baseSetData.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nexport default setData;\n", "/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nexport default getWrapDetails;\n", "/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nexport default insertWrapDetails;\n", "/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n", "import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n", "import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n", "import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n", "/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n", "/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n", "/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n", "/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n", "import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n", "import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n", "import arrayEach from './_arrayEach.js';\nimport arrayIncludes from './_arrayIncludes.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nexport default updateWrapDetails;\n", "import getWrapDetails from './_getWrapDetails.js';\nimport insertWrapDetails from './_insertWrapDetails.js';\nimport setToString from './_setToString.js';\nimport updateWrapDetails from './_updateWrapDetails.js';\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nexport default setWrapToString;\n", "import isLaziable from './_isLaziable.js';\nimport setData from './_setData.js';\nimport setWrapToString from './_setWrapToString.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nexport default createRecurry;\n", "/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nexport default getHolder;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n", "import copyArray from './_copyArray.js';\nimport isIndex from './_isIndex.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nexport default reorder;\n", "/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nexport default replaceHolders;\n", "import composeArgs from './_composeArgs.js';\nimport composeArgsRight from './_composeArgsRight.js';\nimport countHolders from './_countHolders.js';\nimport createCtor from './_createCtor.js';\nimport createRecurry from './_createRecurry.js';\nimport getHolder from './_getHolder.js';\nimport reorder from './_reorder.js';\nimport replaceHolders from './_replaceHolders.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nexport default createHybrid;\n", "import apply from './_apply.js';\nimport createCtor from './_createCtor.js';\nimport createHybrid from './_createHybrid.js';\nimport createRecurry from './_createRecurry.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\nimport root from './_root.js';\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nexport default createCurry;\n", "import apply from './_apply.js';\nimport createCtor from './_createCtor.js';\nimport root from './_root.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nexport default createPartial;\n", "import composeArgs from './_composeArgs.js';\nimport composeArgsRight from './_composeArgsRight.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nexport default mergeData;\n", "import baseSetData from './_baseSetData.js';\nimport createBind from './_createBind.js';\nimport createCurry from './_createCurry.js';\nimport createHybrid from './_createHybrid.js';\nimport createPartial from './_createPartial.js';\nimport getData from './_getData.js';\nimport mergeData from './_mergeData.js';\nimport setData from './_setData.js';\nimport setWrapToString from './_setWrapToString.js';\nimport toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nexport default createWrap;\n", "import createWrap from './_createWrap.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_ARY_FLAG = 128;\n\n/**\n * Creates a function that invokes `func`, with up to `n` arguments,\n * ignoring any additional arguments.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} func The function to cap arguments for.\n * @param {number} [n=func.length] The arity cap.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the new capped function.\n * @example\n *\n * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n * // => [6, 8, 10]\n */\nfunction ary(func, n, guard) {\n  n = guard ? undefined : n;\n  n = (func && n == null) ? func.length : n;\n  return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n}\n\nexport default ary;\n", "import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n", "/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n", "import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n", "import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n", "import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n", "import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n", "import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n", "import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n", "/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n", "import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n", "/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n", "import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n", "import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n", "/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n", "import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n", "import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n", "/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n", "import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n", "import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n", "import assignValue from './_assignValue.js';\nimport copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport isArrayLike from './isArrayLike.js';\nimport isPrototype from './_isPrototype.js';\nimport keys from './keys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nexport default assign;\n", "/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n", "import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n", "import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nexport default assignIn;\n", "import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assignIn` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extendWith\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignInWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keysIn(source), object, customizer);\n});\n\nexport default assignInWith;\n", "import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n/**\n * This method is like `_.assign` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignInWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keys(source), object, customizer);\n});\n\nexport default assignWith;\n", "import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n", "import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n", "import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n", "/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n", "import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n", "/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n", "import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n", "import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n", "import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n", "/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n", "import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n", "import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n", "import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n", "import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n", "import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n", "import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n", "import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n", "import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n", "import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n", "import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n", "import get from './get.js';\n\n/**\n * The base implementation of `_.at` without support for individual paths.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {string[]} paths The property paths to pick.\n * @returns {Array} Returns the picked elements.\n */\nfunction baseAt(object, paths) {\n  var index = -1,\n      length = paths.length,\n      result = Array(length),\n      skip = object == null;\n\n  while (++index < length) {\n    result[index] = skip ? undefined : get(object, paths[index]);\n  }\n  return result;\n}\n\nexport default baseAt;\n", "/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n", "import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n", "import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n", "import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n", "import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n", "import baseAt from './_baseAt.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an array of values corresponding to `paths` of `object`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Array} Returns the picked values.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n *\n * _.at(object, ['a[0].b.c', 'a[1]']);\n * // => [3, 4]\n */\nvar at = flatRest(baseAt);\n\nexport default at;\n", "import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n", "import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/** `Object#toString` result references. */\nvar domExcTag = '[object DOMException]',\n    errorTag = '[object Error]';\n\n/**\n * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n * `SyntaxError`, `TypeError`, or `URIError` object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n * @example\n *\n * _.isError(new Error);\n * // => true\n *\n * _.isError(Error);\n * // => false\n */\nfunction isError(value) {\n  if (!isObjectLike(value)) {\n    return false;\n  }\n  var tag = baseGetTag(value);\n  return tag == errorTag || tag == domExcTag ||\n    (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n}\n\nexport default isError;\n", "import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport isError from './isError.js';\n\n/**\n * Attempts to invoke `func`, returning either the result or the caught error\n * object. Any additional arguments are provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {Function} func The function to attempt.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {*} Returns the `func` result or error object.\n * @example\n *\n * // Avoid throwing errors for invalid selectors.\n * var elements = _.attempt(function(selector) {\n *   return document.querySelectorAll(selector);\n * }, '>_>');\n *\n * if (_.isError(elements)) {\n *   elements = [];\n * }\n */\nvar attempt = baseRest(function(func, args) {\n  try {\n    return apply(func, undefined, args);\n  } catch (e) {\n    return isError(e) ? e : new Error(e);\n  }\n});\n\nexport default attempt;\n", "import toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nexport default before;\n", "import baseRest from './_baseRest.js';\nimport createWrap from './_createWrap.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and `partials` prepended to the arguments it receives.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * function greet(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * }\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = baseRest(function(func, thisArg, partials) {\n  var bitmask = WRAP_BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bind));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nexport default bind;\n", "import arrayEach from './_arrayEach.js';\nimport baseAssignValue from './_baseAssignValue.js';\nimport bind from './bind.js';\nimport flatRest from './_flatRest.js';\nimport toKey from './_toKey.js';\n\n/**\n * Binds methods of an object to the object itself, overwriting the existing\n * method.\n *\n * **Note:** This method doesn't set the \"length\" property of bound functions.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {Object} object The object to bind and assign the bound methods to.\n * @param {...(string|string[])} methodNames The object method names to bind.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var view = {\n *   'label': 'docs',\n *   'click': function() {\n *     console.log('clicked ' + this.label);\n *   }\n * };\n *\n * _.bindAll(view, ['click']);\n * jQuery(element).on('click', view.click);\n * // => Logs 'clicked docs' when clicked.\n */\nvar bindAll = flatRest(function(object, methodNames) {\n  arrayEach(methodNames, function(key) {\n    key = toKey(key);\n    baseAssignValue(object, key, bind(object[key], object));\n  });\n  return object;\n});\n\nexport default bindAll;\n", "import baseRest from './_baseRest.js';\nimport createWrap from './_createWrap.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes the method at `object[key]` with `partials`\n * prepended to the arguments it receives.\n *\n * This method differs from `_.bind` by allowing bound functions to reference\n * methods that may be redefined or don't yet exist. See\n * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n * for more details.\n *\n * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Function\n * @param {Object} object The object to invoke the method on.\n * @param {string} key The key of the method.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * var object = {\n *   'user': 'fred',\n *   'greet': function(greeting, punctuation) {\n *     return greeting + ' ' + this.user + punctuation;\n *   }\n * };\n *\n * var bound = _.bindKey(object, 'greet', 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * object.greet = function(greeting, punctuation) {\n *   return greeting + 'ya ' + this.user + punctuation;\n * };\n *\n * bound('!');\n * // => 'hiya fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bindKey(object, 'greet', _, '!');\n * bound('hi');\n * // => 'hiya fred!'\n */\nvar bindKey = baseRest(function(object, key, partials) {\n  var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bindKey));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(key, bitmask, object, partials, holders);\n});\n\n// Assign default placeholders.\nbindKey.placeholder = {};\n\nexport default bindKey;\n", "/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n", "import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n", "/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n", "import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n", "import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n", "import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n", "import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n", "/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n", "/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n", "import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n", "import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('dj vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n", "/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n", "/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n", "import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n", "import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n", "import capitalize from './capitalize.js';\nimport createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nexport default camelCase;\n", "import isArray from './isArray.js';\n\n/**\n * Casts `value` as an array if it's not one.\n *\n * @static\n * @memberOf _\n * @since 4.4.0\n * @category Lang\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast array.\n * @example\n *\n * _.castArray(1);\n * // => [1]\n *\n * _.castArray({ 'a': 1 });\n * // => [{ 'a': 1 }]\n *\n * _.castArray('abc');\n * // => ['abc']\n *\n * _.castArray(null);\n * // => [null]\n *\n * _.castArray(undefined);\n * // => [undefined]\n *\n * _.castArray();\n * // => []\n *\n * var array = [1, 2, 3];\n * console.log(_.castArray(array) === array);\n * // => true\n */\nfunction castArray() {\n  if (!arguments.length) {\n    return [];\n  }\n  var value = arguments[0];\n  return isArray(value) ? value : [value];\n}\n\nexport default castArray;\n", "import root from './_root.js';\nimport toInteger from './toInteger.js';\nimport toNumber from './toNumber.js';\nimport toString from './toString.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite,\n    nativeMin = Math.min;\n\n/**\n * Creates a function like `_.round`.\n *\n * @private\n * @param {string} methodName The name of the `Math` method to use when rounding.\n * @returns {Function} Returns the new round function.\n */\nfunction createRound(methodName) {\n  var func = Math[methodName];\n  return function(number, precision) {\n    number = toNumber(number);\n    precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n    if (precision && nativeIsFinite(number)) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (toString(number) + 'e').split('e'),\n          value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (toString(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return func(number);\n  };\n}\n\nexport default createRound;\n", "import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded up to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round up.\n * @param {number} [precision=0] The precision to round up to.\n * @returns {number} Returns the rounded up number.\n * @example\n *\n * _.ceil(4.006);\n * // => 5\n *\n * _.ceil(6.004, 2);\n * // => 6.01\n *\n * _.ceil(6040, -2);\n * // => 6100\n */\nvar ceil = createRound('ceil');\n\nexport default ceil;\n", "import lodash from './wrapperLodash.js';\n\n/**\n * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n * chain sequences enabled. The result of such sequences must be unwrapped\n * with `_#value`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Seq\n * @param {*} value The value to wrap.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36 },\n *   { 'user': 'fred',    'age': 40 },\n *   { 'user': 'pebbles', 'age': 1 }\n * ];\n *\n * var youngest = _\n *   .chain(users)\n *   .sortBy('age')\n *   .map(function(o) {\n *     return o.user + ' is ' + o.age;\n *   })\n *   .head()\n *   .value();\n * // => 'pebbles is 1'\n */\nfunction chain(value) {\n  var result = lodash(value);\n  result.__chain__ = true;\n  return result;\n}\n\nexport default chain;\n", "import baseSlice from './_baseSlice.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nexport default chunk;\n", "/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n", "import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n", "import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n", "/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n", "/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n", "/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n", "import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n", "import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n", "import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n", "import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n", "/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n", "/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n", "import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n", "import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n", "import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n", "import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n", "import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n", "import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n", "import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n", "/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n", "import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n", "import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n", "import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n", "import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n", "import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneDeepWith;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it accepts `customizer` which\n * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n * cloning is handled by the method instead. The `customizer` is invoked with\n * up to four arguments; (value [, index|key, object, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeepWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(false);\n *   }\n * }\n *\n * var el = _.cloneWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 0\n */\nfunction cloneWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneWith;\n", "import LodashWrapper from './_LodashWrapper.js';\n\n/**\n * Executes the chain sequence and returns the wrapped result.\n *\n * @name commit\n * @memberOf _\n * @since 3.2.0\n * @category Seq\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var array = [1, 2];\n * var wrapped = _(array).push(3);\n *\n * console.log(array);\n * // => [1, 2]\n *\n * wrapped = wrapped.commit();\n * console.log(array);\n * // => [1, 2, 3]\n *\n * wrapped.last();\n * // => 3\n *\n * console.log(array);\n * // => [1, 2, 3]\n */\nfunction wrapperCommit() {\n  return new LodashWrapper(this.value(), this.__chain__);\n}\n\nexport default wrapperCommit;\n", "/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default compact;\n", "import arrayPush from './_arrayPush.js';\nimport baseFlatten from './_baseFlatten.js';\nimport copyArray from './_copyArray.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a new array concatenating `array` with any additional arrays\n * and/or values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to concatenate.\n * @param {...*} [values] The values to concatenate.\n * @returns {Array} Returns the new concatenated array.\n * @example\n *\n * var array = [1];\n * var other = _.concat(array, 2, [3], [[4]]);\n *\n * console.log(other);\n * // => [1, 2, 3, [4]]\n *\n * console.log(array);\n * // => [1]\n */\nfunction concat() {\n  var length = arguments.length;\n  if (!length) {\n    return [];\n  }\n  var args = Array(length - 1),\n      array = arguments[0],\n      index = length;\n\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n}\n\nexport default concat;\n", "/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n", "/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n", "import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n", "/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n", "/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n", "import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n", "/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n", "/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n", "import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n", "import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n", "import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n", "import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n", "import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n", "import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n", "import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n", "/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n", "import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n", "/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n", "import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n", "import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n", "import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n", "/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n", "import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n", "import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n", "import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n", "import apply from './_apply.js';\nimport arrayMap from './_arrayMap.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that iterates over `pairs` and invokes the corresponding\n * function of the first predicate to return truthy. The predicate-function\n * pairs are invoked with the `this` binding and arguments of the created\n * function.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {Array} pairs The predicate-function pairs.\n * @returns {Function} Returns the new composite function.\n * @example\n *\n * var func = _.cond([\n *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n *   [_.stubTrue,                      _.constant('no match')]\n * ]);\n *\n * func({ 'a': 1, 'b': 2 });\n * // => 'matches A'\n *\n * func({ 'a': 0, 'b': 1 });\n * // => 'matches B'\n *\n * func({ 'a': '1', 'b': '2' });\n * // => 'no match'\n */\nfunction cond(pairs) {\n  var length = pairs == null ? 0 : pairs.length,\n      toIteratee = baseIteratee;\n\n  pairs = !length ? [] : arrayMap(pairs, function(pair) {\n    if (typeof pair[1] != 'function') {\n      throw new TypeError(FUNC_ERROR_TEXT);\n    }\n    return [toIteratee(pair[0]), pair[1]];\n  });\n\n  return baseRest(function(args) {\n    var index = -1;\n    while (++index < length) {\n      var pair = pairs[index];\n      if (apply(pair[0], this, args)) {\n        return apply(pair[1], this, args);\n      }\n    }\n  });\n}\n\nexport default cond;\n", "/**\n * The base implementation of `_.conformsTo` which accepts `props` to check.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property predicates to conform to.\n * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n */\nfunction baseConformsTo(object, source, props) {\n  var length = props.length;\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (length--) {\n    var key = props[length],\n        predicate = source[key],\n        value = object[key];\n\n    if ((value === undefined && !(key in object)) || !predicate(value)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default baseConformsTo;\n", "import baseConformsTo from './_baseConformsTo.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.conforms` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property predicates to conform to.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseConforms(source) {\n  var props = keys(source);\n  return function(object) {\n    return baseConformsTo(object, source, props);\n  };\n}\n\nexport default baseConforms;\n", "import baseClone from './_baseClone.js';\nimport baseConforms from './_baseConforms.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1;\n\n/**\n * Creates a function that invokes the predicate properties of `source` with\n * the corresponding property values of a given object, returning `true` if\n * all predicates return truthy, else `false`.\n *\n * **Note:** The created function is equivalent to `_.conformsTo` with\n * `source` partially applied.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {Object} source The object of property predicates to conform to.\n * @returns {Function} Returns the new spec function.\n * @example\n *\n * var objects = [\n *   { 'a': 2, 'b': 1 },\n *   { 'a': 1, 'b': 2 }\n * ];\n *\n * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n * // => [{ 'a': 1, 'b': 2 }]\n */\nfunction conforms(source) {\n  return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n}\n\nexport default conforms;\n", "import baseConformsTo from './_baseConformsTo.js';\nimport keys from './keys.js';\n\n/**\n * Checks if `object` conforms to `source` by invoking the predicate\n * properties of `source` with the corresponding property values of `object`.\n *\n * **Note:** This method is equivalent to `_.conforms` when `source` is\n * partially applied.\n *\n * @static\n * @memberOf _\n * @since 4.14.0\n * @category Lang\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property predicates to conform to.\n * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n *\n * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n * // => true\n *\n * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n * // => false\n */\nfunction conformsTo(object, source) {\n  return source == null || baseConformsTo(object, source, keys(source));\n}\n\nexport default conformsTo;\n", "/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n", "/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n", "import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n", "import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n", "import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n", "import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n", "import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n", "import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the number of times the key was returned by `iteratee`. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.countBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': 1, '6': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.countBy(['one', 'two', 'three'], 'length');\n * // => { '3': 2, '5': 1 }\n */\nvar countBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    ++result[key];\n  } else {\n    baseAssignValue(result, key, 1);\n  }\n});\n\nexport default countBy;\n", "import baseAssign from './_baseAssign.js';\nimport baseCreate from './_baseCreate.js';\n\n/**\n * Creates an object that inherits from the `prototype` object. If a\n * `properties` object is given, its own enumerable string keyed properties\n * are assigned to the created object.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Object\n * @param {Object} prototype The object to inherit from.\n * @param {Object} [properties] The properties to assign to the object.\n * @returns {Object} Returns the new object.\n * @example\n *\n * function Shape() {\n *   this.x = 0;\n *   this.y = 0;\n * }\n *\n * function Circle() {\n *   Shape.call(this);\n * }\n *\n * Circle.prototype = _.create(Shape.prototype, {\n *   'constructor': Circle\n * });\n *\n * var circle = new Circle;\n * circle instanceof Circle;\n * // => true\n *\n * circle instanceof Shape;\n * // => true\n */\nfunction create(prototype, properties) {\n  var result = baseCreate(prototype);\n  return properties == null ? result : baseAssign(result, properties);\n}\n\nexport default create;\n", "import createWrap from './_createWrap.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_CURRY_FLAG = 8;\n\n/**\n * Creates a function that accepts arguments of `func` and either invokes\n * `func` returning its result, if at least `arity` number of arguments have\n * been provided, or returns a function that accepts the remaining `func`\n * arguments, and so on. The arity of `func` may be specified if `func.length`\n * is not sufficient.\n *\n * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for provided arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of curried functions.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Function\n * @param {Function} func The function to curry.\n * @param {number} [arity=func.length] The arity of `func`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the new curried function.\n * @example\n *\n * var abc = function(a, b, c) {\n *   return [a, b, c];\n * };\n *\n * var curried = _.curry(abc);\n *\n * curried(1)(2)(3);\n * // => [1, 2, 3]\n *\n * curried(1, 2)(3);\n * // => [1, 2, 3]\n *\n * curried(1, 2, 3);\n * // => [1, 2, 3]\n *\n * // Curried with placeholders.\n * curried(1)(_, 3)(2);\n * // => [1, 2, 3]\n */\nfunction curry(func, arity, guard) {\n  arity = guard ? undefined : arity;\n  var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n  result.placeholder = curry.placeholder;\n  return result;\n}\n\n// Assign default placeholders.\ncurry.placeholder = {};\n\nexport default curry;\n", "import createWrap from './_createWrap.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_CURRY_RIGHT_FLAG = 16;\n\n/**\n * This method is like `_.curry` except that arguments are applied to `func`\n * in the manner of `_.partialRight` instead of `_.partial`.\n *\n * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for provided arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of curried functions.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} func The function to curry.\n * @param {number} [arity=func.length] The arity of `func`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the new curried function.\n * @example\n *\n * var abc = function(a, b, c) {\n *   return [a, b, c];\n * };\n *\n * var curried = _.curryRight(abc);\n *\n * curried(3)(2)(1);\n * // => [1, 2, 3]\n *\n * curried(2, 3)(1);\n * // => [1, 2, 3]\n *\n * curried(1, 2, 3);\n * // => [1, 2, 3]\n *\n * // Curried with placeholders.\n * curried(3)(1, _)(2);\n * // => [1, 2, 3]\n */\nfunction curryRight(func, arity, guard) {\n  arity = guard ? undefined : arity;\n  var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n  result.placeholder = curryRight.placeholder;\n  return result;\n}\n\n// Assign default placeholders.\ncurryRight.placeholder = {};\n\nexport default curryRight;\n", "import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n", "import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n", "/**\n * Checks `value` to determine whether a default value should be returned in\n * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n * or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.14.0\n * @category Util\n * @param {*} value The value to check.\n * @param {*} defaultValue The default value.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * _.defaultTo(1, 10);\n * // => 1\n *\n * _.defaultTo(undefined, 10);\n * // => 10\n */\nfunction defaultTo(value, defaultValue) {\n  return (value == null || value !== value) ? defaultValue : value;\n}\n\nexport default defaultTo;\n", "import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n", "import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n", "/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n", "import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n", "import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n", "import baseMerge from './_baseMerge.js';\nimport isObject from './isObject.js';\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nexport default customDefaultsMerge;\n", "import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n", "import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport customDefaultsMerge from './_customDefaultsMerge.js';\nimport mergeWith from './mergeWith.js';\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nexport default defaultsDeep;\n", "/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * The base implementation of `_.delay` and `_.defer` which accepts `args`\n * to provide to `func`.\n *\n * @private\n * @param {Function} func The function to delay.\n * @param {number} wait The number of milliseconds to delay invocation.\n * @param {Array} args The arguments to provide to `func`.\n * @returns {number|Object} Returns the timer id or timeout object.\n */\nfunction baseDelay(func, wait, args) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return setTimeout(function() { func.apply(undefined, args); }, wait);\n}\n\nexport default baseDelay;\n", "import baseDelay from './_baseDelay.js';\nimport baseRest from './_baseRest.js';\n\n/**\n * Defers invoking the `func` until the current call stack has cleared. Any\n * additional arguments are provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to defer.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {number} Returns the timer id.\n * @example\n *\n * _.defer(function(text) {\n *   console.log(text);\n * }, 'deferred');\n * // => Logs 'deferred' after one millisecond.\n */\nvar defer = baseRest(function(func, args) {\n  return baseDelay(func, 1, args);\n});\n\nexport default defer;\n", "import baseDelay from './_baseDelay.js';\nimport baseRest from './_baseRest.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Invokes `func` after `wait` milliseconds. Any additional arguments are\n * provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to delay.\n * @param {number} wait The number of milliseconds to delay invocation.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {number} Returns the timer id.\n * @example\n *\n * _.delay(function(text) {\n *   console.log(text);\n * }, 1000, 'later');\n * // => Logs 'later' after one second.\n */\nvar delay = baseRest(function(func, wait, args) {\n  return baseDelay(func, toNumber(wait) || 0, args);\n});\n\nexport default delay;\n", "/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n", "import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseDifference;\n", "import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nexport default difference;\n", "/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n", "import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. The order and references of result values are\n * determined by the first array. The iteratee is invoked with one argument:\n * (value).\n *\n * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n * // => [1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = baseRest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2))\n    : [];\n});\n\nexport default differenceBy;\n", "import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.difference` except that it accepts `comparator`\n * which is invoked to compare elements of `array` to `values`. The order and\n * references of result values are determined by the first array. The comparator\n * is invoked with two arguments: (arrVal, othVal).\n *\n * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n *\n * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n * // => [{ 'x': 2, 'y': 1 }]\n */\nvar differenceWith = baseRest(function(array, values) {\n  var comparator = last(values);\n  if (isArrayLikeObject(comparator)) {\n    comparator = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n    : [];\n});\n\nexport default differenceWith;\n", "import createMathOperation from './_createMathOperation.js';\n\n/**\n * Divide two numbers.\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Math\n * @param {number} dividend The first number in a division.\n * @param {number} divisor The second number in a division.\n * @returns {number} Returns the quotient.\n * @example\n *\n * _.divide(6, 4);\n * // => 1.5\n */\nvar divide = createMathOperation(function(dividend, divisor) {\n  return dividend / divisor;\n}, 1);\n\nexport default divide;\n", "import baseSlice from './_baseSlice.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the beginning.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.drop([1, 2, 3]);\n * // => [2, 3]\n *\n * _.drop([1, 2, 3], 2);\n * // => [3]\n *\n * _.drop([1, 2, 3], 5);\n * // => []\n *\n * _.drop([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction drop(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  return baseSlice(array, n < 0 ? 0 : n, length);\n}\n\nexport default drop;\n", "import baseSlice from './_baseSlice.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the end.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.dropRight([1, 2, 3]);\n * // => [1, 2]\n *\n * _.dropRight([1, 2, 3], 2);\n * // => [1]\n *\n * _.dropRight([1, 2, 3], 5);\n * // => []\n *\n * _.dropRight([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction dropRight(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  n = length - n;\n  return baseSlice(array, 0, n < 0 ? 0 : n);\n}\n\nexport default dropRight;\n", "import baseSlice from './_baseSlice.js';\n\n/**\n * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n * without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseWhile(array, predicate, isDrop, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length) &&\n    predicate(array[index], index, array)) {}\n\n  return isDrop\n    ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n    : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n}\n\nexport default baseWhile;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseWhile from './_baseWhile.js';\n\n/**\n * Creates a slice of `array` excluding elements dropped from the end.\n * Elements are dropped until `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.dropRightWhile(users, function(o) { return !o.active; });\n * // => objects for ['barney']\n *\n * // The `_.matches` iteratee shorthand.\n * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n * // => objects for ['barney', 'fred']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.dropRightWhile(users, ['active', false]);\n * // => objects for ['barney']\n *\n * // The `_.property` iteratee shorthand.\n * _.dropRightWhile(users, 'active');\n * // => objects for ['barney', 'fred', 'pebbles']\n */\nfunction dropRightWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate, 3), true, true)\n    : [];\n}\n\nexport default dropRightWhile;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseWhile from './_baseWhile.js';\n\n/**\n * Creates a slice of `array` excluding elements dropped from the beginning.\n * Elements are dropped until `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.dropWhile(users, function(o) { return !o.active; });\n * // => objects for ['pebbles']\n *\n * // The `_.matches` iteratee shorthand.\n * _.dropWhile(users, { 'user': 'barney', 'active': false });\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.dropWhile(users, ['active', false]);\n * // => objects for ['pebbles']\n *\n * // The `_.property` iteratee shorthand.\n * _.dropWhile(users, 'active');\n * // => objects for ['barney', 'fred', 'pebbles']\n */\nfunction dropWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate, 3), true)\n    : [];\n}\n\nexport default dropWhile;\n", "import identity from './identity.js';\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nexport default castFunction;\n", "import arrayEach from './_arrayEach.js';\nimport baseEach from './_baseEach.js';\nimport castFunction from './_castFunction.js';\nimport isArray from './isArray.js';\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nexport default forEach;\n", "/**\n * A specialized version of `_.forEachRight` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEachRight(array, iteratee) {\n  var length = array == null ? 0 : array.length;\n\n  while (length--) {\n    if (iteratee(array[length], length, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEachRight;\n", "import createBaseFor from './_createBaseFor.js';\n\n/**\n * This function is like `baseFor` except that it iterates over properties\n * in the opposite order.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseForRight = createBaseFor(true);\n\nexport default baseForRight;\n", "import baseForRight from './_baseForRight.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwnRight(object, iteratee) {\n  return object && baseForRight(object, iteratee, keys);\n}\n\nexport default baseForOwnRight;\n", "import baseForOwnRight from './_baseForOwnRight.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEachRight = createBaseEach(baseForOwnRight, true);\n\nexport default baseEachRight;\n", "import arrayEachRight from './_arrayEachRight.js';\nimport baseEachRight from './_baseEachRight.js';\nimport castFunction from './_castFunction.js';\nimport isArray from './isArray.js';\n\n/**\n * This method is like `_.forEach` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @alias eachRight\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEach\n * @example\n *\n * _.forEachRight([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `2` then `1`.\n */\nfunction forEachRight(collection, iteratee) {\n  var func = isArray(collection) ? arrayEachRight : baseEachRight;\n  return func(collection, castFunction(iteratee));\n}\n\nexport default forEachRight;\n", "import baseClamp from './_baseClamp.js';\nimport baseToString from './_baseToString.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/**\n * Checks if `string` ends with the given target string.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {string} [target] The string to search for.\n * @param {number} [position=string.length] The position to search up to.\n * @returns {boolean} Returns `true` if `string` ends with `target`,\n *  else `false`.\n * @example\n *\n * _.endsWith('abc', 'c');\n * // => true\n *\n * _.endsWith('abc', 'b');\n * // => false\n *\n * _.endsWith('abc', 'b', 2);\n * // => true\n */\nfunction endsWith(string, target, position) {\n  string = toString(string);\n  target = baseToString(target);\n\n  var length = string.length;\n  position = position === undefined\n    ? length\n    : baseClamp(toInteger(position), 0, length);\n\n  var end = position;\n  position -= target.length;\n  return position >= 0 && string.slice(position, end) == target;\n}\n\nexport default endsWith;\n", "import arrayMap from './_arrayMap.js';\n\n/**\n * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n * of key-value pairs for `object` corresponding to the property names of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the key-value pairs.\n */\nfunction baseToPairs(object, props) {\n  return arrayMap(props, function(key) {\n    return [key, object[key]];\n  });\n}\n\nexport default baseToPairs;\n", "/**\n * Converts `set` to its value-value pairs.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the value-value pairs.\n */\nfunction setToPairs(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = [value, value];\n  });\n  return result;\n}\n\nexport default setToPairs;\n", "import baseToPairs from './_baseToPairs.js';\nimport getTag from './_getTag.js';\nimport mapToArray from './_mapToArray.js';\nimport setToPairs from './_setToPairs.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/**\n * Creates a `_.toPairs` or `_.toPairsIn` function.\n *\n * @private\n * @param {Function} keysFunc The function to get the keys of a given object.\n * @returns {Function} Returns the new pairs function.\n */\nfunction createToPairs(keysFunc) {\n  return function(object) {\n    var tag = getTag(object);\n    if (tag == mapTag) {\n      return mapToArray(object);\n    }\n    if (tag == setTag) {\n      return setToPairs(object);\n    }\n    return baseToPairs(object, keysFunc(object));\n  };\n}\n\nexport default createToPairs;\n", "import createToPairs from './_createToPairs.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable string keyed-value pairs for `object`\n * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n * entries are returned.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias entries\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairs(new Foo);\n * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n */\nvar toPairs = createToPairs(keys);\n\nexport default toPairs;\n", "import createToPairs from './_createToPairs.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable string keyed-value pairs\n * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n * or set, its entries are returned.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias entriesIn\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairsIn(new Foo);\n * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n */\nvar toPairsIn = createToPairs(keysIn);\n\nexport default toPairsIn;\n", "import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\nexport default escapeHtmlChar;\n", "import escapeHtmlChar from './_escapeHtmlChar.js';\nimport toString from './toString.js';\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nexport default escape;\n", "import toString from './toString.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nexport default escapeRegExp;\n", "/**\n * A specialized version of `_.every` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default arrayEvery;\n", "import baseEach from './_baseEach.js';\n\n/**\n * The base implementation of `_.every` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nexport default baseEvery;\n", "import arrayEvery from './_arrayEvery.js';\nimport baseEvery from './_baseEvery.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * Iteration is stopped once `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * **Note:** This method returns `true` for\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n * elements of empty collections.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.every(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, guard) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nexport default every;\n", "import baseClamp from './_baseClamp.js';\nimport toInteger from './toInteger.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Converts `value` to an integer suitable for use as the length of an\n * array-like object.\n *\n * **Note:** This method is based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toLength(3.2);\n * // => 3\n *\n * _.toLength(Number.MIN_VALUE);\n * // => 0\n *\n * _.toLength(Infinity);\n * // => 4294967295\n *\n * _.toLength('3.2');\n * // => 3\n */\nfunction toLength(value) {\n  return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n}\n\nexport default toLength;\n", "import toInteger from './toInteger.js';\nimport toLength from './toLength.js';\n\n/**\n * The base implementation of `_.fill` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n */\nfunction baseFill(array, value, start, end) {\n  var length = array.length;\n\n  start = toInteger(start);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : toInteger(end);\n  if (end < 0) {\n    end += length;\n  }\n  end = start > end ? 0 : toLength(end);\n  while (start < end) {\n    array[start++] = value;\n  }\n  return array;\n}\n\nexport default baseFill;\n", "import baseFill from './_baseFill.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Fills elements of `array` with `value` from `start` up to, but not\n * including, `end`.\n *\n * **Note:** This method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 3.2.0\n * @category Array\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.fill(array, 'a');\n * console.log(array);\n * // => ['a', 'a', 'a']\n *\n * _.fill(Array(3), 2);\n * // => [2, 2, 2]\n *\n * _.fill([4, 6, 8, 10], '*', 1, 3);\n * // => [4, '*', '*', 10]\n */\nfunction fill(array, value, start, end) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n    start = 0;\n    end = length;\n  }\n  return baseFill(array, value, start, end);\n}\n\nexport default fill;\n", "import baseEach from './_baseEach.js';\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nexport default baseFilter;\n", "import arrayFilter from './_arrayFilter.js';\nimport baseFilter from './_baseFilter.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nexport default filter;\n", "import baseIteratee from './_baseIteratee.js';\nimport isArrayLike from './isArrayLike.js';\nimport keys from './keys.js';\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nexport default createFind;\n", "import baseFindIndex from './_baseFindIndex.js';\nimport baseIteratee from './_baseIteratee.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nexport default findIndex;\n", "import createFind from './_createFind.js';\nimport findIndex from './findIndex.js';\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nexport default find;\n", "/**\n * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n * without support for iteratee shorthands, which iterates over `collection`\n * using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFindKey(collection, predicate, eachFunc) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = key;\n      return false;\n    }\n  });\n  return result;\n}\n\nexport default baseFindKey;\n", "import baseFindKey from './_baseFindKey.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * This method is like `_.find` except that it returns the key of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Object\n * @param {Object} object The object to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {string|undefined} Returns the key of the matched element,\n *  else `undefined`.\n * @example\n *\n * var users = {\n *   'barney':  { 'age': 36, 'active': true },\n *   'fred':    { 'age': 40, 'active': false },\n *   'pebbles': { 'age': 1,  'active': true }\n * };\n *\n * _.findKey(users, function(o) { return o.age < 40; });\n * // => 'barney' (iteration order is not guaranteed)\n *\n * // The `_.matches` iteratee shorthand.\n * _.findKey(users, { 'age': 1, 'active': true });\n * // => 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findKey(users, ['active', false]);\n * // => 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.findKey(users, 'active');\n * // => 'barney'\n */\nfunction findKey(object, predicate) {\n  return baseFindKey(object, baseIteratee(predicate, 3), baseForOwn);\n}\n\nexport default findKey;\n", "import baseFindIndex from './_baseFindIndex.js';\nimport baseIteratee from './_baseIteratee.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nexport default findLastIndex;\n", "import createFind from './_createFind.js';\nimport findLastIndex from './findLastIndex.js';\n\n/**\n * This method is like `_.find` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=collection.length-1] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * _.findLast([1, 2, 3, 4], function(n) {\n *   return n % 2 == 1;\n * });\n * // => 3\n */\nvar findLast = createFind(findLastIndex);\n\nexport default findLast;\n", "import baseFindKey from './_baseFindKey.js';\nimport baseForOwnRight from './_baseForOwnRight.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * This method is like `_.findKey` except that it iterates over elements of\n * a collection in the opposite order.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Object\n * @param {Object} object The object to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {string|undefined} Returns the key of the matched element,\n *  else `undefined`.\n * @example\n *\n * var users = {\n *   'barney':  { 'age': 36, 'active': true },\n *   'fred':    { 'age': 40, 'active': false },\n *   'pebbles': { 'age': 1,  'active': true }\n * };\n *\n * _.findLastKey(users, function(o) { return o.age < 40; });\n * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastKey(users, { 'age': 36, 'active': true });\n * // => 'barney'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastKey(users, ['active', false]);\n * // => 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastKey(users, 'active');\n * // => 'pebbles'\n */\nfunction findLastKey(object, predicate) {\n  return baseFindKey(object, baseIteratee(predicate, 3), baseForOwnRight);\n}\n\nexport default findLastKey;\n", "/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nexport default head;\n", "import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n", "import arrayMap from './_arrayMap.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nexport default map;\n", "import baseFlatten from './_baseFlatten.js';\nimport map from './map.js';\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nexport default flatMap;\n", "import baseFlatten from './_baseFlatten.js';\nimport map from './map.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * This method is like `_.flatMap` except that it recursively flattens the\n * mapped results.\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [[[n, n]]];\n * }\n *\n * _.flatMapDeep([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMapDeep(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), INFINITY);\n}\n\nexport default flatMapDeep;\n", "import baseFlatten from './_baseFlatten.js';\nimport map from './map.js';\nimport toInteger from './toInteger.js';\n\n/**\n * This method is like `_.flatMap` except that it recursively flattens the\n * mapped results up to `depth` times.\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {number} [depth=1] The maximum recursion depth.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [[[n, n]]];\n * }\n *\n * _.flatMapDepth([1, 2], duplicate, 2);\n * // => [[1, 1], [2, 2]]\n */\nfunction flatMapDepth(collection, iteratee, depth) {\n  depth = depth === undefined ? 1 : toInteger(depth);\n  return baseFlatten(map(collection, iteratee), depth);\n}\n\nexport default flatMapDepth;\n", "import baseFlatten from './_baseFlatten.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nexport default flattenDeep;\n", "import baseFlatten from './_baseFlatten.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Recursively flatten `array` up to `depth` times.\n *\n * @static\n * @memberOf _\n * @since 4.4.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @param {number} [depth=1] The maximum recursion depth.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * var array = [1, [2, [3, [4]], 5]];\n *\n * _.flattenDepth(array, 1);\n * // => [1, 2, [3, [4]], 5]\n *\n * _.flattenDepth(array, 2);\n * // => [1, 2, 3, [4], 5]\n */\nfunction flattenDepth(array, depth) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  depth = depth === undefined ? 1 : toInteger(depth);\n  return baseFlatten(array, depth);\n}\n\nexport default flattenDepth;\n", "import createWrap from './_createWrap.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that invokes `func` with arguments reversed.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Function\n * @param {Function} func The function to flip arguments for.\n * @returns {Function} Returns the new flipped function.\n * @example\n *\n * var flipped = _.flip(function() {\n *   return _.toArray(arguments);\n * });\n *\n * flipped('a', 'b', 'c', 'd');\n * // => ['d', 'c', 'b', 'a']\n */\nfunction flip(func) {\n  return createWrap(func, WRAP_FLIP_FLAG);\n}\n\nexport default flip;\n", "import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded down to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round down.\n * @param {number} [precision=0] The precision to round down to.\n * @returns {number} Returns the rounded down number.\n * @example\n *\n * _.floor(4.006);\n * // => 4\n *\n * _.floor(0.046, 2);\n * // => 0.04\n *\n * _.floor(4060, -2);\n * // => 4000\n */\nvar floor = createRound('floor');\n\nexport default floor;\n", "import LodashWrapper from './_LodashWrapper.js';\nimport flatRest from './_flatRest.js';\nimport getData from './_getData.js';\nimport getFuncName from './_getFuncName.js';\nimport isArray from './isArray.js';\nimport isLaziable from './_isLaziable.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/**\n * Creates a `_.flow` or `_.flowRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new flow function.\n */\nfunction createFlow(fromRight) {\n  return flatRest(function(funcs) {\n    var length = funcs.length,\n        index = length,\n        prereq = LodashWrapper.prototype.thru;\n\n    if (fromRight) {\n      funcs.reverse();\n    }\n    while (index--) {\n      var func = funcs[index];\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n        var wrapper = new LodashWrapper([], true);\n      }\n    }\n    index = wrapper ? index : length;\n    while (++index < length) {\n      func = funcs[index];\n\n      var funcName = getFuncName(func),\n          data = funcName == 'wrapper' ? getData(func) : undefined;\n\n      if (data && isLaziable(data[0]) &&\n            data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n            !data[4].length && data[9] == 1\n          ) {\n        wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n      } else {\n        wrapper = (func.length == 1 && isLaziable(func))\n          ? wrapper[funcName]()\n          : wrapper.thru(func);\n      }\n    }\n    return function() {\n      var args = arguments,\n          value = args[0];\n\n      if (wrapper && args.length == 1 && isArray(value)) {\n        return wrapper.plant(value).value();\n      }\n      var index = 0,\n          result = length ? funcs[index].apply(this, args) : value;\n\n      while (++index < length) {\n        result = funcs[index].call(this, result);\n      }\n      return result;\n    };\n  });\n}\n\nexport default createFlow;\n", "import createFlow from './_createFlow.js';\n\n/**\n * Creates a function that returns the result of invoking the given functions\n * with the `this` binding of the created function, where each successive\n * invocation is supplied the return value of the previous.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {...(Function|Function[])} [funcs] The functions to invoke.\n * @returns {Function} Returns the new composite function.\n * @see _.flowRight\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var addSquare = _.flow([_.add, square]);\n * addSquare(1, 2);\n * // => 9\n */\nvar flow = createFlow();\n\nexport default flow;\n", "import createFlow from './_createFlow.js';\n\n/**\n * This method is like `_.flow` except that it creates a function that\n * invokes the given functions from right to left.\n *\n * @static\n * @since 3.0.0\n * @memberOf _\n * @category Util\n * @param {...(Function|Function[])} [funcs] The functions to invoke.\n * @returns {Function} Returns the new composite function.\n * @see _.flow\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var addSquare = _.flowRight([square, _.add]);\n * addSquare(1, 2);\n * // => 9\n */\nvar flowRight = createFlow(true);\n\nexport default flowRight;\n", "import baseFor from './_baseFor.js';\nimport castFunction from './_castFunction.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Iterates over own and inherited enumerable string keyed properties of an\n * object and invokes `iteratee` for each property. The iteratee is invoked\n * with three arguments: (value, key, object). Iteratee functions may exit\n * iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forInRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forIn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n */\nfunction forIn(object, iteratee) {\n  return object == null\n    ? object\n    : baseFor(object, castFunction(iteratee), keysIn);\n}\n\nexport default forIn;\n", "import baseForRight from './_baseForRight.js';\nimport castFunction from './_castFunction.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.forIn` except that it iterates over properties of\n * `object` in the opposite order.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forInRight(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n */\nfunction forInRight(object, iteratee) {\n  return object == null\n    ? object\n    : baseForRight(object, castFunction(iteratee), keysIn);\n}\n\nexport default forInRight;\n", "import baseForOwn from './_baseForOwn.js';\nimport castFunction from './_castFunction.js';\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, castFunction(iteratee));\n}\n\nexport default forOwn;\n", "import baseForOwnRight from './_baseForOwnRight.js';\nimport castFunction from './_castFunction.js';\n\n/**\n * This method is like `_.forOwn` except that it iterates over properties of\n * `object` in the opposite order.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwnRight(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n */\nfunction forOwnRight(object, iteratee) {\n  return object && baseForOwnRight(object, castFunction(iteratee));\n}\n\nexport default forOwnRight;\n", "/**\n * The inverse of `_.toPairs`; this method returns an object composed\n * from key-value `pairs`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} pairs The key-value pairs.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.fromPairs([['a', 1], ['b', 2]]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction fromPairs(pairs) {\n  var index = -1,\n      length = pairs == null ? 0 : pairs.length,\n      result = {};\n\n  while (++index < length) {\n    var pair = pairs[index];\n    result[pair[0]] = pair[1];\n  }\n  return result;\n}\n\nexport default fromPairs;\n", "import arrayFilter from './_arrayFilter.js';\nimport isFunction from './isFunction.js';\n\n/**\n * The base implementation of `_.functions` which creates an array of\n * `object` function property names filtered from `props`.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Array} props The property names to filter.\n * @returns {Array} Returns the function names.\n */\nfunction baseFunctions(object, props) {\n  return arrayFilter(props, function(key) {\n    return isFunction(object[key]);\n  });\n}\n\nexport default baseFunctions;\n", "import baseFunctions from './_baseFunctions.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of function property names from own enumerable properties\n * of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to inspect.\n * @returns {Array} Returns the function names.\n * @see _.functionsIn\n * @example\n *\n * function Foo() {\n *   this.a = _.constant('a');\n *   this.b = _.constant('b');\n * }\n *\n * Foo.prototype.c = _.constant('c');\n *\n * _.functions(new Foo);\n * // => ['a', 'b']\n */\nfunction functions(object) {\n  return object == null ? [] : baseFunctions(object, keys(object));\n}\n\nexport default functions;\n", "import baseFunctions from './_baseFunctions.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of function property names from own and inherited\n * enumerable properties of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to inspect.\n * @returns {Array} Returns the function names.\n * @see _.functions\n * @example\n *\n * function Foo() {\n *   this.a = _.constant('a');\n *   this.b = _.constant('b');\n * }\n *\n * Foo.prototype.c = _.constant('c');\n *\n * _.functionsIn(new Foo);\n * // => ['a', 'b', 'c']\n */\nfunction functionsIn(object) {\n  return object == null ? [] : baseFunctions(object, keysIn(object));\n}\n\nexport default functionsIn;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nexport default groupBy;\n", "/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nexport default baseGt;\n", "import toNumber from './toNumber.js';\n\n/**\n * Creates a function that performs a relational operation on two values.\n *\n * @private\n * @param {Function} operator The function to perform the operation.\n * @returns {Function} Returns the new relational operation function.\n */\nfunction createRelationalOperation(operator) {\n  return function(value, other) {\n    if (!(typeof value == 'string' && typeof other == 'string')) {\n      value = toNumber(value);\n      other = toNumber(other);\n    }\n    return operator(value, other);\n  };\n}\n\nexport default createRelationalOperation;\n", "import baseGt from './_baseGt.js';\nimport createRelationalOperation from './_createRelationalOperation.js';\n\n/**\n * Checks if `value` is greater than `other`.\n *\n * @static\n * @memberOf _\n * @since 3.9.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n * @see _.lt\n * @example\n *\n * _.gt(3, 1);\n * // => true\n *\n * _.gt(3, 3);\n * // => false\n *\n * _.gt(1, 3);\n * // => false\n */\nvar gt = createRelationalOperation(baseGt);\n\nexport default gt;\n", "import createRelationalOperation from './_createRelationalOperation.js';\n\n/**\n * Checks if `value` is greater than or equal to `other`.\n *\n * @static\n * @memberOf _\n * @since 3.9.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than or equal to\n *  `other`, else `false`.\n * @see _.lte\n * @example\n *\n * _.gte(3, 1);\n * // => true\n *\n * _.gte(3, 3);\n * // => true\n *\n * _.gte(1, 3);\n * // => false\n */\nvar gte = createRelationalOperation(function(value, other) {\n  return value >= other;\n});\n\nexport default gte;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n", "import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nexport default baseInRange;\n", "import baseInRange from './_baseInRange.js';\nimport toFinite from './toFinite.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nexport default inRange;\n", "import baseGetTag from './_baseGetTag.js';\nimport isArray from './isArray.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nexport default isString;\n", "import arrayMap from './_arrayMap.js';\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nexport default baseValues;\n", "import baseValues from './_baseValues.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nexport default values;\n", "import baseIndexOf from './_baseIndexOf.js';\nimport isArrayLike from './isArrayLike.js';\nimport isString from './isString.js';\nimport toInteger from './toInteger.js';\nimport values from './values.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nexport default includes;\n", "import baseIndexOf from './_baseIndexOf.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Gets the index at which the first occurrence of `value` is found in `array`\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. If `fromIndex` is negative, it's used as the\n * offset from the end of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.indexOf([1, 2, 1, 2], 2);\n * // => 1\n *\n * // Search from the `fromIndex`.\n * _.indexOf([1, 2, 1, 2], 2, 2);\n * // => 3\n */\nfunction indexOf(array, value, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseIndexOf(array, value, index);\n}\n\nexport default indexOf;\n", "import baseSlice from './_baseSlice.js';\n\n/**\n * Gets all but the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.initial([1, 2, 3]);\n * // => [1, 2]\n */\nfunction initial(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseSlice(array, 0, -1) : [];\n}\n\nexport default initial;\n", "import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseIntersection;\n", "import isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nexport default castArrayLikeObject;\n", "import arrayMap from './_arrayMap.js';\nimport baseIntersection from './_baseIntersection.js';\nimport baseRest from './_baseRest.js';\nimport castArrayLikeObject from './_castArrayLikeObject.js';\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nexport default intersection;\n", "import arrayMap from './_arrayMap.js';\nimport baseIntersection from './_baseIntersection.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport castArrayLikeObject from './_castArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.intersection` except that it accepts `iteratee`\n * which is invoked for each element of each `arrays` to generate the criterion\n * by which they're compared. The order and references of result values are\n * determined by the first array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n * // => [2.1]\n *\n * // The `_.property` iteratee shorthand.\n * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }]\n */\nvar intersectionBy = baseRest(function(arrays) {\n  var iteratee = last(arrays),\n      mapped = arrayMap(arrays, castArrayLikeObject);\n\n  if (iteratee === last(mapped)) {\n    iteratee = undefined;\n  } else {\n    mapped.pop();\n  }\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped, baseIteratee(iteratee, 2))\n    : [];\n});\n\nexport default intersectionBy;\n", "import arrayMap from './_arrayMap.js';\nimport baseIntersection from './_baseIntersection.js';\nimport baseRest from './_baseRest.js';\nimport castArrayLikeObject from './_castArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.intersection` except that it accepts `comparator`\n * which is invoked to compare elements of `arrays`. The order and references\n * of result values are determined by the first array. The comparator is\n * invoked with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.intersectionWith(objects, others, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }]\n */\nvar intersectionWith = baseRest(function(arrays) {\n  var comparator = last(arrays),\n      mapped = arrayMap(arrays, castArrayLikeObject);\n\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  if (comparator) {\n    mapped.pop();\n  }\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped, undefined, comparator)\n    : [];\n});\n\nexport default intersectionWith;\n", "import baseForOwn from './_baseForOwn.js';\n\n/**\n * The base implementation of `_.invert` and `_.invertBy` which inverts\n * `object` with values transformed by `iteratee` and set by `setter`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform values.\n * @param {Object} accumulator The initial inverted object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseInverter(object, setter, iteratee, accumulator) {\n  baseForOwn(object, function(value, key, object) {\n    setter(accumulator, iteratee(value), key, object);\n  });\n  return accumulator;\n}\n\nexport default baseInverter;\n", "import baseInverter from './_baseInverter.js';\n\n/**\n * Creates a function like `_.invertBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} toIteratee The function to resolve iteratees.\n * @returns {Function} Returns the new inverter function.\n */\nfunction createInverter(setter, toIteratee) {\n  return function(object, iteratee) {\n    return baseInverter(object, setter, toIteratee(iteratee), {});\n  };\n}\n\nexport default createInverter;\n", "import constant from './constant.js';\nimport createInverter from './_createInverter.js';\nimport identity from './identity.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Creates an object composed of the inverted keys and values of `object`.\n * If `object` contains duplicate values, subsequent values overwrite\n * property assignments of previous values.\n *\n * @static\n * @memberOf _\n * @since 0.7.0\n * @category Object\n * @param {Object} object The object to invert.\n * @returns {Object} Returns the new inverted object.\n * @example\n *\n * var object = { 'a': 1, 'b': 2, 'c': 1 };\n *\n * _.invert(object);\n * // => { '1': 'c', '2': 'b' }\n */\nvar invert = createInverter(function(result, value, key) {\n  if (value != null &&\n      typeof value.toString != 'function') {\n    value = nativeObjectToString.call(value);\n  }\n\n  result[value] = key;\n}, constant(identity));\n\nexport default invert;\n", "import baseIteratee from './_baseIteratee.js';\nimport createInverter from './_createInverter.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * This method is like `_.invert` except that the inverted object is generated\n * from the results of running each element of `object` thru `iteratee`. The\n * corresponding inverted value of each inverted key is an array of keys\n * responsible for generating the inverted value. The iteratee is invoked\n * with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.1.0\n * @category Object\n * @param {Object} object The object to invert.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Object} Returns the new inverted object.\n * @example\n *\n * var object = { 'a': 1, 'b': 2, 'c': 1 };\n *\n * _.invertBy(object);\n * // => { '1': ['a', 'c'], '2': ['b'] }\n *\n * _.invertBy(object, function(value) {\n *   return 'group' + value;\n * });\n * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n */\nvar invertBy = createInverter(function(result, value, key) {\n  if (value != null &&\n      typeof value.toString != 'function') {\n    value = nativeObjectToString.call(value);\n  }\n\n  if (hasOwnProperty.call(result, value)) {\n    result[value].push(key);\n  } else {\n    result[value] = [key];\n  }\n}, baseIteratee);\n\nexport default invertBy;\n", "import baseGet from './_baseGet.js';\nimport baseSlice from './_baseSlice.js';\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nexport default parent;\n", "import apply from './_apply.js';\nimport castPath from './_castPath.js';\nimport last from './last.js';\nimport parent from './_parent.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.invoke` without support for individual\n * method arguments.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the method to invoke.\n * @param {Array} args The arguments to invoke the method with.\n * @returns {*} Returns the result of the invoked method.\n */\nfunction baseInvoke(object, path, args) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  var func = object == null ? object : object[toKey(last(path))];\n  return func == null ? undefined : apply(func, object, args);\n}\n\nexport default baseInvoke;\n", "import baseInvoke from './_baseInvoke.js';\nimport baseRest from './_baseRest.js';\n\n/**\n * Invokes the method at `path` of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the method to invoke.\n * @param {...*} [args] The arguments to invoke the method with.\n * @returns {*} Returns the result of the invoked method.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n *\n * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n * // => [2, 3]\n */\nvar invoke = baseRest(baseInvoke);\n\nexport default invoke;\n", "import apply from './_apply.js';\nimport baseEach from './_baseEach.js';\nimport baseInvoke from './_baseInvoke.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Invokes the method at `path` of each element in `collection`, returning\n * an array of the results of each invoked method. Any additional arguments\n * are provided to each invoked method. If `path` is a function, it's invoked\n * for, and `this` bound to, each element in `collection`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array|Function|string} path The path of the method to invoke or\n *  the function invoked per iteration.\n * @param {...*} [args] The arguments to invoke each method with.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n * // => [[1, 5, 7], [1, 2, 3]]\n *\n * _.invokeMap([123, 456], String.prototype.split, '');\n * // => [['1', '2', '3'], ['4', '5', '6']]\n */\nvar invokeMap = baseRest(function(collection, path, args) {\n  var index = -1,\n      isFunc = typeof path == 'function',\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value) {\n    result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n  });\n  return result;\n});\n\nexport default invokeMap;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\n\n/**\n * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n */\nfunction baseIsArrayBuffer(value) {\n  return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n}\n\nexport default baseIsArrayBuffer;\n", "import baseIsArrayBuffer from './_baseIsArrayBuffer.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer;\n\n/**\n * Checks if `value` is classified as an `ArrayBuffer` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n * @example\n *\n * _.isArrayBuffer(new ArrayBuffer(2));\n * // => true\n *\n * _.isArrayBuffer(new Array(2));\n * // => false\n */\nvar isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\nexport default isArrayBuffer;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nexport default isBoolean;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar dateTag = '[object Date]';\n\n/**\n * The base implementation of `_.isDate` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n */\nfunction baseIsDate(value) {\n  return isObjectLike(value) && baseGetTag(value) == dateTag;\n}\n\nexport default baseIsDate;\n", "import baseIsDate from './_baseIsDate.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsDate = nodeUtil && nodeUtil.isDate;\n\n/**\n * Checks if `value` is classified as a `Date` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n * @example\n *\n * _.isDate(new Date);\n * // => true\n *\n * _.isDate('Mon April 23 2012');\n * // => false\n */\nvar isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\nexport default isDate;\n", "import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n", "import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n", "import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n", "import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nexport default isEqualWith;\n", "import root from './_root.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite;\n\n/**\n * Checks if `value` is a finite primitive number.\n *\n * **Note:** This method is based on\n * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n * @example\n *\n * _.isFinite(3);\n * // => true\n *\n * _.isFinite(Number.MIN_VALUE);\n * // => true\n *\n * _.isFinite(Infinity);\n * // => false\n *\n * _.isFinite('3');\n * // => false\n */\nfunction isFinite(value) {\n  return typeof value == 'number' && nativeIsFinite(value);\n}\n\nexport default isFinite;\n", "import toInteger from './toInteger.js';\n\n/**\n * Checks if `value` is an integer.\n *\n * **Note:** This method is based on\n * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n * @example\n *\n * _.isInteger(3);\n * // => true\n *\n * _.isInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isInteger(Infinity);\n * // => false\n *\n * _.isInteger('3');\n * // => false\n */\nfunction isInteger(value) {\n  return typeof value == 'number' && value == toInteger(value);\n}\n\nexport default isInteger;\n", "import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\n\n/**\n * Performs a partial deep comparison between `object` and `source` to\n * determine if `object` contains equivalent property values.\n *\n * **Note:** This method is equivalent to `_.matches` when `source` is\n * partially applied.\n *\n * Partial comparisons will match empty array and empty object `source`\n * values against any array or object value, respectively. See `_.isEqual`\n * for a list of supported value comparisons.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n *\n * _.isMatch(object, { 'b': 2 });\n * // => true\n *\n * _.isMatch(object, { 'b': 1 });\n * // => false\n */\nfunction isMatch(object, source) {\n  return object === source || baseIsMatch(object, source, getMatchData(source));\n}\n\nexport default isMatch;\n", "import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\n\n/**\n * This method is like `_.isMatch` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with five\n * arguments: (objValue, srcValue, index|key, object, source).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, srcValue) {\n *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n *     return true;\n *   }\n * }\n *\n * var object = { 'greeting': 'hello' };\n * var source = { 'greeting': 'hi' };\n *\n * _.isMatchWith(object, source, customizer);\n * // => true\n */\nfunction isMatchWith(object, source, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseIsMatch(object, source, getMatchData(source), customizer);\n}\n\nexport default isMatchWith;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n", "import isNumber from './isNumber.js';\n\n/**\n * Checks if `value` is `NaN`.\n *\n * **Note:** This method is based on\n * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n * `undefined` and other non-number values.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n * @example\n *\n * _.isNaN(NaN);\n * // => true\n *\n * _.isNaN(new Number(NaN));\n * // => true\n *\n * isNaN(undefined);\n * // => true\n *\n * _.isNaN(undefined);\n * // => false\n */\nfunction isNaN(value) {\n  // An `NaN` primitive is the only value that is not equal to itself.\n  // Perform the `toStringTag` check first to avoid errors with some\n  // ActiveX objects in IE.\n  return isNumber(value) && value != +value;\n}\n\nexport default isNaN;\n", "import coreJsData from './_coreJsData.js';\nimport isFunction from './isFunction.js';\nimport stubFalse from './stubFalse.js';\n\n/**\n * Checks if `func` is capable of being masked.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n */\nvar isMaskable = coreJsData ? isFunction : stubFalse;\n\nexport default isMaskable;\n", "import baseIsNative from './_baseIsNative.js';\nimport isMaskable from './_isMaskable.js';\n\n/** Error message constants. */\nvar CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.';\n\n/**\n * Checks if `value` is a pristine native function.\n *\n * **Note:** This method can't reliably detect native functions in the presence\n * of the core-js package because core-js circumvents this kind of detection.\n * Despite multiple requests, the core-js maintainer has made it clear: any\n * attempt to fix the detection will be obstructed. As a result, we're left\n * with little choice but to throw an error. Unfortunately, this also affects\n * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n * which rely on core-js.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (isMaskable(value)) {\n    throw new Error(CORE_ERROR_TEXT);\n  }\n  return baseIsNative(value);\n}\n\nexport default isNative;\n", "/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nexport default isNil;\n", "/**\n * Checks if `value` is `null`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n * @example\n *\n * _.isNull(null);\n * // => true\n *\n * _.isNull(void 0);\n * // => false\n */\nfunction isNull(value) {\n  return value === null;\n}\n\nexport default isNull;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/**\n * The base implementation of `_.isRegExp` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n */\nfunction baseIsRegExp(value) {\n  return isObjectLike(value) && baseGetTag(value) == regexpTag;\n}\n\nexport default baseIsRegExp;\n", "import baseIsRegExp from './_baseIsRegExp.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsRegExp = nodeUtil && nodeUtil.isRegExp;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nvar isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\nexport default isRegExp;\n", "import isInteger from './isInteger.js';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n * double precision number which isn't the result of a rounded unsafe integer.\n *\n * **Note:** This method is based on\n * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n * @example\n *\n * _.isSafeInteger(3);\n * // => true\n *\n * _.isSafeInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isSafeInteger(Infinity);\n * // => false\n *\n * _.isSafeInteger('3');\n * // => false\n */\nfunction isSafeInteger(value) {\n  return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isSafeInteger;\n", "/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nexport default isUndefined;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar weakMapTag = '[object WeakMap]';\n\n/**\n * Checks if `value` is classified as a `WeakMap` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n * @example\n *\n * _.isWeakMap(new WeakMap);\n * // => true\n *\n * _.isWeakMap(new Map);\n * // => false\n */\nfunction isWeakMap(value) {\n  return isObjectLike(value) && getTag(value) == weakMapTag;\n}\n\nexport default isWeakMap;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar weakSetTag = '[object WeakSet]';\n\n/**\n * Checks if `value` is classified as a `WeakSet` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n * @example\n *\n * _.isWeakSet(new WeakSet);\n * // => true\n *\n * _.isWeakSet(new Set);\n * // => false\n */\nfunction isWeakSet(value) {\n  return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n}\n\nexport default isWeakSet;\n", "import baseClone from './_baseClone.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1;\n\n/**\n * Creates a function that invokes `func` with the arguments of the created\n * function. If `func` is a property name, the created function returns the\n * property value for a given element. If `func` is an array or object, the\n * created function returns `true` for elements that contain the equivalent\n * source properties, otherwise it returns `false`.\n *\n * @static\n * @since 4.0.0\n * @memberOf _\n * @category Util\n * @param {*} [func=_.identity] The value to convert to a callback.\n * @returns {Function} Returns the callback.\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, _.iteratee(['user', 'fred']));\n * // => [{ 'user': 'fred', 'age': 40 }]\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, _.iteratee('user'));\n * // => ['barney', 'fred']\n *\n * // Create custom iteratee shorthands.\n * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n *     return func.test(string);\n *   };\n * });\n *\n * _.filter(['abc', 'def'], /ef/);\n * // => ['def']\n */\nfunction iteratee(func) {\n  return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n}\n\nexport default iteratee;\n", "/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeJoin = arrayProto.join;\n\n/**\n * Converts all elements in `array` into a string separated by `separator`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to convert.\n * @param {string} [separator=','] The element separator.\n * @returns {string} Returns the joined string.\n * @example\n *\n * _.join(['a', 'b', 'c'], '~');\n * // => 'a~b~c'\n */\nfunction join(array, separator) {\n  return array == null ? '' : nativeJoin.call(array, separator);\n}\n\nexport default join;\n", "import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to\n * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the kebab cased string.\n * @example\n *\n * _.kebabCase('Foo Bar');\n * // => 'foo-bar'\n *\n * _.kebabCase('fooBar');\n * // => 'foo-bar'\n *\n * _.kebabCase('__FOO_BAR__');\n * // => 'foo-bar'\n */\nvar kebabCase = createCompounder(function(result, word, index) {\n  return result + (index ? '-' : '') + word.toLowerCase();\n});\n\nexport default kebabCase;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nexport default keyBy;\n", "/**\n * A specialized version of `_.lastIndexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictLastIndexOf(array, value, fromIndex) {\n  var index = fromIndex + 1;\n  while (index--) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return index;\n}\n\nexport default strictLastIndexOf;\n", "import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictLastIndexOf from './_strictLastIndexOf.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.indexOf` except that it iterates over elements of\n * `array` from right to left.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.lastIndexOf([1, 2, 1, 2], 2);\n * // => 3\n *\n * // Search from the `fromIndex`.\n * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n * // => 1\n */\nfunction lastIndexOf(array, value, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n  }\n  return value === value\n    ? strictLastIndexOf(array, value, index)\n    : baseFindIndex(array, baseIsNaN, index, true);\n}\n\nexport default lastIndexOf;\n", "import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\nexport default lowerCase;\n", "import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.lowerFirst('Fred');\n * // => 'fred'\n *\n * _.lowerFirst('FRED');\n * // => 'fRED'\n */\nvar lowerFirst = createCaseFirst('toLowerCase');\n\nexport default lowerFirst;\n", "/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nexport default baseLt;\n", "import baseLt from './_baseLt.js';\nimport createRelationalOperation from './_createRelationalOperation.js';\n\n/**\n * Checks if `value` is less than `other`.\n *\n * @static\n * @memberOf _\n * @since 3.9.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n * @see _.gt\n * @example\n *\n * _.lt(1, 3);\n * // => true\n *\n * _.lt(3, 3);\n * // => false\n *\n * _.lt(3, 1);\n * // => false\n */\nvar lt = createRelationalOperation(baseLt);\n\nexport default lt;\n", "import createRelationalOperation from './_createRelationalOperation.js';\n\n/**\n * Checks if `value` is less than or equal to `other`.\n *\n * @static\n * @memberOf _\n * @since 3.9.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than or equal to\n *  `other`, else `false`.\n * @see _.gte\n * @example\n *\n * _.lte(1, 3);\n * // => true\n *\n * _.lte(3, 3);\n * // => true\n *\n * _.lte(3, 1);\n * // => false\n */\nvar lte = createRelationalOperation(function(value, other) {\n  return value <= other;\n});\n\nexport default lte;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nexport default mapKeys;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nexport default mapValues;\n", "import baseClone from './_baseClone.js';\nimport baseMatches from './_baseMatches.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1;\n\n/**\n * Creates a function that performs a partial deep comparison between a given\n * object and `source`, returning `true` if the given object has equivalent\n * property values, else `false`.\n *\n * **Note:** The created function is equivalent to `_.isMatch` with `source`\n * partially applied.\n *\n * Partial comparisons will match empty array and empty object `source`\n * values against any array or object value, respectively. See `_.isEqual`\n * for a list of supported value comparisons.\n *\n * **Note:** Multiple values can be checked by combining several matchers\n * using `_.overSome`\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n * @example\n *\n * var objects = [\n *   { 'a': 1, 'b': 2, 'c': 3 },\n *   { 'a': 4, 'b': 5, 'c': 6 }\n * ];\n *\n * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n *\n * // Checking for several possible values\n * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n */\nfunction matches(source) {\n  return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n}\n\nexport default matches;\n", "import baseClone from './_baseClone.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1;\n\n/**\n * Creates a function that performs a partial deep comparison between the\n * value at `path` of a given object to `srcValue`, returning `true` if the\n * object value is equivalent, else `false`.\n *\n * **Note:** Partial comparisons will match empty array and empty object\n * `srcValue` values against any array or object value, respectively. See\n * `_.isEqual` for a list of supported value comparisons.\n *\n * **Note:** Multiple values can be checked by combining several matchers\n * using `_.overSome`\n *\n * @static\n * @memberOf _\n * @since 3.2.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n * @example\n *\n * var objects = [\n *   { 'a': 1, 'b': 2, 'c': 3 },\n *   { 'a': 4, 'b': 5, 'c': 6 }\n * ];\n *\n * _.find(objects, _.matchesProperty('a', 4));\n * // => { 'a': 4, 'b': 5, 'c': 6 }\n *\n * // Checking for several possible values\n * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n */\nfunction matchesProperty(path, srcValue) {\n  return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n}\n\nexport default matchesProperty;\n", "import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n", "import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nexport default max;\n", "import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)\n    : undefined;\n}\n\nexport default maxBy;\n", "/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nexport default baseSum;\n", "import baseSum from './_baseSum.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/**\n * The base implementation of `_.mean` and `_.meanBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the mean.\n */\nfunction baseMean(array, iteratee) {\n  var length = array == null ? 0 : array.length;\n  return length ? (baseSum(array, iteratee) / length) : NAN;\n}\n\nexport default baseMean;\n", "import baseMean from './_baseMean.js';\nimport identity from './identity.js';\n\n/**\n * Computes the mean of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the mean.\n * @example\n *\n * _.mean([4, 2, 8, 6]);\n * // => 5\n */\nfunction mean(array) {\n  return baseMean(array, identity);\n}\n\nexport default mean;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseMean from './_baseMean.js';\n\n/**\n * This method is like `_.mean` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the value to be averaged.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the mean.\n * @example\n *\n * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n *\n * _.meanBy(objects, function(o) { return o.n; });\n * // => 5\n *\n * // The `_.property` iteratee shorthand.\n * _.meanBy(objects, 'n');\n * // => 5\n */\nfunction meanBy(array, iteratee) {\n  return baseMean(array, baseIteratee(iteratee, 2));\n}\n\nexport default meanBy;\n", "import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n", "import baseInvoke from './_baseInvoke.js';\nimport baseRest from './_baseRest.js';\n\n/**\n * Creates a function that invokes the method at `path` of a given object.\n * Any additional arguments are provided to the invoked method.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Util\n * @param {Array|string} path The path of the method to invoke.\n * @param {...*} [args] The arguments to invoke the method with.\n * @returns {Function} Returns the new invoker function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': _.constant(2) } },\n *   { 'a': { 'b': _.constant(1) } }\n * ];\n *\n * _.map(objects, _.method('a.b'));\n * // => [2, 1]\n *\n * _.map(objects, _.method(['a', 'b']));\n * // => [2, 1]\n */\nvar method = baseRest(function(path, args) {\n  return function(object) {\n    return baseInvoke(object, path, args);\n  };\n});\n\nexport default method;\n", "import baseInvoke from './_baseInvoke.js';\nimport baseRest from './_baseRest.js';\n\n/**\n * The opposite of `_.method`; this method creates a function that invokes\n * the method at a given path of `object`. Any additional arguments are\n * provided to the invoked method.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Util\n * @param {Object} object The object to query.\n * @param {...*} [args] The arguments to invoke the method with.\n * @returns {Function} Returns the new invoker function.\n * @example\n *\n * var array = _.times(3, _.constant),\n *     object = { 'a': array, 'b': array, 'c': array };\n *\n * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n * // => [2, 0]\n *\n * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n * // => [2, 0]\n */\nvar methodOf = baseRest(function(object, args) {\n  return function(path) {\n    return baseInvoke(object, path, args);\n  };\n});\n\nexport default methodOf;\n", "import baseExtremum from './_baseExtremum.js';\nimport baseLt from './_baseLt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the minimum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * _.min([4, 2, 8, 6]);\n * // => 2\n *\n * _.min([]);\n * // => undefined\n */\nfunction min(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseLt)\n    : undefined;\n}\n\nexport default min;\n", "import baseExtremum from './_baseExtremum.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseLt from './_baseLt.js';\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nexport default minBy;\n", "import arrayEach from './_arrayEach.js';\nimport arrayPush from './_arrayPush.js';\nimport baseFunctions from './_baseFunctions.js';\nimport copyArray from './_copyArray.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport keys from './keys.js';\n\n/**\n * Adds all own enumerable string keyed function properties of a source\n * object to the destination object. If `object` is a function, then methods\n * are added to its prototype as well.\n *\n * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n * avoid conflicts caused by modifying the original.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {Function|Object} [object=lodash] The destination object.\n * @param {Object} source The object of functions to add.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n * @returns {Function|Object} Returns `object`.\n * @example\n *\n * function vowels(string) {\n *   return _.filter(string, function(v) {\n *     return /[aeiou]/i.test(v);\n *   });\n * }\n *\n * _.mixin({ 'vowels': vowels });\n * _.vowels('fred');\n * // => ['e']\n *\n * _('fred').vowels().value();\n * // => ['e']\n *\n * _.mixin({ 'vowels': vowels }, { 'chain': false });\n * _('fred').vowels();\n * // => ['e']\n */\nfunction mixin(object, source, options) {\n  var props = keys(source),\n      methodNames = baseFunctions(source, props);\n\n  var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n      isFunc = isFunction(object);\n\n  arrayEach(methodNames, function(methodName) {\n    var func = source[methodName];\n    object[methodName] = func;\n    if (isFunc) {\n      object.prototype[methodName] = function() {\n        var chainAll = this.__chain__;\n        if (chain || chainAll) {\n          var result = object(this.__wrapped__),\n              actions = result.__actions__ = copyArray(this.__actions__);\n\n          actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n          result.__chain__ = chainAll;\n          return result;\n        }\n        return func.apply(object, arrayPush([this.value()], arguments));\n      };\n    }\n  });\n\n  return object;\n}\n\nexport default mixin;\n", "import createMathOperation from './_createMathOperation.js';\n\n/**\n * Multiply two numbers.\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Math\n * @param {number} multiplier The first number in a multiplication.\n * @param {number} multiplicand The second number in a multiplication.\n * @returns {number} Returns the product.\n * @example\n *\n * _.multiply(6, 4);\n * // => 24\n */\nvar multiply = createMathOperation(function(multiplier, multiplicand) {\n  return multiplier * multiplicand;\n}, 1);\n\nexport default multiply;\n", "/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nexport default negate;\n", "/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nexport default iteratorToArray;\n", "import Symbol from './_Symbol.js';\nimport copyArray from './_copyArray.js';\nimport getTag from './_getTag.js';\nimport isArrayLike from './isArrayLike.js';\nimport isString from './isString.js';\nimport iteratorToArray from './_iteratorToArray.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\nimport stringToArray from './_stringToArray.js';\nimport values from './values.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Built-in value references. */\nvar symIterator = Symbol ? Symbol.iterator : undefined;\n\n/**\n * Converts `value` to an array.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Array} Returns the converted array.\n * @example\n *\n * _.toArray({ 'a': 1, 'b': 2 });\n * // => [1, 2]\n *\n * _.toArray('abc');\n * // => ['a', 'b', 'c']\n *\n * _.toArray(1);\n * // => []\n *\n * _.toArray(null);\n * // => []\n */\nfunction toArray(value) {\n  if (!value) {\n    return [];\n  }\n  if (isArrayLike(value)) {\n    return isString(value) ? stringToArray(value) : copyArray(value);\n  }\n  if (symIterator && value[symIterator]) {\n    return iteratorToArray(value[symIterator]());\n  }\n  var tag = getTag(value),\n      func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n  return func(value);\n}\n\nexport default toArray;\n", "import toArray from './toArray.js';\n\n/**\n * Gets the next value on a wrapped object following the\n * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n *\n * @name next\n * @memberOf _\n * @since 4.0.0\n * @category Seq\n * @returns {Object} Returns the next iterator value.\n * @example\n *\n * var wrapped = _([1, 2]);\n *\n * wrapped.next();\n * // => { 'done': false, 'value': 1 }\n *\n * wrapped.next();\n * // => { 'done': false, 'value': 2 }\n *\n * wrapped.next();\n * // => { 'done': true, 'value': undefined }\n */\nfunction wrapperNext() {\n  if (this.__values__ === undefined) {\n    this.__values__ = toArray(this.value());\n  }\n  var done = this.__index__ >= this.__values__.length,\n      value = done ? undefined : this.__values__[this.__index__++];\n\n  return { 'done': done, 'value': value };\n}\n\nexport default wrapperNext;\n", "import isIndex from './_isIndex.js';\n\n/**\n * The base implementation of `_.nth` which doesn't coerce arguments.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {number} n The index of the element to return.\n * @returns {*} Returns the nth element of `array`.\n */\nfunction baseNth(array, n) {\n  var length = array.length;\n  if (!length) {\n    return;\n  }\n  n += n < 0 ? length : 0;\n  return isIndex(n, length) ? array[n] : undefined;\n}\n\nexport default baseNth;\n", "import baseNth from './_baseNth.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Gets the element at index `n` of `array`. If `n` is negative, the nth\n * element from the end is returned.\n *\n * @static\n * @memberOf _\n * @since 4.11.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=0] The index of the element to return.\n * @returns {*} Returns the nth element of `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'd'];\n *\n * _.nth(array, 1);\n * // => 'b'\n *\n * _.nth(array, -2);\n * // => 'c';\n */\nfunction nth(array, n) {\n  return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n}\n\nexport default nth;\n", "import baseNth from './_baseNth.js';\nimport baseRest from './_baseRest.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a function that gets the argument at index `n`. If `n` is negative,\n * the nth argument from the end is returned.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {number} [n=0] The index of the argument to return.\n * @returns {Function} Returns the new pass-thru function.\n * @example\n *\n * var func = _.nthArg(1);\n * func('a', 'b', 'c', 'd');\n * // => 'b'\n *\n * var func = _.nthArg(-2);\n * func('a', 'b', 'c', 'd');\n * // => 'c'\n */\nfunction nthArg(n) {\n  n = toInteger(n);\n  return baseRest(function(args) {\n    return baseNth(args, n);\n  });\n}\n\nexport default nthArg;\n", "import castPath from './_castPath.js';\nimport last from './last.js';\nimport parent from './_parent.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nexport default baseUnset;\n", "import isPlainObject from './isPlainObject.js';\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nexport default customOmitClone;\n", "import arrayMap from './_arrayMap.js';\nimport baseClone from './_baseClone.js';\nimport baseUnset from './_baseUnset.js';\nimport castPath from './_castPath.js';\nimport copyObject from './_copyObject.js';\nimport customOmitClone from './_customOmitClone.js';\nimport flatRest from './_flatRest.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nexport default omit;\n", "import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n", "import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n", "import arrayMap from './_arrayMap.js';\nimport baseIteratee from './_baseIteratee.js';\nimport basePickBy from './_basePickBy.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nexport default pickBy;\n", "import baseIteratee from './_baseIteratee.js';\nimport negate from './negate.js';\nimport pickBy from './pickBy.js';\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nexport default omitBy;\n", "import before from './before.js';\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nexport default once;\n", "/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n", "import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n", "import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n", "import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n", "import baseOrderBy from './_baseOrderBy.js';\nimport isArray from './isArray.js';\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nexport default orderBy;\n", "import apply from './_apply.js';\nimport arrayMap from './_arrayMap.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport baseUnary from './_baseUnary.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates a function like `_.over`.\n *\n * @private\n * @param {Function} arrayFunc The function to iterate over iteratees.\n * @returns {Function} Returns the new over function.\n */\nfunction createOver(arrayFunc) {\n  return flatRest(function(iteratees) {\n    iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n    return baseRest(function(args) {\n      var thisArg = this;\n      return arrayFunc(iteratees, function(iteratee) {\n        return apply(iteratee, thisArg, args);\n      });\n    });\n  });\n}\n\nexport default createOver;\n", "import arrayMap from './_arrayMap.js';\nimport createOver from './_createOver.js';\n\n/**\n * Creates a function that invokes `iteratees` with the arguments it receives\n * and returns their results.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to invoke.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var func = _.over([Math.max, Math.min]);\n *\n * func(1, 2, 3, 4);\n * // => [4, 1]\n */\nvar over = createOver(arrayMap);\n\nexport default over;\n", "import baseRest from './_baseRest.js';\n\n/**\n * A `baseRest` alias which can be replaced with `identity` by module\n * replacement plugins.\n *\n * @private\n * @type {Function}\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nvar castRest = baseRest;\n\nexport default castRest;\n", "import apply from './_apply.js';\nimport arrayMap from './_arrayMap.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport baseUnary from './_baseUnary.js';\nimport castRest from './_castRest.js';\nimport isArray from './isArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Creates a function that invokes `func` with its arguments transformed.\n *\n * @static\n * @since 4.0.0\n * @memberOf _\n * @category Function\n * @param {Function} func The function to wrap.\n * @param {...(Function|Function[])} [transforms=[_.identity]]\n *  The argument transforms.\n * @returns {Function} Returns the new function.\n * @example\n *\n * function doubled(n) {\n *   return n * 2;\n * }\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var func = _.overArgs(function(x, y) {\n *   return [x, y];\n * }, [square, doubled]);\n *\n * func(9, 3);\n * // => [81, 6]\n *\n * func(10, 5);\n * // => [100, 10]\n */\nvar overArgs = castRest(function(func, transforms) {\n  transforms = (transforms.length == 1 && isArray(transforms[0]))\n    ? arrayMap(transforms[0], baseUnary(baseIteratee))\n    : arrayMap(baseFlatten(transforms, 1), baseUnary(baseIteratee));\n\n  var funcsLength = transforms.length;\n  return baseRest(function(args) {\n    var index = -1,\n        length = nativeMin(args.length, funcsLength);\n\n    while (++index < length) {\n      args[index] = transforms[index].call(this, args[index]);\n    }\n    return apply(func, this, args);\n  });\n});\n\nexport default overArgs;\n", "import arrayEvery from './_arrayEvery.js';\nimport createOver from './_createOver.js';\n\n/**\n * Creates a function that checks if **all** of the `predicates` return\n * truthy when invoked with the arguments it receives.\n *\n * Following shorthands are possible for providing predicates.\n * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {...(Function|Function[])} [predicates=[_.identity]]\n *  The predicates to check.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var func = _.overEvery([Boolean, isFinite]);\n *\n * func('1');\n * // => true\n *\n * func(null);\n * // => false\n *\n * func(NaN);\n * // => false\n */\nvar overEvery = createOver(arrayEvery);\n\nexport default overEvery;\n", "import arraySome from './_arraySome.js';\nimport createOver from './_createOver.js';\n\n/**\n * Creates a function that checks if **any** of the `predicates` return\n * truthy when invoked with the arguments it receives.\n *\n * Following shorthands are possible for providing predicates.\n * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {...(Function|Function[])} [predicates=[_.identity]]\n *  The predicates to check.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var func = _.overSome([Boolean, isFinite]);\n *\n * func('1');\n * // => true\n *\n * func(null);\n * // => true\n *\n * func(NaN);\n * // => false\n *\n * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n */\nvar overSome = createOver(arraySome);\n\nexport default overSome;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor;\n\n/**\n * The base implementation of `_.repeat` which doesn't coerce arguments.\n *\n * @private\n * @param {string} string The string to repeat.\n * @param {number} n The number of times to repeat the string.\n * @returns {string} Returns the repeated string.\n */\nfunction baseRepeat(string, n) {\n  var result = '';\n  if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n    return result;\n  }\n  // Leverage the exponentiation by squaring algorithm for a faster repeat.\n  // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n  do {\n    if (n % 2) {\n      result += string;\n    }\n    n = nativeFloor(n / 2);\n    if (n) {\n      string += string;\n    }\n  } while (n);\n\n  return result;\n}\n\nexport default baseRepeat;\n", "import baseProperty from './_baseProperty.js';\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\nexport default asciiSize;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    ++result;\n  }\n  return result;\n}\n\nexport default unicodeSize;\n", "import asciiSize from './_asciiSize.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeSize from './_unicodeSize.js';\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\nexport default stringSize;\n", "import baseRepeat from './_baseRepeat.js';\nimport baseToString from './_baseToString.js';\nimport castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringSize from './_stringSize.js';\nimport stringToArray from './_stringToArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil;\n\n/**\n * Creates the padding for `string` based on `length`. The `chars` string\n * is truncated if the number of characters exceeds `length`.\n *\n * @private\n * @param {number} length The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padding for `string`.\n */\nfunction createPadding(length, chars) {\n  chars = chars === undefined ? ' ' : baseToString(chars);\n\n  var charsLength = chars.length;\n  if (charsLength < 2) {\n    return charsLength ? baseRepeat(chars, length) : chars;\n  }\n  var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n  return hasUnicode(chars)\n    ? castSlice(stringToArray(result), 0, length).join('')\n    : result.slice(0, length);\n}\n\nexport default createPadding;\n", "import createPadding from './_createPadding.js';\nimport stringSize from './_stringSize.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeFloor = Math.floor;\n\n/**\n * Pads `string` on the left and right sides if it's shorter than `length`.\n * Padding characters are truncated if they can't be evenly divided by `length`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.pad('abc', 8);\n * // => '  abc   '\n *\n * _.pad('abc', 8, '_-');\n * // => '_-abc_-_'\n *\n * _.pad('abc', 3);\n * // => 'abc'\n */\nfunction pad(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  if (!length || strLength >= length) {\n    return string;\n  }\n  var mid = (length - strLength) / 2;\n  return (\n    createPadding(nativeFloor(mid), chars) +\n    string +\n    createPadding(nativeCeil(mid), chars)\n  );\n}\n\nexport default pad;\n", "import createPadding from './_createPadding.js';\nimport stringSize from './_stringSize.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/**\n * Pads `string` on the right side if it's shorter than `length`. Padding\n * characters are truncated if they exceed `length`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.padEnd('abc', 6);\n * // => 'abc   '\n *\n * _.padEnd('abc', 6, '_-');\n * // => 'abc_-_'\n *\n * _.padEnd('abc', 3);\n * // => 'abc'\n */\nfunction padEnd(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  return (length && strLength < length)\n    ? (string + createPadding(length - strLength, chars))\n    : string;\n}\n\nexport default padEnd;\n", "import createPadding from './_createPadding.js';\nimport stringSize from './_stringSize.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/**\n * Pads `string` on the left side if it's shorter than `length`. Padding\n * characters are truncated if they exceed `length`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.padStart('abc', 6);\n * // => '   abc'\n *\n * _.padStart('abc', 6, '_-');\n * // => '_-_abc'\n *\n * _.padStart('abc', 3);\n * // => 'abc'\n */\nfunction padStart(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  return (length && strLength < length)\n    ? (createPadding(length - strLength, chars) + string)\n    : string;\n}\n\nexport default padStart;\n", "import root from './_root.js';\nimport toString from './toString.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeParseInt = root.parseInt;\n\n/**\n * Converts `string` to an integer of the specified radix. If `radix` is\n * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n * hexadecimal, in which case a `radix` of `16` is used.\n *\n * **Note:** This method aligns with the\n * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category String\n * @param {string} string The string to convert.\n * @param {number} [radix=10] The radix to interpret `value` by.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.parseInt('08');\n * // => 8\n *\n * _.map(['6', '08', '10'], _.parseInt);\n * // => [6, 8, 10]\n */\nfunction parseInt(string, radix, guard) {\n  if (guard || radix == null) {\n    radix = 0;\n  } else if (radix) {\n    radix = +radix;\n  }\n  return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n}\n\nexport default parseInt;\n", "import baseRest from './_baseRest.js';\nimport createWrap from './_createWrap.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with `partials` prepended to the\n * arguments it receives. This method is like `_.bind` except it does **not**\n * alter the `this` binding.\n *\n * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of partially\n * applied functions.\n *\n * @static\n * @memberOf _\n * @since 0.2.0\n * @category Function\n * @param {Function} func The function to partially apply arguments to.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new partially applied function.\n * @example\n *\n * function greet(greeting, name) {\n *   return greeting + ' ' + name;\n * }\n *\n * var sayHelloTo = _.partial(greet, 'hello');\n * sayHelloTo('fred');\n * // => 'hello fred'\n *\n * // Partially applied with placeholders.\n * var greetFred = _.partial(greet, _, 'fred');\n * greetFred('hi');\n * // => 'hi fred'\n */\nvar partial = baseRest(function(func, partials) {\n  var holders = replaceHolders(partials, getHolder(partial));\n  return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n});\n\n// Assign default placeholders.\npartial.placeholder = {};\n\nexport default partial;\n", "import baseRest from './_baseRest.js';\nimport createWrap from './_createWrap.js';\nimport getHolder from './_getHolder.js';\nimport replaceHolders from './_replaceHolders.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * This method is like `_.partial` except that partially applied arguments\n * are appended to the arguments it receives.\n *\n * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of partially\n * applied functions.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Function\n * @param {Function} func The function to partially apply arguments to.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new partially applied function.\n * @example\n *\n * function greet(greeting, name) {\n *   return greeting + ' ' + name;\n * }\n *\n * var greetFred = _.partialRight(greet, 'fred');\n * greetFred('hi');\n * // => 'hi fred'\n *\n * // Partially applied with placeholders.\n * var sayHelloTo = _.partialRight(greet, 'hello', _);\n * sayHelloTo('fred');\n * // => 'hello fred'\n */\nvar partialRight = baseRest(function(func, partials) {\n  var holders = replaceHolders(partials, getHolder(partialRight));\n  return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n});\n\n// Assign default placeholders.\npartialRight.placeholder = {};\n\nexport default partialRight;\n", "import createAggregator from './_createAggregator.js';\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nexport default partition;\n", "import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n", "import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n", "import baseLodash from './_baseLodash.js';\nimport wrapperClone from './_wrapperClone.js';\n\n/**\n * Creates a clone of the chain sequence planting `value` as the wrapped value.\n *\n * @name plant\n * @memberOf _\n * @since 3.2.0\n * @category Seq\n * @param {*} value The value to plant.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2]).map(square);\n * var other = wrapped.plant([3, 4]);\n *\n * other.value();\n * // => [9, 16]\n *\n * wrapped.value();\n * // => [1, 4]\n */\nfunction wrapperPlant(value) {\n  var result,\n      parent = this;\n\n  while (parent instanceof baseLodash) {\n    var clone = wrapperClone(parent);\n    clone.__index__ = 0;\n    clone.__values__ = undefined;\n    if (result) {\n      previous.__wrapped__ = clone;\n    } else {\n      result = clone;\n    }\n    var previous = clone;\n    parent = parent.__wrapped__;\n  }\n  previous.__wrapped__ = value;\n  return result;\n}\n\nexport default wrapperPlant;\n", "import baseGet from './_baseGet.js';\n\n/**\n * The opposite of `_.property`; this method creates a function that returns\n * the value at a given path of `object`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var array = [0, 1, 2],\n *     object = { 'a': array, 'b': array, 'c': array };\n *\n * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n * // => [2, 0]\n *\n * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n * // => [2, 0]\n */\nfunction propertyOf(object) {\n  return function(path) {\n    return object == null ? undefined : baseGet(object, path);\n  };\n}\n\nexport default propertyOf;\n", "/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseIndexOfWith;\n", "import arrayMap from './_arrayMap.js';\nimport baseIndexOf from './_baseIndexOf.js';\nimport baseIndexOfWith from './_baseIndexOfWith.js';\nimport baseUnary from './_baseUnary.js';\nimport copyArray from './_copyArray.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nexport default basePullAll;\n", "import basePullAll from './_basePullAll.js';\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nexport default pullAll;\n", "import baseRest from './_baseRest.js';\nimport pullAll from './pullAll.js';\n\n/**\n * Removes all given values from `array` using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n * to remove elements from an array by predicate.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...*} [values] The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pull(array, 'a', 'c');\n * console.log(array);\n * // => ['b', 'b']\n */\nvar pull = baseRest(pullAll);\n\nexport default pull;\n", "import baseIteratee from './_baseIteratee.js';\nimport basePullAll from './_basePullAll.js';\n\n/**\n * This method is like `_.pullAll` except that it accepts `iteratee` which is\n * invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. The iteratee is invoked with one argument: (value).\n *\n * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n *\n * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n * console.log(array);\n * // => [{ 'x': 2 }]\n */\nfunction pullAllBy(array, values, iteratee) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values, baseIteratee(iteratee, 2))\n    : array;\n}\n\nexport default pullAllBy;\n", "import basePullAll from './_basePullAll.js';\n\n/**\n * This method is like `_.pullAll` except that it accepts `comparator` which\n * is invoked to compare elements of `array` to `values`. The comparator is\n * invoked with two arguments: (arrVal, othVal).\n *\n * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.6.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n *\n * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n * console.log(array);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n */\nfunction pullAllWith(array, values, comparator) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values, undefined, comparator)\n    : array;\n}\n\nexport default pullAllWith;\n", "import baseUnset from './_baseUnset.js';\nimport isIndex from './_isIndex.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAt` without support for individual\n * indexes or capturing the removed elements.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {number[]} indexes The indexes of elements to remove.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAt(array, indexes) {\n  var length = array ? indexes.length : 0,\n      lastIndex = length - 1;\n\n  while (length--) {\n    var index = indexes[length];\n    if (length == lastIndex || index !== previous) {\n      var previous = index;\n      if (isIndex(index)) {\n        splice.call(array, index, 1);\n      } else {\n        baseUnset(array, index);\n      }\n    }\n  }\n  return array;\n}\n\nexport default basePullAt;\n", "import arrayMap from './_arrayMap.js';\nimport baseAt from './_baseAt.js';\nimport basePullAt from './_basePullAt.js';\nimport compareAscending from './_compareAscending.js';\nimport flatRest from './_flatRest.js';\nimport isIndex from './_isIndex.js';\n\n/**\n * Removes elements from `array` corresponding to `indexes` and returns an\n * array of removed elements.\n *\n * **Note:** Unlike `_.at`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = ['a', 'b', 'c', 'd'];\n * var pulled = _.pullAt(array, [1, 3]);\n *\n * console.log(array);\n * // => ['a', 'c']\n *\n * console.log(pulled);\n * // => ['b', 'd']\n */\nvar pullAt = flatRest(function(array, indexes) {\n  var length = array == null ? 0 : array.length,\n      result = baseAt(array, indexes);\n\n  basePullAt(array, arrayMap(indexes, function(index) {\n    return isIndex(index, length) ? +index : index;\n  }).sort(compareAscending));\n\n  return result;\n});\n\nexport default pullAt;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeRandom = Math.random;\n\n/**\n * The base implementation of `_.random` without support for returning\n * floating-point numbers.\n *\n * @private\n * @param {number} lower The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the random number.\n */\nfunction baseRandom(lower, upper) {\n  return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n}\n\nexport default baseRandom;\n", "import baseRandom from './_baseRandom.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toFinite from './toFinite.js';\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseFloat = parseFloat;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min,\n    nativeRandom = Math.random;\n\n/**\n * Produces a random number between the inclusive `lower` and `upper` bounds.\n * If only one argument is provided a number between `0` and the given number\n * is returned. If `floating` is `true`, or either `lower` or `upper` are\n * floats, a floating-point number is returned instead of an integer.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @memberOf _\n * @since 0.7.0\n * @category Number\n * @param {number} [lower=0] The lower bound.\n * @param {number} [upper=1] The upper bound.\n * @param {boolean} [floating] Specify returning a floating-point number.\n * @returns {number} Returns the random number.\n * @example\n *\n * _.random(0, 5);\n * // => an integer between 0 and 5\n *\n * _.random(5);\n * // => also an integer between 0 and 5\n *\n * _.random(5, true);\n * // => a floating-point number between 0 and 5\n *\n * _.random(1.2, 5.2);\n * // => a floating-point number between 1.2 and 5.2\n */\nfunction random(lower, upper, floating) {\n  if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n    upper = floating = undefined;\n  }\n  if (floating === undefined) {\n    if (typeof upper == 'boolean') {\n      floating = upper;\n      upper = undefined;\n    }\n    else if (typeof lower == 'boolean') {\n      floating = lower;\n      lower = undefined;\n    }\n  }\n  if (lower === undefined && upper === undefined) {\n    lower = 0;\n    upper = 1;\n  }\n  else {\n    lower = toFinite(lower);\n    if (upper === undefined) {\n      upper = lower;\n      lower = 0;\n    } else {\n      upper = toFinite(upper);\n    }\n  }\n  if (lower > upper) {\n    var temp = lower;\n    lower = upper;\n    upper = temp;\n  }\n  if (floating || lower % 1 || upper % 1) {\n    var rand = nativeRandom();\n    return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n  }\n  return baseRandom(lower, upper);\n}\n\nexport default random;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nexport default baseRange;\n", "import baseRange from './_baseRange.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toFinite from './toFinite.js';\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nexport default createRange;\n", "import createRange from './_createRange.js';\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nexport default range;\n", "import createRange from './_createRange.js';\n\n/**\n * This method is like `_.range` except that it populates values in\n * descending order.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.range\n * @example\n *\n * _.rangeRight(4);\n * // => [3, 2, 1, 0]\n *\n * _.rangeRight(-4);\n * // => [-3, -2, -1, 0]\n *\n * _.rangeRight(1, 5);\n * // => [4, 3, 2, 1]\n *\n * _.rangeRight(0, 20, 5);\n * // => [15, 10, 5, 0]\n *\n * _.rangeRight(0, -4, -1);\n * // => [-3, -2, -1, 0]\n *\n * _.rangeRight(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.rangeRight(0);\n * // => []\n */\nvar rangeRight = createRange(true);\n\nexport default rangeRight;\n", "import createWrap from './_createWrap.js';\nimport flatRest from './_flatRest.js';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_REARG_FLAG = 256;\n\n/**\n * Creates a function that invokes `func` with arguments arranged according\n * to the specified `indexes` where the argument value at the first index is\n * provided as the first argument, the argument value at the second index is\n * provided as the second argument, and so on.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} func The function to rearrange arguments for.\n * @param {...(number|number[])} indexes The arranged argument indexes.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var rearged = _.rearg(function(a, b, c) {\n *   return [a, b, c];\n * }, [2, 0, 1]);\n *\n * rearged('b', 'c', 'a')\n * // => ['a', 'b', 'c']\n */\nvar rearg = flatRest(function(func, indexes) {\n  return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n});\n\nexport default rearg;\n", "/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nexport default baseReduce;\n", "import arrayReduce from './_arrayReduce.js';\nimport baseEach from './_baseEach.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseReduce from './_baseReduce.js';\nimport isArray from './isArray.js';\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nexport default reduce;\n", "/**\n * A specialized version of `_.reduceRight` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the last element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduceRight(array, iteratee, accumulator, initAccum) {\n  var length = array == null ? 0 : array.length;\n  if (initAccum && length) {\n    accumulator = array[--length];\n  }\n  while (length--) {\n    accumulator = iteratee(accumulator, array[length], length, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduceRight;\n", "import arrayReduceRight from './_arrayReduceRight.js';\nimport baseEachRight from './_baseEachRight.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseReduce from './_baseReduce.js';\nimport isArray from './isArray.js';\n\n/**\n * This method is like `_.reduce` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduce\n * @example\n *\n * var array = [[0, 1], [2, 3], [4, 5]];\n *\n * _.reduceRight(array, function(flattened, other) {\n *   return flattened.concat(other);\n * }, []);\n * // => [4, 5, 2, 3, 0, 1]\n */\nfunction reduceRight(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduceRight : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n}\n\nexport default reduceRight;\n", "import arrayFilter from './_arrayFilter.js';\nimport baseFilter from './_baseFilter.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\nimport negate from './negate.js';\n\n/**\n * The opposite of `_.filter`; this method returns the elements of `collection`\n * that `predicate` does **not** return truthy for.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.filter\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': true }\n * ];\n *\n * _.reject(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.reject(users, { 'age': 40, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.reject(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.reject(users, 'active');\n * // => objects for ['barney']\n */\nfunction reject(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, negate(baseIteratee(predicate, 3)));\n}\n\nexport default reject;\n", "import baseIteratee from './_baseIteratee.js';\nimport basePullAt from './_basePullAt.js';\n\n/**\n * Removes all elements from `array` that `predicate` returns truthy for\n * and returns an array of the removed elements. The predicate is invoked\n * with three arguments: (value, index, array).\n *\n * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n * to pull elements from an array by value.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = [1, 2, 3, 4];\n * var evens = _.remove(array, function(n) {\n *   return n % 2 == 0;\n * });\n *\n * console.log(array);\n * // => [1, 3]\n *\n * console.log(evens);\n * // => [2, 4]\n */\nfunction remove(array, predicate) {\n  var result = [];\n  if (!(array && array.length)) {\n    return result;\n  }\n  var index = -1,\n      indexes = [],\n      length = array.length;\n\n  predicate = baseIteratee(predicate, 3);\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result.push(value);\n      indexes.push(index);\n    }\n  }\n  basePullAt(array, indexes);\n  return result;\n}\n\nexport default remove;\n", "import baseRepeat from './_baseRepeat.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/**\n * Repeats the given string `n` times.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to repeat.\n * @param {number} [n=1] The number of times to repeat the string.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the repeated string.\n * @example\n *\n * _.repeat('*', 3);\n * // => '***'\n *\n * _.repeat('abc', 2);\n * // => 'abcabc'\n *\n * _.repeat('abc', 0);\n * // => ''\n */\nfunction repeat(string, n, guard) {\n  if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n    n = 1;\n  } else {\n    n = toInteger(n);\n  }\n  return baseRepeat(toString(string), n);\n}\n\nexport default repeat;\n", "import toString from './toString.js';\n\n/**\n * Replaces matches for `pattern` in `string` with `replacement`.\n *\n * **Note:** This method is based on\n * [`String#replace`](https://mdn.io/String/replace).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to modify.\n * @param {RegExp|string} pattern The pattern to replace.\n * @param {Function|string} replacement The match replacement.\n * @returns {string} Returns the modified string.\n * @example\n *\n * _.replace('Hi Fred', 'Fred', 'Barney');\n * // => 'Hi Barney'\n */\nfunction replace() {\n  var args = arguments,\n      string = toString(args[0]);\n\n  return args.length < 3 ? string : string.replace(args[1], args[2]);\n}\n\nexport default replace;\n", "import baseRest from './_baseRest.js';\nimport toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as\n * an array.\n *\n * **Note:** This method is based on the\n * [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = start === undefined ? start : toInteger(start);\n  return baseRest(func, start);\n}\n\nexport default rest;\n", "import castPath from './_castPath.js';\nimport isFunction from './isFunction.js';\nimport toKey from './_toKey.js';\n\n/**\n * This method is like `_.get` except that if the resolved value is a\n * function it's invoked with the `this` binding of its parent object and\n * its result is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to resolve.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n *\n * _.result(object, 'a[0].b.c1');\n * // => 3\n *\n * _.result(object, 'a[0].b.c2');\n * // => 4\n *\n * _.result(object, 'a[0].b.c3', 'default');\n * // => 'default'\n *\n * _.result(object, 'a[0].b.c3', _.constant('default'));\n * // => 'default'\n */\nfunction result(object, path, defaultValue) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length;\n\n  // Ensure the loop is entered when path is empty.\n  if (!length) {\n    length = 1;\n    object = undefined;\n  }\n  while (++index < length) {\n    var value = object == null ? undefined : object[toKey(path[index])];\n    if (value === undefined) {\n      index = length;\n      value = defaultValue;\n    }\n    object = isFunction(value) ? value.call(object) : value;\n  }\n  return object;\n}\n\nexport default result;\n", "/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeReverse = arrayProto.reverse;\n\n/**\n * Reverses `array` so that the first element becomes the last, the second\n * element becomes the second to last, and so on.\n *\n * **Note:** This method mutates `array` and is based on\n * [`Array#reverse`](https://mdn.io/Array/reverse).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.reverse(array);\n * // => [3, 2, 1]\n *\n * console.log(array);\n * // => [3, 2, 1]\n */\nfunction reverse(array) {\n  return array == null ? array : nativeReverse.call(array);\n}\n\nexport default reverse;\n", "import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round.\n * @param {number} [precision=0] The precision to round to.\n * @returns {number} Returns the rounded number.\n * @example\n *\n * _.round(4.006);\n * // => 4\n *\n * _.round(4.006, 2);\n * // => 4.01\n *\n * _.round(4060, -2);\n * // => 4100\n */\nvar round = createRound('round');\n\nexport default round;\n", "import baseRandom from './_baseRandom.js';\n\n/**\n * A specialized version of `_.sample` for arrays.\n *\n * @private\n * @param {Array} array The array to sample.\n * @returns {*} Returns the random element.\n */\nfunction arraySample(array) {\n  var length = array.length;\n  return length ? array[baseRandom(0, length - 1)] : undefined;\n}\n\nexport default arraySample;\n", "import arraySample from './_arraySample.js';\nimport values from './values.js';\n\n/**\n * The base implementation of `_.sample`.\n *\n * @private\n * @param {Array|Object} collection The collection to sample.\n * @returns {*} Returns the random element.\n */\nfunction baseSample(collection) {\n  return arraySample(values(collection));\n}\n\nexport default baseSample;\n", "import arraySample from './_arraySample.js';\nimport baseSample from './_baseSample.js';\nimport isArray from './isArray.js';\n\n/**\n * Gets a random element from `collection`.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to sample.\n * @returns {*} Returns the random element.\n * @example\n *\n * _.sample([1, 2, 3, 4]);\n * // => 2\n */\nfunction sample(collection) {\n  var func = isArray(collection) ? arraySample : baseSample;\n  return func(collection);\n}\n\nexport default sample;\n", "import baseRandom from './_baseRandom.js';\n\n/**\n * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @param {number} [size=array.length] The size of `array`.\n * @returns {Array} Returns `array`.\n */\nfunction shuffleSelf(array, size) {\n  var index = -1,\n      length = array.length,\n      lastIndex = length - 1;\n\n  size = size === undefined ? length : size;\n  while (++index < size) {\n    var rand = baseRandom(index, lastIndex),\n        value = array[rand];\n\n    array[rand] = array[index];\n    array[index] = value;\n  }\n  array.length = size;\n  return array;\n}\n\nexport default shuffleSelf;\n", "import baseClamp from './_baseClamp.js';\nimport copyArray from './_copyArray.js';\nimport shuffleSelf from './_shuffleSelf.js';\n\n/**\n * A specialized version of `_.sampleSize` for arrays.\n *\n * @private\n * @param {Array} array The array to sample.\n * @param {number} n The number of elements to sample.\n * @returns {Array} Returns the random elements.\n */\nfunction arraySampleSize(array, n) {\n  return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n}\n\nexport default arraySampleSize;\n", "import baseClamp from './_baseClamp.js';\nimport shuffleSelf from './_shuffleSelf.js';\nimport values from './values.js';\n\n/**\n * The base implementation of `_.sampleSize` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to sample.\n * @param {number} n The number of elements to sample.\n * @returns {Array} Returns the random elements.\n */\nfunction baseSampleSize(collection, n) {\n  var array = values(collection);\n  return shuffleSelf(array, baseClamp(n, 0, array.length));\n}\n\nexport default baseSampleSize;\n", "import arraySampleSize from './_arraySampleSize.js';\nimport baseSampleSize from './_baseSampleSize.js';\nimport isArray from './isArray.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Gets `n` random elements at unique keys from `collection` up to the\n * size of `collection`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to sample.\n * @param {number} [n=1] The number of elements to sample.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the random elements.\n * @example\n *\n * _.sampleSize([1, 2, 3], 2);\n * // => [3, 1]\n *\n * _.sampleSize([1, 2, 3], 4);\n * // => [2, 3, 1]\n */\nfunction sampleSize(collection, n, guard) {\n  if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n    n = 1;\n  } else {\n    n = toInteger(n);\n  }\n  var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n  return func(collection, n);\n}\n\nexport default sampleSize;\n", "import baseSet from './_baseSet.js';\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nexport default set;\n", "import baseSet from './_baseSet.js';\n\n/**\n * This method is like `_.set` except that it accepts `customizer` which is\n * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n * path creation is handled by the method instead. The `customizer` is invoked\n * with three arguments: (nsValue, key, nsObject).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {};\n *\n * _.setWith(object, '[0][1]', 'a', Object);\n * // => { '0': { '1': 'a' } }\n */\nfunction setWith(object, path, value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return object == null ? object : baseSet(object, path, value, customizer);\n}\n\nexport default setWith;\n", "import copyArray from './_copyArray.js';\nimport shuffleSelf from './_shuffleSelf.js';\n\n/**\n * A specialized version of `_.shuffle` for arrays.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction arrayShuffle(array) {\n  return shuffleSelf(copyArray(array));\n}\n\nexport default arrayShuffle;\n", "import shuffleSelf from './_shuffleSelf.js';\nimport values from './values.js';\n\n/**\n * The base implementation of `_.shuffle`.\n *\n * @private\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction baseShuffle(collection) {\n  return shuffleSelf(values(collection));\n}\n\nexport default baseShuffle;\n", "import arrayShuffle from './_arrayShuffle.js';\nimport baseShuffle from './_baseShuffle.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates an array of shuffled values, using a version of the\n * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n * @example\n *\n * _.shuffle([1, 2, 3, 4]);\n * // => [4, 1, 3, 2]\n */\nfunction shuffle(collection) {\n  var func = isArray(collection) ? arrayShuffle : baseShuffle;\n  return func(collection);\n}\n\nexport default shuffle;\n", "import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArrayLike from './isArrayLike.js';\nimport isString from './isString.js';\nimport stringSize from './_stringSize.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/**\n * Gets the size of `collection` by returning its length for array-like\n * values or the number of own enumerable string keyed properties for objects.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @returns {number} Returns the collection size.\n * @example\n *\n * _.size([1, 2, 3]);\n * // => 3\n *\n * _.size({ 'a': 1, 'b': 2 });\n * // => 2\n *\n * _.size('pebbles');\n * // => 7\n */\nfunction size(collection) {\n  if (collection == null) {\n    return 0;\n  }\n  if (isArrayLike(collection)) {\n    return isString(collection) ? stringSize(collection) : collection.length;\n  }\n  var tag = getTag(collection);\n  if (tag == mapTag || tag == setTag) {\n    return collection.size;\n  }\n  return baseKeys(collection).length;\n}\n\nexport default size;\n", "import baseSlice from './_baseSlice.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a slice of `array` from `start` up to, but not including, `end`.\n *\n * **Note:** This method is used instead of\n * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n * returned.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction slice(array, start, end) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n    start = 0;\n    end = length;\n  }\n  else {\n    start = start == null ? 0 : toInteger(start);\n    end = end === undefined ? length : toInteger(end);\n  }\n  return baseSlice(array, start, end);\n}\n\nexport default slice;\n", "import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to\n * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the snake cased string.\n * @example\n *\n * _.snakeCase('Foo Bar');\n * // => 'foo_bar'\n *\n * _.snakeCase('fooBar');\n * // => 'foo_bar'\n *\n * _.snakeCase('--FOO-BAR--');\n * // => 'foo_bar'\n */\nvar snakeCase = createCompounder(function(result, word, index) {\n  return result + (index ? '_' : '') + word.toLowerCase();\n});\n\nexport default snakeCase;\n", "import baseEach from './_baseEach.js';\n\n/**\n * The base implementation of `_.some` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction baseSome(collection, predicate) {\n  var result;\n\n  baseEach(collection, function(value, index, collection) {\n    result = predicate(value, index, collection);\n    return !result;\n  });\n  return !!result;\n}\n\nexport default baseSome;\n", "import arraySome from './_arraySome.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseSome from './_baseSome.js';\nimport isArray from './isArray.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Checks if `predicate` returns truthy for **any** element of `collection`.\n * Iteration is stopped once `predicate` returns truthy. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n * @example\n *\n * _.some([null, 0, 'yes', false], Boolean);\n * // => true\n *\n * var users = [\n *   { 'user': 'barney', 'active': true },\n *   { 'user': 'fred',   'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.some(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.some(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.some(users, 'active');\n * // => true\n */\nfunction some(collection, predicate, guard) {\n  var func = isArray(collection) ? arraySome : baseSome;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nexport default some;\n", "import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n", "import isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  var low = 0,\n      high = array == null ? 0 : array.length;\n  if (high === 0) {\n    return 0;\n  }\n\n  value = iteratee(value);\n  var valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\nexport default baseSortedIndexBy;\n", "import baseSortedIndexBy from './_baseSortedIndexBy.js';\nimport identity from './identity.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array == null ? low : array.length;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\nexport default baseSortedIndex;\n", "import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\nexport default sortedIndex;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n * // => 0\n */\nfunction sortedIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));\n}\n\nexport default sortedIndexBy;\n", "import baseSortedIndex from './_baseSortedIndex.js';\nimport eq from './eq.js';\n\n/**\n * This method is like `_.indexOf` except that it performs a binary\n * search on a sorted `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n * // => 1\n */\nfunction sortedIndexOf(array, value) {\n  var length = array == null ? 0 : array.length;\n  if (length) {\n    var index = baseSortedIndex(array, value);\n    if (index < length && eq(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default sortedIndexOf;\n", "import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * This method is like `_.sortedIndex` except that it returns the highest\n * index at which `value` should be inserted into `array` in order to\n * maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n * // => 4\n */\nfunction sortedLastIndex(array, value) {\n  return baseSortedIndex(array, value, true);\n}\n\nexport default sortedLastIndex;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 1\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n * // => 1\n */\nfunction sortedLastIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2), true);\n}\n\nexport default sortedLastIndexBy;\n", "import baseSortedIndex from './_baseSortedIndex.js';\nimport eq from './eq.js';\n\n/**\n * This method is like `_.lastIndexOf` except that it performs a binary\n * search on a sorted `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n * // => 3\n */\nfunction sortedLastIndexOf(array, value) {\n  var length = array == null ? 0 : array.length;\n  if (length) {\n    var index = baseSortedIndex(array, value, true) - 1;\n    if (eq(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default sortedLastIndexOf;\n", "import eq from './eq.js';\n\n/**\n * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseSortedUniq(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    if (!index || !eq(computed, seen)) {\n      var seen = computed;\n      result[resIndex++] = value === 0 ? 0 : value;\n    }\n  }\n  return result;\n}\n\nexport default baseSortedUniq;\n", "import baseSortedUniq from './_baseSortedUniq.js';\n\n/**\n * This method is like `_.uniq` except that it's designed and optimized\n * for sorted arrays.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.sortedUniq([1, 1, 2]);\n * // => [1, 2]\n */\nfunction sortedUniq(array) {\n  return (array && array.length)\n    ? baseSortedUniq(array)\n    : [];\n}\n\nexport default sortedUniq;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseSortedUniq from './_baseSortedUniq.js';\n\n/**\n * This method is like `_.uniqBy` except that it's designed and optimized\n * for sorted arrays.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n * // => [1.1, 2.3]\n */\nfunction sortedUniqBy(array, iteratee) {\n  return (array && array.length)\n    ? baseSortedUniq(array, baseIteratee(iteratee, 2))\n    : [];\n}\n\nexport default sortedUniqBy;\n", "import baseToString from './_baseToString.js';\nimport castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport isRegExp from './isRegExp.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Splits `string` by `separator`.\n *\n * **Note:** This method is based on\n * [`String#split`](https://mdn.io/String/split).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to split.\n * @param {RegExp|string} separator The separator pattern to split by.\n * @param {number} [limit] The length to truncate results to.\n * @returns {Array} Returns the string segments.\n * @example\n *\n * _.split('a-b-c', '-', 2);\n * // => ['a', 'b']\n */\nfunction split(string, separator, limit) {\n  if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n    separator = limit = undefined;\n  }\n  limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n  if (!limit) {\n    return [];\n  }\n  string = toString(string);\n  if (string && (\n        typeof separator == 'string' ||\n        (separator != null && !isRegExp(separator))\n      )) {\n    separator = baseToString(separator);\n    if (!separator && hasUnicode(string)) {\n      return castSlice(stringToArray(string), 0, limit);\n    }\n  }\n  return string.split(separator, limit);\n}\n\nexport default split;\n", "import apply from './_apply.js';\nimport arrayPush from './_arrayPush.js';\nimport baseRest from './_baseRest.js';\nimport castSlice from './_castSlice.js';\nimport toInteger from './toInteger.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * create function and an array of arguments much like\n * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n *\n * **Note:** This method is based on the\n * [spread operator](https://mdn.io/spread_operator).\n *\n * @static\n * @memberOf _\n * @since 3.2.0\n * @category Function\n * @param {Function} func The function to spread arguments over.\n * @param {number} [start=0] The start position of the spread.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.spread(function(who, what) {\n *   return who + ' says ' + what;\n * });\n *\n * say(['fred', 'hello']);\n * // => 'fred says hello'\n *\n * var numbers = Promise.all([\n *   Promise.resolve(40),\n *   Promise.resolve(36)\n * ]);\n *\n * numbers.then(_.spread(function(x, y) {\n *   return x + y;\n * }));\n * // => a Promise of 76\n */\nfunction spread(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = start == null ? 0 : nativeMax(toInteger(start), 0);\n  return baseRest(function(args) {\n    var array = args[start],\n        otherArgs = castSlice(args, 0, start);\n\n    if (array) {\n      arrayPush(otherArgs, array);\n    }\n    return apply(func, this, otherArgs);\n  });\n}\n\nexport default spread;\n", "import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n", "import baseClamp from './_baseClamp.js';\nimport baseToString from './_baseToString.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/**\n * Checks if `string` starts with the given target string.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {string} [target] The string to search for.\n * @param {number} [position=0] The position to search from.\n * @returns {boolean} Returns `true` if `string` starts with `target`,\n *  else `false`.\n * @example\n *\n * _.startsWith('abc', 'a');\n * // => true\n *\n * _.startsWith('abc', 'b');\n * // => false\n *\n * _.startsWith('abc', 'b', 1);\n * // => true\n */\nfunction startsWith(string, target, position) {\n  string = toString(string);\n  position = position == null\n    ? 0\n    : baseClamp(toInteger(position), 0, string.length);\n\n  target = baseToString(target);\n  return string.slice(position, position + target.length) == target;\n}\n\nexport default startsWith;\n", "/**\n * This method returns a new empty object.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Object} Returns the new empty object.\n * @example\n *\n * var objects = _.times(2, _.stubObject);\n *\n * console.log(objects);\n * // => [{}, {}]\n *\n * console.log(objects[0] === objects[1]);\n * // => false\n */\nfunction stubObject() {\n  return {};\n}\n\nexport default stubObject;\n", "/**\n * This method returns an empty string.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {string} Returns the empty string.\n * @example\n *\n * _.times(2, _.stubString);\n * // => ['', '']\n */\nfunction stubString() {\n  return '';\n}\n\nexport default stubString;\n", "/**\n * This method returns `true`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `true`.\n * @example\n *\n * _.times(2, _.stubTrue);\n * // => [true, true]\n */\nfunction stubTrue() {\n  return true;\n}\n\nexport default stubTrue;\n", "import createMathOperation from './_createMathOperation.js';\n\n/**\n * Subtract two numbers.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {number} minuend The first number in a subtraction.\n * @param {number} subtrahend The second number in a subtraction.\n * @returns {number} Returns the difference.\n * @example\n *\n * _.subtract(6, 4);\n * // => 2\n */\nvar subtract = createMathOperation(function(minuend, subtrahend) {\n  return minuend - subtrahend;\n}, 0);\n\nexport default subtract;\n", "import baseSum from './_baseSum.js';\nimport identity from './identity.js';\n\n/**\n * Computes the sum of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 3.4.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the sum.\n * @example\n *\n * _.sum([4, 2, 8, 6]);\n * // => 20\n */\nfunction sum(array) {\n  return (array && array.length)\n    ? baseSum(array, identity)\n    : 0;\n}\n\nexport default sum;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseSum from './_baseSum.js';\n\n/**\n * This method is like `_.sum` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the value to be summed.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the sum.\n * @example\n *\n * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n *\n * _.sumBy(objects, function(o) { return o.n; });\n * // => 20\n *\n * // The `_.property` iteratee shorthand.\n * _.sumBy(objects, 'n');\n * // => 20\n */\nfunction sumBy(array, iteratee) {\n  return (array && array.length)\n    ? baseSum(array, baseIteratee(iteratee, 2))\n    : 0;\n}\n\nexport default sumBy;\n", "import baseSlice from './_baseSlice.js';\n\n/**\n * Gets all but the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.tail([1, 2, 3]);\n * // => [2, 3]\n */\nfunction tail(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseSlice(array, 1, length) : [];\n}\n\nexport default tail;\n", "import baseSlice from './_baseSlice.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a slice of `array` with `n` elements taken from the beginning.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to take.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.take([1, 2, 3]);\n * // => [1]\n *\n * _.take([1, 2, 3], 2);\n * // => [1, 2]\n *\n * _.take([1, 2, 3], 5);\n * // => [1, 2, 3]\n *\n * _.take([1, 2, 3], 0);\n * // => []\n */\nfunction take(array, n, guard) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  return baseSlice(array, 0, n < 0 ? 0 : n);\n}\n\nexport default take;\n", "import baseSlice from './_baseSlice.js';\nimport toInteger from './toInteger.js';\n\n/**\n * Creates a slice of `array` with `n` elements taken from the end.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to take.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.takeRight([1, 2, 3]);\n * // => [3]\n *\n * _.takeRight([1, 2, 3], 2);\n * // => [2, 3]\n *\n * _.takeRight([1, 2, 3], 5);\n * // => [1, 2, 3]\n *\n * _.takeRight([1, 2, 3], 0);\n * // => []\n */\nfunction takeRight(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  n = length - n;\n  return baseSlice(array, n < 0 ? 0 : n, length);\n}\n\nexport default takeRight;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseWhile from './_baseWhile.js';\n\n/**\n * Creates a slice of `array` with elements taken from the end. Elements are\n * taken until `predicate` returns falsey. The predicate is invoked with\n * three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.takeRightWhile(users, function(o) { return !o.active; });\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.matches` iteratee shorthand.\n * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n * // => objects for ['pebbles']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.takeRightWhile(users, ['active', false]);\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.property` iteratee shorthand.\n * _.takeRightWhile(users, 'active');\n * // => []\n */\nfunction takeRightWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate, 3), false, true)\n    : [];\n}\n\nexport default takeRightWhile;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseWhile from './_baseWhile.js';\n\n/**\n * Creates a slice of `array` with elements taken from the beginning. Elements\n * are taken until `predicate` returns falsey. The predicate is invoked with\n * three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.takeWhile(users, function(o) { return !o.active; });\n * // => objects for ['barney', 'fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.takeWhile(users, { 'user': 'barney', 'active': false });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.takeWhile(users, ['active', false]);\n * // => objects for ['barney', 'fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.takeWhile(users, 'active');\n * // => []\n */\nfunction takeWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate, 3))\n    : [];\n}\n\nexport default takeWhile;\n", "/**\n * This method invokes `interceptor` and returns `value`. The interceptor\n * is invoked with one argument; (value). The purpose of this method is to\n * \"tap into\" a method chain sequence in order to modify intermediate results.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Seq\n * @param {*} value The value to provide to `interceptor`.\n * @param {Function} interceptor The function to invoke.\n * @returns {*} Returns `value`.\n * @example\n *\n * _([1, 2, 3])\n *  .tap(function(array) {\n *    // Mutate input array.\n *    array.pop();\n *  })\n *  .reverse()\n *  .value();\n * // => [2, 1]\n */\nfunction tap(value, interceptor) {\n  interceptor(value);\n  return value;\n}\n\nexport default tap;\n", "import eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n * of source objects to the destination object for all destination properties\n * that resolve to `undefined`.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to assign.\n * @param {Object} object The parent object of `objValue`.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsAssignIn(objValue, srcValue, key, object) {\n  if (objValue === undefined ||\n      (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n    return srcValue;\n  }\n  return objValue;\n}\n\nexport default customDefaultsAssignIn;\n", "/** Used to escape characters for inclusion in compiled string literals. */\nvar stringEscapes = {\n  '\\\\': '\\\\',\n  \"'\": \"'\",\n  '\\n': 'n',\n  '\\r': 'r',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\n/**\n * Used by `_.template` to escape characters for inclusion in compiled string literals.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nfunction escapeStringChar(chr) {\n  return '\\\\' + stringEscapes[chr];\n}\n\nexport default escapeStringChar;\n", "/** Used to match template delimiters. */\nvar reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\nexport default reInterpolate;\n", "/** Used to match template delimiters. */\nvar reEscape = /<%-([\\s\\S]+?)%>/g;\n\nexport default reEscape;\n", "/** Used to match template delimiters. */\nvar reEvaluate = /<%([\\s\\S]+?)%>/g;\n\nexport default reEvaluate;\n", "import escape from './escape.js';\nimport reEscape from './_reEscape.js';\nimport reEvaluate from './_reEvaluate.js';\nimport reInterpolate from './_reInterpolate.js';\n\n/**\n * By default, the template delimiters used by lodash are like those in\n * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n * following template settings to use alternative delimiters.\n *\n * @static\n * @memberOf _\n * @type {Object}\n */\nvar templateSettings = {\n\n  /**\n   * Used to detect `data` property values to be HTML-escaped.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'escape': reEscape,\n\n  /**\n   * Used to detect code to be evaluated.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'evaluate': reEvaluate,\n\n  /**\n   * Used to detect `data` property values to inject.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'interpolate': reInterpolate,\n\n  /**\n   * Used to reference the data object in the template text.\n   *\n   * @memberOf _.templateSettings\n   * @type {string}\n   */\n  'variable': '',\n\n  /**\n   * Used to import variables into the compiled template.\n   *\n   * @memberOf _.templateSettings\n   * @type {Object}\n   */\n  'imports': {\n\n    /**\n     * A reference to the `lodash` function.\n     *\n     * @memberOf _.templateSettings.imports\n     * @type {Function}\n     */\n    '_': { 'escape': escape }\n  }\n};\n\nexport default templateSettings;\n", "import assignInWith from './assignInWith.js';\nimport attempt from './attempt.js';\nimport baseValues from './_baseValues.js';\nimport customDefaultsAssignIn from './_customDefaultsAssignIn.js';\nimport escapeStringChar from './_escapeStringChar.js';\nimport isError from './isError.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keys from './keys.js';\nimport reInterpolate from './_reInterpolate.js';\nimport templateSettings from './templateSettings.js';\nimport toString from './toString.js';\n\n/** Error message constants. */\nvar INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n/** Used to match empty string literals in compiled template source. */\nvar reEmptyStringLeading = /\\b__p \\+= '';/g,\n    reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n    reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n/**\n * Used to validate the `validate` option in `_.template` variable.\n *\n * Forbids characters which could potentially change the meaning of the function argument definition:\n * - \"(),\" (modification of function parameters)\n * - \"=\" (default value)\n * - \"[]{}\" (destructuring of function parameters)\n * - \"/\" (beginning of a comment)\n * - whitespace\n */\nvar reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n/**\n * Used to match\n * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n */\nvar reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n/** Used to ensure capturing order of template delimiters. */\nvar reNoMatch = /($^)/;\n\n/** Used to match unescaped characters in compiled string literals. */\nvar reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a compiled template function that can interpolate data properties\n * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n * properties may be accessed as free variables in the template. If a setting\n * object is given, it takes precedence over `_.templateSettings` values.\n *\n * **Note:** In the development build `_.template` utilizes\n * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n * for easier debugging.\n *\n * For more information on precompiling templates see\n * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n *\n * For more information on Chrome extension sandboxes see\n * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The template string.\n * @param {Object} [options={}] The options object.\n * @param {RegExp} [options.escape=_.templateSettings.escape]\n *  The HTML \"escape\" delimiter.\n * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n *  The \"evaluate\" delimiter.\n * @param {Object} [options.imports=_.templateSettings.imports]\n *  An object to import into the template as free variables.\n * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n *  The \"interpolate\" delimiter.\n * @param {string} [options.sourceURL='templateSources[n]']\n *  The sourceURL of the compiled template.\n * @param {string} [options.variable='obj']\n *  The data object variable name.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the compiled template function.\n * @example\n *\n * // Use the \"interpolate\" delimiter to create a compiled template.\n * var compiled = _.template('hello <%= user %>!');\n * compiled({ 'user': 'fred' });\n * // => 'hello fred!'\n *\n * // Use the HTML \"escape\" delimiter to escape data property values.\n * var compiled = _.template('<b><%- value %></b>');\n * compiled({ 'value': '<script>' });\n * // => '<b>&lt;script&gt;</b>'\n *\n * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the internal `print` function in \"evaluate\" delimiters.\n * var compiled = _.template('<% print(\"hello \" + user); %>!');\n * compiled({ 'user': 'barney' });\n * // => 'hello barney!'\n *\n * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n * // Disable support by replacing the \"interpolate\" delimiter.\n * var compiled = _.template('hello ${ user }!');\n * compiled({ 'user': 'pebbles' });\n * // => 'hello pebbles!'\n *\n * // Use backslashes to treat delimiters as plain text.\n * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n * compiled({ 'value': 'ignored' });\n * // => '<%- value %>'\n *\n * // Use the `imports` option to import `jQuery` as `jq`.\n * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n * compiled(data);\n * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n *\n * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n * compiled.source;\n * // => function(data) {\n * //   var __t, __p = '';\n * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n * //   return __p;\n * // }\n *\n * // Use custom template delimiters.\n * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n * var compiled = _.template('hello {{ user }}!');\n * compiled({ 'user': 'mustache' });\n * // => 'hello mustache!'\n *\n * // Use the `source` property to inline compiled templates for meaningful\n * // line numbers in error messages and stack traces.\n * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n *   var JST = {\\\n *     \"main\": ' + _.template(mainText).source + '\\\n *   };\\\n * ');\n */\nfunction template(string, options, guard) {\n  // Based on John Resig's `tmpl` implementation\n  // (http://ejohn.org/blog/javascript-micro-templating/)\n  // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n  var settings = templateSettings.imports._.templateSettings || templateSettings;\n\n  if (guard && isIterateeCall(string, options, guard)) {\n    options = undefined;\n  }\n  string = toString(string);\n  options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n  var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n      importsKeys = keys(imports),\n      importsValues = baseValues(imports, importsKeys);\n\n  var isEscaping,\n      isEvaluating,\n      index = 0,\n      interpolate = options.interpolate || reNoMatch,\n      source = \"__p += '\";\n\n  // Compile the regexp to match each delimiter.\n  var reDelimiters = RegExp(\n    (options.escape || reNoMatch).source + '|' +\n    interpolate.source + '|' +\n    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n    (options.evaluate || reNoMatch).source + '|$'\n  , 'g');\n\n  // Use a sourceURL for easier debugging.\n  // The sourceURL gets injected into the source that's eval-ed, so be careful\n  // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n  // and escape the comment, thus injecting code that gets evaled.\n  var sourceURL = hasOwnProperty.call(options, 'sourceURL')\n    ? ('//# sourceURL=' +\n       (options.sourceURL + '').replace(/\\s/g, ' ') +\n       '\\n')\n    : '';\n\n  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n    interpolateValue || (interpolateValue = esTemplateValue);\n\n    // Escape characters that can't be included in string literals.\n    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n    // Replace delimiters with snippets.\n    if (escapeValue) {\n      isEscaping = true;\n      source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n    }\n    if (evaluateValue) {\n      isEvaluating = true;\n      source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n    }\n    if (interpolateValue) {\n      source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n    }\n    index = offset + match.length;\n\n    // The JS engine embedded in Adobe products needs `match` returned in\n    // order to produce the correct `offset` value.\n    return match;\n  });\n\n  source += \"';\\n\";\n\n  // If `variable` is not specified wrap a with-statement around the generated\n  // code to add the data object to the top of the scope chain.\n  var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n  if (!variable) {\n    source = 'with (obj) {\\n' + source + '\\n}\\n';\n  }\n  // Throw an error if a forbidden character was found in `variable`, to prevent\n  // potential command injection attacks.\n  else if (reForbiddenIdentifierChars.test(variable)) {\n    throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n  }\n\n  // Cleanup code by stripping empty strings.\n  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n    .replace(reEmptyStringMiddle, '$1')\n    .replace(reEmptyStringTrailing, '$1;');\n\n  // Frame code as the function body.\n  source = 'function(' + (variable || 'obj') + ') {\\n' +\n    (variable\n      ? ''\n      : 'obj || (obj = {});\\n'\n    ) +\n    \"var __t, __p = ''\" +\n    (isEscaping\n       ? ', __e = _.escape'\n       : ''\n    ) +\n    (isEvaluating\n      ? ', __j = Array.prototype.join;\\n' +\n        \"function print() { __p += __j.call(arguments, '') }\\n\"\n      : ';\\n'\n    ) +\n    source +\n    'return __p\\n}';\n\n  var result = attempt(function() {\n    return Function(importsKeys, sourceURL + 'return ' + source)\n      .apply(undefined, importsValues);\n  });\n\n  // Provide the compiled function's source by its `toString` method or\n  // the `source` property as a convenience for inlining compiled templates.\n  result.source = source;\n  if (isError(result)) {\n    throw result;\n  }\n  return result;\n}\n\nexport default template;\n", "import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n", "/**\n * This method is like `_.tap` except that it returns the result of `interceptor`.\n * The purpose of this method is to \"pass thru\" values replacing intermediate\n * results in a method chain sequence.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Seq\n * @param {*} value The value to provide to `interceptor`.\n * @param {Function} interceptor The function to invoke.\n * @returns {*} Returns the result of `interceptor`.\n * @example\n *\n * _('  abc  ')\n *  .chain()\n *  .trim()\n *  .thru(function(value) {\n *    return [value];\n *  })\n *  .value();\n * // => ['abc']\n */\nfunction thru(value, interceptor) {\n  return interceptor(value);\n}\n\nexport default thru;\n", "import baseTimes from './_baseTimes.js';\nimport castFunction from './_castFunction.js';\nimport toInteger from './toInteger.js';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nexport default times;\n", "/**\n * Enables the wrapper to be iterable.\n *\n * @name Symbol.iterator\n * @memberOf _\n * @since 4.0.0\n * @category Seq\n * @returns {Object} Returns the wrapper object.\n * @example\n *\n * var wrapped = _([1, 2]);\n *\n * wrapped[Symbol.iterator]() === wrapped;\n * // => true\n *\n * Array.from(wrapped);\n * // => [1, 2]\n */\nfunction wrapperToIterator() {\n  return this;\n}\n\nexport default wrapperToIterator;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport arrayPush from './_arrayPush.js';\nimport arrayReduce from './_arrayReduce.js';\n\n/**\n * The base implementation of `wrapperValue` which returns the result of\n * performing a sequence of actions on the unwrapped `value`, where each\n * successive action is supplied the return value of the previous.\n *\n * @private\n * @param {*} value The unwrapped value.\n * @param {Array} actions Actions to perform to resolve the unwrapped value.\n * @returns {*} Returns the resolved value.\n */\nfunction baseWrapperValue(value, actions) {\n  var result = value;\n  if (result instanceof LazyWrapper) {\n    result = result.value();\n  }\n  return arrayReduce(actions, function(result, action) {\n    return action.func.apply(action.thisArg, arrayPush([result], action.args));\n  }, result);\n}\n\nexport default baseWrapperValue;\n", "import baseWrapperValue from './_baseWrapperValue.js';\n\n/**\n * Executes the chain sequence to resolve the unwrapped value.\n *\n * @name value\n * @memberOf _\n * @since 0.1.0\n * @alias toJSON, valueOf\n * @category Seq\n * @returns {*} Returns the resolved unwrapped value.\n * @example\n *\n * _([1, 2, 3]).value();\n * // => [1, 2, 3]\n */\nfunction wrapperValue() {\n  return baseWrapperValue(this.__wrapped__, this.__actions__);\n}\n\nexport default wrapperValue;\n", "import toString from './toString.js';\n\n/**\n * Converts `string`, as a whole, to lower case just like\n * [String#toLowerCase](https://mdn.io/toLowerCase).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.toLower('--Foo-Bar--');\n * // => '--foo-bar--'\n *\n * _.toLower('fooBar');\n * // => 'foobar'\n *\n * _.toLower('__FOO_BAR__');\n * // => '__foo_bar__'\n */\nfunction toLower(value) {\n  return toString(value).toLowerCase();\n}\n\nexport default toLower;\n", "import arrayMap from './_arrayMap.js';\nimport copyArray from './_copyArray.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\nimport stringToPath from './_stringToPath.js';\nimport toKey from './_toKey.js';\nimport toString from './toString.js';\n\n/**\n * Converts `value` to a property path array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {*} value The value to convert.\n * @returns {Array} Returns the new property path array.\n * @example\n *\n * _.toPath('a.b.c');\n * // => ['a', 'b', 'c']\n *\n * _.toPath('a[0].b.c');\n * // => ['a', '0', 'b', 'c']\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return arrayMap(value, toKey);\n  }\n  return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n}\n\nexport default toPath;\n", "import baseClamp from './_baseClamp.js';\nimport toInteger from './toInteger.js';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Converts `value` to a safe integer. A safe integer can be compared and\n * represented correctly.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toSafeInteger(3.2);\n * // => 3\n *\n * _.toSafeInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toSafeInteger(Infinity);\n * // => 9007199254740991\n *\n * _.toSafeInteger('3.2');\n * // => 3\n */\nfunction toSafeInteger(value) {\n  return value\n    ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n    : (value === 0 ? value : 0);\n}\n\nexport default toSafeInteger;\n", "import toString from './toString.js';\n\n/**\n * Converts `string`, as a whole, to upper case just like\n * [String#toUpperCase](https://mdn.io/toUpperCase).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.toUpper('--foo-bar--');\n * // => '--FOO-BAR--'\n *\n * _.toUpper('fooBar');\n * // => 'FOOBAR'\n *\n * _.toUpper('__foo_bar__');\n * // => '__FOO_BAR__'\n */\nfunction toUpper(value) {\n  return toString(value).toUpperCase();\n}\n\nexport default toUpper;\n", "import arrayEach from './_arrayEach.js';\nimport baseCreate from './_baseCreate.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\nimport getPrototype from './_getPrototype.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isTypedArray from './isTypedArray.js';\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nexport default transform;\n", "import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the last unmatched string symbol.\n */\nfunction charsEndIndex(strSymbols, chrSymbols) {\n  var index = strSymbols.length;\n\n  while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nexport default charsEndIndex;\n", "import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nexport default charsStartIndex;\n", "import baseToString from './_baseToString.js';\nimport baseTrim from './_baseTrim.js';\nimport castSlice from './_castSlice.js';\nimport charsEndIndex from './_charsEndIndex.js';\nimport charsStartIndex from './_charsStartIndex.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Removes leading and trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trim('  abc  ');\n * // => 'abc'\n *\n * _.trim('-_-abc-_-', '_-');\n * // => 'abc'\n *\n * _.map(['  foo  ', '  bar  '], _.trim);\n * // => ['foo', 'bar']\n */\nfunction trim(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return baseTrim(string);\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      chrSymbols = stringToArray(chars),\n      start = charsStartIndex(strSymbols, chrSymbols),\n      end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n  return castSlice(strSymbols, start, end).join('');\n}\n\nexport default trim;\n", "import baseToString from './_baseToString.js';\nimport castSlice from './_castSlice.js';\nimport charsEndIndex from './_charsEndIndex.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\nimport trimmedEndIndex from './_trimmedEndIndex.js';\n\n/**\n * Removes trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trimEnd('  abc  ');\n * // => '  abc'\n *\n * _.trimEnd('-_-abc-_-', '_-');\n * // => '-_-abc'\n */\nfunction trimEnd(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.slice(0, trimmedEndIndex(string) + 1);\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n  return castSlice(strSymbols, 0, end).join('');\n}\n\nexport default trimEnd;\n", "import baseToString from './_baseToString.js';\nimport castSlice from './_castSlice.js';\nimport charsStartIndex from './_charsStartIndex.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * Removes leading whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trimStart('  abc  ');\n * // => 'abc  '\n *\n * _.trimStart('-_-abc-_-', '_-');\n * // => 'abc-_-'\n */\nfunction trimStart(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrimStart, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      start = charsStartIndex(strSymbols, stringToArray(chars));\n\n  return castSlice(strSymbols, start).join('');\n}\n\nexport default trimStart;\n", "import baseToString from './_baseToString.js';\nimport castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport isObject from './isObject.js';\nimport isRegExp from './isRegExp.js';\nimport stringSize from './_stringSize.js';\nimport stringToArray from './_stringToArray.js';\nimport toInteger from './toInteger.js';\nimport toString from './toString.js';\n\n/** Used as default options for `_.truncate`. */\nvar DEFAULT_TRUNC_LENGTH = 30,\n    DEFAULT_TRUNC_OMISSION = '...';\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Truncates `string` if it's longer than the given maximum string length.\n * The last characters of the truncated string are replaced with the omission\n * string which defaults to \"...\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to truncate.\n * @param {Object} [options={}] The options object.\n * @param {number} [options.length=30] The maximum string length.\n * @param {string} [options.omission='...'] The string to indicate text is omitted.\n * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n * @returns {string} Returns the truncated string.\n * @example\n *\n * _.truncate('hi-diddly-ho there, neighborino');\n * // => 'hi-diddly-ho there, neighbo...'\n *\n * _.truncate('hi-diddly-ho there, neighborino', {\n *   'length': 24,\n *   'separator': ' '\n * });\n * // => 'hi-diddly-ho there,...'\n *\n * _.truncate('hi-diddly-ho there, neighborino', {\n *   'length': 24,\n *   'separator': /,? +/\n * });\n * // => 'hi-diddly-ho there...'\n *\n * _.truncate('hi-diddly-ho there, neighborino', {\n *   'omission': ' [...]'\n * });\n * // => 'hi-diddly-ho there, neig [...]'\n */\nfunction truncate(string, options) {\n  var length = DEFAULT_TRUNC_LENGTH,\n      omission = DEFAULT_TRUNC_OMISSION;\n\n  if (isObject(options)) {\n    var separator = 'separator' in options ? options.separator : separator;\n    length = 'length' in options ? toInteger(options.length) : length;\n    omission = 'omission' in options ? baseToString(options.omission) : omission;\n  }\n  string = toString(string);\n\n  var strLength = string.length;\n  if (hasUnicode(string)) {\n    var strSymbols = stringToArray(string);\n    strLength = strSymbols.length;\n  }\n  if (length >= strLength) {\n    return string;\n  }\n  var end = length - stringSize(omission);\n  if (end < 1) {\n    return omission;\n  }\n  var result = strSymbols\n    ? castSlice(strSymbols, 0, end).join('')\n    : string.slice(0, end);\n\n  if (separator === undefined) {\n    return result + omission;\n  }\n  if (strSymbols) {\n    end += (result.length - end);\n  }\n  if (isRegExp(separator)) {\n    if (string.slice(end).search(separator)) {\n      var match,\n          substring = result;\n\n      if (!separator.global) {\n        separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n      }\n      separator.lastIndex = 0;\n      while ((match = separator.exec(substring))) {\n        var newEnd = match.index;\n      }\n      result = result.slice(0, newEnd === undefined ? end : newEnd);\n    }\n  } else if (string.indexOf(baseToString(separator), end) != end) {\n    var index = result.lastIndexOf(separator);\n    if (index > -1) {\n      result = result.slice(0, index);\n    }\n  }\n  return result + omission;\n}\n\nexport default truncate;\n", "import ary from './ary.js';\n\n/**\n * Creates a function that accepts up to one argument, ignoring any\n * additional arguments.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Function\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n * @example\n *\n * _.map(['6', '8', '10'], _.unary(parseInt));\n * // => [6, 8, 10]\n */\nfunction unary(func) {\n  return ary(func, 1);\n}\n\nexport default unary;\n", "import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map HTML entities to characters. */\nvar htmlUnescapes = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n};\n\n/**\n * Used by `_.unescape` to convert HTML entities to characters.\n *\n * @private\n * @param {string} chr The matched character to unescape.\n * @returns {string} Returns the unescaped character.\n */\nvar unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\nexport default unescapeHtmlChar;\n", "import toString from './toString.js';\nimport unescapeHtmlChar from './_unescapeHtmlChar.js';\n\n/** Used to match HTML entities and HTML characters. */\nvar reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n    reHasEscapedHtml = RegExp(reEscapedHtml.source);\n\n/**\n * The inverse of `_.escape`; this method converts the HTML entities\n * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n * their corresponding characters.\n *\n * **Note:** No other HTML entities are unescaped. To unescape additional\n * HTML entities use a third-party library like [_he_](https://mths.be/he).\n *\n * @static\n * @memberOf _\n * @since 0.6.0\n * @category String\n * @param {string} [string=''] The string to unescape.\n * @returns {string} Returns the unescaped string.\n * @example\n *\n * _.unescape('fred, barney, &amp; pebbles');\n * // => 'fred, barney, & pebbles'\n */\nfunction unescape(string) {\n  string = toString(string);\n  return (string && reHasEscapedHtml.test(string))\n    ? string.replace(reEscapedHtml, unescapeHtmlChar)\n    : string;\n}\n\nexport default unescape;\n", "import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n", "import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n", "import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nexport default union;\n", "import baseFlatten from './_baseFlatten.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.union` except that it accepts `iteratee` which is\n * invoked for each element of each `arrays` to generate the criterion by\n * which uniqueness is computed. Result values are chosen from the first\n * array in which the value occurs. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nvar unionBy = baseRest(function(arrays) {\n  var iteratee = last(arrays);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2));\n});\n\nexport default unionBy;\n", "import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.union` except that it accepts `comparator` which\n * is invoked to compare elements of `arrays`. Result values are chosen from\n * the first array in which the value occurs. The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.unionWith(objects, others, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n */\nvar unionWith = baseRest(function(arrays) {\n  var comparator = last(arrays);\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n});\n\nexport default unionWith;\n", "import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n", "import baseIteratee from './_baseIteratee.js';\nimport baseUniq from './_baseUniq.js';\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nexport default uniqBy;\n", "import baseUniq from './_baseUniq.js';\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nexport default uniqWith;\n", "import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n", "import baseUnset from './_baseUnset.js';\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nexport default unset;\n", "import arrayFilter from './_arrayFilter.js';\nimport arrayMap from './_arrayMap.js';\nimport baseProperty from './_baseProperty.js';\nimport baseTimes from './_baseTimes.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.zip` except that it accepts an array of grouped\n * elements and creates an array regrouping the elements to their pre-zip\n * configuration.\n *\n * @static\n * @memberOf _\n * @since 1.2.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n *\n * _.unzip(zipped);\n * // => [['a', 'b'], [1, 2], [true, false]]\n */\nfunction unzip(array) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var length = 0;\n  array = arrayFilter(array, function(group) {\n    if (isArrayLikeObject(group)) {\n      length = nativeMax(group.length, length);\n      return true;\n    }\n  });\n  return baseTimes(length, function(index) {\n    return arrayMap(array, baseProperty(index));\n  });\n}\n\nexport default unzip;\n", "import apply from './_apply.js';\nimport arrayMap from './_arrayMap.js';\nimport unzip from './unzip.js';\n\n/**\n * This method is like `_.unzip` except that it accepts `iteratee` to specify\n * how regrouped values should be combined. The iteratee is invoked with the\n * elements of each group: (...group).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @param {Function} [iteratee=_.identity] The function to combine\n *  regrouped values.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n * // => [[1, 10, 100], [2, 20, 200]]\n *\n * _.unzipWith(zipped, _.add);\n * // => [3, 30, 300]\n */\nfunction unzipWith(array, iteratee) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var result = unzip(array);\n  if (iteratee == null) {\n    return result;\n  }\n  return arrayMap(result, function(group) {\n    return apply(iteratee, undefined, group);\n  });\n}\n\nexport default unzipWith;\n", "import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\n\n/**\n * The base implementation of `_.update`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to update.\n * @param {Function} updater The function to produce the updated value.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseUpdate(object, path, updater, customizer) {\n  return baseSet(object, path, updater(baseGet(object, path)), customizer);\n}\n\nexport default baseUpdate;\n", "import baseUpdate from './_baseUpdate.js';\nimport castFunction from './_castFunction.js';\n\n/**\n * This method is like `_.set` except that accepts `updater` to produce the\n * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n * is invoked with one argument: (value).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.6.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {Function} updater The function to produce the updated value.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n * console.log(object.a[0].b.c);\n * // => 9\n *\n * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n * console.log(object.x[0].y.z);\n * // => 0\n */\nfunction update(object, path, updater) {\n  return object == null ? object : baseUpdate(object, path, castFunction(updater));\n}\n\nexport default update;\n", "import baseUpdate from './_baseUpdate.js';\nimport castFunction from './_castFunction.js';\n\n/**\n * This method is like `_.update` except that it accepts `customizer` which is\n * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n * path creation is handled by the method instead. The `customizer` is invoked\n * with three arguments: (nsValue, key, nsObject).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.6.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {Function} updater The function to produce the updated value.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {};\n *\n * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n * // => { '0': { '1': 'a' } }\n */\nfunction updateWith(object, path, updater, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n}\n\nexport default updateWith;\n", "import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.upperCase('--foo-bar');\n * // => 'FOO BAR'\n *\n * _.upperCase('fooBar');\n * // => 'FOO BAR'\n *\n * _.upperCase('__foo_bar__');\n * // => 'FOO BAR'\n */\nvar upperCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toUpperCase();\n});\n\nexport default upperCase;\n", "import baseValues from './_baseValues.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of the own and inherited enumerable string keyed property\n * values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.valuesIn(new Foo);\n * // => [1, 2, 3] (iteration order is not guaranteed)\n */\nfunction valuesIn(object) {\n  return object == null ? [] : baseValues(object, keysIn(object));\n}\n\nexport default valuesIn;\n", "import baseDifference from './_baseDifference.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nexport default without;\n", "import castFunction from './_castFunction.js';\nimport partial from './partial.js';\n\n/**\n * Creates a function that provides `value` to `wrapper` as its first\n * argument. Any additional arguments provided to the function are appended\n * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n * binding of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {*} value The value to wrap.\n * @param {Function} [wrapper=identity] The wrapper function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var p = _.wrap(_.escape, function(func, text) {\n *   return '<p>' + func(text) + '</p>';\n * });\n *\n * p('fred, barney, & pebbles');\n * // => '<p>fred, barney, &amp; pebbles</p>'\n */\nfunction wrap(value, wrapper) {\n  return partial(castFunction(wrapper), value);\n}\n\nexport default wrap;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport baseAt from './_baseAt.js';\nimport flatRest from './_flatRest.js';\nimport isIndex from './_isIndex.js';\nimport thru from './thru.js';\n\n/**\n * This method is the wrapper version of `_.at`.\n *\n * @name at\n * @memberOf _\n * @since 1.0.0\n * @category Seq\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n *\n * _(object).at(['a[0].b.c', 'a[1]']).value();\n * // => [3, 4]\n */\nvar wrapperAt = flatRest(function(paths) {\n  var length = paths.length,\n      start = length ? paths[0] : 0,\n      value = this.__wrapped__,\n      interceptor = function(object) { return baseAt(object, paths); };\n\n  if (length > 1 || this.__actions__.length ||\n      !(value instanceof LazyWrapper) || !isIndex(start)) {\n    return this.thru(interceptor);\n  }\n  value = value.slice(start, +start + (length ? 1 : 0));\n  value.__actions__.push({\n    'func': thru,\n    'args': [interceptor],\n    'thisArg': undefined\n  });\n  return new LodashWrapper(value, this.__chain__).thru(function(array) {\n    if (length && !array.length) {\n      array.push(undefined);\n    }\n    return array;\n  });\n});\n\nexport default wrapperAt;\n", "import chain from './chain.js';\n\n/**\n * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n *\n * @name chain\n * @memberOf _\n * @since 0.1.0\n * @category Seq\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 40 }\n * ];\n *\n * // A sequence without explicit chaining.\n * _(users).head();\n * // => { 'user': 'barney', 'age': 36 }\n *\n * // A sequence with explicit chaining.\n * _(users)\n *   .chain()\n *   .head()\n *   .pick('user')\n *   .value();\n * // => { 'user': 'barney' }\n */\nfunction wrapperChain() {\n  return chain(this);\n}\n\nexport default wrapperChain;\n", "import LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport reverse from './reverse.js';\nimport thru from './thru.js';\n\n/**\n * This method is the wrapper version of `_.reverse`.\n *\n * **Note:** This method mutates the wrapped array.\n *\n * @name reverse\n * @memberOf _\n * @since 0.1.0\n * @category Seq\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _(array).reverse().value()\n * // => [3, 2, 1]\n *\n * console.log(array);\n * // => [3, 2, 1]\n */\nfunction wrapperReverse() {\n  var value = this.__wrapped__;\n  if (value instanceof LazyWrapper) {\n    var wrapped = value;\n    if (this.__actions__.length) {\n      wrapped = new LazyWrapper(this);\n    }\n    wrapped = wrapped.reverse();\n    wrapped.__actions__.push({\n      'func': thru,\n      'args': [reverse],\n      'thisArg': undefined\n    });\n    return new LodashWrapper(wrapped, this.__chain__);\n  }\n  return this.thru(reverse);\n}\n\nexport default wrapperReverse;\n", "import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseUniq from './_baseUniq.js';\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nexport default baseXor;\n", "import arrayFilter from './_arrayFilter.js';\nimport baseRest from './_baseRest.js';\nimport baseXor from './_baseXor.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nexport default xor;\n", "import arrayFilter from './_arrayFilter.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport baseXor from './_baseXor.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.xor` except that it accepts `iteratee` which is\n * invoked for each element of each `arrays` to generate the criterion by\n * which by which they're compared. The order of result values is determined\n * by the order they occur in the arrays. The iteratee is invoked with one\n * argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n * // => [1.2, 3.4]\n *\n * // The `_.property` iteratee shorthand.\n * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar xorBy = baseRest(function(arrays) {\n  var iteratee = last(arrays);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return baseXor(arrayFilter(arrays, isArrayLikeObject), baseIteratee(iteratee, 2));\n});\n\nexport default xorBy;\n", "import arrayFilter from './_arrayFilter.js';\nimport baseRest from './_baseRest.js';\nimport baseXor from './_baseXor.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.xor` except that it accepts `comparator` which is\n * invoked to compare elements of `arrays`. The order of result values is\n * determined by the order they occur in the arrays. The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.xorWith(objects, others, _.isEqual);\n * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n */\nvar xorWith = baseRest(function(arrays) {\n  var comparator = last(arrays);\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n});\n\nexport default xorWith;\n", "import baseRest from './_baseRest.js';\nimport unzip from './unzip.js';\n\n/**\n * Creates an array of grouped elements, the first of which contains the\n * first elements of the given arrays, the second of which contains the\n * second elements of the given arrays, and so on.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to process.\n * @returns {Array} Returns the new array of grouped elements.\n * @example\n *\n * _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n */\nvar zip = baseRest(unzip);\n\nexport default zip;\n", "/**\n * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n *\n * @private\n * @param {Array} props The property identifiers.\n * @param {Array} values The property values.\n * @param {Function} assignFunc The function to assign values.\n * @returns {Object} Returns the new object.\n */\nfunction baseZipObject(props, values, assignFunc) {\n  var index = -1,\n      length = props.length,\n      valsLength = values.length,\n      result = {};\n\n  while (++index < length) {\n    var value = index < valsLength ? values[index] : undefined;\n    assignFunc(result, props[index], value);\n  }\n  return result;\n}\n\nexport default baseZipObject;\n", "import assignValue from './_assignValue.js';\nimport baseZipObject from './_baseZipObject.js';\n\n/**\n * This method is like `_.fromPairs` except that it accepts two arrays,\n * one of property identifiers and one of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 0.4.0\n * @category Array\n * @param {Array} [props=[]] The property identifiers.\n * @param {Array} [values=[]] The property values.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.zipObject(['a', 'b'], [1, 2]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction zipObject(props, values) {\n  return baseZipObject(props || [], values || [], assignValue);\n}\n\nexport default zipObject;\n", "import baseSet from './_baseSet.js';\nimport baseZipObject from './_baseZipObject.js';\n\n/**\n * This method is like `_.zipObject` except that it supports property paths.\n *\n * @static\n * @memberOf _\n * @since 4.1.0\n * @category Array\n * @param {Array} [props=[]] The property identifiers.\n * @param {Array} [values=[]] The property values.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n */\nfunction zipObjectDeep(props, values) {\n  return baseZipObject(props || [], values || [], baseSet);\n}\n\nexport default zipObjectDeep;\n", "import baseRest from './_baseRest.js';\nimport unzipWith from './unzipWith.js';\n\n/**\n * This method is like `_.zip` except that it accepts `iteratee` to specify\n * how grouped values should be combined. The iteratee is invoked with the\n * elements of each group: (...group).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Array\n * @param {...Array} [arrays] The arrays to process.\n * @param {Function} [iteratee=_.identity] The function to combine\n *  grouped values.\n * @returns {Array} Returns the new array of grouped elements.\n * @example\n *\n * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n *   return a + b + c;\n * });\n * // => [111, 222]\n */\nvar zipWith = baseRest(function(arrays) {\n  var length = arrays.length,\n      iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n  iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n  return unzipWith(arrays, iteratee);\n});\n\nexport default zipWith;\n", "import chunk from './chunk.js';\nimport compact from './compact.js';\nimport concat from './concat.js';\nimport difference from './difference.js';\nimport differenceBy from './differenceBy.js';\nimport differenceWith from './differenceWith.js';\nimport drop from './drop.js';\nimport dropRight from './dropRight.js';\nimport dropRightWhile from './dropRightWhile.js';\nimport dropWhile from './dropWhile.js';\nimport fill from './fill.js';\nimport findIndex from './findIndex.js';\nimport findLastIndex from './findLastIndex.js';\nimport first from './first.js';\nimport flatten from './flatten.js';\nimport flattenDeep from './flattenDeep.js';\nimport flattenDepth from './flattenDepth.js';\nimport fromPairs from './fromPairs.js';\nimport head from './head.js';\nimport indexOf from './indexOf.js';\nimport initial from './initial.js';\nimport intersection from './intersection.js';\nimport intersectionBy from './intersectionBy.js';\nimport intersectionWith from './intersectionWith.js';\nimport join from './join.js';\nimport last from './last.js';\nimport lastIndexOf from './lastIndexOf.js';\nimport nth from './nth.js';\nimport pull from './pull.js';\nimport pullAll from './pullAll.js';\nimport pullAllBy from './pullAllBy.js';\nimport pullAllWith from './pullAllWith.js';\nimport pullAt from './pullAt.js';\nimport remove from './remove.js';\nimport reverse from './reverse.js';\nimport slice from './slice.js';\nimport sortedIndex from './sortedIndex.js';\nimport sortedIndexBy from './sortedIndexBy.js';\nimport sortedIndexOf from './sortedIndexOf.js';\nimport sortedLastIndex from './sortedLastIndex.js';\nimport sortedLastIndexBy from './sortedLastIndexBy.js';\nimport sortedLastIndexOf from './sortedLastIndexOf.js';\nimport sortedUniq from './sortedUniq.js';\nimport sortedUniqBy from './sortedUniqBy.js';\nimport tail from './tail.js';\nimport take from './take.js';\nimport takeRight from './takeRight.js';\nimport takeRightWhile from './takeRightWhile.js';\nimport takeWhile from './takeWhile.js';\nimport union from './union.js';\nimport unionBy from './unionBy.js';\nimport unionWith from './unionWith.js';\nimport uniq from './uniq.js';\nimport uniqBy from './uniqBy.js';\nimport uniqWith from './uniqWith.js';\nimport unzip from './unzip.js';\nimport unzipWith from './unzipWith.js';\nimport without from './without.js';\nimport xor from './xor.js';\nimport xorBy from './xorBy.js';\nimport xorWith from './xorWith.js';\nimport zip from './zip.js';\nimport zipObject from './zipObject.js';\nimport zipObjectDeep from './zipObjectDeep.js';\nimport zipWith from './zipWith.js';\n\nexport default {\n  chunk, compact, concat, difference, differenceBy,\n  differenceWith, drop, dropRight, dropRightWhile, dropWhile,\n  fill, findIndex, findLastIndex, first, flatten,\n  flattenDeep, flattenDepth, fromPairs, head, indexOf,\n  initial, intersection, intersectionBy, intersectionWith, join,\n  last, lastIndexOf, nth, pull, pullAll,\n  pullAllBy, pullAllWith, pullAt, remove, reverse,\n  slice, sortedIndex, sortedIndexBy, sortedIndexOf, sortedLastIndex,\n  sortedLastIndexBy, sortedLastIndexOf, sortedUniq, sortedUniqBy, tail,\n  take, takeRight, takeRightWhile, takeWhile, union,\n  unionBy, unionWith, uniq, uniqBy, uniqWith,\n  unzip, unzipWith, without, xor, xorBy,\n  xorWith, zip, zipObject, zipObjectDeep, zipWith\n};\n", "import countBy from './countBy.js';\nimport each from './each.js';\nimport eachRight from './eachRight.js';\nimport every from './every.js';\nimport filter from './filter.js';\nimport find from './find.js';\nimport findLast from './findLast.js';\nimport flatMap from './flatMap.js';\nimport flatMapDeep from './flatMapDeep.js';\nimport flatMapDepth from './flatMapDepth.js';\nimport forEach from './forEach.js';\nimport forEachRight from './forEachRight.js';\nimport groupBy from './groupBy.js';\nimport includes from './includes.js';\nimport invokeMap from './invokeMap.js';\nimport keyBy from './keyBy.js';\nimport map from './map.js';\nimport orderBy from './orderBy.js';\nimport partition from './partition.js';\nimport reduce from './reduce.js';\nimport reduceRight from './reduceRight.js';\nimport reject from './reject.js';\nimport sample from './sample.js';\nimport sampleSize from './sampleSize.js';\nimport shuffle from './shuffle.js';\nimport size from './size.js';\nimport some from './some.js';\nimport sortBy from './sortBy.js';\n\nexport default {\n  countBy, each, eachRight, every, filter,\n  find, findLast, flatMap, flatMapDeep, flatMapDepth,\n  forEach, forEachRight, groupBy, includes, invokeMap,\n  keyBy, map, orderBy, partition, reduce,\n  reduceRight, reject, sample, sampleSize, shuffle,\n  size, some, sortBy\n};\n", "import now from './now.js';\n\nexport default {\n  now\n};\n", "import after from './after.js';\nimport ary from './ary.js';\nimport before from './before.js';\nimport bind from './bind.js';\nimport bindKey from './bindKey.js';\nimport curry from './curry.js';\nimport curryRight from './curryRight.js';\nimport debounce from './debounce.js';\nimport defer from './defer.js';\nimport delay from './delay.js';\nimport flip from './flip.js';\nimport memoize from './memoize.js';\nimport negate from './negate.js';\nimport once from './once.js';\nimport overArgs from './overArgs.js';\nimport partial from './partial.js';\nimport partialRight from './partialRight.js';\nimport rearg from './rearg.js';\nimport rest from './rest.js';\nimport spread from './spread.js';\nimport throttle from './throttle.js';\nimport unary from './unary.js';\nimport wrap from './wrap.js';\n\nexport default {\n  after, ary, before, bind, bindKey,\n  curry, curryRight, debounce, defer, delay,\n  flip, memoize, negate, once, overArgs,\n  partial, partialRight, rearg, rest, spread,\n  throttle, unary, wrap\n};\n", "import castArray from './castArray.js';\nimport clone from './clone.js';\nimport cloneDeep from './cloneDeep.js';\nimport cloneDeepWith from './cloneDeepWith.js';\nimport cloneWith from './cloneWith.js';\nimport conformsTo from './conformsTo.js';\nimport eq from './eq.js';\nimport gt from './gt.js';\nimport gte from './gte.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport isArrayLike from './isArrayLike.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBoolean from './isBoolean.js';\nimport isBuffer from './isBuffer.js';\nimport isDate from './isDate.js';\nimport isElement from './isElement.js';\nimport isEmpty from './isEmpty.js';\nimport isEqual from './isEqual.js';\nimport isEqualWith from './isEqualWith.js';\nimport isError from './isError.js';\nimport isFinite from './isFinite.js';\nimport isFunction from './isFunction.js';\nimport isInteger from './isInteger.js';\nimport isLength from './isLength.js';\nimport isMap from './isMap.js';\nimport isMatch from './isMatch.js';\nimport isMatchWith from './isMatchWith.js';\nimport isNaN from './isNaN.js';\nimport isNative from './isNative.js';\nimport isNil from './isNil.js';\nimport isNull from './isNull.js';\nimport isNumber from './isNumber.js';\nimport isObject from './isObject.js';\nimport isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\nimport isRegExp from './isRegExp.js';\nimport isSafeInteger from './isSafeInteger.js';\nimport isSet from './isSet.js';\nimport isString from './isString.js';\nimport isSymbol from './isSymbol.js';\nimport isTypedArray from './isTypedArray.js';\nimport isUndefined from './isUndefined.js';\nimport isWeakMap from './isWeakMap.js';\nimport isWeakSet from './isWeakSet.js';\nimport lt from './lt.js';\nimport lte from './lte.js';\nimport toArray from './toArray.js';\nimport toFinite from './toFinite.js';\nimport toInteger from './toInteger.js';\nimport toLength from './toLength.js';\nimport toNumber from './toNumber.js';\nimport toPlainObject from './toPlainObject.js';\nimport toSafeInteger from './toSafeInteger.js';\nimport toString from './toString.js';\n\nexport default {\n  castArray, clone, cloneDeep, cloneDeepWith, cloneWith,\n  conformsTo, eq, gt, gte, isArguments,\n  isArray, isArrayBuffer, isArrayLike, isArrayLikeObject, isBoolean,\n  isBuffer, isDate, isElement, isEmpty, isEqual,\n  isEqualWith, isError, isFinite, isFunction, isInteger,\n  isLength, isMap, isMatch, isMatchWith, isNaN,\n  isNative, isNil, isNull, isNumber, isObject,\n  isObjectLike, isPlainObject, isRegExp, isSafeInteger, isSet,\n  isString, isSymbol, isTypedArray, isUndefined, isWeakMap,\n  isWeakSet, lt, lte, toArray, toFinite,\n  toInteger, toLength, toNumber, toPlainObject, toSafeInteger,\n  toString\n};\n", "import add from './add.js';\nimport ceil from './ceil.js';\nimport divide from './divide.js';\nimport floor from './floor.js';\nimport max from './max.js';\nimport maxBy from './maxBy.js';\nimport mean from './mean.js';\nimport meanBy from './meanBy.js';\nimport min from './min.js';\nimport minBy from './minBy.js';\nimport multiply from './multiply.js';\nimport round from './round.js';\nimport subtract from './subtract.js';\nimport sum from './sum.js';\nimport sumBy from './sumBy.js';\n\nexport default {\n  add, ceil, divide, floor, max,\n  maxBy, mean, meanBy, min, minBy,\n  multiply, round, subtract, sum, sumBy\n};\n", "import clamp from './clamp.js';\nimport inRange from './inRange.js';\nimport random from './random.js';\n\nexport default {\n  clamp, inRange, random\n};\n", "import assign from './assign.js';\nimport assignIn from './assignIn.js';\nimport assignInWith from './assignInWith.js';\nimport assignWith from './assignWith.js';\nimport at from './at.js';\nimport create from './create.js';\nimport defaults from './defaults.js';\nimport defaultsDeep from './defaultsDeep.js';\nimport entries from './entries.js';\nimport entriesIn from './entriesIn.js';\nimport extend from './extend.js';\nimport extendWith from './extendWith.js';\nimport findKey from './findKey.js';\nimport findLastKey from './findLastKey.js';\nimport forIn from './forIn.js';\nimport forInRight from './forInRight.js';\nimport forOwn from './forOwn.js';\nimport forOwnRight from './forOwnRight.js';\nimport functions from './functions.js';\nimport functionsIn from './functionsIn.js';\nimport get from './get.js';\nimport has from './has.js';\nimport hasIn from './hasIn.js';\nimport invert from './invert.js';\nimport invertBy from './invertBy.js';\nimport invoke from './invoke.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\nimport mapKeys from './mapKeys.js';\nimport mapValues from './mapValues.js';\nimport merge from './merge.js';\nimport mergeWith from './mergeWith.js';\nimport omit from './omit.js';\nimport omitBy from './omitBy.js';\nimport pick from './pick.js';\nimport pickBy from './pickBy.js';\nimport result from './result.js';\nimport set from './set.js';\nimport setWith from './setWith.js';\nimport toPairs from './toPairs.js';\nimport toPairsIn from './toPairsIn.js';\nimport transform from './transform.js';\nimport unset from './unset.js';\nimport update from './update.js';\nimport updateWith from './updateWith.js';\nimport values from './values.js';\nimport valuesIn from './valuesIn.js';\n\nexport default {\n  assign, assignIn, assignInWith, assignWith, at,\n  create, defaults, defaultsDeep, entries, entriesIn,\n  extend, extendWith, findKey, findLastKey, forIn,\n  forInRight, forOwn, forOwnRight, functions, functionsIn,\n  get, has, hasIn, invert, invertBy,\n  invoke, keys, keysIn, mapKeys, mapValues,\n  merge, mergeWith, omit, omitBy, pick,\n  pickBy, result, set, setWith, toPairs,\n  toPairsIn, transform, unset, update, updateWith,\n  values, valuesIn\n};\n", "import at from './wrapperAt.js';\nimport chain from './chain.js';\nimport commit from './commit.js';\nimport lodash from './wrapperLodash.js';\nimport next from './next.js';\nimport plant from './plant.js';\nimport reverse from './wrapperReverse.js';\nimport tap from './tap.js';\nimport thru from './thru.js';\nimport toIterator from './toIterator.js';\nimport toJSON from './toJSON.js';\nimport value from './wrapperValue.js';\nimport valueOf from './valueOf.js';\nimport wrapperChain from './wrapperChain.js';\n\nexport default {\n  at, chain, commit, lodash, next,\n  plant, reverse, tap, thru, toIterator,\n  toJSON, value, valueOf, wrapperChain\n};\n", "import camelCase from './camelCase.js';\nimport capitalize from './capitalize.js';\nimport deburr from './deburr.js';\nimport endsWith from './endsWith.js';\nimport escape from './escape.js';\nimport escapeRegExp from './escapeRegExp.js';\nimport kebabCase from './kebabCase.js';\nimport lowerCase from './lowerCase.js';\nimport lowerFirst from './lowerFirst.js';\nimport pad from './pad.js';\nimport padEnd from './padEnd.js';\nimport padStart from './padStart.js';\nimport parseInt from './parseInt.js';\nimport repeat from './repeat.js';\nimport replace from './replace.js';\nimport snakeCase from './snakeCase.js';\nimport split from './split.js';\nimport startCase from './startCase.js';\nimport startsWith from './startsWith.js';\nimport template from './template.js';\nimport templateSettings from './templateSettings.js';\nimport toLower from './toLower.js';\nimport toUpper from './toUpper.js';\nimport trim from './trim.js';\nimport trimEnd from './trimEnd.js';\nimport trimStart from './trimStart.js';\nimport truncate from './truncate.js';\nimport unescape from './unescape.js';\nimport upperCase from './upperCase.js';\nimport upperFirst from './upperFirst.js';\nimport words from './words.js';\n\nexport default {\n  camelCase, capitalize, deburr, endsWith, escape,\n  escapeRegExp, kebabCase, lowerCase, lowerFirst, pad,\n  padEnd, padStart, parseInt, repeat, replace,\n  snakeCase, split, startCase, startsWith, template,\n  templateSettings, toLower, toUpper, trim, trimEnd,\n  trimStart, truncate, unescape, upperCase, upperFirst,\n  words\n};\n", "import attempt from './attempt.js';\nimport bindAll from './bindAll.js';\nimport cond from './cond.js';\nimport conforms from './conforms.js';\nimport constant from './constant.js';\nimport defaultTo from './defaultTo.js';\nimport flow from './flow.js';\nimport flowRight from './flowRight.js';\nimport identity from './identity.js';\nimport iteratee from './iteratee.js';\nimport matches from './matches.js';\nimport matchesProperty from './matchesProperty.js';\nimport method from './method.js';\nimport methodOf from './methodOf.js';\nimport mixin from './mixin.js';\nimport noop from './noop.js';\nimport nthArg from './nthArg.js';\nimport over from './over.js';\nimport overEvery from './overEvery.js';\nimport overSome from './overSome.js';\nimport property from './property.js';\nimport propertyOf from './propertyOf.js';\nimport range from './range.js';\nimport rangeRight from './rangeRight.js';\nimport stubArray from './stubArray.js';\nimport stubFalse from './stubFalse.js';\nimport stubObject from './stubObject.js';\nimport stubString from './stubString.js';\nimport stubTrue from './stubTrue.js';\nimport times from './times.js';\nimport toPath from './toPath.js';\nimport uniqueId from './uniqueId.js';\n\nexport default {\n  attempt, bindAll, cond, conforms, constant,\n  defaultTo, flow, flowRight, identity, iteratee,\n  matches, matchesProperty, method, methodOf, mixin,\n  noop, nthArg, over, overEvery, overSome,\n  property, propertyOf, range, rangeRight, stubArray,\n  stubFalse, stubObject, stubString, stubTrue, times,\n  toPath, uniqueId\n};\n", "import LazyWrapper from './_LazyWrapper.js';\nimport copyArray from './_copyArray.js';\n\n/**\n * Creates a clone of the lazy wrapper object.\n *\n * @private\n * @name clone\n * @memberOf LazyWrapper\n * @returns {Object} Returns the cloned `LazyWrapper` object.\n */\nfunction lazyClone() {\n  var result = new LazyWrapper(this.__wrapped__);\n  result.__actions__ = copyArray(this.__actions__);\n  result.__dir__ = this.__dir__;\n  result.__filtered__ = this.__filtered__;\n  result.__iteratees__ = copyArray(this.__iteratees__);\n  result.__takeCount__ = this.__takeCount__;\n  result.__views__ = copyArray(this.__views__);\n  return result;\n}\n\nexport default lazyClone;\n", "import LazyWrapper from './_LazyWrapper.js';\n\n/**\n * Reverses the direction of lazy iteration.\n *\n * @private\n * @name reverse\n * @memberOf LazyWrapper\n * @returns {Object} Returns the new reversed `LazyWrapper` object.\n */\nfunction lazyReverse() {\n  if (this.__filtered__) {\n    var result = new LazyWrapper(this);\n    result.__dir__ = -1;\n    result.__filtered__ = true;\n  } else {\n    result = this.clone();\n    result.__dir__ *= -1;\n  }\n  return result;\n}\n\nexport default lazyReverse;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the view, applying any `transforms` to the `start` and `end` positions.\n *\n * @private\n * @param {number} start The start of the view.\n * @param {number} end The end of the view.\n * @param {Array} transforms The transformations to apply to the view.\n * @returns {Object} Returns an object containing the `start` and `end`\n *  positions of the view.\n */\nfunction getView(start, end, transforms) {\n  var index = -1,\n      length = transforms.length;\n\n  while (++index < length) {\n    var data = transforms[index],\n        size = data.size;\n\n    switch (data.type) {\n      case 'drop':      start += size; break;\n      case 'dropRight': end -= size; break;\n      case 'take':      end = nativeMin(end, start + size); break;\n      case 'takeRight': start = nativeMax(start, end - size); break;\n    }\n  }\n  return { 'start': start, 'end': end };\n}\n\nexport default getView;\n", "import baseWrapperValue from './_baseWrapperValue.js';\nimport getView from './_getView.js';\nimport isArray from './isArray.js';\n\n/** Used to indicate the type of lazy iteratees. */\nvar LAZY_FILTER_FLAG = 1,\n    LAZY_MAP_FLAG = 2;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Extracts the unwrapped value from its lazy wrapper.\n *\n * @private\n * @name value\n * @memberOf LazyWrapper\n * @returns {*} Returns the unwrapped value.\n */\nfunction lazyValue() {\n  var array = this.__wrapped__.value(),\n      dir = this.__dir__,\n      isArr = isArray(array),\n      isRight = dir < 0,\n      arrLength = isArr ? array.length : 0,\n      view = getView(0, arrLength, this.__views__),\n      start = view.start,\n      end = view.end,\n      length = end - start,\n      index = isRight ? end : (start - 1),\n      iteratees = this.__iteratees__,\n      iterLength = iteratees.length,\n      resIndex = 0,\n      takeCount = nativeMin(length, this.__takeCount__);\n\n  if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n    return baseWrapperValue(array, this.__actions__);\n  }\n  var result = [];\n\n  outer:\n  while (length-- && resIndex < takeCount) {\n    index += dir;\n\n    var iterIndex = -1,\n        value = array[index];\n\n    while (++iterIndex < iterLength) {\n      var data = iteratees[iterIndex],\n          iteratee = data.iteratee,\n          type = data.type,\n          computed = iteratee(value);\n\n      if (type == LAZY_MAP_FLAG) {\n        value = computed;\n      } else if (!computed) {\n        if (type == LAZY_FILTER_FLAG) {\n          continue outer;\n        } else {\n          break outer;\n        }\n      }\n    }\n    result[resIndex++] = value;\n  }\n  return result;\n}\n\nexport default lazyValue;\n", "/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"es\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nimport array from './array.js';\nimport collection from './collection.js';\nimport date from './date.js';\nimport func from './function.js';\nimport lang from './lang.js';\nimport math from './math.js';\nimport number from './number.js';\nimport object from './object.js';\nimport seq from './seq.js';\nimport string from './string.js';\nimport util from './util.js';\nimport LazyWrapper from './_LazyWrapper.js';\nimport LodashWrapper from './_LodashWrapper.js';\nimport Symbol from './_Symbol.js';\nimport arrayEach from './_arrayEach.js';\nimport arrayPush from './_arrayPush.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseFunctions from './_baseFunctions.js';\nimport baseInvoke from './_baseInvoke.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport createHybrid from './_createHybrid.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport isObject from './isObject.js';\nimport keys from './keys.js';\nimport last from './last.js';\nimport lazyClone from './_lazyClone.js';\nimport lazyReverse from './_lazyReverse.js';\nimport lazyValue from './_lazyValue.js';\nimport _mixin from './mixin.js';\nimport negate from './negate.js';\nimport realNames from './_realNames.js';\nimport thru from './thru.js';\nimport toInteger from './toInteger.js';\nimport lodash from './wrapperLodash.js';\n\n/** Used as the semantic version number. */\nvar VERSION = '4.17.21';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_KEY_FLAG = 2;\n\n/** Used to indicate the type of lazy iteratees. */\nvar LAZY_FILTER_FLAG = 1,\n    LAZY_WHILE_FLAG = 3;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar symIterator = Symbol ? Symbol.iterator : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n// wrap `_.mixin` so it works when provided only one argument\nvar mixin = (function(func) {\n  return function(object, source, options) {\n    if (options == null) {\n      var isObj = isObject(source),\n          props = isObj && keys(source),\n          methodNames = props && props.length && baseFunctions(source, props);\n\n      if (!(methodNames ? methodNames.length : isObj)) {\n        options = source;\n        source = object;\n        object = this;\n      }\n    }\n    return func(object, source, options);\n  };\n}(_mixin));\n\n// Add methods that return wrapped values in chain sequences.\nlodash.after = func.after;\nlodash.ary = func.ary;\nlodash.assign = object.assign;\nlodash.assignIn = object.assignIn;\nlodash.assignInWith = object.assignInWith;\nlodash.assignWith = object.assignWith;\nlodash.at = object.at;\nlodash.before = func.before;\nlodash.bind = func.bind;\nlodash.bindAll = util.bindAll;\nlodash.bindKey = func.bindKey;\nlodash.castArray = lang.castArray;\nlodash.chain = seq.chain;\nlodash.chunk = array.chunk;\nlodash.compact = array.compact;\nlodash.concat = array.concat;\nlodash.cond = util.cond;\nlodash.conforms = util.conforms;\nlodash.constant = util.constant;\nlodash.countBy = collection.countBy;\nlodash.create = object.create;\nlodash.curry = func.curry;\nlodash.curryRight = func.curryRight;\nlodash.debounce = func.debounce;\nlodash.defaults = object.defaults;\nlodash.defaultsDeep = object.defaultsDeep;\nlodash.defer = func.defer;\nlodash.delay = func.delay;\nlodash.difference = array.difference;\nlodash.differenceBy = array.differenceBy;\nlodash.differenceWith = array.differenceWith;\nlodash.drop = array.drop;\nlodash.dropRight = array.dropRight;\nlodash.dropRightWhile = array.dropRightWhile;\nlodash.dropWhile = array.dropWhile;\nlodash.fill = array.fill;\nlodash.filter = collection.filter;\nlodash.flatMap = collection.flatMap;\nlodash.flatMapDeep = collection.flatMapDeep;\nlodash.flatMapDepth = collection.flatMapDepth;\nlodash.flatten = array.flatten;\nlodash.flattenDeep = array.flattenDeep;\nlodash.flattenDepth = array.flattenDepth;\nlodash.flip = func.flip;\nlodash.flow = util.flow;\nlodash.flowRight = util.flowRight;\nlodash.fromPairs = array.fromPairs;\nlodash.functions = object.functions;\nlodash.functionsIn = object.functionsIn;\nlodash.groupBy = collection.groupBy;\nlodash.initial = array.initial;\nlodash.intersection = array.intersection;\nlodash.intersectionBy = array.intersectionBy;\nlodash.intersectionWith = array.intersectionWith;\nlodash.invert = object.invert;\nlodash.invertBy = object.invertBy;\nlodash.invokeMap = collection.invokeMap;\nlodash.iteratee = util.iteratee;\nlodash.keyBy = collection.keyBy;\nlodash.keys = keys;\nlodash.keysIn = object.keysIn;\nlodash.map = collection.map;\nlodash.mapKeys = object.mapKeys;\nlodash.mapValues = object.mapValues;\nlodash.matches = util.matches;\nlodash.matchesProperty = util.matchesProperty;\nlodash.memoize = func.memoize;\nlodash.merge = object.merge;\nlodash.mergeWith = object.mergeWith;\nlodash.method = util.method;\nlodash.methodOf = util.methodOf;\nlodash.mixin = mixin;\nlodash.negate = negate;\nlodash.nthArg = util.nthArg;\nlodash.omit = object.omit;\nlodash.omitBy = object.omitBy;\nlodash.once = func.once;\nlodash.orderBy = collection.orderBy;\nlodash.over = util.over;\nlodash.overArgs = func.overArgs;\nlodash.overEvery = util.overEvery;\nlodash.overSome = util.overSome;\nlodash.partial = func.partial;\nlodash.partialRight = func.partialRight;\nlodash.partition = collection.partition;\nlodash.pick = object.pick;\nlodash.pickBy = object.pickBy;\nlodash.property = util.property;\nlodash.propertyOf = util.propertyOf;\nlodash.pull = array.pull;\nlodash.pullAll = array.pullAll;\nlodash.pullAllBy = array.pullAllBy;\nlodash.pullAllWith = array.pullAllWith;\nlodash.pullAt = array.pullAt;\nlodash.range = util.range;\nlodash.rangeRight = util.rangeRight;\nlodash.rearg = func.rearg;\nlodash.reject = collection.reject;\nlodash.remove = array.remove;\nlodash.rest = func.rest;\nlodash.reverse = array.reverse;\nlodash.sampleSize = collection.sampleSize;\nlodash.set = object.set;\nlodash.setWith = object.setWith;\nlodash.shuffle = collection.shuffle;\nlodash.slice = array.slice;\nlodash.sortBy = collection.sortBy;\nlodash.sortedUniq = array.sortedUniq;\nlodash.sortedUniqBy = array.sortedUniqBy;\nlodash.split = string.split;\nlodash.spread = func.spread;\nlodash.tail = array.tail;\nlodash.take = array.take;\nlodash.takeRight = array.takeRight;\nlodash.takeRightWhile = array.takeRightWhile;\nlodash.takeWhile = array.takeWhile;\nlodash.tap = seq.tap;\nlodash.throttle = func.throttle;\nlodash.thru = thru;\nlodash.toArray = lang.toArray;\nlodash.toPairs = object.toPairs;\nlodash.toPairsIn = object.toPairsIn;\nlodash.toPath = util.toPath;\nlodash.toPlainObject = lang.toPlainObject;\nlodash.transform = object.transform;\nlodash.unary = func.unary;\nlodash.union = array.union;\nlodash.unionBy = array.unionBy;\nlodash.unionWith = array.unionWith;\nlodash.uniq = array.uniq;\nlodash.uniqBy = array.uniqBy;\nlodash.uniqWith = array.uniqWith;\nlodash.unset = object.unset;\nlodash.unzip = array.unzip;\nlodash.unzipWith = array.unzipWith;\nlodash.update = object.update;\nlodash.updateWith = object.updateWith;\nlodash.values = object.values;\nlodash.valuesIn = object.valuesIn;\nlodash.without = array.without;\nlodash.words = string.words;\nlodash.wrap = func.wrap;\nlodash.xor = array.xor;\nlodash.xorBy = array.xorBy;\nlodash.xorWith = array.xorWith;\nlodash.zip = array.zip;\nlodash.zipObject = array.zipObject;\nlodash.zipObjectDeep = array.zipObjectDeep;\nlodash.zipWith = array.zipWith;\n\n// Add aliases.\nlodash.entries = object.toPairs;\nlodash.entriesIn = object.toPairsIn;\nlodash.extend = object.assignIn;\nlodash.extendWith = object.assignInWith;\n\n// Add methods to `lodash.prototype`.\nmixin(lodash, lodash);\n\n// Add methods that return unwrapped values in chain sequences.\nlodash.add = math.add;\nlodash.attempt = util.attempt;\nlodash.camelCase = string.camelCase;\nlodash.capitalize = string.capitalize;\nlodash.ceil = math.ceil;\nlodash.clamp = number.clamp;\nlodash.clone = lang.clone;\nlodash.cloneDeep = lang.cloneDeep;\nlodash.cloneDeepWith = lang.cloneDeepWith;\nlodash.cloneWith = lang.cloneWith;\nlodash.conformsTo = lang.conformsTo;\nlodash.deburr = string.deburr;\nlodash.defaultTo = util.defaultTo;\nlodash.divide = math.divide;\nlodash.endsWith = string.endsWith;\nlodash.eq = lang.eq;\nlodash.escape = string.escape;\nlodash.escapeRegExp = string.escapeRegExp;\nlodash.every = collection.every;\nlodash.find = collection.find;\nlodash.findIndex = array.findIndex;\nlodash.findKey = object.findKey;\nlodash.findLast = collection.findLast;\nlodash.findLastIndex = array.findLastIndex;\nlodash.findLastKey = object.findLastKey;\nlodash.floor = math.floor;\nlodash.forEach = collection.forEach;\nlodash.forEachRight = collection.forEachRight;\nlodash.forIn = object.forIn;\nlodash.forInRight = object.forInRight;\nlodash.forOwn = object.forOwn;\nlodash.forOwnRight = object.forOwnRight;\nlodash.get = object.get;\nlodash.gt = lang.gt;\nlodash.gte = lang.gte;\nlodash.has = object.has;\nlodash.hasIn = object.hasIn;\nlodash.head = array.head;\nlodash.identity = identity;\nlodash.includes = collection.includes;\nlodash.indexOf = array.indexOf;\nlodash.inRange = number.inRange;\nlodash.invoke = object.invoke;\nlodash.isArguments = lang.isArguments;\nlodash.isArray = isArray;\nlodash.isArrayBuffer = lang.isArrayBuffer;\nlodash.isArrayLike = lang.isArrayLike;\nlodash.isArrayLikeObject = lang.isArrayLikeObject;\nlodash.isBoolean = lang.isBoolean;\nlodash.isBuffer = lang.isBuffer;\nlodash.isDate = lang.isDate;\nlodash.isElement = lang.isElement;\nlodash.isEmpty = lang.isEmpty;\nlodash.isEqual = lang.isEqual;\nlodash.isEqualWith = lang.isEqualWith;\nlodash.isError = lang.isError;\nlodash.isFinite = lang.isFinite;\nlodash.isFunction = lang.isFunction;\nlodash.isInteger = lang.isInteger;\nlodash.isLength = lang.isLength;\nlodash.isMap = lang.isMap;\nlodash.isMatch = lang.isMatch;\nlodash.isMatchWith = lang.isMatchWith;\nlodash.isNaN = lang.isNaN;\nlodash.isNative = lang.isNative;\nlodash.isNil = lang.isNil;\nlodash.isNull = lang.isNull;\nlodash.isNumber = lang.isNumber;\nlodash.isObject = isObject;\nlodash.isObjectLike = lang.isObjectLike;\nlodash.isPlainObject = lang.isPlainObject;\nlodash.isRegExp = lang.isRegExp;\nlodash.isSafeInteger = lang.isSafeInteger;\nlodash.isSet = lang.isSet;\nlodash.isString = lang.isString;\nlodash.isSymbol = lang.isSymbol;\nlodash.isTypedArray = lang.isTypedArray;\nlodash.isUndefined = lang.isUndefined;\nlodash.isWeakMap = lang.isWeakMap;\nlodash.isWeakSet = lang.isWeakSet;\nlodash.join = array.join;\nlodash.kebabCase = string.kebabCase;\nlodash.last = last;\nlodash.lastIndexOf = array.lastIndexOf;\nlodash.lowerCase = string.lowerCase;\nlodash.lowerFirst = string.lowerFirst;\nlodash.lt = lang.lt;\nlodash.lte = lang.lte;\nlodash.max = math.max;\nlodash.maxBy = math.maxBy;\nlodash.mean = math.mean;\nlodash.meanBy = math.meanBy;\nlodash.min = math.min;\nlodash.minBy = math.minBy;\nlodash.stubArray = util.stubArray;\nlodash.stubFalse = util.stubFalse;\nlodash.stubObject = util.stubObject;\nlodash.stubString = util.stubString;\nlodash.stubTrue = util.stubTrue;\nlodash.multiply = math.multiply;\nlodash.nth = array.nth;\nlodash.noop = util.noop;\nlodash.now = date.now;\nlodash.pad = string.pad;\nlodash.padEnd = string.padEnd;\nlodash.padStart = string.padStart;\nlodash.parseInt = string.parseInt;\nlodash.random = number.random;\nlodash.reduce = collection.reduce;\nlodash.reduceRight = collection.reduceRight;\nlodash.repeat = string.repeat;\nlodash.replace = string.replace;\nlodash.result = object.result;\nlodash.round = math.round;\nlodash.sample = collection.sample;\nlodash.size = collection.size;\nlodash.snakeCase = string.snakeCase;\nlodash.some = collection.some;\nlodash.sortedIndex = array.sortedIndex;\nlodash.sortedIndexBy = array.sortedIndexBy;\nlodash.sortedIndexOf = array.sortedIndexOf;\nlodash.sortedLastIndex = array.sortedLastIndex;\nlodash.sortedLastIndexBy = array.sortedLastIndexBy;\nlodash.sortedLastIndexOf = array.sortedLastIndexOf;\nlodash.startCase = string.startCase;\nlodash.startsWith = string.startsWith;\nlodash.subtract = math.subtract;\nlodash.sum = math.sum;\nlodash.sumBy = math.sumBy;\nlodash.template = string.template;\nlodash.times = util.times;\nlodash.toFinite = lang.toFinite;\nlodash.toInteger = toInteger;\nlodash.toLength = lang.toLength;\nlodash.toLower = string.toLower;\nlodash.toNumber = lang.toNumber;\nlodash.toSafeInteger = lang.toSafeInteger;\nlodash.toString = lang.toString;\nlodash.toUpper = string.toUpper;\nlodash.trim = string.trim;\nlodash.trimEnd = string.trimEnd;\nlodash.trimStart = string.trimStart;\nlodash.truncate = string.truncate;\nlodash.unescape = string.unescape;\nlodash.uniqueId = util.uniqueId;\nlodash.upperCase = string.upperCase;\nlodash.upperFirst = string.upperFirst;\n\n// Add aliases.\nlodash.each = collection.forEach;\nlodash.eachRight = collection.forEachRight;\nlodash.first = array.head;\n\nmixin(lodash, (function() {\n  var source = {};\n  baseForOwn(lodash, function(func, methodName) {\n    if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n      source[methodName] = func;\n    }\n  });\n  return source;\n}()), { 'chain': false });\n\n/**\n * The semantic version number.\n *\n * @static\n * @memberOf _\n * @type {string}\n */\nlodash.VERSION = VERSION;\n(lodash.templateSettings = string.templateSettings).imports._ = lodash;\n\n// Assign default placeholders.\narrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n  lodash[methodName].placeholder = lodash;\n});\n\n// Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\narrayEach(['drop', 'take'], function(methodName, index) {\n  LazyWrapper.prototype[methodName] = function(n) {\n    n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n    var result = (this.__filtered__ && !index)\n      ? new LazyWrapper(this)\n      : this.clone();\n\n    if (result.__filtered__) {\n      result.__takeCount__ = nativeMin(n, result.__takeCount__);\n    } else {\n      result.__views__.push({\n        'size': nativeMin(n, MAX_ARRAY_LENGTH),\n        'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n      });\n    }\n    return result;\n  };\n\n  LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n    return this.reverse()[methodName](n).reverse();\n  };\n});\n\n// Add `LazyWrapper` methods that accept an `iteratee` value.\narrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n  var type = index + 1,\n      isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n  LazyWrapper.prototype[methodName] = function(iteratee) {\n    var result = this.clone();\n    result.__iteratees__.push({\n      'iteratee': baseIteratee(iteratee, 3),\n      'type': type\n    });\n    result.__filtered__ = result.__filtered__ || isFilter;\n    return result;\n  };\n});\n\n// Add `LazyWrapper` methods for `_.head` and `_.last`.\narrayEach(['head', 'last'], function(methodName, index) {\n  var takeName = 'take' + (index ? 'Right' : '');\n\n  LazyWrapper.prototype[methodName] = function() {\n    return this[takeName](1).value()[0];\n  };\n});\n\n// Add `LazyWrapper` methods for `_.initial` and `_.tail`.\narrayEach(['initial', 'tail'], function(methodName, index) {\n  var dropName = 'drop' + (index ? '' : 'Right');\n\n  LazyWrapper.prototype[methodName] = function() {\n    return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n  };\n});\n\nLazyWrapper.prototype.compact = function() {\n  return this.filter(identity);\n};\n\nLazyWrapper.prototype.find = function(predicate) {\n  return this.filter(predicate).head();\n};\n\nLazyWrapper.prototype.findLast = function(predicate) {\n  return this.reverse().find(predicate);\n};\n\nLazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n  if (typeof path == 'function') {\n    return new LazyWrapper(this);\n  }\n  return this.map(function(value) {\n    return baseInvoke(value, path, args);\n  });\n});\n\nLazyWrapper.prototype.reject = function(predicate) {\n  return this.filter(negate(baseIteratee(predicate)));\n};\n\nLazyWrapper.prototype.slice = function(start, end) {\n  start = toInteger(start);\n\n  var result = this;\n  if (result.__filtered__ && (start > 0 || end < 0)) {\n    return new LazyWrapper(result);\n  }\n  if (start < 0) {\n    result = result.takeRight(-start);\n  } else if (start) {\n    result = result.drop(start);\n  }\n  if (end !== undefined) {\n    end = toInteger(end);\n    result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n  }\n  return result;\n};\n\nLazyWrapper.prototype.takeRightWhile = function(predicate) {\n  return this.reverse().takeWhile(predicate).reverse();\n};\n\nLazyWrapper.prototype.toArray = function() {\n  return this.take(MAX_ARRAY_LENGTH);\n};\n\n// Add `LazyWrapper` methods to `lodash.prototype`.\nbaseForOwn(LazyWrapper.prototype, function(func, methodName) {\n  var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n      isTaker = /^(?:head|last)$/.test(methodName),\n      lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n      retUnwrapped = isTaker || /^find/.test(methodName);\n\n  if (!lodashFunc) {\n    return;\n  }\n  lodash.prototype[methodName] = function() {\n    var value = this.__wrapped__,\n        args = isTaker ? [1] : arguments,\n        isLazy = value instanceof LazyWrapper,\n        iteratee = args[0],\n        useLazy = isLazy || isArray(value);\n\n    var interceptor = function(value) {\n      var result = lodashFunc.apply(lodash, arrayPush([value], args));\n      return (isTaker && chainAll) ? result[0] : result;\n    };\n\n    if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n      // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n      isLazy = useLazy = false;\n    }\n    var chainAll = this.__chain__,\n        isHybrid = !!this.__actions__.length,\n        isUnwrapped = retUnwrapped && !chainAll,\n        onlyLazy = isLazy && !isHybrid;\n\n    if (!retUnwrapped && useLazy) {\n      value = onlyLazy ? value : new LazyWrapper(this);\n      var result = func.apply(value, args);\n      result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n      return new LodashWrapper(result, chainAll);\n    }\n    if (isUnwrapped && onlyLazy) {\n      return func.apply(this, args);\n    }\n    result = this.thru(interceptor);\n    return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n  };\n});\n\n// Add `Array` methods to `lodash.prototype`.\narrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n  var func = arrayProto[methodName],\n      chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n      retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n  lodash.prototype[methodName] = function() {\n    var args = arguments;\n    if (retUnwrapped && !this.__chain__) {\n      var value = this.value();\n      return func.apply(isArray(value) ? value : [], args);\n    }\n    return this[chainName](function(value) {\n      return func.apply(isArray(value) ? value : [], args);\n    });\n  };\n});\n\n// Map minified method names to their real names.\nbaseForOwn(LazyWrapper.prototype, function(func, methodName) {\n  var lodashFunc = lodash[methodName];\n  if (lodashFunc) {\n    var key = lodashFunc.name + '';\n    if (!hasOwnProperty.call(realNames, key)) {\n      realNames[key] = [];\n    }\n    realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n  }\n});\n\nrealNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n  'name': 'wrapper',\n  'func': undefined\n}];\n\n// Add methods to `LazyWrapper`.\nLazyWrapper.prototype.clone = lazyClone;\nLazyWrapper.prototype.reverse = lazyReverse;\nLazyWrapper.prototype.value = lazyValue;\n\n// Add chain sequence methods to the `lodash` wrapper.\nlodash.prototype.at = seq.at;\nlodash.prototype.chain = seq.wrapperChain;\nlodash.prototype.commit = seq.commit;\nlodash.prototype.next = seq.next;\nlodash.prototype.plant = seq.plant;\nlodash.prototype.reverse = seq.reverse;\nlodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = seq.value;\n\n// Add lazy aliases.\nlodash.prototype.first = lodash.prototype.head;\n\nif (symIterator) {\n  lodash.prototype[symIterator] = seq.toIterator;\n}\n\nexport default lodash;\n", "/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport type { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\nexport const finalizer = Symbol(\"Comlink.finalizer\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\ntype PendingListenersMap = Map<\n  string,\n  (value: WireValue | PromiseLike<WireValue>) => void\n>;\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nfunction isAllowedOrigin(\n  allowedOrigins: (string | RegExp)[],\n  origin: string\n): boolean {\n  for (const allowedOrigin of allowedOrigins) {\n    if (origin === allowedOrigin || allowedOrigin === \"*\") {\n      return true;\n    }\n    if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function expose(\n  obj: any,\n  ep: Endpoint = globalThis as any,\n  allowedOrigins: (string | RegExp)[] = [\"*\"]\n) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n      console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n          if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n            obj[finalizer]();\n          }\n        }\n      })\n      .catch((error) => {\n        // Send Serialization Error To Caller\n        const [wireValue, transferables] = toWireValue({\n          value: new TypeError(\"Unserializable return value\"),\n          [throwMarker]: 0,\n        });\n        ep.postMessage({ ...wireValue, id }, transferables);\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  const pendingListeners : PendingListenersMap = new Map();\n\n  ep.addEventListener(\"message\", function handleMessage(ev: Event) {\n    const { data } = ev as MessageEvent;\n    if (!data || !data.id) {\n      return;\n    }\n    const resolver = pendingListeners.get(data.id);\n    if (!resolver) {\n      return;\n    }\n\n    try {\n      resolver(data);\n    } finally {\n      pendingListeners.delete(data.id);\n    }\n  });\n\n  return createProxy<T>(ep, pendingListeners, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction releaseEndpoint(ep: Endpoint) {\n  return requestResponseMessage(ep, new Map(), {\n    type: MessageType.RELEASE,\n  }).then(() => {\n    closeEndPoint(ep);\n  });\n}\n\ninterface FinalizationRegistry<T> {\n  new (cb: (heldValue: T) => void): FinalizationRegistry<T>;\n  register(\n    weakItem: object,\n    heldValue: T,\n    unregisterToken?: object | undefined\n  ): void;\n  unregister(unregisterToken: object): void;\n}\ndeclare var FinalizationRegistry: FinalizationRegistry<Endpoint>;\n\nconst proxyCounter = new WeakMap<Endpoint, number>();\nconst proxyFinalizers =\n  \"FinalizationRegistry\" in globalThis &&\n  new FinalizationRegistry((ep: Endpoint) => {\n    const newCount = (proxyCounter.get(ep) || 0) - 1;\n    proxyCounter.set(ep, newCount);\n    if (newCount === 0) {\n      releaseEndpoint(ep);\n    }\n  });\n\nfunction registerProxy(proxy: object, ep: Endpoint) {\n  const newCount = (proxyCounter.get(ep) || 0) + 1;\n  proxyCounter.set(ep, newCount);\n  if (proxyFinalizers) {\n    proxyFinalizers.register(proxy, ep, proxy);\n  }\n}\n\nfunction unregisterProxy(proxy: object) {\n  if (proxyFinalizers) {\n    proxyFinalizers.unregister(proxy);\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  pendingListeners: PendingListenersMap,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          unregisterProxy(proxy);\n          releaseEndpoint(ep);\n          pendingListeners.clear();\n          isProxyReleased = true;\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, pendingListeners, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, pendingListeners, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously \\_()_/\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, pendingListeners, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didnt happen.\n      if (last === \"bind\") {\n        return createProxy(ep, pendingListeners, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  registerProxy(proxy, ep);\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T extends {}>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = globalThis,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  pendingListeners: PendingListenersMap,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    pendingListeners.set(id, resolve);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n});\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n", "export const supportedDistortionMeasures = [\n    'log2sigma',\n    'twoOmega',\n    'airyKavr',\n    'signDetJ',\n    'thetaa'\n];\n/**\n * Compute the distortion value of selected distortion measures from the partial derivatives at a specific point\n *\n * @param distortionMeasures - The requested distortion measures\n * @param partialDerivativeX - The partial derivative to 'x' of the transformation, evaluated at a set point\n * @param partialDerivativeY - The partial derivative to 'y' of the transformation, evaluated at a set point\n * @param referenceScale - The reference area scaling (sigma) to take into account for certain distortion measures (like 'log2sigma'), e.g. computed via a helmert transform\n * @returns A map of distortion measures and distortion values at the point\n */\nexport function computeDistortionsFromPartialDerivatives(distortionMeasures, partialDerivativeX, partialDerivativeY, referenceScale = 1) {\n    if (distortionMeasures.length === 0) {\n        return new Map();\n    }\n    if (!partialDerivativeX || !partialDerivativeY) {\n        return new Map(distortionMeasures.map((distortionMeasure) => [distortionMeasure, 0]));\n    }\n    const { E, F, a, b } = computeDistortionIntermediates(partialDerivativeX, partialDerivativeY);\n    return new Map(distortionMeasures.map((distortionMeasure) => {\n        if (supportedDistortionMeasures.indexOf(distortionMeasure) === -1) {\n            throw new Error('Distortion ' + distortionMeasure + ' not supported');\n        }\n        switch (supportedDistortionMeasures.indexOf(distortionMeasure)) {\n            case 0:\n                return [distortionMeasure, log2sigma(a, b, referenceScale)];\n            case 1:\n                return [distortionMeasure, twoOmega(a, b)];\n            case 2:\n                return [distortionMeasure, airyKavr(a, b, referenceScale)];\n            case 3:\n                return [\n                    distortionMeasure,\n                    signDetJ(partialDerivativeX, partialDerivativeY)\n                ];\n            case 4:\n                return [distortionMeasure, thetaa(partialDerivativeX, a, b, E, F)];\n            default:\n                return [distortionMeasure, 0];\n        }\n    }));\n}\nfunction computeDistortionIntermediates(partialDerivativeX, partialDerivativeY) {\n    const E = partialDerivativeX[0] ** 2 + partialDerivativeX[1] ** 2;\n    const F = partialDerivativeX[0] * partialDerivativeY[0] +\n        partialDerivativeX[1] * partialDerivativeY[1];\n    const G = partialDerivativeY[0] ** 2 + partialDerivativeY[1] ** 2;\n    const a = Math.sqrt(0.5 * (E + G + Math.sqrt((E - G) ** 2 + 4 * F ** 2)));\n    const b = Math.sqrt(0.5 * (E + G - Math.sqrt((E - G) ** 2 + 4 * F ** 2)));\n    return { E, F, G, a, b };\n}\nfunction log2sigma(a, b, referenceScale = 1) {\n    return (Math.log(a * b) - 2 * Math.log(referenceScale)) / Math.log(2);\n}\nfunction twoOmega(a, b) {\n    return 2 * Math.asin((a - b) / (a + b));\n}\nfunction airyKavr(a, b, referenceScale = 1) {\n    return (0.5 *\n        (Math.log(a / referenceScale) ** 2 + Math.log(b / referenceScale) ** 2));\n}\nfunction signDetJ(partialDerivativeX, partialDerivativeY) {\n    return Math.sign(partialDerivativeX[0] * partialDerivativeY[1] -\n        partialDerivativeX[1] * partialDerivativeY[0]);\n}\nfunction thetaa(partialDerivativeX, a, b, E, F) {\n    const thetaxp = Math.atan(partialDerivativeX[1] / partialDerivativeX[0]);\n    const alphap = Math.sign(-F) * Math.asin(Math.sqrt((1 - a ** 2 / E) / (1 - (a / b) ** 2)));\n    return thetaxp - alphap;\n}\n", "import { distance, rms } from '@allmaps/stdlib';\n/**\n * Base class for transformation.\n */\nexport class BaseTransformation {\n    sourcePoints;\n    destinationPoints;\n    destinationTransformedSourcePoints;\n    type;\n    pointCount;\n    pointCountMinimum;\n    errors;\n    rmse;\n    /**\n     * Create a transformation\n     *\n     * @param sourcePoints - The source points\n     * @param destinationPoints - The destination points\n     * @param type - The transformation type\n     * @param pointCountMinimum - The minimum number of points for the transformation type\n     */\n    constructor(sourcePoints, destinationPoints, type, pointCountMinimum) {\n        this.sourcePoints = sourcePoints;\n        this.destinationPoints = destinationPoints;\n        this.pointCount = this.sourcePoints.length;\n        this.type = type;\n        this.pointCountMinimum = pointCountMinimum;\n        if (this.pointCount < this.pointCountMinimum) {\n            throw new Error('Not enough control points. A ' +\n                this.type +\n                ' transformation requires a minimum of ' +\n                this.pointCountMinimum +\n                ' points, but ' +\n                this.pointCount +\n                ' are given.');\n        }\n    }\n    /**\n     * Set weights.\n     *\n     * The weights might be obtained in other ways then through solving\n     * (e.g. through solving multiple transformation together when staping).\n     * This function can be used to set weights computed elsewhere.\n     */\n    setWeightsArrays(weightsArrays) {\n        this.weightsArrays = weightsArrays;\n        this.processWeightsArrays();\n    }\n    processWeightsArrays() {\n        return;\n    }\n    /**\n     * Get the destination-transformed source points.\n     *\n     * @returns source points, transformed to destination domain\n     */\n    getDestinationTransformedSourcePoints() {\n        if (!this.destinationTransformedSourcePoints) {\n            this.destinationTransformedSourcePoints = this.sourcePoints.map((sourcePoint) => this.evaluateFunction(sourcePoint));\n        }\n        return this.destinationTransformedSourcePoints;\n    }\n    getMeasures() {\n        return {};\n    }\n    getErrors() {\n        if (!this.errors) {\n            const destinationTransformedSourcePoints = this.getDestinationTransformedSourcePoints();\n            this.errors = this.destinationPoints.map((destinationPoint, index) => distance(destinationPoint, destinationTransformedSourcePoints[index]));\n        }\n        return this.errors;\n    }\n    getRmse() {\n        if (!this.rmse) {\n            const destinationTransformedSourcePoints = this.getDestinationTransformedSourcePoints();\n            if (!this.destinationTransformedSourcePoints) {\n                this.getDestinationTransformedSourcePoints();\n            }\n            this.rmse = rms(this.destinationPoints, destinationTransformedSourcePoints);\n        }\n        return this.rmse;\n    }\n}\n", "import { BaseTransformation } from './BaseTransformation.js';\n/**\n * Base class for transformation that are a linear combination of weights.\n *\n * In general, the system of equations for x and y are dependent on each other, and they are thus solved jointly.\n * For transformations where the system of equations for x and y are independent and can hence be solved separately, a dedicated class exists.\n */\nexport class BaseLinearWeightsTransformation extends BaseTransformation {\n    destinationPointsArrays;\n    constructor(sourcePoints, destinationPoints, type, pointCountMinimum) {\n        super(sourcePoints, destinationPoints, type, pointCountMinimum);\n        this.destinationPointsArrays = this.getDestinationPointsArrays();\n    }\n}\n", "import * as matrix from './matrix.js';\n\nexport const AbstractMatrix = matrix.AbstractMatrix;\nexport const CHO = matrix.CHO;\nexport const CholeskyDecomposition = matrix.CholeskyDecomposition;\nexport const DistanceMatrix = matrix.DistanceMatrix;\nexport const EVD = matrix.EVD;\nexport const EigenvalueDecomposition = matrix.EigenvalueDecomposition;\nexport const LU = matrix.LU;\nexport const LuDecomposition = matrix.LuDecomposition;\nexport const Matrix = matrix.Matrix;\nexport const MatrixColumnSelectionView = matrix.MatrixColumnSelectionView;\nexport const MatrixColumnView = matrix.MatrixColumnView;\nexport const MatrixFlipColumnView = matrix.MatrixFlipColumnView;\nexport const MatrixFlipRowView = matrix.MatrixFlipRowView;\nexport const MatrixRowSelectionView = matrix.MatrixRowSelectionView;\nexport const MatrixRowView = matrix.MatrixRowView;\nexport const MatrixSelectionView = matrix.MatrixSelectionView;\nexport const MatrixSubView = matrix.MatrixSubView;\nexport const MatrixTransposeView = matrix.MatrixTransposeView;\nexport const NIPALS = matrix.NIPALS;\nexport const Nipals = matrix.Nipals;\nexport const QR = matrix.QR;\nexport const QrDecomposition = matrix.QrDecomposition;\nexport const SVD = matrix.SVD;\nexport const SingularValueDecomposition = matrix.SingularValueDecomposition;\nexport const SymmetricMatrix = matrix.SymmetricMatrix;\nexport const WrapperMatrix1D = matrix.WrapperMatrix1D;\nexport const WrapperMatrix2D = matrix.WrapperMatrix2D;\nexport const correlation = matrix.correlation;\nexport const covariance = matrix.covariance;\nexport default matrix.default.Matrix ? matrix.default.Matrix : matrix.Matrix;\nexport const determinant = matrix.determinant;\nexport const inverse = matrix.inverse;\nexport const linearDependencies = matrix.linearDependencies;\nexport const pseudoInverse = matrix.pseudoInverse;\nexport const solve = matrix.solve;\nexport const wrap = matrix.wrap;\n", "import Matrix, { inverse, pseudoInverse, SingularValueDecomposition } from 'ml-matrix';\n/**\n * Solve the x and y components jointly using PseudoInverse.\n *\n * This uses the 'Pseudo Inverse' to compute a 'best fit' (least squares) approximate solution\n * for the system of linear equations, which is (in general) over-defined and hence lacks an exact solution.\n * See https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_inverse\n *\n * This will result weightsArray shared by both components: [t_x, t_y, m, n]\n */\nexport function solveJointlyPseudoInverse(coefsArrayMatrices, destinationPointsArrays) {\n    const coefsMatrix = new Matrix([\n        ...coefsArrayMatrices[0],\n        ...coefsArrayMatrices[1]\n    ]);\n    const destinationPointsMatrix = Matrix.columnVector([\n        ...destinationPointsArrays[0],\n        ...destinationPointsArrays[1]\n    ]);\n    const pseudoInverseCoefsMatrix = pseudoInverse(coefsMatrix);\n    const weightsMatrix = pseudoInverseCoefsMatrix.mmul(destinationPointsMatrix);\n    const weightsArray = weightsMatrix.to1DArray();\n    return weightsArray;\n}\n/**\n * Solve the x and y components independently using PseudoInverse.\n *\n * This uses the 'Pseudo Inverse' to compute (for each component, using the same coefs for both)\n * a 'best fit' (least squares) approximate solution for the system of linear equations\n * which is (in general) over-defined and hence lacks an exact solution.\n *\n * See https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_inverse\n *\n * This wil result in a weights array for each component:\n * For order = 1: this.weight = [[a0_x, ax_x, ay_x], [a0_y, ax_y, ay_y]]\n * For order = 2: ... (similar, following the same order as in coefsArrayMatrix)\n * For order = 3: ... (similar, following the same order as in coefsArrayMatrix)\n */\nexport function solveIndependentlyPseudoInverse(coefsArrayMatrix, destinationPointsArrays) {\n    const coefsMatrix = new Matrix(coefsArrayMatrix);\n    const destinationPointsMatrices = [\n        Matrix.columnVector(destinationPointsArrays[0]),\n        Matrix.columnVector(destinationPointsArrays[1])\n    ];\n    const pseudoInverseCoefsMatrix = pseudoInverse(coefsMatrix);\n    const weightsMatrices = [\n        pseudoInverseCoefsMatrix.mmul(destinationPointsMatrices[0]),\n        pseudoInverseCoefsMatrix.mmul(destinationPointsMatrices[1])\n    ];\n    const weightsArrays = weightsMatrices.map((matrix) => matrix.to1DArray());\n    return weightsArrays;\n}\n/**\n * Solve the x and y components independently using exact inverse.\n *\n * This uses the exact inverse to compute (for each component, using the same coefs for both)\n * the exact solution for the system of linear equations\n * which is (in general) invertable to an exact solution.\n *\n * This wil result in a weights array for each component with rbf weights and affine weights.\n */\nexport function solveIndependentlyInverse(coefsArrayMatrix, destinationPointsArrays) {\n    const coefsMatrix = new Matrix(coefsArrayMatrix);\n    const destinationPointsMatrices = [\n        Matrix.columnVector(destinationPointsArrays[0]),\n        Matrix.columnVector(destinationPointsArrays[1])\n    ];\n    const inverseCoefsMatrix = inverse(coefsMatrix);\n    const weightsMatrices = [\n        inverseCoefsMatrix.mmul(destinationPointsMatrices[0]),\n        inverseCoefsMatrix.mmul(destinationPointsMatrices[1])\n    ];\n    const weightsArrays = weightsMatrices.map((matrix) => matrix.to1DArray());\n    return weightsArrays;\n}\n/**\n * Solve the x and y components jointly using singular value decomposition.\n *\n * This uses a singular value decomposition to compute the last (i.e. 9th) 'right singular vector',\n * i.e. the one with the smallest singular value, wich holds the weights for the solution.\n * Note that for a set of gcps that exactly follow a projective transformations,\n * the singular value is null and this vector spans the null-space.\n *\n * This wil result in a weights array for each component with rbf weights and affine weights.\n */\nexport function solveJointlySvd(coefsArrayMatrices, pointCount) {\n    // Joint coefs in the same order as in the paper\n    // (Otherwise the weights may differ in sign, even though this should not affect the result)\n    const coefsMatrix = [];\n    for (let i = 0; i < pointCount; i++) {\n        coefsMatrix.push(coefsArrayMatrices[0][i]);\n        coefsMatrix.push(coefsArrayMatrices[1][i]);\n    }\n    const svdCoefsMatrix = new SingularValueDecomposition(coefsMatrix);\n    const weightsMatrix = Matrix.from1DArray(3, 3, svdCoefsMatrix.rightSingularVectors.getColumn(8)).transpose();\n    const weightsArrays = weightsMatrix.to2DArray();\n    return weightsArrays;\n}\n", "import { newArrayMatrix, pasteArrayMatrix, arrayMatrixSize } from '@allmaps/stdlib';\nimport { BaseLinearWeightsTransformation } from './BaseLinearWeightsTransformation.js';\nimport { solveJointlyPseudoInverse } from '../shared/solve-functions.js';\n/**\n * 2D Helmert transformation (= similarity transformation)\n *\n * This transformation is a composition of a translation, rotation and scaling. There is no shearing.\n *\n * For this transformations, the system of equations is solved for x and y jointly.\n */\nexport class Helmert extends BaseLinearWeightsTransformation {\n    coefsArrayMatrices;\n    coefsArrayMatricesSize;\n    weightsArray;\n    weightsArrays;\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 'helmert', 2);\n        this.coefsArrayMatrices = this.getCoefsArrayMatrices();\n        this.coefsArrayMatricesSize = this.coefsArrayMatrices.map((coefsArrayMatrix) => arrayMatrixSize(coefsArrayMatrix));\n    }\n    getDestinationPointsArrays() {\n        return [\n            this.destinationPoints.map((value) => value[0]),\n            this.destinationPoints.map((value) => value[1])\n        ];\n    }\n    getCoefsArrayMatrices() {\n        let coefsArrayMatrix0 = newArrayMatrix(this.pointCount, 4, 0);\n        let coefsArrayMatrix1 = newArrayMatrix(this.pointCount, 4, 0);\n        for (let i = 0; i < this.pointCount; i++) {\n            const sourcePointCoefsArrays = this.getSourcePointCoefsArrays(this.sourcePoints[i]);\n            coefsArrayMatrix0 = pasteArrayMatrix(coefsArrayMatrix0, i, 0, [\n                sourcePointCoefsArrays[0]\n            ]);\n            coefsArrayMatrix1 = pasteArrayMatrix(coefsArrayMatrix1, i, 0, [\n                sourcePointCoefsArrays[1]\n            ]);\n        }\n        return [coefsArrayMatrix0, coefsArrayMatrix1];\n    }\n    /**\n     * Get two 1x4 coefsArrays, populating the 2Nx4 coefsArrayMatrices\n     * 1 0 x0 -y0\n     * 1 0 x1 -y1\n     * ...\n     * 0 1 y0 x0\n     * 0 1 y1 x1\n     * ...\n     *\n     * @param sourcePoint\n     */\n    getSourcePointCoefsArrays(sourcePoint) {\n        return [\n            [1, 0, sourcePoint[0], -sourcePoint[1]],\n            [0, 1, sourcePoint[1], sourcePoint[0]]\n        ];\n    }\n    solve() {\n        this.weightsArray = solveJointlyPseudoInverse(this.coefsArrayMatrices, this.destinationPointsArrays);\n        this.weightsArrays = [this.weightsArray, this.weightsArray];\n    }\n    getMeasures() {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArray) {\n            throw new Error('Helmert weights not computed');\n        }\n        const measures = {};\n        measures.scale = Math.sqrt(this.weightsArray[2] ** 2 + this.weightsArray[3] ** 2);\n        measures.rotation = Math.atan2(this.weightsArray[3], this.weightsArray[2]);\n        measures.translation = [this.weightsArray[0], this.weightsArray[1]];\n        return measures;\n    }\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArray) {\n            throw new Error('Helmert weights not computed');\n        }\n        const newDestinationPoint = [\n            this.weightsArray[0] +\n                this.weightsArray[2] * newSourcePoint[0] -\n                this.weightsArray[3] * newSourcePoint[1],\n            this.weightsArray[1] +\n                this.weightsArray[2] * newSourcePoint[1] +\n                this.weightsArray[3] * newSourcePoint[0]\n        ];\n        // Alternatively, using derived helmert measures\n        // this.translation[0] +\n        //   this.scale * Math.cos(rotation) * newSourcePoint[0] -\n        //   this.scale * Math.sin(rotation) * newSourcePoint[1],\n        // this.translation[1] +\n        //   this.scale * Math.cos(rotation) * newSourcePoint[1] +\n        //   this.scale * Math.sin(rotation) * newSourcePoint[0]\n        return newDestinationPoint;\n    }\n    evaluatePartialDerivativeX(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArray) {\n            throw new Error('Helmert weights not computed');\n        }\n        const newDestinationPointPartDerX = [\n            this.weightsArray[2],\n            this.weightsArray[3]\n        ];\n        return newDestinationPointPartDerX;\n    }\n    evaluatePartialDerivativeY(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArray) {\n            throw new Error('Helmert weights not computed');\n        }\n        const newDestinationPointPartDerY = [\n            -this.weightsArray[3],\n            this.weightsArray[2]\n        ];\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { Helmert } from './Helmert.js';\nimport { BaseTransformation } from './BaseTransformation.js';\nexport class Straight extends BaseTransformation {\n    weightsArrays;\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 'straight', 2);\n    }\n    /** Solve the x and y components jointly.\n     *\n     * This computes the corresponding Helmert transform and get the scale from it.\n     */\n    solve() {\n        const helmertTransformation = new Helmert(this.sourcePoints, this.destinationPoints);\n        const scale = helmertTransformation.getMeasures().scale;\n        // Compute the centers of the source points and destination points\n        const sourcePointsCenter = this.sourcePoints\n            .reduce((center, point) => [center[0] + point[0], center[1] + point[1]])\n            .map((coordinate) => coordinate / this.pointCount);\n        const destinationPointsCenter = this.destinationPoints\n            .reduce((center, point) => [center[0] + point[0], center[1] + point[1]])\n            .map((coordinate) => coordinate / this.pointCount);\n        // Compute the translation vector from the (scaled) center of the source points to the center of the destination points\n        const translation = destinationPointsCenter.map((coord, i) => coord - sourcePointsCenter[i] * scale);\n        this.weightsArrays = {\n            scale,\n            sourcePointsCenter,\n            destinationPointsCenter,\n            translation\n        };\n    }\n    // Evaluate the transformation function at a new point\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPoint = [\n            this.weightsArrays.translation[0] +\n                this.weightsArrays.scale * newSourcePoint[0],\n            this.weightsArrays.translation[1] +\n                this.weightsArrays.scale * newSourcePoint[1]\n        ];\n        return newDestinationPoint;\n    }\n    // Evaluate the transformation function's partial derivative to x at a new point\n    evaluatePartialDerivativeX(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPointPartDerX = [this.weightsArrays.scale, 0];\n        return newDestinationPointPartDerX;\n    }\n    // Evaluate the transformation function's partial derivative to y at a new point\n    evaluatePartialDerivativeY(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPointPartDerY = [0, this.weightsArrays.scale];\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { BaseLinearWeightsTransformation } from './BaseLinearWeightsTransformation.js';\n/**\n * Base class for transformation that are a linear combination of weights,\n * where the system of equations for x and y are independent and can hence be solved separately.\n */\nexport class BaseIndependentLinearWeightsTransformation extends BaseLinearWeightsTransformation {\n    constructor(sourcePoints, destinationPoints, type, pointCountMinimum) {\n        super(sourcePoints, destinationPoints, type, pointCountMinimum);\n    }\n    getCoefsArrayMatrices() {\n        const coefsArrayMatrix = this.getCoefsArrayMatrix();\n        return [coefsArrayMatrix, coefsArrayMatrix];\n    }\n    getSourcePointCoefsArrays(sourcePoint) {\n        const sourcePointCoefsArray = this.getSourcePointCoefsArray(sourcePoint);\n        return [sourcePointCoefsArray, sourcePointCoefsArray];\n    }\n}\n", "import { arrayMatrixSize, newArrayMatrix, pasteArrayMatrix } from '@allmaps/stdlib';\nimport { BaseIndependentLinearWeightsTransformation } from './BaseIndependentLinearWeightsTransformation.js';\nimport { solveIndependentlyPseudoInverse } from '../shared/solve-functions.js';\nexport class BasePolynomialTransformation extends BaseIndependentLinearWeightsTransformation {\n    coefsArrayMatrices;\n    coefsArrayMatrix;\n    coefsArrayMatricesSize;\n    coefsArrayMatrixSize;\n    order;\n    weightsArrays;\n    constructor(sourcePoints, destinationPoints, order) {\n        order = order || 1;\n        const pointsCountMinimum = ((order + 1) * (order + 2)) / 2;\n        // If there are less control points than there are coefficients to be determined (for each dimension),\n        // the system can not be solved\n        super(sourcePoints, destinationPoints, ('polynomial' + order), pointsCountMinimum);\n        this.order = order;\n        if (this.order < 1 || this.order > 3) {\n            throw new Error('Only polynomial transformations of order 1, 2 or 3 are supported');\n        }\n        this.coefsArrayMatrices = this.getCoefsArrayMatrices();\n        this.coefsArrayMatrix = this.coefsArrayMatrices[0];\n        this.coefsArrayMatricesSize = this.coefsArrayMatrices.map((coefsArrayMatrix) => arrayMatrixSize(coefsArrayMatrix));\n        this.coefsArrayMatrixSize = arrayMatrixSize(this.coefsArrayMatrix);\n    }\n    getDestinationPointsArrays() {\n        return [\n            this.destinationPoints.map((value) => value[0]),\n            this.destinationPoints.map((value) => value[1])\n        ];\n    }\n    getCoefsArrayMatrix() {\n        let coefsArrayArray = newArrayMatrix(this.pointCount, this.pointCountMinimum, 0);\n        for (let i = 0; i < this.pointCount; i++) {\n            coefsArrayArray = pasteArrayMatrix(coefsArrayArray, i, 0, [\n                this.getSourcePointCoefsArray(this.sourcePoints[i])\n            ]);\n        }\n        return coefsArrayArray;\n    }\n    solve() {\n        this.weightsArrays = solveIndependentlyPseudoInverse(this.coefsArrayMatrix, this.destinationPointsArrays);\n    }\n}\n", "import { BasePolynomialTransformation } from './BasePolynomialTransformation.js';\n/**\n * 2D First-order Polynomial transformation\n *\n * This transformation is a composition of a translation, rotation, scaling and shearing.\n */\nexport class Polynomial1 extends BasePolynomialTransformation {\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 1);\n    }\n    getSourcePointCoefsArray(sourcePoint) {\n        return Polynomial1.getPolynomial1SourcePointCoefsArray(sourcePoint);\n    }\n    /**\n     * Get 1x3 coefsArray, populating the Nx3 coefsArrayMatrix\n     * 1 x0 y0\n     * 1 x1 y1\n     * 1 x2 y2\n     * ...\n     *\n     * @param sourcePoint\n     */\n    static getPolynomial1SourcePointCoefsArray(sourcePoint) {\n        return [1, sourcePoint[0], sourcePoint[1]];\n    }\n    getHomogeneousTransform() {\n        if (!this.weightsArrays) {\n            return undefined;\n        }\n        return [\n            this.weightsArrays[0][1],\n            this.weightsArrays[1][1],\n            this.weightsArrays[0][2],\n            this.weightsArrays[1][2],\n            this.weightsArrays[0][0],\n            this.weightsArrays[1][0]\n        ];\n    }\n    setWeightsArraysFromHomogeneousTransform(homogeneousTransform) {\n        this.weightsArrays = [\n            [\n                homogeneousTransform[4],\n                homogeneousTransform[0],\n                homogeneousTransform[2]\n            ],\n            [\n                homogeneousTransform[5],\n                homogeneousTransform[1],\n                homogeneousTransform[3]\n            ]\n        ];\n    }\n    getMeasures() {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const measures = {};\n        // From: https://stackoverflow.com/questions/12469770/get-skew-or-rotation-value-from-affine-transformation-matrix\n        measures.translation = [this.weightsArrays[0][0], this.weightsArrays[1][0]];\n        const a = this.weightsArrays[0][1];\n        const b = this.weightsArrays[1][1];\n        const c = this.weightsArrays[0][2];\n        const d = this.weightsArrays[1][2];\n        const delta = a * d - b * c;\n        // Apply the QR-like decomposition.\n        if (a != 0 || b != 0) {\n            const r = Math.sqrt(a * a + b * b);\n            measures.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            measures.scales = [r, delta / r];\n            measures.shears = [Math.atan((a * c + b * d) / (r * r)), 0];\n        }\n        else if (c != 0 || d != 0) {\n            const s = Math.sqrt(c * c + d * d);\n            measures.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            measures.scales = [delta / s, s];\n            measures.shears = [0, Math.atan((a * c + b * d) / (s * s))];\n        }\n        else {\n            // a = b = c = d = 0\n        }\n        return measures;\n    }\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPoint = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPoint[i] +=\n                this.weightsArrays[i][0] +\n                    this.weightsArrays[i][1] * newSourcePoint[0] +\n                    this.weightsArrays[i][2] * newSourcePoint[1];\n        }\n        return newDestinationPoint;\n    }\n    evaluatePartialDerivativeX(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPointPartDerX = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerX[i] += this.weightsArrays[i][1];\n        }\n        return newDestinationPointPartDerX;\n    }\n    evaluatePartialDerivativeY(_newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const newDestinationPointPartDerY = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerY[i] += this.weightsArrays[i][2];\n        }\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { BasePolynomialTransformation } from './BasePolynomialTransformation.js';\n/**\n * 2D Second-order Polynomial transformation\n */\nexport class Polynomial2 extends BasePolynomialTransformation {\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 2);\n    }\n    getSourcePointCoefsArray(sourcePoint) {\n        return Polynomial2.getPolynomial2SourcePointCoefsArray(sourcePoint);\n    }\n    /**\n     * Get 1x3 coefsArray, populating the Nx3 coefsArrayMatrix\n     * 1 x0 y0 x0^2 y0^2 x0*y0\n     * ...\n     *\n     * @param sourcePoint\n     */\n    static getPolynomial2SourcePointCoefsArray(sourcePoint) {\n        return [\n            1,\n            sourcePoint[0],\n            sourcePoint[1],\n            sourcePoint[0] ** 2,\n            sourcePoint[1] ** 2,\n            sourcePoint[0] * sourcePoint[1]\n        ];\n    }\n    // Evaluate the transformation function at a new point\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPoint = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPoint[i] +=\n                this.weightsArrays[i][0] +\n                    this.weightsArrays[i][1] * newSourcePoint[0] +\n                    this.weightsArrays[i][2] * newSourcePoint[1] +\n                    this.weightsArrays[i][3] * newSourcePoint[0] ** 2 +\n                    this.weightsArrays[i][4] * newSourcePoint[1] ** 2 +\n                    this.weightsArrays[i][5] * newSourcePoint[0] * newSourcePoint[1];\n        }\n        return newDestinationPoint;\n    }\n    // Evaluate the transformation function's partial derivative to x at a new point\n    evaluatePartialDerivativeX(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPointPartDerX = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerX[i] +=\n                this.weightsArrays[i][1] +\n                    2 * this.weightsArrays[i][3] * newSourcePoint[0] +\n                    this.weightsArrays[i][5] * newSourcePoint[1];\n        }\n        return newDestinationPointPartDerX;\n    }\n    // Evaluate the transformation function's partial derivative to x at a new point\n    evaluatePartialDerivativeY(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPointPartDerY = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerY[i] +=\n                this.weightsArrays[i][2] +\n                    2 * this.weightsArrays[i][4] * newSourcePoint[1] +\n                    this.weightsArrays[i][5] * newSourcePoint[0];\n        }\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { BasePolynomialTransformation } from './BasePolynomialTransformation.js';\n/**\n * 2D Third-order Polynomial transformation\n */\nexport class Polynomial3 extends BasePolynomialTransformation {\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 3);\n    }\n    getSourcePointCoefsArray(sourcePoint) {\n        return Polynomial3.getPolynomial3SourcePointCoefsArray(sourcePoint);\n    }\n    /**\n     * Get 1x3 coefsArray, populating the Nx3 coefsArrayMatrix\n     * 1 x0 y0 x0^2 y0^2 x0*y0 x0^3 y0^3 x0^2*y0 x0*y0^2\n     * ...\n     *\n     * @param sourcePoint\n     */\n    static getPolynomial3SourcePointCoefsArray(sourcePoint) {\n        return [\n            1,\n            sourcePoint[0],\n            sourcePoint[1],\n            sourcePoint[0] ** 2,\n            sourcePoint[1] ** 2,\n            sourcePoint[0] * sourcePoint[1],\n            sourcePoint[0] ** 3,\n            sourcePoint[1] ** 3,\n            sourcePoint[0] ** 2 * sourcePoint[1],\n            sourcePoint[0] * sourcePoint[1] ** 2\n        ];\n    }\n    // Evaluate the transformation function at a new point\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPoint = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPoint[i] +=\n                this.weightsArrays[i][0] +\n                    this.weightsArrays[i][1] * newSourcePoint[0] +\n                    this.weightsArrays[i][2] * newSourcePoint[1] +\n                    this.weightsArrays[i][3] * newSourcePoint[0] ** 2 +\n                    this.weightsArrays[i][4] * newSourcePoint[1] ** 2 +\n                    this.weightsArrays[i][5] * newSourcePoint[0] * newSourcePoint[1] +\n                    this.weightsArrays[i][6] * newSourcePoint[0] ** 3 +\n                    this.weightsArrays[i][7] * newSourcePoint[1] ** 3 +\n                    this.weightsArrays[i][8] * newSourcePoint[0] ** 2 * newSourcePoint[1] +\n                    this.weightsArrays[i][9] * newSourcePoint[0] * newSourcePoint[1] ** 2;\n        }\n        return newDestinationPoint;\n    }\n    // Evaluate the transformation function's partial derivative to x at a new point\n    evaluatePartialDerivativeX(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPointPartDerX = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerX[i] +=\n                this.weightsArrays[i][1] +\n                    2 * this.weightsArrays[i][3] * newSourcePoint[0] +\n                    this.weightsArrays[i][5] * newSourcePoint[1] +\n                    3 * this.weightsArrays[i][6] * newSourcePoint[0] ** 2 +\n                    2 * this.weightsArrays[i][8] * newSourcePoint[0] * newSourcePoint[1] +\n                    this.weightsArrays[i][9] * newSourcePoint[1] ** 2;\n        }\n        return newDestinationPointPartDerX;\n    }\n    // Evaluate the transformation function's partial derivative to x at a new point\n    evaluatePartialDerivativeY(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        // Apply the helmert coefficients to the input point\n        const newDestinationPointPartDerY = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            newDestinationPointPartDerY[i] +=\n                this.weightsArrays[i][2] +\n                    2 * this.weightsArrays[i][4] * newSourcePoint[1] +\n                    this.weightsArrays[i][5] * newSourcePoint[0] +\n                    3 * this.weightsArrays[i][7] * newSourcePoint[1] ** 2 +\n                    this.weightsArrays[i][8] * newSourcePoint[0] ** 2 +\n                    2 * this.weightsArrays[i][9] * newSourcePoint[0] * newSourcePoint[1];\n        }\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { newArrayMatrix } from '@allmaps/stdlib';\nimport { BaseTransformation } from './BaseTransformation.js';\nimport { solveJointlySvd } from '../shared/solve-functions.js';\n/**\n * 2D projective (= perspective) transformation\n *\n * For this transformations, the system of equations is solved for x and y jointly.\n *\n * See for more information:\n * Dubrofsky, Elan. \"Homography estimation.\" Diplomov prce. Vancouver: Univerzita Britsk Kolumbie 5 (2009).\n * https://citeseerx.ist.psu.edu/doc/10.1.1.186.4411\n * https://www.cs.ubc.ca/sites/default/files/2022-12/Dubrofsky_Elan.pdf\n */\nexport class Projective extends BaseTransformation {\n    coefsArrayMatrices;\n    weightsArrays;\n    constructor(sourcePoints, destinationPoints) {\n        super(sourcePoints, destinationPoints, 'projective', 4);\n        // Construct two Nx9 Matrix projectiveCoefsMatrix\n        // x0 y0 1  0   0   0  x'0x0 x'0y0 x'0\n        // ...\n        // 0   0   0   x0 y0 1 y'0x0 y'0y0 y'0\n        // ...\n        this.coefsArrayMatrices = [\n            newArrayMatrix(this.pointCount, 9, 0),\n            newArrayMatrix(this.pointCount, 9, 0)\n        ];\n        for (let i = 0; i < this.pointCount; i++) {\n            this.coefsArrayMatrices[0][i][0] = -sourcePoints[i][0];\n            this.coefsArrayMatrices[0][i][1] = -sourcePoints[i][1];\n            this.coefsArrayMatrices[0][i][2] = -1;\n            this.coefsArrayMatrices[0][i][3] = 0;\n            this.coefsArrayMatrices[0][i][4] = 0;\n            this.coefsArrayMatrices[0][i][5] = 0;\n            this.coefsArrayMatrices[0][i][6] =\n                destinationPoints[i][0] * sourcePoints[i][0];\n            this.coefsArrayMatrices[0][i][7] =\n                destinationPoints[i][0] * sourcePoints[i][1];\n            this.coefsArrayMatrices[0][i][8] = destinationPoints[i][0];\n            this.coefsArrayMatrices[1][i][0] = 0;\n            this.coefsArrayMatrices[1][i][1] = 0;\n            this.coefsArrayMatrices[1][i][2] = 0;\n            this.coefsArrayMatrices[1][i][3] = -sourcePoints[i][0];\n            this.coefsArrayMatrices[1][i][4] = -sourcePoints[i][1];\n            this.coefsArrayMatrices[1][i][5] = -1;\n            this.coefsArrayMatrices[1][i][6] =\n                destinationPoints[i][1] * sourcePoints[i][0];\n            this.coefsArrayMatrices[1][i][7] =\n                destinationPoints[i][1] * sourcePoints[i][1];\n            this.coefsArrayMatrices[1][i][8] = destinationPoints[i][1];\n        }\n    }\n    solve() {\n        this.weightsArrays = solveJointlySvd(this.coefsArrayMatrices, this.pointCount);\n    }\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const c = this.weightsArrays[0][2] * newSourcePoint[0] +\n            this.weightsArrays[1][2] * newSourcePoint[1] +\n            this.weightsArrays[2][2];\n        const num1 = this.weightsArrays[0][0] * newSourcePoint[0] +\n            this.weightsArrays[1][0] * newSourcePoint[1] +\n            this.weightsArrays[2][0];\n        const num2 = this.weightsArrays[0][1] * newSourcePoint[0] +\n            this.weightsArrays[1][1] * newSourcePoint[1] +\n            this.weightsArrays[2][1];\n        const newDestinationPoint = [num1 / c, num2 / c];\n        return newDestinationPoint;\n    }\n    evaluatePartialDerivativeX(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const c = this.weightsArrays[0][2] * newSourcePoint[0] +\n            this.weightsArrays[1][2] * newSourcePoint[1] +\n            this.weightsArrays[2][2];\n        const num1 = this.weightsArrays[0][0] * newSourcePoint[0] +\n            this.weightsArrays[1][0] * newSourcePoint[1] +\n            this.weightsArrays[2][0];\n        const num2 = this.weightsArrays[0][1] * newSourcePoint[0] +\n            this.weightsArrays[1][1] * newSourcePoint[1] +\n            this.weightsArrays[2][1];\n        const newDestinationPointPartDerX = [\n            (c * this.weightsArrays[0][0] - this.weightsArrays[0][2] * num1) / c ** 2,\n            (c * this.weightsArrays[0][1] - this.weightsArrays[0][2] * num2) / c ** 2\n        ];\n        return newDestinationPointPartDerX;\n    }\n    evaluatePartialDerivativeY(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        const c = this.weightsArrays[0][2] * newSourcePoint[0] +\n            this.weightsArrays[1][2] * newSourcePoint[1] +\n            this.weightsArrays[2][2];\n        const num1 = this.weightsArrays[0][0] * newSourcePoint[0] +\n            this.weightsArrays[1][0] * newSourcePoint[1] +\n            this.weightsArrays[2][0];\n        const num2 = this.weightsArrays[0][1] * newSourcePoint[0] +\n            this.weightsArrays[1][1] * newSourcePoint[1] +\n            this.weightsArrays[2][1];\n        const newDestinationPointPartDerY = [\n            (c * this.weightsArrays[1][0] - this.weightsArrays[1][2] * num1) / c ** 2,\n            (c * this.weightsArrays[1][1] - this.weightsArrays[1][2] * num2) / c ** 2\n        ];\n        return newDestinationPointPartDerY;\n    }\n}\n", "import { arrayMatrixSize, newArrayMatrix, newBlockArrayMatrix, pasteArrayMatrix, transposeArrayMatrix } from '@allmaps/stdlib';\nimport { Polynomial1 } from './Polynomial1.js';\nimport { BaseIndependentLinearWeightsTransformation } from './BaseIndependentLinearWeightsTransformation.js';\nimport { solveIndependentlyInverse } from '../shared/solve-functions.js';\n/**\n * 2D Radial Basis Functions transformation\n *\n * See notebook https://observablehq.com/d/0b57d3b587542794 for code source and explanation\n */\nexport class RBF extends BaseIndependentLinearWeightsTransformation {\n    kernelFunction;\n    normFunction;\n    epsilon;\n    coefsArrayMatrices;\n    coefsArrayMatrix;\n    coefsArrayMatricesSize;\n    coefsArrayMatrixSize;\n    weightsArrays;\n    rbfWeightsArrays;\n    affineWeightsArrays;\n    constructor(sourcePoints, destinationPoints, kernelFunction, normFunction, type, epsilon) {\n        super(sourcePoints, destinationPoints, type, 3);\n        this.kernelFunction = kernelFunction;\n        this.normFunction = normFunction;\n        this.epsilon = epsilon;\n        // Note: getCoefsArrayMatrices can not be moved to the parent class's constructor\n        // since for this class it uses properties (normFunction, kernelFunction, epsilon)\n        // which are only defined after super()\n        this.coefsArrayMatrices = this.getCoefsArrayMatrices();\n        this.coefsArrayMatrix = this.coefsArrayMatrices[0];\n        this.coefsArrayMatricesSize = this.coefsArrayMatrices.map((coefsArrayMatrix) => arrayMatrixSize(coefsArrayMatrix));\n        this.coefsArrayMatrixSize = arrayMatrixSize(this.coefsArrayMatrix);\n    }\n    getDestinationPointsArrays() {\n        return [\n            [...this.destinationPoints, [0, 0], [0, 0], [0, 0]].map((value) => value[0]),\n            [...this.destinationPoints, [0, 0], [0, 0], [0, 0]].map((value) => value[1])\n        ];\n    }\n    getCoefsArrayMatrix() {\n        // Pre-compute kernelsArrayMatrix: fill normsArrayMatrix\n        // with the point to point distances between all control points\n        const normsArrayMatrix = newArrayMatrix(this.pointCount, this.pointCount, 0);\n        for (let i = 0; i < this.pointCount; i++) {\n            for (let j = 0; j < this.pointCount; j++) {\n                normsArrayMatrix[i][j] = this.normFunction(this.sourcePoints[i], this.sourcePoints[j]);\n            }\n        }\n        // If it's not provided, and if it's an input to the kernelFunction,\n        // compute epsilon as the average distance between the control points\n        if (this.epsilon === undefined) {\n            const normsSum = normsArrayMatrix\n                .map((row) => row.reduce((a, c) => a + c, 0))\n                .reduce((a, c) => a + c, 0);\n            this.epsilon = normsSum / (Math.pow(this.pointCount, 2) - this.pointCount);\n        }\n        // Finish the computation of kernelsArrayMatrix by applying the requested kernel function\n        const kernelCoefsArrayMatrix = newArrayMatrix(this.pointCount, this.pointCount, 0);\n        for (let i = 0; i < this.pointCount; i++) {\n            for (let j = 0; j < this.pointCount; j++) {\n                kernelCoefsArrayMatrix[i][j] = this.kernelFunction(normsArrayMatrix[i][j], {\n                    epsilon: this.epsilon\n                });\n            }\n        }\n        // Construct Nx3 affineCoefsArrayMatrix\n        // 1 x0 y0\n        // 1 x1 y1\n        // 1 x2 y2\n        // ...\n        let affineCoefsArrayMatrix = newArrayMatrix(this.pointCount, 3, 0);\n        for (let i = 0; i < this.pointCount; i++) {\n            affineCoefsArrayMatrix = pasteArrayMatrix(affineCoefsArrayMatrix, i, 0, [\n                Polynomial1.getPolynomial1SourcePointCoefsArray(this.sourcePoints[i])\n            ]);\n        }\n        // Construct 3x3 zerosArrayMatrix\n        const zerosArrayMatrix = newArrayMatrix(3, 3, 0);\n        // Combine kernelsArrayMatrix and affineCoefsArrayMatrix\n        // into new coefsArrayMatrix, to include the affine transformation\n        const coefsArrayMatrix = newBlockArrayMatrix([\n            [kernelCoefsArrayMatrix, affineCoefsArrayMatrix],\n            [transposeArrayMatrix(affineCoefsArrayMatrix), zerosArrayMatrix]\n        ]);\n        return coefsArrayMatrix;\n    }\n    /**\n     * Get 1x(N+3) coefsArray, populating the (N+3)x(N+3) coefsArrayMatrix\n     *\n     * The coefsArray has a 1xN kernel part and a 1x3 affine part.\n     *\n     * @param sourcePoint\n     */\n    getSourcePointCoefsArray(sourcePoint) {\n        return [\n            ...this.getRbfKernelSourcePointCoefsArray(sourcePoint),\n            ...Polynomial1.getPolynomial1SourcePointCoefsArray(sourcePoint)\n        ];\n    }\n    getRbfKernelSourcePointCoefsArray(sourcePoint) {\n        const kernelSourcePointCoefsArray = [];\n        for (let i = 0; i < this.pointCount; i++) {\n            kernelSourcePointCoefsArray.push(this.kernelFunction(this.normFunction(this.sourcePoints[i], sourcePoint), {\n                epsilon: this.epsilon\n            }));\n        }\n        return kernelSourcePointCoefsArray;\n    }\n    setWeightsArrays(weightsArrays, epsilon) {\n        if (epsilon) {\n            this.epsilon = epsilon;\n        }\n        super.setWeightsArrays(weightsArrays);\n    }\n    /**\n     * Solve the x and y components independently.\n     *\n     * This uses the exact inverse to compute (for each component, using the same coefs for both)\n     * the exact solution for the system of linear equations\n     * which is (in general) invertable to an exact solution.\n     *\n     * This wil result in a weights array for each component with rbf weights and affine weights.\n     */\n    solve() {\n        this.weightsArrays = solveIndependentlyInverse(this.coefsArrayMatrix, this.destinationPointsArrays);\n        this.processWeightsArrays();\n    }\n    processWeightsArrays() {\n        if (!this.weightsArrays) {\n            throw new Error('Weights not computed');\n        }\n        this.rbfWeightsArrays = this.weightsArrays.map((array) => array.slice(0, this.pointCount));\n        this.affineWeightsArrays = this.weightsArrays.map((array) => array.slice(this.pointCount));\n    }\n    evaluateFunction(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.rbfWeightsArrays || !this.affineWeightsArrays) {\n            throw new Error('RBF weights not computed');\n        }\n        const rbfWeights = this.rbfWeightsArrays;\n        const affineWeights = this.affineWeightsArrays;\n        // Compute the distances of that point to all control points\n        const newDistances = this.sourcePoints.map((sourcePoint) => this.normFunction(newSourcePoint, sourcePoint));\n        // Sum the weighted contributions of the input point\n        const newDestinationPoint = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            // Apply the weights to the new distances\n            newDestinationPoint[i] = newDistances.reduce((sum, dist, index) => sum +\n                this.kernelFunction(dist, { epsilon: this.epsilon }) *\n                    rbfWeights[i][index], 0);\n            // Add the affine part\n            newDestinationPoint[i] +=\n                affineWeights[i][0] +\n                    affineWeights[i][1] * newSourcePoint[0] +\n                    affineWeights[i][2] * newSourcePoint[1];\n        }\n        return newDestinationPoint;\n    }\n    evaluatePartialDerivativeX(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.rbfWeightsArrays || !this.affineWeightsArrays) {\n            throw new Error('RBF weights not computed');\n        }\n        const rbfWeights = this.rbfWeightsArrays;\n        const affineWeights = this.affineWeightsArrays;\n        // Compute the distances of that point to all control points\n        const newDistances = this.sourcePoints.map((sourcePoint) => this.normFunction(newSourcePoint, sourcePoint));\n        // Sum the weighted contributions of the input point\n        const newDestinationPointPartDerX = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            // Apply the weights to the new distances\n            newDestinationPointPartDerX[i] = newDistances.reduce((sum, dist, index) => sum +\n                (dist === 0\n                    ? 0\n                    : this.kernelFunction(dist, {\n                        derivative: 1,\n                        epsilon: this.epsilon\n                    }) *\n                        ((newSourcePoint[0] - this.sourcePoints[index][0]) / dist) *\n                        rbfWeights[i][index]), 0);\n            // Add the affine part\n            newDestinationPointPartDerX[i] += affineWeights[i][1];\n        }\n        return newDestinationPointPartDerX;\n    }\n    evaluatePartialDerivativeY(newSourcePoint) {\n        if (!this.weightsArrays) {\n            this.solve();\n        }\n        if (!this.rbfWeightsArrays || !this.affineWeightsArrays) {\n            throw new Error('RBF weights not computed');\n        }\n        const rbfWeights = this.rbfWeightsArrays;\n        const affineWeights = this.affineWeightsArrays;\n        // Compute the distances of that point to all control points\n        const newDistances = this.sourcePoints.map((sourcePoint) => this.normFunction(newSourcePoint, sourcePoint));\n        // Sum the weighted contributions of the input point\n        const newDestinationPointPartDerY = [0, 0];\n        for (let i = 0; i < 2; i++) {\n            // Apply the weights to the new distances\n            newDestinationPointPartDerY[i] = newDistances.reduce((sum, dist, index) => sum +\n                (dist === 0\n                    ? 0\n                    : this.kernelFunction(dist, {\n                        derivative: 1,\n                        epsilon: this.epsilon\n                    }) *\n                        ((newSourcePoint[1] - this.sourcePoints[index][1]) / dist) *\n                        rbfWeights[i][index]), 0);\n            // Add the affine part\n            newDestinationPointPartDerY[i] += affineWeights[i][2];\n        }\n        return newDestinationPointPartDerY;\n    }\n}\n", "/**\n * Linear kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function linearKernel(r, options) {\n    if (!options.derivative) {\n        return r;\n    }\n    else if (options.derivative === 1) {\n        return 1;\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Cubic kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function cubicKernel(r, options) {\n    if (!options.derivative) {\n        return Math.pow(r, 3);\n    }\n    else if (options.derivative === 1) {\n        return 3 * Math.pow(r, 2);\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Quintic kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function quinticKernel(r, options) {\n    if (!options.derivative) {\n        return Math.pow(r, 5);\n    }\n    else if (options.derivative === 1) {\n        return 5 * Math.pow(r, 4);\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Thin Plate Spline\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function thinPlateKernel(r, options) {\n    if (!options.derivative) {\n        if (r === 0) {\n            return 0;\n        }\n        return Math.pow(r, 2) * Math.log(r);\n    }\n    else if (options.derivative === 1) {\n        if (r === 0) {\n            return 0;\n        }\n        return r + 2 * r * Math.log(r);\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Guassian kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function gaussianKernel(r, options) {\n    options.epsilon = options.epsilon || 1;\n    if (!options.derivative) {\n        return Math.exp(-Math.pow(r / options.epsilon, 2));\n    }\n    else if (options.derivative === 1) {\n        return (((-2 * r) / options.epsilon ** 2) *\n            Math.exp(-Math.pow(r / options.epsilon, 2)));\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Inverse Multiquadratic kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function inverseMultiquadricKernel(r, options) {\n    options.epsilon = options.epsilon || 1;\n    if (!options.derivative) {\n        return 1.0 / Math.sqrt(Math.pow(r / options.epsilon, 2) + 1);\n    }\n    else if (options.derivative === 1) {\n        return (-r /\n            (options.epsilon ** 2 *\n                Math.pow(Math.pow(r / options.epsilon, 2) + 1, 3 / 2)));\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n/**\n * Multiquadratic kernel\n *\n * @param r - Radius\n * @param options - Kernel Function Options\n * @returns Evaluated kernel\n */\nexport function multiquadricKernel(r, options) {\n    options.epsilon = options.epsilon || 1;\n    if (!options.derivative) {\n        return Math.sqrt(Math.pow(r / options.epsilon, 2) + 1);\n    }\n    else if (options.derivative === 1) {\n        return (r /\n            (options.epsilon ** 2 * Math.sqrt(Math.pow(r / options.epsilon, 2) + 1)));\n    }\n    else {\n        throw new Error('Derivate of order ' + options.derivative + ' not implemented');\n    }\n}\n", "export function euclideanNorm(point0, point1) {\n    const sub = [point1[0] - point0[0], point1[1] - point0[1]];\n    const norm = Math.sqrt(sub[0] ** 2 + sub[1] ** 2);\n    return norm;\n}\n", "import { Coord, degreesToRadians, radiansToDegrees } from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\n\n// http://en.wikipedia.org/wiki/Haversine_formula\n// http://www.movable-type.co.uk/scripts/latlong.html#bearing\n\n/**\n * Takes two {@link Point|points} and finds the geographic bearing between them,\n * i.e. the angle measured in degrees from the north line (0 degrees)\n *\n * @function\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.final=false] calculates the final bearing if true\n * @returns {number} bearing in decimal degrees, between -180 and 180 degrees (positive clockwise)\n * @example\n * var point1 = turf.point([-75.343, 39.984]);\n * var point2 = turf.point([-75.534, 39.123]);\n *\n * var bearing = turf.bearing(point1, point2);\n *\n * //addToMap\n * var addToMap = [point1, point2]\n * point1.properties['marker-color'] = '#f00'\n * point2.properties['marker-color'] = '#0f0'\n * point1.properties.bearing = bearing\n */\nfunction bearing(\n  start: Coord,\n  end: Coord,\n  options: {\n    final?: boolean;\n  } = {}\n): number {\n  // Reverse calculation\n  if (options.final === true) {\n    return calculateFinalBearing(start, end);\n  }\n\n  const coordinates1 = getCoord(start);\n  const coordinates2 = getCoord(end);\n\n  const lon1 = degreesToRadians(coordinates1[0]);\n  const lon2 = degreesToRadians(coordinates2[0]);\n  const lat1 = degreesToRadians(coordinates1[1]);\n  const lat2 = degreesToRadians(coordinates2[1]);\n  const a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n  const b =\n    Math.cos(lat1) * Math.sin(lat2) -\n    Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n\n  return radiansToDegrees(Math.atan2(a, b));\n}\n\n/**\n * Calculates Final Bearing\n *\n * @private\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @returns {number} bearing\n */\nfunction calculateFinalBearing(start: Coord, end: Coord) {\n  // Swap start & end\n  let bear = bearing(end, start);\n  bear = (bear + 180) % 360;\n  return bear;\n}\n\nexport { bearing };\nexport default bearing;\n", "// http://en.wikipedia.org/wiki/Haversine_formula\n// http://www.movable-type.co.uk/scripts/latlong.html\nimport { Feature, Point, GeoJsonProperties } from \"geojson\";\nimport {\n  Coord,\n  degreesToRadians,\n  lengthToRadians,\n  point,\n  radiansToDegrees,\n  Units,\n} from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\n\n/**\n * Takes a {@link Point} and calculates the location of a destination point given a distance in\n * degrees, radians, miles, or kilometers; and bearing in degrees.\n * This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.\n *\n * @function\n * @param {Coord} origin starting point\n * @param {number} distance distance from the origin point\n * @param {number} bearing ranging from -180 to 180\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] miles, kilometers, degrees, or radians\n * @param {Object} [options.properties={}] Translate properties to Point\n * @returns {Feature<Point>} destination point\n * @example\n * var point = turf.point([-75.343, 39.984]);\n * var distance = 50;\n * var bearing = 90;\n * var options = {units: 'miles'};\n *\n * var destination = turf.destination(point, distance, bearing, options);\n *\n * //addToMap\n * var addToMap = [point, destination]\n * destination.properties['marker-color'] = '#f00';\n * point.properties['marker-color'] = '#0f0';\n */\nfunction destination<P extends GeoJsonProperties = GeoJsonProperties>(\n  origin: Coord,\n  distance: number,\n  bearing: number,\n  options: {\n    units?: Units;\n    properties?: P;\n  } = {}\n): Feature<Point, P> {\n  // Handle input\n  const coordinates1 = getCoord(origin);\n  const longitude1 = degreesToRadians(coordinates1[0]);\n  const latitude1 = degreesToRadians(coordinates1[1]);\n  const bearingRad = degreesToRadians(bearing);\n  const radians = lengthToRadians(distance, options.units);\n\n  // Main\n  const latitude2 = Math.asin(\n    Math.sin(latitude1) * Math.cos(radians) +\n      Math.cos(latitude1) * Math.sin(radians) * Math.cos(bearingRad)\n  );\n  const longitude2 =\n    longitude1 +\n    Math.atan2(\n      Math.sin(bearingRad) * Math.sin(radians) * Math.cos(latitude1),\n      Math.cos(radians) - Math.sin(latitude1) * Math.sin(latitude2)\n    );\n  const lng = radiansToDegrees(longitude2);\n  const lat = radiansToDegrees(latitude2);\n\n  return point([lng, lat], options.properties);\n}\n\nexport { destination };\nexport default destination;\n", "import { getCoord } from \"@turf/invariant\";\nimport { radiansToLength, degreesToRadians, Coord, Units } from \"@turf/helpers\";\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n\n/**\n * Calculates the distance between two {@link Coord|coordinates} in degrees, radians, miles, or kilometers.\n * This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.\n *\n * @function\n * @param {Coord} from origin coordinate\n * @param {Coord} to destination coordinate\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers\n * @returns {number} distance between the two coordinates\n * @example\n * var from = turf.point([-75.343, 39.984]);\n * var to = turf.point([-75.534, 39.123]);\n * var options = {units: 'miles'};\n *\n * var distance = turf.distance(from, to, options);\n *\n * //addToMap\n * var addToMap = [from, to];\n * from.properties.distance = distance;\n * to.properties.distance = distance;\n */\nfunction distance(\n  from: Coord,\n  to: Coord,\n  options: {\n    units?: Units;\n  } = {}\n) {\n  var coordinates1 = getCoord(from);\n  var coordinates2 = getCoord(to);\n  var dLat = degreesToRadians(coordinates2[1] - coordinates1[1]);\n  var dLon = degreesToRadians(coordinates2[0] - coordinates1[0]);\n  var lat1 = degreesToRadians(coordinates1[1]);\n  var lat2 = degreesToRadians(coordinates2[1]);\n\n  var a =\n    Math.pow(Math.sin(dLat / 2), 2) +\n    Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n\n  return radiansToLength(\n    2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)),\n    options.units\n  );\n}\n\nexport { distance };\nexport default distance;\n", "import { Feature, Point } from \"geojson\";\nimport { bearing } from \"@turf/bearing\";\nimport { destination } from \"@turf/destination\";\nimport { distance } from \"@turf/distance\";\nimport { Coord } from \"@turf/helpers\";\n\n/**\n * Takes two points and returns a point midway between them. The midpoint is\n * calculated geodesically, meaning the curvature of the earth is taken into\n * account.\n *\n * @function\n * @param {Coord} point1 first point\n * @param {Coord} point2 second point\n * @returns {Feature<Point>} a point midway between `pt1` and `pt2`\n * @example\n * const point1 = turf.point([144.834823, -37.771257]);\n * const point2 = turf.point([145.14244, -37.830937]);\n *\n * const midpoint = turf.midpoint(point1, point2);\n *\n * //addToMap\n * const addToMap = [point1, point2, midpoint];\n * midpoint.properties['marker-color'] = '#f00';\n */\nfunction midpoint(point1: Coord, point2: Coord): Feature<Point> {\n  const dist = distance(point1, point2);\n  const heading = bearing(point1, point2);\n  const midpoint = destination(point1, dist / 2, heading);\n\n  return midpoint;\n}\n\nexport { midpoint };\nexport default midpoint;\n", "import { midPoint, distance, squaredDistance, conformLineString, conformRing, bboxToRectangle } from '@allmaps/stdlib';\n// About Refinement Functions:\n//\n// Refinement function are used both in forward and backward transformation\n// and are the generalised approach to refine lineStrings, rings etc.\n// when they are transformed using a (forward or backward) 'refinement function'.\n//\n// See the way refinement methods are called:\n// with a different refinementFunction and refinementOptions for the forward and backward case.\n//\n// The concepts of 'source' and 'destination' for refinement methods\n// might therefore differ from the from the transform methods that called them.\n// For forward transform methods, 'source' and 'destination' in the refinement context\n// are the same as in their original transform context.\n// For backward transform methods, they are inversed.\n// Hence, in the refinement contect we always act source > destination.\nexport const defaultRefinementOptions = {\n    maxDepth: 0,\n    minOffsetRatio: 0,\n    minOffsetDistance: Infinity,\n    minLineDistance: Infinity,\n    sourceMidPointFunction: midPoint,\n    destinationMidPointFunction: midPoint,\n    destinationDistanceFunction: distance\n};\n// Refine Geometries\nexport function refineLineString(lineString, refinementFunction, refinementOptions) {\n    lineString = conformLineString(lineString);\n    const gcps = lineString.map((point) => ({\n        source: point,\n        destination: refinementFunction(point)\n    }));\n    const gcpLines = gcpsToGcpLines(gcps, false);\n    const refinedGcpLines = gcpLines\n        .map((gcpLine) => splitGcpLineRecursively(gcpLine, refinementFunction, refinementOptions, 0))\n        .flat(1);\n    return gcpLinesToGcps(refinedGcpLines, true);\n}\nexport function refineRing(ring, refinementFunction, refinementOptions) {\n    ring = conformRing(ring);\n    const gcps = ring.map((point) => ({\n        source: point,\n        destination: refinementFunction(point)\n    }));\n    const gcpLines = gcpsToGcpLines(gcps, true);\n    const refinedGcpLines = gcpLines\n        .map((line) => splitGcpLineRecursively(line, refinementFunction, refinementOptions, 0))\n        .flat(1);\n    return gcpLinesToGcps(refinedGcpLines, false);\n}\nfunction splitGcpLineRecursively(gcpLine, refinementFunction, refinementOptions, depth) {\n    const newMidGcp = newMidGcpIfShouldSplitGcpLine(gcpLine, refinementFunction, refinementOptions, depth);\n    if (newMidGcp) {\n        return [\n            splitGcpLineRecursively([gcpLine[0], newMidGcp], refinementFunction, refinementOptions, depth + 1),\n            splitGcpLineRecursively([newMidGcp, gcpLine[1]], refinementFunction, refinementOptions, depth + 1)\n        ].flat(1);\n    }\n    else {\n        return [gcpLine];\n    }\n}\n// Should split line\n// This function checks if a GcpLine should be splits\n// and returns the new midGcp if so, or undefined otherwise\nexport function newMidGcpIfShouldSplitGcpLine(gcpLine, refinementFunction, refinementOptions, depth) {\n    if (depth >= refinementOptions.maxDepth || refinementOptions.maxDepth <= 0) {\n        return undefined;\n    }\n    const { sourceMidPoint, destinationMidPointFromRefinementFunction, destinationMidPointsDistance, destinationLineDistance, destinationRefinedLineDistance } = splitGcpLinePointInfo(gcpLine, refinementFunction, refinementOptions);\n    const shouldSplit = shouldSplitGcpLine({\n        destinationMidPointsDistance,\n        destinationLineDistance,\n        destinationRefinedLineDistance\n    }, refinementOptions);\n    return shouldSplit\n        ? {\n            source: sourceMidPoint,\n            destination: destinationMidPointFromRefinementFunction\n        }\n        : undefined;\n}\nfunction splitGcpLinePointInfo(gcpLine, refinementFunction, refinementOptions) {\n    const sourceMidPoint = refinementOptions.sourceMidPointFunction(gcpLine[0].source, gcpLine[1].source);\n    const destinationMidPoint = refinementOptions.destinationMidPointFunction(gcpLine[0].destination, gcpLine[1].destination);\n    const destinationMidPointFromRefinementFunction = refinementFunction(sourceMidPoint);\n    const destinationLineDistance = refinementOptions.destinationDistanceFunction(gcpLine[0].destination, gcpLine[1].destination);\n    const destinationRefinedLineDistance = refinementOptions.destinationDistanceFunction(refinementFunction(gcpLine[0].source), refinementFunction(gcpLine[1].source));\n    const destinationMidPointsDistance = refinementOptions.destinationDistanceFunction(destinationMidPoint, destinationMidPointFromRefinementFunction);\n    return {\n        sourceMidPoint,\n        destinationMidPointFromRefinementFunction,\n        destinationMidPointsDistance,\n        destinationLineDistance,\n        destinationRefinedLineDistance\n    };\n}\nfunction shouldSplitGcpLine({ destinationMidPointsDistance, destinationLineDistance, destinationRefinedLineDistance }, refinementOptions) {\n    return (destinationMidPointsDistance / destinationLineDistance >\n        refinementOptions.minOffsetRatio ||\n        destinationMidPointsDistance > refinementOptions.minOffsetDistance ||\n        destinationRefinedLineDistance > refinementOptions.minLineDistance);\n}\n// Get source refinement resolution\nexport function getSourceRefinementResolution(sourceBbox, refinementFunction, refinementOptions) {\n    const sourceRectangle = bboxToRectangle(sourceBbox);\n    const sourcePointNE = sourceRectangle[2];\n    const sourcePointNW = sourceRectangle[3];\n    const sourcePointSE = sourceRectangle[1];\n    const sourcePointSW = sourceRectangle[0];\n    const sourcePointCE = refinementOptions.sourceMidPointFunction(sourcePointNE, sourcePointSE);\n    const sourcePointCW = refinementOptions.sourceMidPointFunction(sourcePointNW, sourcePointSW);\n    const sourcePointNC = refinementOptions.sourceMidPointFunction(sourcePointNE, sourcePointNW);\n    const sourcePointSC = refinementOptions.sourceMidPointFunction(sourcePointSE, sourcePointSW);\n    // Get horizontal and vertical lines from points\n    const sourceHorizontalLine = [sourcePointCE, sourcePointCW];\n    const sourceVerticalLine = [sourcePointNC, sourcePointSC];\n    // Refine lines\n    const sourceRefinedHorizontalLineString = refineLineString(sourceHorizontalLine, refinementFunction, refinementOptions).map((generalGcp) => generalGcp.source);\n    const sourceRefinedVerticalLineString = refineLineString(sourceVerticalLine, refinementFunction, refinementOptions).map((generalGcp) => generalGcp.source);\n    if (sourceRefinedHorizontalLineString.length === 2 &&\n        sourceRefinedVerticalLineString.length === 2) {\n        return undefined;\n    }\n    // Compute minimal line length of refinement\n    const sourceMinHorizontalLineSquaredLengths = [];\n    for (let i = 0; i < sourceRefinedHorizontalLineString.length - 1; i++) {\n        sourceMinHorizontalLineSquaredLengths.push(squaredDistance(sourceRefinedHorizontalLineString[i], sourceRefinedHorizontalLineString[i + 1]));\n    }\n    const sourceMinHorizontalLineLength = Math.sqrt(Math.min(...sourceMinHorizontalLineSquaredLengths));\n    const sourceMinVerticalLineSquaredLengths = [];\n    for (let i = 0; i < sourceRefinedVerticalLineString.length - 1; i++) {\n        sourceMinVerticalLineSquaredLengths.push(squaredDistance(sourceRefinedVerticalLineString[i], sourceRefinedVerticalLineString[i + 1]));\n    }\n    const sourceMinVerticalLineLength = Math.sqrt(Math.min(...sourceMinVerticalLineSquaredLengths));\n    // Compute cols and rows by comparing minimal line length to original length\n    // Note: Tried to acchieve this by working with unflattened refined line and computing depth\n    // but that proved difficult for TypeScript\n    const sourceMinLineLength = Math.min(sourceMinHorizontalLineLength, sourceMinVerticalLineLength);\n    return sourceMinLineLength;\n}\n// Convert\nexport function gcpsToGcpLines(gcps, close = false) {\n    const lineCount = gcps.length - (close ? 0 : 1);\n    const lines = [];\n    for (let index = 0; index < lineCount; index++) {\n        lines.push([gcps[index], gcps[(index + 1) % gcps.length]]);\n    }\n    return lines;\n}\nexport function gcpLinesToGcps(lines, close = false) {\n    const gcps = lines.map((line) => line[0]);\n    if (close) {\n        gcps.push(lines[lines.length - 1][1]);\n    }\n    return gcps;\n}\n", "// TODO: consider implementing these functions in stdlib instead of using dependencies\nimport getWorldMidpoint from '@turf/midpoint';\nimport getWorldDistance from '@turf/distance';\nimport { mergeOptions } from '@allmaps/stdlib';\nimport { defaultRefinementOptions } from './refinement-functions.js';\n// Options\nexport const defaultGeneralGcpTransformOptions = {\n    maxDepth: 0,\n    minOffsetRatio: 0,\n    minOffsetDistance: Infinity,\n    minLineDistance: Infinity,\n    sourceIsGeographic: false,\n    destinationIsGeographic: false,\n    isMultiGeometry: false,\n    distortionMeasures: [],\n    referenceScale: 1,\n    preForward: (point) => point,\n    postForward: (point) => point,\n    preBackward: (point) => point,\n    postBackward: (point) => point\n};\nexport const defaultGeneralGcpTransformerOptions = {\n    differentHandedness: false,\n    ...defaultGeneralGcpTransformOptions\n};\nexport function gcpTransformOptionsToGeneralGcpTransformOptions(gcpTransformOptions) {\n    if (gcpTransformOptions === undefined) {\n        return {};\n    }\n    const generalGcpTransformOptions = gcpTransformOptions;\n    if (gcpTransformOptions.geoIsGeographic) {\n        generalGcpTransformOptions.destinationIsGeographic =\n            gcpTransformOptions.geoIsGeographic;\n    }\n    if (gcpTransformOptions.postToGeo) {\n        generalGcpTransformOptions.postForward = gcpTransformOptions.postToGeo;\n    }\n    if (gcpTransformOptions.preToResource) {\n        generalGcpTransformOptions.preBackward = gcpTransformOptions.preToResource;\n    }\n    return generalGcpTransformOptions;\n}\nexport function gcpTransformerOptionsToGeneralGcpTransformerOptions(gcpTransformerOptions) {\n    if (gcpTransformerOptions === undefined) {\n        return {};\n    }\n    // Note: None of the transformer options need to be adapted\n    // only the transform options that could be included in them\n    const generalGcpTransformerOptions = gcpTransformOptionsToGeneralGcpTransformOptions(gcpTransformerOptions);\n    return generalGcpTransformerOptions;\n}\nexport function generalGcpTransformOptionsToGcpTransformOptions(generalGcpTransformOptions) {\n    if (generalGcpTransformOptions === undefined) {\n        return {};\n    }\n    const gcpTransformOptions = generalGcpTransformOptions;\n    if (generalGcpTransformOptions.destinationIsGeographic) {\n        gcpTransformOptions.geoIsGeographic =\n            generalGcpTransformOptions.destinationIsGeographic;\n    }\n    if (generalGcpTransformOptions.postForward) {\n        gcpTransformOptions.postToGeo = generalGcpTransformOptions.postForward;\n    }\n    if (generalGcpTransformOptions.preBackward) {\n        gcpTransformOptions.preToResource = generalGcpTransformOptions.preBackward;\n    }\n    return gcpTransformOptions;\n}\nexport function generalGcpTransformerOptionsToGcpTransformerOptions(generalGcpTransformerOptions) {\n    if (generalGcpTransformerOptions == undefined) {\n        return {};\n    }\n    const gcpTransformerOptions = generalGcpTransformerOptions;\n    return gcpTransformerOptions;\n}\nexport const defaultGcpTransformOptions = generalGcpTransformOptionsToGcpTransformOptions(defaultGeneralGcpTransformOptions);\nexport const defaultGcpTransformerOptions = generalGcpTransformerOptionsToGcpTransformerOptions(defaultGeneralGcpTransformerOptions);\nexport function refinementOptionsFromForwardTransformOptions(generalGcpTransformOptions) {\n    const refinementOptions = mergeOptions(defaultRefinementOptions, {\n        minOffsetRatio: generalGcpTransformOptions.minOffsetRatio,\n        minOffsetDistance: generalGcpTransformOptions.minOffsetDistance,\n        minLineDistance: generalGcpTransformOptions.minLineDistance,\n        maxDepth: generalGcpTransformOptions.maxDepth\n    });\n    if (generalGcpTransformOptions.sourceIsGeographic) {\n        refinementOptions.sourceMidPointFunction = (point0, point1) => getWorldMidpoint(point0, point1).geometry.coordinates;\n    }\n    if (generalGcpTransformOptions.destinationIsGeographic) {\n        refinementOptions.destinationMidPointFunction = (point0, point1) => getWorldMidpoint(point0, point1).geometry.coordinates;\n        refinementOptions.destinationDistanceFunction = getWorldDistance;\n    }\n    return refinementOptions;\n}\nexport function refinementOptionsFromBackwardTransformOptions(generalGcpTransformOptions) {\n    const refinementOptions = mergeOptions(defaultRefinementOptions, {\n        minOffsetRatio: generalGcpTransformOptions.minOffsetRatio,\n        minOffsetDistance: generalGcpTransformOptions.minOffsetDistance,\n        minLineDistance: generalGcpTransformOptions.minLineDistance,\n        maxDepth: generalGcpTransformOptions.maxDepth\n    });\n    if (generalGcpTransformOptions.destinationIsGeographic) {\n        refinementOptions.sourceMidPointFunction = (point0, point1) => getWorldMidpoint(point0, point1).geometry.coordinates;\n    }\n    if (generalGcpTransformOptions.sourceIsGeographic) {\n        refinementOptions.destinationMidPointFunction = (point0, point1) => getWorldMidpoint(point0, point1).geometry.coordinates;\n        refinementOptions.destinationDistanceFunction = getWorldDistance;\n    }\n    return refinementOptions;\n}\n", "// Invert\nexport function invertGeneralGcp(generalGcp) {\n    return { source: generalGcp.destination, destination: generalGcp.source };\n}\nexport function invertGcp(gcp) {\n    return { resource: gcp.geo, geo: gcp.resource };\n}\n// Select\nexport function generalGcpToPointForForward(generalGcp) {\n    return generalGcp.destination;\n}\nexport function generalGcpToPointForBackward(generalGcp) {\n    return generalGcp.source;\n}\nexport function gcpToPointForToGeo(gcp) {\n    return gcp.geo;\n}\nexport function gcpToPointForToResource(gcp) {\n    return gcp.resource;\n}\n// GeneralGcp <> G\nexport function generalGcpToGcp(generalGcp) {\n    return {\n        resource: generalGcp.source,\n        geo: generalGcp.destination,\n        partialDerivativeX: generalGcp.partialDerivativeX,\n        partialDerivativeY: generalGcp.partialDerivativeY,\n        distortions: generalGcp.distortions,\n        distortion: generalGcp.distortion\n    };\n}\nexport function gcpToGeneralGcp(gcp) {\n    return {\n        source: gcp.resource,\n        destination: gcp.geo,\n        partialDerivativeX: gcp.partialDerivativeX,\n        partialDerivativeY: gcp.partialDerivativeY,\n        distortions: gcp.distortions,\n        distortion: gcp.distortion\n    };\n}\n", "import { isPoint, isLineString, isPolygon, isMultiPoint, isMultiLineString, isMultiPolygon, flipY, mergeOptions } from '@allmaps/stdlib';\nimport { computeDistortionsFromPartialDerivatives } from '../shared/distortion.js';\nimport { Straight } from '../transformation-types/Straight.js';\nimport { Helmert } from '../transformation-types/Helmert.js';\nimport { Polynomial1 } from '../transformation-types/Polynomial1.js';\nimport { Polynomial2 } from '../transformation-types/Polynomial2.js';\nimport { Polynomial3 } from '../transformation-types/Polynomial3.js';\nimport { Projective } from '../transformation-types/Projective.js';\nimport { RBF } from '../transformation-types/RBF.js';\nimport { linearKernel, thinPlateKernel } from '../shared/kernel-functions.js';\nimport { euclideanNorm } from '../shared/norm-functions.js';\nimport { defaultGeneralGcpTransformerOptions, refinementOptionsFromBackwardTransformOptions, refinementOptionsFromForwardTransformOptions } from '../shared/transform-functions.js';\nimport { refineLineString, refineRing, getSourceRefinementResolution } from '../shared/refinement-functions.js';\nimport { generalGcpToPointForForward, generalGcpToPointForBackward, invertGeneralGcp } from '../shared/conversion-functions.js';\n/**\n * Abstract class for Ground Control Point Transformers.\n *\n * This class contains all logic to transform geometries\n * made available trough the GeneralGcpTransform and GcpTransform classes.\n *\n * The extending GeneralGcpTransform class handles the general case where:\n * - We read in Ground Control Points using the GeneralGcp type, with `source` and `destination` fields.\n * - We use the terms 'forward' and 'backward' for the two transformations.\n * - Both source and destination space are exected to be 2D cartesian spaces with the same handedness (x- and y-axes have the same orientations).\n *\n * The extending GcpTransform class handles the typical Allmaps case where:\n * - We read in Ground Control Points using the Gcp type, with `resource` and `geo` fields.\n * - We use the terms 'toGeo' for the 'forward' transformation and 'toResource' for the 'backward' transformation.\n * - The `differentHandedness` setting is `true` by default, since we expect the resource coordinates to identify pixels on an image, with origin in the top left and the y-axis pointing down.\n * */\nexport class BaseGcpTransformer {\n    generalGcpsInternal;\n    sourcePointsInternal;\n    destinationPointsInternal;\n    type;\n    transformerOptions;\n    forwardTransformation;\n    backwardTransformation;\n    /**\n     * Create a BaseGcpTransformer\n     *\n     * @param generalGcps - An array of General Ground Control Points (GCPs)\n     * @param type - The transformation type\n     * @param partialGeneralGcpTransformerOptions - General GCP Transformer options\n     */ constructor(generalGcps, type = 'polynomial', partialGeneralGcpTransformerOptions) {\n        this.transformerOptions = mergeOptions(defaultGeneralGcpTransformerOptions, partialGeneralGcpTransformerOptions);\n        if (generalGcps.length === 0) {\n            throw new Error('No control points');\n        }\n        this.generalGcpsInternal = generalGcps;\n        this.sourcePointsInternal = this.generalGcpsInternal.map((generalGcp) => {\n            const source = this.transformerOptions.differentHandedness\n                ? flipY(generalGcp.source)\n                : generalGcp.source;\n            return this.transformerOptions.preForward(source);\n        });\n        this.destinationPointsInternal = this.generalGcpsInternal.map((generalGcp) => this.transformerOptions.preBackward(generalGcp.destination));\n        this.type = type;\n    }\n    /**\n     * Get the forward transformation. Create if it doesn't exist yet.\n     */\n    getForwardTransformationInternal() {\n        if (!this.forwardTransformation) {\n            this.forwardTransformation = this.createTransformation(this.sourcePointsInternal, this.destinationPointsInternal);\n        }\n        return this.forwardTransformation;\n    }\n    /**\n     * Get the backward transformation. Create if it doesn't exist yet.\n     */\n    getBackwardTransformationInternal() {\n        if (!this.backwardTransformation) {\n            this.backwardTransformation = this.createTransformation(this.destinationPointsInternal, this.sourcePointsInternal);\n        }\n        return this.backwardTransformation;\n    }\n    /**\n     * Create the (forward or backward) transformation.\n     *\n     * Results in forward transformation if source and destination points are entered as such.\n     * Results in backward if source points are entered for destination points and vice versa.\n     *\n     * Results in a transformation of this instance's transformation type.\n     *\n     * @param sourcePoints - source points\n     * @param destinationPoints - destination points\n     * @returns Transformation\n     */\n    createTransformation(sourcePoints, destinationPoints) {\n        if (this.type === 'straight') {\n            return new Straight(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'helmert') {\n            return new Helmert(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'polynomial1' || this.type === 'polynomial') {\n            return new Polynomial1(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'polynomial2') {\n            return new Polynomial2(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'polynomial3') {\n            return new Polynomial3(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'projective') {\n            return new Projective(sourcePoints, destinationPoints);\n        }\n        else if (this.type === 'thinPlateSpline') {\n            return new RBF(sourcePoints, destinationPoints, thinPlateKernel, euclideanNorm, 'thinPlateSpline');\n        }\n        else if (this.type === 'linear') {\n            return new RBF(sourcePoints, destinationPoints, linearKernel, euclideanNorm, 'linear');\n        }\n        else {\n            throw new Error(`Unsupported transformation type: ${this.type}`);\n        }\n    }\n    /**\n     * Get the resolution of the forward transformation in source space, within a given bbox.\n     *\n     * This informs you in how fine the warping is, in source space.\n     * It can be useful e.g. to create a triangulation in source space\n     * that is fine enough for this warping.\n     *\n     * It is obtained by transforming forward two linestring,\n     * namely the horizontal and vertical midlines of the given bbox.\n     * The forward transformation will refine these lines:\n     * it will break them in small enough pieces to obtain a near continuous result.\n     * Returned in the length of the shortest piece, measured in source coordinates.\n     *\n     * @param sourceBbox - BBox in source space where the resolution is requested\n     * @param partialGeneralGcpTransformOptions - General GCP Transform options to consider during the transformation\n     * @returns Resolution of the forward transformation in source space\n     */\n    getForwardTransformationResolutionInternal(sourceBbox, partialGeneralGcpTransformOptions) {\n        const transformOptions = mergeOptions(this.transformerOptions, partialGeneralGcpTransformOptions);\n        return getSourceRefinementResolution(sourceBbox, (p) => this.transformForwardInternal(p, transformOptions), refinementOptionsFromForwardTransformOptions(transformOptions));\n    }\n    /**\n     * Get the resolution of the backward transformation in destination space, within a given bbox.\n     *\n     * This informs you in how fine the warping is, in destination space.\n     * It can be useful e.g. to create a triangulation in destination space\n     * that is fine enough for this warping.\n     *\n     * It is obtained by transforming backward two linestring,\n     * namely the horizontal and vertical midlines of the given bbox.\n     * The backward transformation will refine these lines:\n     * it will break them in small enough pieces to obtain a near continuous result.\n     * Returned in the length of the shortest piece, measured in destination coordinates.\n     *\n     * @param destinationBbox - BBox in destination space where the resolution is requested\n     * @param partialGeneralGcpTransformOptions - General GCP Transform options to consider during the transformation\n     * @returns Resolution of the backward transformation in destination space\n     */\n    getBackwardTransformationResolutionInternal(destinationBbox, partialGeneralGcpTransformOptions) {\n        const transformOptions = mergeOptions(this.transformerOptions, partialGeneralGcpTransformOptions);\n        return getSourceRefinementResolution(destinationBbox, (p) => this.transformBackwardInternal(p, transformOptions), refinementOptionsFromBackwardTransformOptions(transformOptions));\n    }\n    /**\n     * Transform a geometry forward\n     *\n     * @param geometry - Geometry to transform\n     * @param partialGeneralGcpTransformOptions - General GCP Transform options\n     * @param generalGcpToP - Return type function\n     * @returns Forward transform of input geometry\n     */\n    transformForwardInternal(geometry, partialGeneralGcpTransformOptions, generalGcpToP = generalGcpToPointForForward) {\n        const transformOptions = mergeOptions(this.transformerOptions, partialGeneralGcpTransformOptions);\n        if (!transformOptions.isMultiGeometry) {\n            if (isPoint(geometry)) {\n                return this.transformPointForwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else if (isLineString(geometry)) {\n                return this.transformLineStringForwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else if (isPolygon(geometry)) {\n                return this.transformPolygonForwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else {\n                throw new Error('Geometry type not supported');\n            }\n        }\n        else {\n            if (partialGeneralGcpTransformOptions) {\n                partialGeneralGcpTransformOptions.isMultiGeometry = false; // false for piecewise single geometries\n            }\n            if (isMultiPoint(geometry)) {\n                return geometry.map((element) => this.transformForwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else if (isMultiLineString(geometry)) {\n                return geometry.map((element) => this.transformForwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else if (isMultiPolygon(geometry)) {\n                return geometry.map((element) => this.transformForwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else {\n                throw new Error('Geometry type not supported');\n            }\n        }\n    }\n    /**\n     * Transform a geometry backward\n     *\n     * @param geometry - Geometry to transform\n     * @param partialGeneralGcpTransformOptions - General GCP Transform options\n     * @param generalGcpToP - Return type function\n     * @returns Backward transform of input geometry\n     */\n    transformBackwardInternal(geometry, partialGeneralGcpTransformOptions, generalGcpToP = generalGcpToPointForBackward) {\n        const transformOptions = mergeOptions(this.transformerOptions, partialGeneralGcpTransformOptions);\n        if (!transformOptions.isMultiGeometry) {\n            if (isPoint(geometry)) {\n                return this.transformPointBackwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else if (isLineString(geometry)) {\n                return this.transformLineStringBackwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else if (isPolygon(geometry)) {\n                return this.transformPolygonBackwardInternal(geometry, transformOptions, generalGcpToP);\n            }\n            else {\n                throw new Error('Geometry type not supported');\n            }\n        }\n        else {\n            if (partialGeneralGcpTransformOptions) {\n                partialGeneralGcpTransformOptions.isMultiGeometry = false; // false for piecewise single geometries\n            }\n            if (isMultiPoint(geometry)) {\n                return geometry.map((element) => this.transformBackwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else if (isMultiLineString(geometry)) {\n                return geometry.map((element) => this.transformBackwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else if (isMultiPolygon(geometry)) {\n                return geometry.map((element) => this.transformBackwardInternal(element, partialGeneralGcpTransformOptions, generalGcpToP));\n            }\n            else {\n                throw new Error('Geometry type not supported');\n            }\n        }\n    }\n    // Handle specific geometries\n    transformPointForwardInternal(point, generalGcpTransformOptions, generalGcpToP = generalGcpToPointForForward) {\n        const forwardTransformation = this.getForwardTransformationInternal();\n        let source = this.transformerOptions.differentHandedness\n            ? flipY(point)\n            : point;\n        source = generalGcpTransformOptions.preForward(source);\n        let destination = forwardTransformation.evaluateFunction(source);\n        destination = generalGcpTransformOptions.postForward(destination);\n        let partialDerivativeX = undefined;\n        let partialDerivativeY = undefined;\n        let distortions = new Map();\n        if (generalGcpTransformOptions.distortionMeasures.length > 0) {\n            partialDerivativeX =\n                forwardTransformation.evaluatePartialDerivativeX(source);\n            partialDerivativeY =\n                forwardTransformation.evaluatePartialDerivativeY(source);\n            distortions = computeDistortionsFromPartialDerivatives(generalGcpTransformOptions.distortionMeasures, partialDerivativeX, partialDerivativeY, generalGcpTransformOptions.referenceScale);\n        }\n        return generalGcpToP({\n            source: point, // don't apply differentHandedness here, this is only internally.\n            destination,\n            partialDerivativeX,\n            partialDerivativeY,\n            distortions\n        });\n    }\n    transformPointBackwardInternal(point, generalGcpTransformOptions, generalGcpToP = generalGcpToPointForBackward) {\n        const backwardTransformation = this.getBackwardTransformationInternal();\n        const destination = generalGcpTransformOptions.preBackward(point);\n        let source = backwardTransformation.evaluateFunction(destination);\n        // apply differentHandedness here again, so it has been applied twice in total and is undone now.\n        source = generalGcpTransformOptions.postBackward(source);\n        source = this.transformerOptions.differentHandedness\n            ? flipY(source)\n            : source;\n        let partialDerivativeX = undefined;\n        let partialDerivativeY = undefined;\n        let distortions = new Map();\n        if (generalGcpTransformOptions.distortionMeasures.length > 0) {\n            partialDerivativeX =\n                backwardTransformation.evaluatePartialDerivativeX(destination);\n            partialDerivativeX = this.transformerOptions.differentHandedness\n                ? flipY(partialDerivativeX)\n                : partialDerivativeX;\n            partialDerivativeY =\n                backwardTransformation.evaluatePartialDerivativeY(destination);\n            partialDerivativeY = this.transformerOptions.differentHandedness\n                ? flipY(partialDerivativeY)\n                : partialDerivativeY;\n            distortions = computeDistortionsFromPartialDerivatives(generalGcpTransformOptions.distortionMeasures, partialDerivativeX, partialDerivativeY, generalGcpTransformOptions.referenceScale);\n        }\n        return generalGcpToP({\n            source,\n            destination,\n            partialDerivativeX,\n            partialDerivativeY,\n            distortions\n        });\n    }\n    transformLineStringForwardInternal(lineString, generalGcpTransformOptions, generalGcpToP) {\n        return refineLineString(lineString, (p) => this.transformPointForwardInternal(p, generalGcpTransformOptions), refinementOptionsFromForwardTransformOptions(generalGcpTransformOptions)).map((generalGcp) => generalGcpToP(generalGcp));\n    }\n    transformLineStringBackwardInternal(lineString, generalGcpTransformOptions, generalGcpToP) {\n        return refineLineString(lineString, (p) => this.transformPointBackwardInternal(p, generalGcpTransformOptions), refinementOptionsFromBackwardTransformOptions(generalGcpTransformOptions)).map((generalGcp) => generalGcpToP(invertGeneralGcp(generalGcp)));\n    }\n    transformRingForwardInternal(ring, generalGcpTransformOptions, generalGcpToP) {\n        return refineRing(ring, (p) => this.transformPointForwardInternal(p, generalGcpTransformOptions), refinementOptionsFromForwardTransformOptions(generalGcpTransformOptions)).map((generalGcp) => generalGcpToP(generalGcp));\n    }\n    transformRingBackwardInternal(ring, generalGcpTransformOptions, generalGcpToP) {\n        return refineRing(ring, (p) => this.transformPointBackwardInternal(p, generalGcpTransformOptions), refinementOptionsFromBackwardTransformOptions(generalGcpTransformOptions)).map((generalGcp) => generalGcpToP(invertGeneralGcp(generalGcp)));\n    }\n    transformPolygonForwardInternal(polygon, generalGcpTransformOptions, generalGcpToP) {\n        return polygon.map((ring) => {\n            return this.transformRingForwardInternal(ring, generalGcpTransformOptions, generalGcpToP);\n        });\n    }\n    transformPolygonBackwardInternal(polygon, generalGcpTransformOptions, generalGcpToP) {\n        return polygon.map((ring) => {\n            return this.transformRingBackwardInternal(ring, generalGcpTransformOptions, generalGcpToP);\n        });\n    }\n}\n", "import { geojsonGeometryToGeometry, geojsonGeometriesToGeojsonFeatureCollection, geojsonFeatureCollectionToGeojsonGeometries, geometryToGeojsonGeometry, geometryToSvgGeometry, stringToSvgGeometriesGenerator, svgGeometriesToSvgString, svgGeometryToGeometry, mergePartialOptions, mergeOptions } from '@allmaps/stdlib';\nimport { BaseGcpTransformer } from './BaseGcpTransformer.js';\nimport { gcpTransformerOptionsToGeneralGcpTransformerOptions, gcpTransformOptionsToGeneralGcpTransformOptions } from '../shared/transform-functions.js';\nimport { gcpToGeneralGcp, gcpToPointForToGeo, gcpToPointForToResource, generalGcpToGcp } from '../shared/conversion-functions.js';\n/**\n * Class for Ground Control Point Transformers.\n *\n * A GCP Transformer can transform input geometries between 'resource' and 'geo' spaces.\n *\n * It does this using a transformation (of a certain type) built from\n * a set of Ground Control Points (with coordinates in\n * resource and geo space) and a transformation type.\n *\n * It has a method to transform 'toGeo' (from resource to geo space)\n * and 'toResource' (from geo to resource space),\n *\n * This class differs from the GeneralGcpTransformer class in that\n * it specifically handles the typical Allmaps case where:\n * - We read in Ground Control Points using the Gcp type, with `resource` and `geo` fields.\n * - We use the terms 'toGeo' for the 'forward' transformation and 'toResource' for the 'backward' transformation.\n * - The `differentHandedness` setting is `true` by default, since we expect the resource coordinates to identify pixels on an image, with origin in the top left and the y-axis pointing down.\n * */\nexport class GcpTransformer extends BaseGcpTransformer {\n    /**\n     * Create a GcpTransformer\n     *\n     * @param gcps - An array of Ground Control Points (GCPs)\n     * @param type - The transformation type\n     * @param partialGcpTransformerOptions - GCP Transformer options\n     */ constructor(gcps, type = 'polynomial', partialGcpTransformerOptions) {\n        const generalGcps = gcps.map(gcpToGeneralGcp);\n        partialGcpTransformerOptions = mergePartialOptions({ differentHandedness: true }, partialGcpTransformerOptions);\n        super(generalGcps, type, gcpTransformerOptionsToGeneralGcpTransformerOptions(partialGcpTransformerOptions));\n    }\n    get gcps() {\n        return this.generalGcpsInternal.map(generalGcpToGcp);\n    }\n    /**\n     * Get the forward transformation. Create if it doesn't exist yet.\n     */\n    getToGeoTransformation() {\n        return super.getForwardTransformationInternal();\n    }\n    /**\n     * Get the backward transformation. Create if it doesn't exist yet.\n     */\n    getToResourceTransformation() {\n        return super.getBackwardTransformationInternal();\n    }\n    /**\n     * Get the resolution of the toGeo transformation in resource space, within a given bbox.\n     *\n     * This informs you in how fine the warping is, in resource space.\n     * It can be useful e.g. to create a triangulation in resource space\n     * that is fine enough for this warping.\n     *\n     * It is obtained by transforming toGeo two linestring,\n     * namely the horizontal and vertical midlines of the given bbox.\n     * The toGeo transformation will refine these lines:\n     * it will break them in small enough pieces to obtain a near continuous result.\n     * Returned in the length of the shortest piece, measured in resource coordinates.\n     *\n     * @param resourceBbox - BBox in resource space where the resolution is requested\n     * @param partialGcpTransformOptions - GCP Transform options to consider during the transformation\n     * @returns Resolution of the toGeo transformation in resource space\n     */\n    getToGeoTransformationResolution(resourceBbox, partialGcpTransformOptions) {\n        const partialGeneralGcpTransformOptions = gcpTransformOptionsToGeneralGcpTransformOptions(partialGcpTransformOptions);\n        return super.getForwardTransformationResolutionInternal(resourceBbox, partialGeneralGcpTransformOptions);\n    }\n    /**\n     * Get the resolution of the toResource transformation in geo space, within a given bbox.\n     *\n     * This informs you in how fine the warping is, in geo space.\n     * It can be useful e.g. to create a triangulation in geo space\n     * that is fine enough for this warping.\n     *\n     * It is obtained by transforming toResource two linestring,\n     * namely the horizontal and vertical midlines of the given bbox.\n     * The toResource transformation will refine these lines:\n     * it will break them in small enough pieces to obtain a near continuous result.\n     * Returned in the length of the shortest piece, measured in geo coordinates.\n     *\n     * @param geoBbox - BBox in geo space where the resolution is requested\n     * @param partialGcpTransformOptions - GCP Transform options to consider during the transformation\n     * @returns Resolution of the toResource transformation in geo space\n     */\n    getToResourceTransformationResolution(geoBbox, partialGcpTransformOptions) {\n        const generalGcpTransformOptions = gcpTransformOptionsToGeneralGcpTransformOptions(partialGcpTransformOptions);\n        return super.getBackwardTransformationResolutionInternal(geoBbox, generalGcpTransformOptions);\n    }\n    /**\n     * Get the transformer options.\n     */\n    getTransformerOptions() {\n        return this.transformerOptions;\n    }\n    /**\n     * Set the transformer options.\n     *\n     * Use with caution, especially for options that have effects in the constructor.\n     */\n    setTransformerOptionsInternal(partialGcpTransformerOptions) {\n        this.transformerOptions = mergeOptions(this.transformerOptions, gcpTransformerOptionsToGeneralGcpTransformerOptions(partialGcpTransformerOptions));\n    }\n    /**\n     * Transform a geometry to geo space\n     *\n     * @param geometry - Geometry to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @param gcpToP - Return type function\n     * @returns Input geometry transformed to geo space\n     */\n    transformToGeo(geometry, partialGcpTransformOptions, gcpToP = gcpToPointForToGeo) {\n        const generalGcpToP = (generalGcp) => gcpToP(generalGcpToGcp(generalGcp));\n        const partialGeneralGcpTransformOptions = partialGcpTransformOptions\n            ? gcpTransformOptionsToGeneralGcpTransformOptions(partialGcpTransformOptions)\n            : undefined;\n        return super.transformForwardInternal(geometry, partialGeneralGcpTransformOptions, generalGcpToP);\n    }\n    /**\n     * Transform a geometry to resource space\n     *\n     * @param geometry - Geometry to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @param gcpToP - Return type function\n     * @returns Input geometry transformed to resource space\n     */\n    transformToResource(geometry, partialGcpTransformOptions, gcpToP = gcpToPointForToResource) {\n        const generalGcpToP = (generalGcp) => gcpToP(generalGcpToGcp(generalGcp));\n        const partialGeneralGcpTransformOptions = partialGcpTransformOptions\n            ? gcpTransformOptionsToGeneralGcpTransformOptions(partialGcpTransformOptions)\n            : undefined;\n        return super.transformBackwardInternal(geometry, partialGeneralGcpTransformOptions, generalGcpToP);\n    }\n    /**\n     * Transform an SVG geometry to geo space as a GeoJSON Geometry\n     *\n     * This is a shortcut method, available as static method in order not to overpopulate intellisense suggestions\n     * Note: since this converts to GeoJSON we assume geo-space is in lon-lat WGS84 and automatically set `destinationIsGeographic` to use geographically computed midpoints.\n     * Note: Multi-geometries are not supported\n     *\n     * @param transformer - A GCP Transformer defining the transformation\n     * @param geometry - SVG geometry to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @returns Input SVG geometry transformed to geo space, as a GeoJSON Geometry\n     */\n    static transformSvgToGeojson(transformer, svgGeometry, partialGcpTransformOptions) {\n        partialGcpTransformOptions = mergePartialOptions({ geoIsGeographic: true }, partialGcpTransformOptions);\n        // This middle step is needed to make typescript happy\n        const transformedGeometry = transformer.transformToGeo(svgGeometryToGeometry(svgGeometry), partialGcpTransformOptions);\n        return geometryToGeojsonGeometry(transformedGeometry);\n    }\n    /**\n     * Transform an SVG string to geo space to a GeoJSON FeatureCollection\n     *\n     * This is a shortcut method, available as static method in order not to overpopulate intellisense suggestions\n     * Note: since this converts to GeoJSON we assume geo-space is in lon-lat WGS84 and automatically set `destinationIsGeographic` to use geographically computed midpoints.\n     * Note: Multi-geometries are not supported\n     *\n     * @param transformer - A GCP Transformer defining the transformation\n     * @param svg - An SVG string to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @returns Input SVG string transformed to geo space, as a GeoJSON FeatureCollection\n     */\n    static transformSvgStringToGeojsonFeatureCollection(transformer, svg, partialGcpTransformOptions) {\n        const geojsonGeometries = [];\n        for (const svgGeometry of stringToSvgGeometriesGenerator(svg)) {\n            const geojsonGeometry = this.transformSvgToGeojson(transformer, svgGeometry, partialGcpTransformOptions);\n            geojsonGeometries.push(geojsonGeometry);\n        }\n        return geojsonGeometriesToGeojsonFeatureCollection(geojsonGeometries);\n    }\n    /**\n     * Transform a GeoJSON Geometry to resource space to a SVG geometry\n     *\n     * This is a shortcut method, available as static method in order not to overpopulate intellisense suggestions\n     * Note: since this converts from GeoJSON we assume geo-space is in lon-lat WGS84 and automatically set `destinationIsGeographic` to use geographically computed midpoints.\n     * Note: Multi-geometries are not supported\n     *\n     * @param transformer - A GCP Transformer defining the transformation\n     * @param geojsonGeometry - GeoJSON Geometry to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @returns Input GeoJSON Geometry transform to resource space, as SVG geometry\n     */\n    static transformGeojsonToSvg(transformer, geojsonGeometry, partialGcpTransformOptions) {\n        partialGcpTransformOptions = mergePartialOptions({ geoIsGeographic: true }, partialGcpTransformOptions);\n        // This middle step is needed to make typescript happy\n        const transformedGeometry = transformer.transformToResource(geojsonGeometryToGeometry(geojsonGeometry), partialGcpTransformOptions);\n        return geometryToSvgGeometry(transformedGeometry);\n    }\n    /**\n     * Transform a GeoJSON FeatureCollection to resource space to a SVG string\n     *\n     * This is a shortcut method, available as static method in order not to overpopulate intellisense suggestions\n     * Note: since this converts from GeoJSON we assume geo-space is in lon-lat WGS84 and automatically set `destinationIsGeographic` to use geographically computed midpoints.\n     * Note: Multi-geometries are not supported\n     *\n     * @param transformer - A GCP Transformer defining the transformation\n     * @param geojson - GeoJSON FeatureCollection to transform\n     * @param partialGcpTransformOptions - GCP Transform options\n     * @returns Input GeoJSON FeaturesCollection transformed to resource space, as SVG string\n     */\n    static transformGeojsonFeatureCollectionToSvgString(transformer, geojson, partialGcpTransformOptions) {\n        const svgGeometries = [];\n        for (const geojsonGeometry of geojsonFeatureCollectionToGeojsonGeometries(geojson)) {\n            const svgGeometry = this.transformGeojsonToSvg(transformer, geojsonGeometry, partialGcpTransformOptions);\n            svgGeometries.push(svgGeometry);\n        }\n        return svgGeometriesToSvgString(svgGeometries);\n    }\n    /**\n     * Create a Projected GCP Transformer from a Georeferenced Map\n     *\n     * @param georeferencedMap - A Georeferenced Map\n     * @param options - Options, including GCP Transformer Options, and a transformation type to overrule the type defined in the Georeferenced Map\n     * @returns A Projected GCP Transformer\n     */\n    static fromGeoreferencedMap(georeferencedMap, options) {\n        return new GcpTransformer(georeferencedMap.gcps, options?.transformationType || georeferencedMap.transformation?.type, options);\n    }\n}\n", "// Generated from Luuks color scheme with\n// https://www.colors.tools/tints-and-shades/\nconst black = '#222222';\nconst white = '#ffffff';\nconst inherit = 'inherit';\nconst current = 'currentColor';\nconst transparent = 'transparent';\n// Original color from Luuk's design\nexport const originalColorIndex = 4;\nconst blueShades = [\n    '#dff7fa',\n    '#c0eff5',\n    '#a1e7f0',\n    '#82dfeb',\n    '#63d8e6', // Original color\n    '#4facb8',\n    '#3b818a',\n    '#27565c',\n    '#132b2d'\n];\nconst darkblueShades = [\n    '#d7d9ee',\n    '#b0b4de',\n    '#898ecd',\n    '#6269bd',\n    '#3b44ad', // Original color\n    '#2f368a',\n    '#232867',\n    '#171b45',\n    '#0b0d22'\n];\n// TODO: add dark blue background color\n// '#101655'\nconst purpleShades = [\n    '#f3dcf0',\n    '#e7b9e1',\n    '#dc97d2',\n    '#d074c3',\n    '#c552b5', // Original color\n    '#9d4190',\n    '#76316c',\n    '#4e2048',\n    '#271024'\n];\nconst pinkShades = [\n    '#ffddf1',\n    '#ffbbe3',\n    '#ff99d5',\n    '#ff77c7',\n    '#ff56ba', // Original color\n    '#cc4494',\n    '#99336f',\n    '#66224a',\n    '#321125'\n];\nconst orangeShades = [\n    '#ffe3d0',\n    '#ffc7a1',\n    '#ffab72',\n    '#ff8f43',\n    '#ff7415', // Original color\n    '#cc5c10',\n    '#99450c',\n    '#662e08',\n    '#321704'\n];\nconst redShades = [\n    '#fededf',\n    '#febebf',\n    '#fe9e9f',\n    '#fe7e7f',\n    '#fe5e60', // Original color\n    '#cb4b4c',\n    '#983839',\n    '#652526',\n    '#321213'\n];\nconst greenShades = [\n    '#e0f2e8',\n    '#c1e6d2',\n    '#a2d9bb',\n    '#83cda5',\n    '#64c18f', // Original color\n    '#509a72',\n    '#3c7355',\n    '#284d39',\n    '#13261c'\n];\nconst yellowShades = [\n    '#fff3d9',\n    '#ffe8b3',\n    '#ffdd8d',\n    '#ffd267',\n    '#ffc742', // Original color\n    '#cc9f34',\n    '#997727',\n    '#664f1a',\n    '#32270d'\n];\nconst grayShades = [\n    '#efefef',\n    '#e0e0e0',\n    '#d0d0d0',\n    '#c1c1c1',\n    '#b2b2b2',\n    '#8e8e8e',\n    '#6a6a6a',\n    '#474747',\n    '#232323'\n];\nexport const shades = {\n    blue: blueShades,\n    darkblue: darkblueShades,\n    purple: purpleShades,\n    pink: pinkShades,\n    orange: orangeShades,\n    red: redShades,\n    green: greenShades,\n    yellow: yellowShades,\n    gray: grayShades\n};\nconst blue = blueShades[originalColorIndex];\nconst darkblue = darkblueShades[originalColorIndex];\nconst purple = purpleShades[originalColorIndex];\nconst pink = pinkShades[originalColorIndex];\nconst orange = orangeShades[originalColorIndex];\nconst red = redShades[originalColorIndex];\nconst green = greenShades[originalColorIndex];\nconst yellow = yellowShades[originalColorIndex];\nconst gray = grayShades[originalColorIndex];\nexport { blue, darkblue, purple, pink, orange, red, green, yellow, gray, black, white, inherit, current, transparent };\n", "import { blue, darkblue, purple, pink, orange, red, green, yellow, gray, black, white, inherit, current, transparent, shades } from './colors.js';\nfunction flattenShades(color, shades) {\n    return shades.reduce((flattened, hex, index) => {\n        const shade = (index + 1) * 100;\n        const key = `${color}-${shade}`;\n        flattened[key] = hex;\n        return flattened;\n    }, {});\n}\nexport const themeColors = {\n    blue,\n    darkblue,\n    purple,\n    pink,\n    orange,\n    red,\n    green,\n    yellow,\n    gray,\n    black,\n    white,\n    inherit,\n    current,\n    transparent,\n    // Add shades\n    ...flattenShades('blue', shades.blue),\n    ...flattenShades('darkblue', shades.darkblue),\n    ...flattenShades('purple', shades.purple),\n    ...flattenShades('pink', shades.pink),\n    ...flattenShades('orange', shades.orange),\n    ...flattenShades('red', shades.red),\n    ...flattenShades('green', shades.green),\n    ...flattenShades('yellow', shades.yellow),\n    ...flattenShades('gray', shades.gray)\n};\n", "import { themeColors } from './theme-colors.js';\nexport const theme = {\n    extend: {\n        textColor: {\n            DEFAULT: themeColors.black\n        },\n        transitionDuration: {\n            0: '0ms'\n        }\n    },\n    colors: themeColors,\n    fontFamily: {\n        sans: ['Geograph', 'sans-serif'],\n        // Consider using https://tosche.net/fonts/codelia\n        mono: ['DM Mono', 'monospace']\n    }\n};\n", "export enum WarpedMapEventType {\n  GEOREFERENCEANNOTATIONADDED = 'georeferenceannotationadded',\n  GEOREFERENCEANNOTATIONREMOVED = 'georeferenceannotationremoved',\n\n  WARPEDMAPADDED = 'warpedmapadded',\n  WARPEDMAPREMOVED = 'warpedmapremoved',\n\n  WARPEDMAPENTER = 'warpedmapenter',\n  WARPEDMAPLEAVE = 'warpedmapleave',\n\n  IMAGEINFOLOADED = 'imageinfoloaded',\n\n  TILEFETCHED = 'tilefetched',\n  TILEFETCHERROR = 'tilefetcherror',\n  MAPTILELOADED = 'maptileloaded',\n  MAPTILEREMOVED = 'maptileremoved',\n  FIRSTMAPTILELOADED = 'firstmaptileloaded',\n  ALLREQUESTEDTILESLOADED = 'allrequestedtilesloaded',\n\n  TEXTURESUPDATED = 'texturesupdated',\n\n  PRECHANGE = 'prechange',\n  OPTIONSCHANGED = 'optionschanged',\n  ZINDICESCHANGED = 'zindiceschanged',\n  RESOURCEMASKCHANGED = 'resourcemaskchanged',\n  GCPSCHANGED = 'gcpschanged',\n  VISIBILITYCHANGED = 'visibilitychanged',\n  TRANSFORMATIONCHANGED = 'transformationchanged',\n  DISTORTIONCHANGED = 'distortionchanged',\n  INTERNALPROJECTIONCHANGED = 'internalprojectionchanged',\n  PROJECTIONCHANGED = 'projectionchanged',\n\n  CHANGED = 'changed',\n\n  CLEARED = 'cleared'\n}\n\nexport type WarpedMapTileEventDetail = {\n  mapId: string\n  tileUrl: string\n}\n\nexport class WarpedMapEvent extends Event {\n  data?: unknown\n\n  constructor(type: WarpedMapEventType, data?: unknown) {\n    super(type)\n\n    this.data = data\n  }\n}\n", "import {\n  distance,\n  doBboxesIntersect,\n  bufferBboxByRatio,\n  squaredDistance,\n  sizeToResolution\n} from '@allmaps/stdlib'\nimport { MapPruneConstants, MapPruneInfo } from './types'\nimport { FetchableTile } from '../tilecache/FetchableTile'\n\nimport type { Image } from '@allmaps/iiif-parser'\nimport type {\n  Point,\n  Line,\n  Ring,\n  Bbox,\n  Tile,\n  Size,\n  TileZoomLevel,\n  TileByColumn\n} from '@allmaps/types'\n\n// Preparing to make tiles\n\n/**\n * Returns the best TileZoomLevel for a given resource-to-canvas scale.\n *\n * @export\n * @param image - A parsed IIIF Image\n * @param resourceToCanvasScale - The resource to canvas scale, relating resource pixels to canvas pixels.\n * @returns\n */\nexport function getTileZoomLevelForScale(\n  tileZoomLevels: TileZoomLevel[],\n  resourceToCanvasScale: number,\n  scaleFactorCorrection: number,\n  log2scaleFactorCorrection: number\n): TileZoomLevel {\n  // Returning the TileZoomLevel with the scaleFactor closest to the map scale.\n  // We use logarithms here because for scaleFactors 1 is as 'far' of 2 as 8 is of 16.\n  // Math reminder: log(A)-log(B)=log(A/B)\n  //\n  // Example:\n  // Available scaleFactors in tileZoomLevels:\n  // 1---------2---------4---------8---------16\n  // Math.log2() of those scaleFactors\n  // 0---------1---------2---------3---------4\n  //\n  // Scale of the map '|' = 3, corrected scale '*' = 3.5\n  // 1---------2----|-*--4---------8---------16\n  // Math.log2(3) = 1.58, Math.log2(3.5) = 1.80\n  // 0---------1-----|-*-2---------3---------4\n  //\n  // The algorithm loops through all available scaleFactors and find out\n  // which one (in Math.log2()) is closest to the (corrected) scale.\n  //\n  // The scale can be corrected before and after taking the Math.log2()\n  // Here we will correct before.\n  // Math.log2(3 + scaleFactorCorrection) = Math.log2(3 + 0.5) = 1.80\n  //\n  // scaleFactor = 1\n  // Math.log2(1) = 0\n  // diff = abs(0 - 1.80) = abs(-1.80) = 1.80\n  //\n  // scaleFactor = 2\n  // Math.log2(2) = 1\n  // diff = abs(1 - 1.80) = abs(-0.80) = 0.80\n  //\n  // scaleFactor = 4\n  // Math.log2(4) = 3\n  // diff = abs(3 - 1.80) = abs(0.20) = 0.20\n  //\n  // => Pick scaleFactor 4, which has minimum diff.\n  // Notice how 3 lies in the middle of 2 and 4, but on the log scale log2(3) lies closer to log2(4) than log2(2)\n  // Notice how the scaleFactorCorrection corrects the scale for which the closest scaleFactor is searched.\n  // Notice when this happens before taking a Math.log2(), it has more effect on smaller scales then on bigger.\n\n  let smallestdiffLogScaleFactor = Number.POSITIVE_INFINITY\n  let bestTileZoomLevel = tileZoomLevels.at(-1) as TileZoomLevel\n\n  for (const tileZoomLevel of tileZoomLevels) {\n    const diffLogScaleFactor = Math.abs(\n      Math.log2(tileZoomLevel.scaleFactor) -\n        (Math.log2(resourceToCanvasScale + scaleFactorCorrection) +\n          log2scaleFactorCorrection)\n    )\n    if (diffLogScaleFactor < smallestdiffLogScaleFactor) {\n      smallestdiffLogScaleFactor = diffLogScaleFactor\n      bestTileZoomLevel = tileZoomLevel\n    }\n  }\n\n  return bestTileZoomLevel\n}\n\n// Making tiles\n\nexport function computeTilesCoveringRingAtTileZoomLevel(\n  resourceRing: Ring,\n  tileZoomLevel: TileZoomLevel,\n  imageSize: Size\n): Tile[] {\n  const scaledResourceRing = scaleResourcePoints(resourceRing, tileZoomLevel)\n  const tilesByColumn = ringToTilesByColumn(scaledResourceRing)\n  const tiles = tilesByColumnToTiles(tilesByColumn, tileZoomLevel, imageSize)\n\n  return tiles\n}\n\nfunction scaleResourcePoints(\n  resourcePoints: Point[],\n  tileZoomLevel: TileZoomLevel\n): Point[] {\n  // This scales the incoming resource points to a grid, where there scaled coordinates on the grid pixels (between integer numbers) correspond to the original coordinates on the tiles provided at this zoom level\n  return resourcePoints.map((point) => [\n    point[0] / tileZoomLevel.originalWidth,\n    point[1] / tileZoomLevel.originalHeight\n  ])\n}\n\nfunction ringToTilesByColumn(ring: Ring) {\n  const tilesByColumn: TileByColumn = {}\n  for (let i = 0; i < ring.length; i++) {\n    const line: Line = [ring[i], ring[(i + 1) % ring.length]]\n    const pixels = lineToPixels(line)\n\n    pixels.forEach(([x, y]) => {\n      if (!tilesByColumn[x]) {\n        tilesByColumn[x] = [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY]\n      }\n\n      if (y < tilesByColumn[x][0]) {\n        tilesByColumn[x][0] = y\n      }\n\n      if (y > tilesByColumn[x][1]) {\n        tilesByColumn[x][1] = y\n      }\n    })\n  }\n\n  return tilesByColumn\n}\n\nfunction lineToPixels([startPoint, endPoint]: Line): Point[] {\n  // From:\n  //  https://github.com/vHawk/tiles-intersect\n  // See also:\n  //  https://www.redblobgames.com/grids/line-drawing.html\n\n  // Start and end pixel coordinates\n  let startPixelX = Math.floor(startPoint[0])\n  let startPixelY = Math.floor(startPoint[1])\n  const endPixelX = Math.floor(endPoint[0])\n  const endPixelY = Math.floor(endPoint[1])\n\n  const points: Point[] = [[startPixelX, startPixelY]]\n\n  if (startPixelX === endPixelX && startPixelY === endPixelY) {\n    return points\n  }\n\n  // The pixel step: 1, 0 or -1\n  const stepX = Math.sign(endPoint[0] - startPoint[0])\n  const stepY = Math.sign(endPoint[1] - startPoint[1])\n\n  // The rest in the first pixel before reaching the next one\n  const restX = Math.abs(startPoint[0] - startPixelX - Math.max(0, stepX))\n  const restY = Math.abs(startPoint[1] - startPixelY - Math.max(0, stepY))\n\n  // The distance\n  const distanceX = Math.abs(startPoint[0] - endPoint[0])\n  const distanceY = Math.abs(startPoint[1] - endPoint[1])\n\n  // The relative rest\n  let restPerStepX = restX / distanceX\n  let restPerStepY = restY / distanceY\n\n  // The delta\n  const onePerStepX = 1 / distanceX\n  const onePerStepY = 1 / distanceY\n\n  while (!(startPixelX === endPixelX && startPixelY === endPixelY)) {\n    if (distanceY === 0) {\n      startPixelX = startPixelX + stepX\n    } else if (distanceX === 0) {\n      startPixelY = startPixelY + stepY\n    } else if (restPerStepX < restPerStepY) {\n      restPerStepX = restPerStepX + onePerStepX\n      startPixelX = startPixelX + stepX\n    } else {\n      restPerStepY = restPerStepY + onePerStepY\n      startPixelY = startPixelY + stepY\n    }\n\n    points.push([startPixelX, startPixelY])\n  }\n\n  return points\n}\n\nfunction tilesByColumnToTiles(\n  tilesByColumn: TileByColumn,\n  tileZoomLevel: TileZoomLevel,\n  imageSize: Size\n): Tile[] {\n  const tiles: Tile[] = []\n  for (const xKey in tilesByColumn) {\n    const x = parseInt(xKey)\n\n    if (x < 0 || x >= tileZoomLevel.columns) {\n      break\n    }\n\n    const fromY = Math.max(tilesByColumn[x][0], 0)\n    const toY = Math.min(tilesByColumn[x][1], tileZoomLevel.rows - 1)\n\n    for (let y = fromY; y <= toY; y++) {\n      tiles.push({\n        column: x,\n        row: y,\n        tileZoomLevel: tileZoomLevel,\n        imageSize\n      })\n    }\n  }\n\n  return tiles\n}\n\n// Looking up tiles\n\nexport function getTilesCoveringTileAtScaleFactor(\n  tile: Tile,\n  parsedImage: Image,\n  scaleFactor: number,\n  validTile?: (tile: Tile) => boolean\n) {\n  let columnStart = Math.floor(\n    (tile.column * tile.tileZoomLevel.scaleFactor) / scaleFactor\n  )\n  columnStart = columnStart >= 0 ? columnStart : 0\n  const columnEnd = Math.ceil(\n    ((tile.column + 1) * tile.tileZoomLevel.scaleFactor) / scaleFactor\n  )\n  let rowStart = Math.floor(\n    (tile.row * tile.tileZoomLevel.scaleFactor) / scaleFactor\n  )\n  rowStart = rowStart >= 0 ? rowStart : 0\n  const rowEnd = Math.ceil(\n    ((tile.row + 1) * tile.tileZoomLevel.scaleFactor) / scaleFactor\n  )\n  return getTilesAtScaleFactor(\n    scaleFactor,\n    parsedImage,\n    columnStart,\n    columnEnd,\n    rowStart,\n    rowEnd,\n    validTile\n  )\n}\n\nexport function getTilesAtScaleFactor(\n  scaleFactor: number,\n  parsedImage: Image,\n  columnStart?: number,\n  columnEnd?: number,\n  rowStart?: number,\n  rowEnd?: number,\n  validTile: (tile: Tile) => boolean = (_tile: Tile) => true\n) {\n  const tileZoomLevel = parsedImage.tileZoomLevels.find(\n    (tileZoomLevel) => tileZoomLevel.scaleFactor === scaleFactor\n  )\n  const imageSize = [parsedImage.width, parsedImage.height] as Size\n\n  if (!tileZoomLevel) {\n    return []\n  }\n\n  columnStart = columnStart ? columnStart : 0\n  columnEnd = columnEnd ? columnEnd : tileZoomLevel.columns\n  rowStart = rowStart ? rowStart : 0\n  rowEnd = rowEnd ? rowEnd : tileZoomLevel.rows\n\n  const tiles: Tile[] = []\n  for (let column = columnStart; column < columnEnd; column++) {\n    for (let row = rowStart; row < rowEnd; row++) {\n      const tile = {\n        column,\n        row,\n        tileZoomLevel,\n        imageSize\n      }\n      if (validTile(tile)) {\n        tiles.push(tile)\n      }\n    }\n  }\n\n  return tiles\n}\n\n// Identity\n\nexport function equalTileByRowColumnScaleFactor(\n  tile0: Tile,\n  tile1: Tile\n): boolean {\n  return (\n    tile0.column === tile1.column &&\n    tile0.row === tile1.row &&\n    tile0.tileZoomLevel.scaleFactor === tile1.tileZoomLevel.scaleFactor\n  )\n}\n\n// Geometric computations\n\nexport function distanceTileToPoint(tile: Tile, point: Point): number {\n  return distance(tileCenter(tile), point)\n}\n\nexport function squaredDistanceTileToPoint(tile: Tile, point: Point): number {\n  return squaredDistance(tileCenter(tile), point)\n}\n\nexport function tileCenter(tile: Tile): Point {\n  const bbox = computeBboxTile(tile)\n\n  return [(bbox[2] - bbox[0]) / 2 + bbox[0], (bbox[3] - bbox[1]) / 2 + bbox[1]]\n}\n\n/**\n * Returns the resource coordinates of the tile's origin point\n *\n * @export\n * @param tile\n * @returns\n */\nexport function tileToTileOriginPoint(tile: Tile): Point {\n  return [\n    tile.column * tile.tileZoomLevel.originalWidth,\n    tile.row * tile.tileZoomLevel.originalHeight\n  ]\n}\n\nexport function clipTilePointToTile(tilePoint: Point, tile: Tile): Point {\n  const tileSize = [tile.tileZoomLevel.width, tile.tileZoomLevel.height]\n  return tilePoint.map((coordinate, index) => {\n    coordinate = Math.max(coordinate, 0)\n    coordinate = Math.min(coordinate, tileSize[index] - 1)\n    return coordinate\n  }) as Point\n}\n\n/**\n * From the input point in resource coordinates, returns the same point in tile coordinates\n * I.e. relative to the tile's origin point and scaled using the scale factor\n *\n * @param resourcePoint\n * @param tile\n * @param clip\n * @returns\n */\nexport function resourcePointToTilePoint(\n  resourcePoint: Point,\n  tile: Tile,\n  clip = true\n): Point | undefined {\n  const resourceTileOriginPoint = tileToTileOriginPoint(tile)\n  const tilePoint = [\n    (resourcePoint[0] - resourceTileOriginPoint[0]) /\n      tile.tileZoomLevel.scaleFactor,\n    (resourcePoint[1] - resourceTileOriginPoint[1]) /\n      tile.tileZoomLevel.scaleFactor\n  ] as Point\n\n  if (\n    !clip ||\n    resourcePointInTile(resourcePoint, tile)\n    // && pointInImage(resourcePoint, tile)\n  ) {\n    return tilePoint\n  }\n}\n\nexport function resourcePointInTile(resourcePoint: Point, tile: Tile): boolean {\n  const resourceTileOrigin = tileToTileOriginPoint(tile)\n\n  return (\n    resourcePoint[0] >= resourceTileOrigin[0] &&\n    resourcePoint[0] <=\n      resourceTileOrigin[0] + tile.tileZoomLevel.originalWidth &&\n    resourcePoint[1] >= resourceTileOrigin[1] &&\n    resourcePoint[1] <=\n      resourceTileOrigin[1] + tile.tileZoomLevel.originalHeight\n  )\n}\n\nexport function resourcePointInImage(\n  resourcePoint: Point,\n  tile: Tile\n): boolean {\n  return (\n    resourcePoint[0] > 0 &&\n    resourcePoint[0] <= tile.imageSize[0] &&\n    resourcePoint[1] > 0 &&\n    resourcePoint[1] <= tile.imageSize[1]\n  )\n}\n\nexport function computeBboxTile(tile: Tile): Bbox {\n  const resourceTileOriginPoint = tileToTileOriginPoint(tile)\n\n  const resourceTileMaxX = Math.min(\n    resourceTileOriginPoint[0] + tile.tileZoomLevel.originalWidth,\n    tile.imageSize[0]\n  )\n  const resourceTileMaxY = Math.min(\n    resourceTileOriginPoint[1] + tile.tileZoomLevel.originalHeight,\n    tile.imageSize[1]\n  )\n\n  return [\n    resourceTileOriginPoint[0],\n    resourceTileOriginPoint[1],\n    resourceTileMaxX,\n    resourceTileMaxY\n  ]\n}\n\n// Resolution\n\nexport function getTileSize(tile: Tile): Size {\n  return [tile.tileZoomLevel.width, tile.tileZoomLevel.height]\n}\n\nexport function getTileOriginalSize(tile: Tile): Size {\n  return [tile.tileZoomLevel.originalWidth, tile.tileZoomLevel.originalHeight]\n}\n\nexport function getTileResolution(tile: Tile): number {\n  return sizeToResolution(getTileSize(tile))\n}\n\nexport function getTileOriginalResolution(tile: Tile): number {\n  return sizeToResolution(getTileOriginalSize(tile))\n}\n\nexport function getTilesResolution(tiles: Tile[]): number {\n  return tiles.map((tile) => getTileResolution(tile)).reduce((a, c) => a + c, 0)\n}\n\nexport function getTilesOriginalResolution(tiles: Tile[]): number {\n  return tiles\n    .map((tile) => getTileOriginalResolution(tile))\n    .reduce((a, c) => a + c, 0)\n}\n\nexport function getTileZoomLevelResolution(\n  tileZoomLevel: TileZoomLevel\n): number {\n  return (\n    tileZoomLevel.rows *\n    tileZoomLevel.width *\n    tileZoomLevel.columns *\n    tileZoomLevel.height\n  )\n}\n\nexport function getTileZoomLevelOriginalResolution(\n  tileZoomLevel: TileZoomLevel\n): number {\n  return (\n    tileZoomLevel.rows *\n    tileZoomLevel.originalWidth *\n    tileZoomLevel.columns *\n    tileZoomLevel.originalHeight\n  )\n}\n\n// Search at other scalefactors\n\nexport function getTilesAtOtherScaleFactors(\n  tile: Tile,\n  parsedImage: Image,\n  scaleFactor: number,\n  TEXTURES_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF: number,\n  TEXTURES_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF: number,\n  validTile?: (tile: Tile) => boolean\n): Tile[] {\n  const tilesAtOtherScaleFactors = []\n\n  const tilesAtLowerScaleFactor = recursivelyGetTilesAtLowerScaleFactor(\n    tile,\n    parsedImage,\n    scaleFactor,\n    TEXTURES_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF,\n    validTile\n  )\n  for (const tileAtLowerScaleFactor of tilesAtLowerScaleFactor) {\n    if (tileAtLowerScaleFactor) {\n      tilesAtOtherScaleFactors.push(tileAtLowerScaleFactor)\n    }\n  }\n  if (tilesAtOtherScaleFactors.length === 0) {\n    const tileAtHigherScaleFactor = recursivelyGetTilesAtHigherScaleFactor(\n      tile,\n      parsedImage,\n      scaleFactor,\n      TEXTURES_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF,\n      validTile\n    )\n    if (tileAtHigherScaleFactor) {\n      tilesAtOtherScaleFactors.push(tileAtHigherScaleFactor)\n    }\n  }\n\n  return tilesAtOtherScaleFactors\n}\n\nexport function recursivelyGetTilesAtHigherScaleFactor(\n  tile: Tile,\n  parsedImage: Image,\n  scaleFactor: number,\n  log2ScaleFactorDiff: number,\n  validTile?: (tile: Tile) => boolean\n): Tile | undefined {\n  const higherScaleFactor = 2 ** (Math.log2(scaleFactor) + 1)\n  if (\n    higherScaleFactor >\n      parsedImage.tileZoomLevels\n        .map((tileZoomLevel) => tileZoomLevel.scaleFactor)\n        .reduce((a, c) => a + c, 0) -\n        scaleFactor ||\n    log2ScaleFactorDiff === 0\n  ) {\n    return undefined\n  }\n  const tileAtHigherScaleFactor = getTileAtHigherScaleFactor(\n    tile,\n    parsedImage,\n    higherScaleFactor,\n    validTile\n  )\n  if (tileAtHigherScaleFactor !== undefined) {\n    return tileAtHigherScaleFactor\n  } else {\n    return recursivelyGetTilesAtHigherScaleFactor(\n      tile,\n      parsedImage,\n      higherScaleFactor,\n      log2ScaleFactorDiff--,\n      validTile\n    )\n  }\n}\n\nexport function recursivelyGetTilesAtLowerScaleFactor(\n  tile: Tile,\n  parsedImage: Image,\n  scaleFactor: number,\n  log2ScaleFactorDiff: number,\n  validTile?: (tile: Tile) => boolean\n): (Tile | undefined)[] {\n  const lowerScaleFactor = 2 ** (Math.log2(scaleFactor) - 1)\n  if (lowerScaleFactor <= 0 || log2ScaleFactorDiff === 0) {\n    return []\n  }\n  const tilesAtLowerScaleFactor = getTilesAtLowerScaleFactor(\n    tile,\n    parsedImage,\n    lowerScaleFactor,\n    validTile\n  )\n  const allTilesAtLowerScaleFactor = getTilesAtLowerScaleFactor(\n    tile,\n    parsedImage,\n    lowerScaleFactor,\n    (_tile) => true\n  )\n  if (tilesAtLowerScaleFactor.length === allTilesAtLowerScaleFactor.length) {\n    return tilesAtLowerScaleFactor\n  } else {\n    return [\n      ...tilesAtLowerScaleFactor,\n      ...recursivelyGetTilesAtLowerScaleFactor(\n        tile,\n        parsedImage,\n        lowerScaleFactor,\n        log2ScaleFactorDiff--,\n        validTile\n      )\n    ]\n  }\n}\n\nexport function getTileAtHigherScaleFactor(\n  tile: Tile,\n  parsedImage: Image,\n  higherScaleFactor: number,\n  validTile?: (tile: Tile) => boolean\n): Tile | undefined {\n  const tilesCoveringTileAtHigherScaleFactor =\n    getTilesCoveringTileAtScaleFactor(\n      tile,\n      parsedImage,\n      higherScaleFactor,\n      validTile\n    )\n\n  if (tilesCoveringTileAtHigherScaleFactor.length === 0) {\n    return undefined\n  }\n\n  return tilesCoveringTileAtHigherScaleFactor[0]\n}\n\nexport function getTilesAtLowerScaleFactor(\n  tile: Tile,\n  parsedImage: Image,\n  lowerScaleFactor: number,\n  validTile?: (tile: Tile) => boolean\n): (Tile | undefined)[] {\n  const tilesCoveringTileAtLowerScaleFactor = getTilesCoveringTileAtScaleFactor(\n    tile,\n    parsedImage,\n    lowerScaleFactor,\n    validTile\n  )\n\n  return tilesCoveringTileAtLowerScaleFactor\n}\n\n// Keys for search\n\n// TODO: consider a way to make this more elegant:\n// - many-to-many data structure\n// - a new compact class with just these two properties and an equality function between elements\n// - new JS tuple - https://github.com/tc39/proposal-record-tuple\n\nexport function fetchableTileKey(fetchableTile: FetchableTile): string {\n  return keyFromMapIdTileUrl(fetchableTile.mapId, fetchableTile.tileUrl)\n}\n\nexport function keyFromMapIdTileUrl(mapId: string, tileUrl: string): string {\n  return `${mapId}:${tileUrl}`\n}\n\nexport function tileKey(tile: Tile): string {\n  return keyFromScaleFactorRowColumn(\n    tile.tileZoomLevel.scaleFactor,\n    tile.row,\n    tile.column\n  )\n}\n\nexport function keyFromScaleFactorRowColumn(\n  scaleFactor: number,\n  row: number,\n  column: number\n): string {\n  return `${scaleFactor}:${row}:${column}`\n}\n\nexport function tileUrl(tile: Tile, parsedImage: Image): string {\n  const imageRequest = parsedImage.getTileImageRequest(\n    tile.tileZoomLevel,\n    tile.column,\n    tile.row\n  )\n  return parsedImage.getImageUrl(imageRequest)\n}\n\n// TileCache\n\nexport function shouldPruneTile(\n  tile: Tile,\n  mapPruneInfo: MapPruneInfo,\n  mapPruneConstants: MapPruneConstants\n) {\n  // Don't prune if overview\n  // Note that resourceViewportRingBboxForViewport and tileZoomLevelForViewport are only undefined\n  // if overview tile, so we add them here to prevent TypeScript errors furter on\n  if (\n    mapPruneInfo.overviewTileZoomLevelForViewport &&\n    tile.tileZoomLevel.scaleFactor ==\n      mapPruneInfo.overviewTileZoomLevelForViewport.scaleFactor\n  ) {\n    return false\n  }\n\n  // Prune if the tileZoomLevelForViewport or resourceViewportRingBboxForViewport are undefined\n  // (this only happens if the map is too small to render)\n  if (\n    mapPruneInfo.resourceViewportRingBboxForViewport === undefined ||\n    mapPruneInfo.tileZoomLevelForViewport === undefined\n  ) {\n    return true\n  }\n\n  // Should prune if scale factor too much off\n  //\n  // Example:\n  // Available scaleFactors in tileZoomLevels:\n  // 1 (full original resolution), 2, 4, 8, 16 (zoomed out)\n  //\n  // Tile scale factor: 16, so log2 tile scale factor: 4\n  // Scale factor for viewport: 8, so log2 scale factor for viewport: 3\n  // Difference: 4 - 3 = 1, check if not more then max\n  // This is positive if tile scale factor is higher then scale factor for viewport, so tiles are lower original resolution\n  //\n  // Since there are less lower original resolution tiles,\n  // MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF can be higher then MAX_LOWER_LOG2_SCALE_FACTOR_DIFF\n  //\n  const log2ScaleFactorDiff =\n    Math.log2(tile.tileZoomLevel.scaleFactor) -\n    Math.log2(mapPruneInfo.tileZoomLevelForViewport.scaleFactor)\n  // Check if scale factor not too high, i.e. tile resolution too low\n  const tileScaleFactorTooHigh =\n    log2ScaleFactorDiff > mapPruneConstants.maxHigherLog2ScaleFactorDiff\n  if (tileScaleFactorTooHigh) {\n    return true\n  }\n  // Check if scale factor not too low, i.e. tile resolution too high\n  const tileScaleFactorTooLow =\n    -log2ScaleFactorDiff > mapPruneConstants.maxLowerLog2ScaleFactorDiff\n  if (tileScaleFactorTooLow) {\n    return true\n  }\n\n  // Prune if too far away\n  // Note that we correct the tile bbox by buffering the scale factor difference (if positive)\n  // This allows us to keep all tiles that would be needed if we zoom out again\n  // Even if they currently don't overlap with the viewport ring bbox\n  if (\n    !doBboxesIntersect(\n      bufferBboxByRatio(\n        computeBboxTile(tile),\n        Math.max(0, log2ScaleFactorDiff)\n      ),\n      mapPruneInfo.resourceViewportRingBboxForViewport\n    )\n  ) {\n    return true\n  }\n\n  // By default, don't prune\n  return false\n}\n", "import { equalSet } from '@allmaps/stdlib'\n\nimport { CacheableTile, CachedTile } from './CacheableTile.js'\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\n\nimport { shouldPruneTile } from '../shared/tiles.js'\nimport { FetchableTile } from './FetchableTile.js'\n\nimport type { FetchFn } from '@allmaps/types'\n\nimport type {\n  CachableTileFactory,\n  TileCacheOptions,\n  MapPruneInfo\n} from '../shared/types.js'\n\nconst PRUNE_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF = 4\nconst PRUNE_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF = 2\n\n/**\n * Class that fetches and caches IIIF tiles.\n */\nexport class TileCache<D> extends EventTarget {\n  cachableTileFactory: CachableTileFactory<D>\n  fetchFn?: FetchFn\n\n  protected tilesByTileUrl: Map<string, CacheableTile<D>> = new Map()\n  protected mapIdsByTileUrl: Map<string, Set<string>> = new Map()\n  protected tileUrlsByMapId: Map<string, Set<string>> = new Map()\n\n  protected tilesFetchingCount = 0\n\n  protected fetchableTiles: FetchableTile[] = []\n\n  constructor(\n    cachableTileFactory: CachableTileFactory<D>,\n    partialTileCacheOptions?: Partial<TileCacheOptions>\n  ) {\n    super()\n\n    this.setOptions(partialTileCacheOptions)\n\n    this.cachableTileFactory = cachableTileFactory\n  }\n\n  /**\n   * Get the tiles in this cache\n   *\n   * @returns\n   */\n  getCacheableTiles(): IterableIterator<CacheableTile<D>> {\n    return this.tilesByTileUrl.values()\n  }\n\n  /**\n   * Get a specific tile in this cache\n   *\n   * @param tileUrl - the URL of the requested tile\n   * @returns\n   */\n  getCacheableTile(tileUrl: string): CacheableTile<D> | undefined {\n    return this.tilesByTileUrl.get(tileUrl)\n  }\n\n  /**\n   * Get the tiles in this cache, corresponding to a specific map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapCacheableTiles(mapId: string): CacheableTile<D>[] {\n    const cacheableTiles: CacheableTile<D>[] = []\n\n    for (const cacheableTile of this.tilesByTileUrl.values()) {\n      if (this.tileUrlsByMapId.get(mapId)?.has(cacheableTile.tileUrl)) {\n        cacheableTiles.push(cacheableTile)\n      }\n    }\n\n    return cacheableTiles\n  }\n\n  /**\n   * Get the tiles in this cache that have been fetched\n   *\n   * @returns\n   */\n  getCachedTiles(): CachedTile<D>[] {\n    const cachedTiles: CachedTile<D>[] = []\n\n    for (const cacheableTile of this.tilesByTileUrl.values()) {\n      if (cacheableTile.isCachedTile()) {\n        cachedTiles.push(cacheableTile)\n      }\n    }\n\n    return cachedTiles\n  }\n\n  /**\n   * Get a specific cached tile in this cache that has been fetched\n   *\n   * @param tileUrl - the URL of the requested tile\n   * @returns\n   */\n  getCachedTile(tileUrl: string): CachedTile<D> | undefined {\n    const cacheableTile = this.tilesByTileUrl.get(tileUrl)\n    if (cacheableTile && cacheableTile.isCachedTile()) {\n      return cacheableTile as CachedTile<D>\n    }\n  }\n\n  /**\n   * Get the tiles in this cache, corresponding to a specific map, that have been fetched\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapCachedTiles(mapId: string): CachedTile<D>[] {\n    const cachedTiles: CachedTile<D>[] = []\n\n    for (const cacheableTile of this.tilesByTileUrl.values()) {\n      if (\n        cacheableTile.isCachedTile() &&\n        this.tileUrlsByMapId.get(mapId)?.has(cacheableTile.tileUrl)\n      ) {\n        cachedTiles.push(cacheableTile)\n      }\n    }\n\n    return cachedTiles\n  }\n\n  /**\n   * Get the URLs of tiles in this cache\n   *\n   * @returns\n   */\n  getTileUrls(): IterableIterator<string> {\n    return this.tilesByTileUrl.keys()\n  }\n\n  /**\n   * Get the URLs of tiles in this cache, corresponding to a specific map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapTileUrls(mapId: string) {\n    return this.tileUrlsByMapId.get(mapId) || new Set()\n  }\n\n  /**\n   * Get the Tile Cache options\n   *\n   * @param partialTileCacheOptions - Options\n   */\n  setOptions(partialTileCacheOptions?: Partial<TileCacheOptions>) {\n    this.fetchFn = partialTileCacheOptions?.fetchFn\n  }\n\n  // TODO: this function needs a new name!\n  /**\n   * Process the request for new tiles to be added to this cache\n   *\n   * @param fetchableTiles\n   */\n  requestFetchableTiles(fetchableTiles: FetchableTile[]) {\n    const previousKeys = new Set(\n      this.fetchableTiles.map((fetchableTile) => fetchableTile.fetchableTileKey)\n    )\n    const keys = new Set(\n      fetchableTiles.map((fetchableTile) => fetchableTile.fetchableTileKey)\n    )\n\n    // If the keys are the same as the previous ones, don't do anything\n    // TODO: replace with Set equality once supported\n    if (equalSet(previousKeys, keys)) {\n      return\n    }\n\n    // Loop over all tiles, and add them (also do this if the cache already contains them,\n    // so as to trigger the loading events which will trigger a rerender etc.)\n    for (const fetchableTile of fetchableTiles) {\n      this.requestFetchableTile(fetchableTile)\n    }\n\n    this.fetchableTiles = fetchableTiles\n  }\n\n  /**\n   * Returns a promise that resolves when all requested tiles are loaded.\n   * This could happen immidiately, in case there are no ongoing requests and the tilesFetchingCount is zero,\n   * or in a while, when the count reaches zero and the ALLREQUESTEDTILESLOADED event is fired.\n   */\n  async allRequestedTilesLoaded(): Promise<void> {\n    return new Promise((resolve) => {\n      if (this.finished) {\n        resolve()\n      } else {\n        const listener = () => {\n          this.removeEventListener(\n            WarpedMapEventType.ALLREQUESTEDTILESLOADED,\n            listener\n          )\n          resolve()\n        }\n        this.addEventListener(\n          WarpedMapEventType.ALLREQUESTEDTILESLOADED,\n          listener\n        )\n      }\n    })\n  }\n\n  /**\n   * Prune tiles in this cache using the provided prune info\n   */\n  prune(pruneInfoByMapId: Map<string, MapPruneInfo>) {\n    for (const [tileUrl, mapIds] of this.mapIdsByTileUrl.entries()) {\n      for (const mapId of mapIds) {\n        const pruneInfo = pruneInfoByMapId.get(mapId)\n        const tile = this.tilesByTileUrl.get(tileUrl)?.tile\n\n        if (tile) {\n          // Prune for each mapId that doesn't have pruneInfo\n          // Or for which it should be pruned\n          if (\n            !pruneInfo ||\n            shouldPruneTile(tile, pruneInfo, {\n              maxHigherLog2ScaleFactorDiff:\n                PRUNE_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF,\n              maxLowerLog2ScaleFactorDiff:\n                PRUNE_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF\n            })\n          ) {\n            this.removeCacheableTileForMapId(tileUrl, mapId)\n          }\n        }\n      }\n    }\n  }\n\n  clear() {\n    for (const cacheableTile of this.getCacheableTiles()) {\n      cacheableTile.abort()\n      this.removeEventListenersFromCacheableTile(cacheableTile)\n    }\n\n    this.tilesByTileUrl = new Map()\n    this.mapIdsByTileUrl = new Map()\n    this.tileUrlsByMapId = new Map()\n    this.tilesFetchingCount = 0\n  }\n\n  destroy() {\n    this.clear()\n  }\n\n  private requestFetchableTile(fetchableTile: FetchableTile) {\n    const mapId = fetchableTile.mapId\n    const tileUrl = fetchableTile.tileUrl\n\n    if (!this.tilesByTileUrl.has(tileUrl)) {\n      const cacheableTile = this.cachableTileFactory(\n        fetchableTile,\n        this.fetchFn\n      )\n      this.addEventListenersToCacheableTile(cacheableTile)\n\n      this.addCacheableTile(cacheableTile)\n    } else {\n      const cachedTile = this.tilesByTileUrl.get(tileUrl)\n      if (cachedTile?.isCachedTile()) {\n        this.dispatchEvent(\n          new WarpedMapEvent(WarpedMapEventType.MAPTILELOADED, {\n            mapId,\n            tileUrl\n          })\n        )\n      }\n    }\n\n    this.addTileUrlForMapId(tileUrl, mapId)\n    this.addMapIdForTileUrl(mapId, tileUrl)\n  }\n\n  private addCacheableTile(cacheableTile: CacheableTile<D>) {\n    this.tilesByTileUrl.set(cacheableTile.tileUrl, cacheableTile)\n\n    // This is an async function that we are not awaiting to continue\n    // The results are handled inside the tile using events\n    cacheableTile.fetch()\n    this.updateTilesFetchingCount(1)\n  }\n\n  private removeCacheableTileForMapId(tileUrl: string, mapId: string) {\n    const cacheableTile = this.tilesByTileUrl.get(tileUrl)\n\n    if (!cacheableTile) {\n      return\n    }\n\n    const mapIds = this.removeMapIdForTileUrl(mapId, tileUrl)\n    this.removeTileUrlForMapId(tileUrl, mapId)\n\n    // If there are no other maps for this tile and it's still fetching,\n    // abort the fetch and delete the tile from the cache.\n    if (!mapIds.size) {\n      if (!cacheableTile.isCachedTile()) {\n        // Cancel fetch if tile is still being fetched\n        cacheableTile.abort()\n        this.updateTilesFetchingCount(-1)\n      }\n\n      this.tilesByTileUrl.delete(tileUrl)\n    }\n\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.MAPTILEREMOVED, {\n        mapId,\n        tileUrl\n      })\n    )\n  }\n\n  private tileFetched(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const tileUrl = event.data as string\n\n      this.updateTilesFetchingCount(-1)\n\n      for (const mapId of this.mapIdsByTileUrl.get(tileUrl) || []) {\n        this.dispatchEvent(\n          new WarpedMapEvent(WarpedMapEventType.MAPTILELOADED, {\n            mapId,\n            tileUrl\n          })\n        )\n\n        const tileUrls = this.tileUrlsByMapId.get(mapId)\n        const firstTileUrl = tileUrls?.values().next().value\n\n        if (firstTileUrl === tileUrl) {\n          this.dispatchEvent(\n            new WarpedMapEvent(WarpedMapEventType.FIRSTMAPTILELOADED, {\n              mapId,\n              tileUrl\n            })\n          )\n        }\n      }\n    }\n  }\n\n  private tileFetchError(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const tileUrl = event.data as string\n\n      if (!this.tilesByTileUrl.has(tileUrl)) {\n        this.updateTilesFetchingCount(-1)\n      }\n    }\n  }\n\n  private addMapIdForTileUrl(mapId: string, tileUrl: string) {\n    let mapIds = this.mapIdsByTileUrl.get(tileUrl)\n\n    if (!mapIds) {\n      mapIds = new Set([mapId])\n    } else {\n      mapIds.add(mapId)\n    }\n\n    this.mapIdsByTileUrl.set(tileUrl, mapIds)\n\n    return mapIds\n  }\n\n  private removeMapIdForTileUrl(mapId: string, tileUrl: string) {\n    const mapIds = this.mapIdsByTileUrl.get(tileUrl)\n\n    if (!mapIds) {\n      return new Set()\n    } else {\n      mapIds.delete(mapId)\n    }\n\n    if (!mapIds.size) {\n      this.mapIdsByTileUrl.delete(tileUrl)\n    } else {\n      this.mapIdsByTileUrl.set(tileUrl, mapIds)\n    }\n\n    return mapIds\n  }\n\n  private addTileUrlForMapId(tileUrl: string, mapId: string) {\n    let tileUrls = this.tileUrlsByMapId.get(mapId)\n\n    if (!tileUrls) {\n      tileUrls = new Set([tileUrl])\n    } else {\n      tileUrls.add(tileUrl)\n    }\n\n    this.tileUrlsByMapId.set(mapId, tileUrls)\n\n    return tileUrls\n  }\n\n  private removeTileUrlForMapId(tileUrl: string, mapId: string) {\n    const tileUrls = this.tileUrlsByMapId.get(mapId)\n\n    if (!tileUrls) {\n      return new Set()\n    } else {\n      tileUrls.delete(tileUrl)\n\n      if (!tileUrls.size) {\n        this.tileUrlsByMapId.delete(mapId)\n      } else {\n        this.tileUrlsByMapId.set(mapId, tileUrls)\n      }\n\n      return tileUrls\n    }\n  }\n\n  get finished() {\n    return this.tilesFetchingCount === 0\n  }\n\n  private updateTilesFetchingCount(delta: number) {\n    this.tilesFetchingCount += delta\n\n    if (this.tilesFetchingCount === 0) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.ALLREQUESTEDTILESLOADED)\n      )\n    }\n  }\n\n  private addEventListenersToCacheableTile(cacheableTile: CacheableTile<D>) {\n    cacheableTile.addEventListener(\n      WarpedMapEventType.TILEFETCHED,\n      this.tileFetched.bind(this)\n    )\n    cacheableTile.addEventListener(\n      WarpedMapEventType.TILEFETCHERROR,\n      this.tileFetchError.bind(this)\n    )\n  }\n\n  private removeEventListenersFromCacheableTile(\n    cacheableTile: CacheableTile<D>\n  ) {\n    cacheableTile.removeEventListener(\n      WarpedMapEventType.TILEFETCHED,\n      this.tileFetched.bind(this)\n    )\n    cacheableTile.removeEventListener(\n      WarpedMapEventType.TILEFETCHERROR,\n      this.tileFetchError.bind(this)\n    )\n  }\n}\n", "/**\n * Serializes any JavaScript type to a string. If the\n * type is an object, first sortthe object by its keys.\n *\n * @param obj - JavaScript type to serialize.\n * @returns `obj` serialized to a string.\n */\nexport function serialize(obj) {\n    if (Array.isArray(obj)) {\n        return `[${obj.map((i) => serialize(i)).join(',')}]`;\n    }\n    else if (typeof obj === 'number') {\n        return `${obj}`;\n    }\n    else if (typeof obj === 'string') {\n        return `\"${obj}\"`;\n    }\n    else if (typeof obj === 'object' && obj !== null) {\n        return Object.keys(obj)\n            .sort()\n            .map((key) => `${key}:${serialize(obj[key])}`)\n            .join('|');\n    }\n    return String(obj);\n}\n", "import { serialize } from './checksum.js';\nconst DEFAULT_LENGTH = 16;\n/**\n * Computes SHA-1 hash of input string.\n *\n * @param Input string.\n * @returns SHA-1 hash of `str`.\n */\nasync function generateHash(str) {\n    const hashBuffer = await crypto.subtle.digest('SHA-1', new TextEncoder().encode(str));\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray\n        .map((byte) => byte.toString(16).padStart(2, '0'))\n        .join('');\n    return hashHex;\n}\n/**\n * Generates an ID from a string using the SHA-1 algorithm. Given the same input, the ID will always be the same.\n *\n * @param str - Input string\n * @param length - Length of returned hash. The maximum length of the hash is 40 characters. The default length is 16.\n * @returns First `length` characters of the SHA-1 hash of `str`.\n */\nexport async function generateId(str, length = DEFAULT_LENGTH) {\n    const hash = await generateHash(String(str));\n    return hash.slice(0, length);\n}\n/**\n * Generates a random ID.\n *\n * @param length - Length of returned hash. The maximum length of the hash is 40 characters.\n * @returns First `length` characters of the SHA-1 hash of a random UUID.\n */\nexport async function generateRandomId(length = DEFAULT_LENGTH) {\n    const uuid = crypto.randomUUID();\n    const id = await generateId(uuid, length);\n    return id;\n}\n/**\n * Generates a checksum of a JSON object.\n *\n * @param obj - JSON object.\n * @param length - Length of returned hash. The maximum length of the hash is 40 characters.\n * @returns First `length` characters of the SHA-1 hash of sorted and serialized version of `obj`.\n */\nexport async function generateChecksum(obj, length = DEFAULT_LENGTH) {\n    const checksum = await generateId(serialize(obj), length);\n    return checksum;\n}\n", "import { z } from 'zod';\nexport function ensureArray(val) {\n    if (val) {\n        return Array.isArray(val) ? val : [val];\n    }\n}\n// Copied from presentation.3.ts in @allmaps/iiif-parser\nconst SingleValueSchema = z.union([z.string(), z.number(), z.boolean()]);\nexport const LanguageValueSchema = z.record(z.string(), SingleValueSchema.array());\nexport const PointSchema = z.tuple([z.number(), z.number()]);\nexport const PointGeometrySchema = z.object({\n    type: z.literal('Point'),\n    coordinates: PointSchema\n});\nexport const ResourceMaskSchema = PointSchema.array().min(3);\nconst ImageServices = [\n    'ImageService1',\n    'ImageService2',\n    'ImageService3'\n];\nconst ResourceTypes = [...ImageServices, ...['Canvas']];\nexport const ImageServiceSchema = z.enum(ImageServices);\nexport const ResourceTypeSchema = z.enum(ResourceTypes);\n// partOf can recursively contain nested partOfs\n// From: https://github.com/colinhacks/zod#recursive-types\nconst basePartOfItemSchema = z.object({\n    id: z.string().url(),\n    type: z.string(),\n    label: LanguageValueSchema.optional()\n});\nexport const PartOfItemSchema = basePartOfItemSchema.extend({\n    partOf: z.lazy(() => PartOfItemSchema.array()).optional()\n});\nexport const PartOfSchema = z\n    .union([PartOfItemSchema.array(), PartOfItemSchema])\n    .transform(ensureArray);\nconst ValidTransformationSchema = z.object({\n    type: z.enum(['helmert', 'polynomial', 'thinPlateSpline', 'projective']),\n    options: z.object({}).passthrough().optional()\n});\nfunction parseInvalidTransformation(val) {\n    // Also allow values like:\n    // - thin-plate-spline\n    // - thinplatespline\n    // - polynomial1\n    const valLowerCase = val.toLowerCase();\n    if (valLowerCase === 'thinplatespline' ||\n        valLowerCase === 'thin-plate-spline') {\n        return {\n            type: 'thinPlateSpline'\n        };\n    }\n    else if (valLowerCase === 'polynomial1') {\n        return {\n            type: 'polynomial',\n            options: { order: 1 }\n        };\n    }\n    else if (valLowerCase === 'polynomial2') {\n        return {\n            type: 'polynomial',\n            options: { order: 2 }\n        };\n    }\n}\nexport const TransformationSchema = z\n    .union([\n    ValidTransformationSchema,\n    // Catchall for unknown transformation types\n    z.unknown()\n])\n    .transform((val) => {\n    const { success, data } = ValidTransformationSchema.safeParse(val);\n    if (success) {\n        return data;\n    }\n    else if (val === 'string') {\n        return parseInvalidTransformation(val);\n    }\n    else if (val &&\n        typeof val === 'object' &&\n        'type' in val &&\n        typeof val.type === 'string') {\n        return parseInvalidTransformation(val.type);\n    }\n});\nexport const ProjectionSchema = z.object({\n    name: z.string().optional(),\n    definition: z.union([z.string(), z.unknown()])\n});\nexport const ContextSchema = z.union([\n    z.string().url().array(),\n    z.string().url()\n]);\n", "import { z } from 'zod';\nimport { PointSchema, ResourceTypeSchema, PointGeometrySchema, TransformationSchema, ContextSchema } from '../shared.js';\nconst svg = /^<svg\\s+width=\"\\d+\"\\s+height=\"\\d+\"\\s*>\\s*<polygon\\s+points=\"\\s*(-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?\\s+){2,}-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?\\s*\"\\s*\\/>\\s*<\\/svg>$/;\nexport const SvgSelectorSchema = z.object({\n    type: z.literal('SvgSelector'),\n    value: z.string().regex(svg)\n});\nexport const TargetSchema = z.object({\n    source: z.string().url(),\n    service: z\n        .array(z.object({\n        '@id': z.string().url(),\n        type: ResourceTypeSchema\n    }))\n        .length(1),\n    selector: SvgSelectorSchema\n});\nexport const FeaturePropertiesSchema = z.object({\n    pixelCoords: PointSchema\n});\nexport const BodySchema = z.object({\n    type: z.literal('FeatureCollection'),\n    transformation: TransformationSchema.optional(),\n    features: z.array(z.object({\n        type: z.literal('Feature'),\n        properties: FeaturePropertiesSchema,\n        geometry: PointGeometrySchema\n    }))\n});\nexport const AnnotationSchema = z.object({\n    id: z.string().optional(),\n    type: z.literal('Annotation'),\n    '@context': ContextSchema.optional(),\n    motivation: z.string().default('georeferencing').optional(),\n    target: TargetSchema,\n    body: BodySchema\n});\nexport const AnnotationPageSchema = z.object({\n    id: z.string().optional(),\n    type: z.literal('AnnotationPage'),\n    '@context': ContextSchema.optional(),\n    items: z.array(AnnotationSchema)\n});\n", "import { z } from 'zod';\nimport { PointSchema, ImageServiceSchema, PartOfSchema, PointGeometrySchema, TransformationSchema, ProjectionSchema, ContextSchema } from '../shared.js';\nconst polygonRegex = /<polygon\\s+points=\"\\s*(-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?\\s+){2,}-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?\\s*\"\\s*\\/>/;\nconst svgWidthHeightRegex = new RegExp(`^<svg\\\\s+width=\"\\\\d+\"\\\\s+height=\"\\\\d+\"\\\\s*>\\\\s*${polygonRegex.source}\\\\s*</svg>$`);\nconst svgHeightWidthRegex = new RegExp(`^<svg\\\\s+height=\"\\\\d+\"\\\\s+width=\"\\\\d+\"\\\\s*>\\\\s*${polygonRegex.source}\\\\s*</svg>$`);\nconst svgRegex = new RegExp(`^<svg\\\\s*>\\\\s*${polygonRegex.source}\\\\s*</svg>$`);\nconst SvgRegexSchema = z.string().regex(svgRegex);\nconst SvgWidthHeightRegexSchema = z.string().regex(svgWidthHeightRegex);\nconst SvgHeightWidthRegexSchema = z.string().regex(svgHeightWidthRegex);\nexport const SvgSelectorSchema = z.object({\n    type: z.literal('SvgSelector'),\n    value: z.union([\n        SvgRegexSchema,\n        SvgWidthHeightRegexSchema,\n        SvgHeightWidthRegexSchema\n    ])\n});\n// const regionRegex = /^\\d+,\\d+,\\d+,\\d+$/\n// const sizeRegex = /^\\d+,\\d+$/\n// export const ImageApiSelectorSchema = z.object({\n//   type: z.literal('ImageApiSelector'),\n//   region: z.string().regex(regionRegex),\n//   size: z.string().regex(sizeRegex)\n// })\nexport const Source1Schema = z.object({\n    '@id': z.string().url(),\n    type: ImageServiceSchema,\n    height: z.number().positive(),\n    width: z.number().positive(),\n    partOf: PartOfSchema.optional()\n});\nexport const Source2Schema = z.object({\n    id: z.string().url(),\n    type: ImageServiceSchema,\n    height: z.number().positive().optional(),\n    width: z.number().positive().optional(),\n    partOf: PartOfSchema.optional()\n});\nexport const Canvas3Schema = z.object({\n    id: z.string().url(),\n    type: z.literal('Canvas'),\n    height: z.number().positive().optional(),\n    width: z.number().positive().optional(),\n    partOf: PartOfSchema.optional()\n});\nexport const SourceSchema = z.union([\n    Source1Schema,\n    Source2Schema,\n    Canvas3Schema\n]);\nexport const TargetSchema = z.object({\n    type: z.literal('SpecificResource'),\n    source: SourceSchema,\n    // selector: z.union([SvgSelectorSchema, ImageApiSelectorSchema])\n    selector: SvgSelectorSchema\n});\nexport const FeaturePropertiesSchema = z.object({\n    resourceCoords: PointSchema\n});\nexport const BodySchema = z.object({\n    type: z.literal('FeatureCollection'),\n    transformation: TransformationSchema.optional(),\n    resourceCrs: ProjectionSchema.optional(),\n    features: z.array(z.object({\n        type: z.literal('Feature'),\n        properties: FeaturePropertiesSchema,\n        geometry: PointGeometrySchema\n    }))\n});\nexport const AnnotationSchema = z.object({\n    id: z.string().optional(),\n    type: z.literal('Annotation'),\n    '@context': ContextSchema.optional(),\n    motivation: z.string().default('georeferencing').optional(),\n    created: z.string().datetime().optional(),\n    modified: z.string().datetime().optional(),\n    target: TargetSchema,\n    body: BodySchema\n});\nexport const AnnotationPageSchema = z.object({\n    id: z.string().optional(),\n    type: z.literal('AnnotationPage'),\n    '@context': ContextSchema.optional(),\n    items: z.array(AnnotationSchema)\n});\n", "import { z } from 'zod';\nimport { AnnotationSchema as Annotation0Schema, AnnotationPageSchema as AnnotationPage0Schema, FeaturePropertiesSchema as Annotation0FeaturePropertiesSchema, SvgSelectorSchema as SvgSelector0Schema } from './annotation/annotation.0.js';\nimport { AnnotationSchema as Annotation1Schema, AnnotationPageSchema as AnnotationPage1Schema, FeaturePropertiesSchema as Annotation1FeaturePropertiesSchema, SvgSelectorSchema as SvgSelector1Schema, TargetSchema as Target1Schema, SourceSchema as Source1Schema } from './annotation/annotation.1.js';\nimport { ResourceTypeSchema, PointGeometrySchema, ImageServiceSchema, TransformationSchema, PartOfSchema } from './shared.js';\nconst DefaultAnnotationSchema = Annotation1Schema;\nconst DefaultAnnotationPageSchema = AnnotationPage1Schema;\nconst DefaultFeaturePropertiesSchema = Annotation1FeaturePropertiesSchema;\nconst DefaultTargetSchema = Target1Schema;\nconst DefaultSourceSchema = Source1Schema;\nconst DefaultSvgSelectorSchema = SvgSelector1Schema;\nconst AnnotationAllVersionsSchema = z.union([\n    Annotation0Schema,\n    Annotation1Schema\n]);\nconst AnnotationPageAllVersionsSchema = z.union([\n    AnnotationPage0Schema,\n    AnnotationPage1Schema\n]);\nconst FeaturePropertiesAllVersionsSchema = z.union([\n    Annotation0FeaturePropertiesSchema,\n    Annotation1FeaturePropertiesSchema\n]);\nexport { Annotation0Schema, AnnotationPage0Schema, Annotation0FeaturePropertiesSchema, Annotation1Schema, AnnotationPage1Schema, Annotation1FeaturePropertiesSchema, SvgSelector0Schema, \n// Default schemas\nDefaultAnnotationSchema as AnnotationSchema, DefaultAnnotationPageSchema as AnnotationPageSchema, DefaultFeaturePropertiesSchema as FeaturePropertiesSchema, DefaultSvgSelectorSchema as SvgSelectorSchema, DefaultTargetSchema as TargetSchema, DefaultSourceSchema as SourceSchema, \n// All versions\nAnnotationAllVersionsSchema, AnnotationPageAllVersionsSchema, FeaturePropertiesAllVersionsSchema, \n// Shared schemas\nPointGeometrySchema, ImageServiceSchema, TransformationSchema, PartOfSchema, ResourceTypeSchema };\n", "export function isGeoreferencedMapsBeforeParse(mapOrMaps) {\n    return Array.isArray(mapOrMaps);\n}\nexport function isAnnotationPageBeforeParse(annotation) {\n    if (annotation &&\n        typeof annotation === 'object' &&\n        'type' in annotation &&\n        annotation.type === 'AnnotationPage' &&\n        'items' in annotation) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function isGeoreferencedMap2BeforeParse(georeferencedMap) {\n    if (georeferencedMap &&\n        typeof georeferencedMap === 'object' &&\n        'type' in georeferencedMap &&\n        georeferencedMap.type === 'GeoreferencedMap') {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function isAnnotation0BeforeParse(annotation) {\n    if (annotation &&\n        typeof annotation === 'object' &&\n        'target' in annotation &&\n        annotation.target &&\n        typeof annotation.target === 'object' &&\n        'source' in annotation.target &&\n        typeof annotation.target.source === 'string') {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n", "// Type guard that checks if georeferencedMap is v2 GeoreferencedMap\nexport function isGeoreferencedMap2(georeferencedMap) {\n    return ('type' in georeferencedMap && georeferencedMap.type === 'GeoreferencedMap');\n}\n// Type guard that checks if annotation is v1 Georeference Annotation\nexport function isAnnotation1(annotation) {\n    return ('source' in annotation.target &&\n        typeof annotation.target.source === 'object');\n}\n", "import { Annotation0Schema, Annotation1Schema, AnnotationPage0Schema, AnnotationPage1Schema } from './schemas/annotation.js';\nimport { isAnnotationPageBeforeParse, isAnnotation0BeforeParse } from './before-parse.js';\nimport { isAnnotation1 } from './guards.js';\nfunction parseResource(annotation) {\n    return {\n        id: parseImageId(annotation),\n        ...parseImageDimensions(annotation),\n        type: parseResourceType(annotation),\n        partOf: parsePartOf(annotation)\n    };\n}\nfunction parseImageId(annotation) {\n    if (isAnnotation1(annotation)) {\n        const source = annotation.target.source;\n        if ('id' in source) {\n            return source.id;\n        }\n        else {\n            return source['@id'];\n        }\n    }\n    else {\n        return annotation.target.service[0]['@id'];\n    }\n}\nfunction parseResourceType(annotation) {\n    if ('service' in annotation.target) {\n        return annotation.target.service[0].type;\n    }\n    else {\n        return annotation.target.source.type;\n    }\n}\nfunction parsePartOf(annotation) {\n    if (isAnnotation1(annotation)) {\n        return annotation.target.source.partOf;\n    }\n}\nfunction parseResourceCoords(properties) {\n    if ('pixelCoords' in properties) {\n        return properties.pixelCoords;\n    }\n    else {\n        return properties.resourceCoords;\n    }\n}\nfunction parseGcps(annotation) {\n    return annotation.body.features.map((gcpFeature) => ({\n        resource: parseResourceCoords(gcpFeature.properties),\n        geo: gcpFeature.geometry.coordinates\n    }));\n}\nfunction parseDates(annotation) {\n    if (isAnnotation1(annotation)) {\n        return {\n            created: annotation.created,\n            modified: annotation.modified\n        };\n    }\n}\nfunction parseImageDimensions(annotation) {\n    if (isAnnotation1(annotation)) {\n        return {\n            width: annotation.target.source.width,\n            height: annotation.target.source.height\n        };\n    }\n    const selector = annotation.target.selector;\n    const svg = selector.value;\n    const widthResult = /width=\"(?<width>\\d+)\"/.exec(svg);\n    const heightResult = /height=\"(?<height>\\d+)\"/.exec(svg);\n    const width = widthResult?.groups?.width;\n    const height = heightResult?.groups?.height;\n    if (!width || !height) {\n        throw new Error('Could not parse image dimensions');\n    }\n    return {\n        width: parseInt(width),\n        height: parseInt(height)\n    };\n}\nfunction parseResourceMask(annotation) {\n    const selector = annotation.target.selector;\n    const svg = selector.value;\n    const result = /points=\"(?<points>.+)\"/.exec(svg);\n    const groups = result?.groups;\n    if (groups && groups.points) {\n        const pointStrings = groups.points.trim().split(/\\s+/);\n        // Resource masks are not round-trip: they don't repeat the first point at the end of the list of points.\n        // According to their spec, SVG polygons are not supposed to be round-trip either.\n        // Here we deal with inputs that are round-trip by removing the last point\n        if (pointStrings[0] === pointStrings[pointStrings.length - 1]) {\n            pointStrings.splice(-1);\n        }\n        if (pointStrings.length >= 3) {\n            return pointStrings.map((point) => {\n                const numberStrings = point.split(',');\n                if (numberStrings.length === 2) {\n                    return [parseFloat(numberStrings[0]), parseFloat(numberStrings[1])];\n                }\n                else {\n                    throw new Error('Could not parse resource mask');\n                }\n            });\n        }\n        else {\n            throw new Error('Could not parse resource mask');\n        }\n    }\n    else {\n        throw new Error('Could not parse resource mask');\n    }\n}\nfunction getGeoreferencedMap(annotation) {\n    let resourceCrs;\n    if ('resourceCrs' in annotation.body) {\n        resourceCrs = annotation.body.resourceCrs;\n    }\n    return {\n        '@context': 'https://schemas.allmaps.org/map/2/context.json',\n        type: 'GeoreferencedMap',\n        id: annotation.id,\n        ...parseDates(annotation),\n        resource: parseResource(annotation),\n        gcps: parseGcps(annotation),\n        resourceMask: parseResourceMask(annotation),\n        transformation: annotation.body.transformation,\n        resourceCrs\n    };\n}\n/**\n * Parses a Georeference Annotation or an Annotation Page containing multiple Georeference Annotations\n * and returns an array of Georeferenced Maps.\n * @param {Annotation | AnnotationPage} annotation - Georeference Annotation or Annotation Page containing multiple Georeference Annotations\n * @returns {Map[]} Array of maps\n * @example\n * ```js\n * import fs from 'fs'\n * import { parseAnnotation } from '@allmaps/annotation'\n *\n * const annotation = JSON.parse(fs.readFileSync('./examples/annotation.example.json'))\n * const maps = parseAnnotation(annotation)\n * ```\n */\nexport function parseAnnotation(annotation) {\n    if (isAnnotationPageBeforeParse(annotation)) {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedAnnotationPage;\n        if ('items' in annotation &&\n            Array.isArray(annotation.items) &&\n            isAnnotation0BeforeParse(annotation.items[0])) {\n            parsedAnnotationPage = AnnotationPage0Schema.parse(annotation);\n        }\n        else {\n            parsedAnnotationPage = AnnotationPage1Schema.parse(annotation);\n        }\n        return parsedAnnotationPage.items.map((parsedAnnotation) => getGeoreferencedMap(parsedAnnotation));\n    }\n    else {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedAnnotation;\n        if (isAnnotation0BeforeParse(annotation)) {\n            parsedAnnotation = Annotation0Schema.parse(annotation);\n        }\n        else {\n            parsedAnnotation = Annotation1Schema.parse(annotation);\n        }\n        return [getGeoreferencedMap(parsedAnnotation)];\n    }\n}\n", "import { z } from 'zod';\nimport { PointSchema, ImageServiceSchema, ResourceMaskSchema, TransformationSchema } from '../shared.js';\nexport const GCPSchema = z.object({\n    image: PointSchema,\n    world: PointSchema\n});\nexport const ImageSchema = z.object({\n    uri: z.string().url(),\n    width: z.number(),\n    height: z.number(),\n    type: ImageServiceSchema\n});\nexport const GeoreferencedMapSchema = z.object({\n    id: z.string().optional(),\n    version: z.number().min(1).max(1).default(1),\n    image: ImageSchema,\n    gcps: GCPSchema.array(),\n    pixelMask: ResourceMaskSchema,\n    transformation: TransformationSchema.optional()\n});\nexport const GeoreferencedMapsSchema = z.array(GeoreferencedMapSchema);\n", "import { z } from 'zod';\nimport { PointSchema, ResourceTypeSchema, PartOfSchema, ResourceMaskSchema, TransformationSchema, ProjectionSchema } from '../shared.js';\nexport const GCPSchema = z.object({\n    resource: PointSchema,\n    geo: PointSchema\n});\nexport const ResourceSchema = z.object({\n    id: z.string().url(),\n    height: z.number().positive().optional(),\n    width: z.number().positive().optional(),\n    type: ResourceTypeSchema,\n    partOf: PartOfSchema.optional()\n});\nexport const GeoreferencedMapSchema = z.object({\n    '@context': z\n        .literal('https://schemas.allmaps.org/map/2/context.json')\n        .optional(),\n    type: z.literal('GeoreferencedMap'),\n    id: z.string().optional(),\n    created: z.string().datetime().optional(),\n    modified: z.string().datetime().optional(),\n    resource: ResourceSchema,\n    gcps: GCPSchema.array(),\n    resourceMask: ResourceMaskSchema,\n    transformation: TransformationSchema.optional(),\n    resourceCrs: ProjectionSchema.optional()\n});\nexport const GeoreferencedMapsSchema = z.array(GeoreferencedMapSchema);\n", "import { z } from 'zod';\nimport { GeoreferencedMapSchema as GeoreferencedMap1Schema, GeoreferencedMapsSchema as GeoreferencedMaps1Schema, GCPSchema as GeoreferencedMap1GCPSchema, ImageSchema as GeoreferencedMap1ImageSchema } from './georeferenced-map/georeferenced-map.1.js';\nimport { GeoreferencedMapSchema as GeoreferencedMap2Schema, GeoreferencedMapsSchema as GeoreferencedMaps2Schema, GCPSchema as GeoreferencedMap2GCPSchema, ResourceSchema as GeoreferencedMap2ResourceSchema } from './georeferenced-map/georeferenced-map.2.js';\nimport { PartOfSchema, ResourceMaskSchema, TransformationSchema } from './shared.js';\nconst DefaultGeoreferencedMapSchema = GeoreferencedMap2Schema;\nconst DefaultGeoreferencedMapsSchema = GeoreferencedMaps2Schema;\nconst DefaultGCPSchema = GeoreferencedMap2GCPSchema;\nconst DefaultResourceSchema = GeoreferencedMap2ResourceSchema;\nconst GeoreferencedMapAllVersionsSchema = z.union([\n    GeoreferencedMap1Schema,\n    GeoreferencedMap2Schema\n]);\nconst GeoreferencedMapsAllVersionsSchema = z.union([\n    GeoreferencedMaps1Schema,\n    GeoreferencedMaps2Schema\n]);\nconst GCPAllVersionsSchema = z.union([\n    GeoreferencedMap1GCPSchema,\n    GeoreferencedMap2GCPSchema\n]);\nexport { GeoreferencedMap1Schema, GeoreferencedMaps1Schema, GeoreferencedMap1GCPSchema, GeoreferencedMap1ImageSchema, GeoreferencedMap2Schema, GeoreferencedMaps2Schema, GeoreferencedMap2GCPSchema, GeoreferencedMap2ResourceSchema, \n// Default schemas\nDefaultGeoreferencedMapSchema as GeoreferencedMapSchema, DefaultGeoreferencedMapsSchema as GeoreferencedMapsSchema, DefaultGCPSchema as GCPSchema, DefaultResourceSchema as ResourceSchema, \n// All versions\nGeoreferencedMapAllVersionsSchema, GeoreferencedMapsAllVersionsSchema, GCPAllVersionsSchema, \n// Shared schemas\nPartOfSchema, ResourceMaskSchema, TransformationSchema };\n", "import { GeoreferencedMap1Schema, GeoreferencedMap2Schema, GeoreferencedMaps1Schema, GeoreferencedMaps2Schema } from './schemas/georeferenced-map.js';\nimport { isGeoreferencedMapsBeforeParse, isGeoreferencedMap2BeforeParse } from './before-parse.js';\nimport { isGeoreferencedMap2 } from './guards.js';\nfunction generateSvgSelector(georeferencedMap) {\n    let width;\n    let height;\n    let resourceMask;\n    if (isGeoreferencedMap2(georeferencedMap)) {\n        width = georeferencedMap.resource.width;\n        height = georeferencedMap.resource.height;\n        resourceMask = georeferencedMap.resourceMask;\n    }\n    else {\n        width = georeferencedMap.image.width;\n        height = georeferencedMap.image.height;\n        resourceMask = georeferencedMap.pixelMask;\n    }\n    let svg = `<svg>`;\n    if (width && height) {\n        svg = `<svg width=\"${width}\" height=\"${height}\">`;\n    }\n    return {\n        type: 'SvgSelector',\n        value: `${svg}<polygon points=\"${resourceMask\n            .map((point) => point.join(','))\n            .join(' ')}\" /></svg>`\n    };\n}\nfunction generateSource(georeferencedMap) {\n    let id;\n    let type;\n    let width;\n    let height;\n    let partOf;\n    if (isGeoreferencedMap2(georeferencedMap)) {\n        if (georeferencedMap.resource.type === 'Canvas') {\n            // TODO: Don't know why TypeScript complains if I don't do this\n            const source = {\n                id: georeferencedMap.resource.id,\n                type: georeferencedMap.resource.type,\n                height: georeferencedMap.resource.height,\n                width: georeferencedMap.resource.width,\n                partOf: georeferencedMap.resource.partOf\n            };\n            return source;\n        }\n        else {\n            id = georeferencedMap.resource.id;\n            type = georeferencedMap.resource.type;\n            width = georeferencedMap.resource.width;\n            height = georeferencedMap.resource.height;\n            partOf = georeferencedMap.resource.partOf;\n        }\n    }\n    else {\n        id = georeferencedMap.image.uri;\n        type = georeferencedMap.image.type;\n        width = georeferencedMap.image.width;\n        height = georeferencedMap.image.height;\n    }\n    return {\n        id,\n        type,\n        height,\n        width,\n        partOf\n    };\n}\nfunction generateDates(georeferencedMap) {\n    if (isGeoreferencedMap2(georeferencedMap)) {\n        return {\n            created: georeferencedMap.created,\n            modified: georeferencedMap.modified\n        };\n    }\n}\nfunction generateContext() {\n    return [\n        'http://iiif.io/api/extension/georef/1/context.json',\n        'http://iiif.io/api/presentation/3/context.json'\n    ];\n}\nfunction generateFeature(gcp) {\n    let resourceCoords;\n    let geoCoords;\n    if ('resource' in gcp) {\n        resourceCoords = gcp.resource;\n        geoCoords = gcp.geo;\n    }\n    else {\n        resourceCoords = gcp.image;\n        geoCoords = gcp.world;\n    }\n    return {\n        type: 'Feature',\n        properties: {\n            resourceCoords\n        },\n        geometry: {\n            type: 'Point',\n            coordinates: geoCoords\n        }\n    };\n}\nfunction generateGeoreferenceAnnotation(georeferencedMap) {\n    const target = {\n        type: 'SpecificResource',\n        source: generateSource(georeferencedMap),\n        selector: generateSvgSelector(georeferencedMap)\n    };\n    let resourceCrs;\n    if ('resourceCrs' in georeferencedMap) {\n        resourceCrs = georeferencedMap.resourceCrs;\n    }\n    const body = {\n        type: 'FeatureCollection',\n        transformation: georeferencedMap.transformation,\n        resourceCrs,\n        features: georeferencedMap.gcps.map((gcp) => generateFeature(gcp))\n    };\n    return {\n        id: georeferencedMap.id,\n        type: 'Annotation',\n        '@context': generateContext(),\n        ...generateDates(georeferencedMap),\n        motivation: 'georeferencing',\n        target,\n        body\n    };\n}\n/**\n * Generates a Georeference Annotation from a single Georeferenced Map or\n * an Annotation Page containing multiple Georeference Annotations from an array of Georeferenced Maps.\n * @param mapOrMaps - Single Georeferenced Map, or an array of Georeferenced Maps\n * @returns Georeference Annotation or Annotation Page\n * @example\n * ```js\n * import fs from 'fs'\n * import { generateAnnotation } from '@allmaps/annotation'\n *\n * const map = JSON.parse(fs.readFileSync('./examples/map.example.json'))\n * const annotation = generateAnnotation(map)\n * ```\n */\nexport function generateAnnotation(mapOrMaps) {\n    if (isGeoreferencedMapsBeforeParse(mapOrMaps)) {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedGeoreferencedMaps;\n        if (isGeoreferencedMap2BeforeParse(mapOrMaps[0])) {\n            parsedGeoreferencedMaps = GeoreferencedMaps2Schema.parse(mapOrMaps);\n        }\n        else {\n            parsedGeoreferencedMaps = GeoreferencedMaps1Schema.parse(mapOrMaps);\n        }\n        const annotations = parsedGeoreferencedMaps.map((parsedGeoreferencedMap) => generateGeoreferenceAnnotation(parsedGeoreferencedMap));\n        return {\n            type: 'AnnotationPage',\n            '@context': 'http://www.w3.org/ns/anno.jsonld',\n            items: annotations\n        };\n    }\n    else {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedGeoreferencedMap;\n        if (isGeoreferencedMap2BeforeParse(mapOrMaps)) {\n            parsedGeoreferencedMap = GeoreferencedMap2Schema.parse(mapOrMaps);\n        }\n        else {\n            parsedGeoreferencedMap = GeoreferencedMap1Schema.parse(mapOrMaps);\n        }\n        return generateGeoreferenceAnnotation(parsedGeoreferencedMap);\n    }\n}\n", "import { parseAnnotation } from './parser.js';\nimport { generateAnnotation } from './generator.js';\nimport { isAnnotation1, isGeoreferencedMap2 } from './guards.js';\nexport function toAnnotation1(annotation) {\n    if (isAnnotation1(annotation)) {\n        return annotation;\n    }\n    else {\n        const convertedAnnotation = generateAnnotation(parseAnnotation(annotation));\n        if ('items' in convertedAnnotation) {\n            return convertedAnnotation.items[0];\n        }\n        else {\n            return convertedAnnotation;\n        }\n    }\n}\nexport function toAnnotationPage1(annotationPage) {\n    return {\n        ...annotationPage,\n        items: annotationPage.items.map(toAnnotation1)\n    };\n}\nexport function toGeoreferencedMap2(georeferencedMap) {\n    if (isGeoreferencedMap2(georeferencedMap)) {\n        return georeferencedMap;\n    }\n    else {\n        const convertedMap = parseAnnotation(generateAnnotation(georeferencedMap));\n        return convertedMap[0];\n    }\n}\nexport function toGeoreferencedMaps2(georeferencedMap) {\n    return georeferencedMap.map(toGeoreferencedMap2);\n}\n", "import { Annotation0Schema, Annotation1Schema, AnnotationPage0Schema, AnnotationPage1Schema } from './schemas/annotation.js';\nimport { GeoreferencedMap1Schema, GeoreferencedMaps1Schema, GeoreferencedMap2Schema, GeoreferencedMaps2Schema } from './schemas/georeferenced-map.js';\nimport { toAnnotation1, toAnnotationPage1, toGeoreferencedMap2, toGeoreferencedMaps2 } from './convert.js';\nimport { isAnnotationPageBeforeParse, isAnnotation0BeforeParse, isGeoreferencedMapsBeforeParse, isGeoreferencedMap2BeforeParse } from './before-parse.js';\nexport function validateAnnotation(annotation) {\n    if (isAnnotationPageBeforeParse(annotation)) {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedAnnotationPage;\n        if ('items' in annotation &&\n            Array.isArray(annotation.items) &&\n            isAnnotation0BeforeParse(annotation.items[0])) {\n            parsedAnnotationPage = AnnotationPage0Schema.parse(annotation);\n        }\n        else {\n            parsedAnnotationPage = AnnotationPage1Schema.parse(annotation);\n        }\n        return toAnnotationPage1(parsedAnnotationPage);\n    }\n    else {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedAnnotation;\n        if (isAnnotation0BeforeParse(annotation)) {\n            parsedAnnotation = Annotation0Schema.parse(annotation);\n        }\n        else {\n            parsedAnnotation = Annotation1Schema.parse(annotation);\n        }\n        return toAnnotation1(parsedAnnotation);\n    }\n}\nexport function validateGeoreferencedMap(mapOrMaps) {\n    if (isGeoreferencedMapsBeforeParse(mapOrMaps)) {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedGeoreferencedMaps;\n        if (isGeoreferencedMap2BeforeParse(mapOrMaps[0])) {\n            parsedGeoreferencedMaps = GeoreferencedMaps2Schema.parse(mapOrMaps);\n        }\n        else {\n            parsedGeoreferencedMaps = GeoreferencedMaps1Schema.parse(mapOrMaps);\n        }\n        return toGeoreferencedMaps2(parsedGeoreferencedMaps);\n    }\n    else {\n        // Seperate .parse for different versions for better Zod errors\n        let parsedGeoreferencedMap;\n        if (isGeoreferencedMap2BeforeParse(mapOrMaps)) {\n            parsedGeoreferencedMap = GeoreferencedMap2Schema.parse(mapOrMaps);\n        }\n        else {\n            parsedGeoreferencedMap = GeoreferencedMap1Schema.parse(mapOrMaps);\n        }\n        return toGeoreferencedMap2(parsedGeoreferencedMap);\n    }\n}\n", "export default function (defs) {\n  defs('EPSG:4326', '+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees');\n  defs('EPSG:4269', '+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees');\n  defs('EPSG:3857', '+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs');\n  // UTM WGS84\n  for (var i = 1; i <= 60; ++i) {\n    defs('EPSG:' + (32600 + i), '+proj=utm +zone=' + i + ' +datum=WGS84 +units=m');\n    defs('EPSG:' + (32700 + i), '+proj=utm +zone=' + i + ' +south +datum=WGS84 +units=m');\n  }\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n", "export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0; // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314; // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI / 2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI / 4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n", "var primeMeridian = {};\n\nprimeMeridian.greenwich = 0.0; // \"0dE\",\nprimeMeridian.lisbon = -9.131906111111; // \"9d07'54.862\\\"W\",\nprimeMeridian.paris = 2.337229166667; // \"2d20'14.025\\\"E\",\nprimeMeridian.bogota = -74.080916666667; // \"74d04'51.3\\\"W\",\nprimeMeridian.madrid = -3.687938888889; // \"3d41'16.58\\\"W\",\nprimeMeridian.rome = 12.452333333333; // \"12d27'8.4\\\"E\",\nprimeMeridian.bern = 7.439583333333; // \"7d26'22.5\\\"E\",\nprimeMeridian.jakarta = 106.807719444444; // \"106d48'27.79\\\"E\",\nprimeMeridian.ferro = -17.666666666667; // \"17d40'W\",\nprimeMeridian.brussels = 4.367975; // \"4d22'4.71\\\"E\",\nprimeMeridian.stockholm = 18.058277777778; // \"18d3'29.8\\\"E\",\nprimeMeridian.athens = 23.7163375; // \"23d42'58.815\\\"E\",\nprimeMeridian.oslo = 10.722916666667; // \"10d43'22.5\\\"E\"\n\nexport default primeMeridian;\n", "export default {\n  mm: { to_meter: 0.001 },\n  cm: { to_meter: 0.01 },\n  ft: { to_meter: 0.3048 },\n  'us-ft': { to_meter: 1200 / 3937 },\n  fath: { to_meter: 1.8288 },\n  kmi: { to_meter: 1852 },\n  'us-ch': { to_meter: 20.1168402336805 },\n  'us-mi': { to_meter: 1609.34721869444 },\n  km: { to_meter: 1000 },\n  'ind-ft': { to_meter: 0.30479841 },\n  'ind-yd': { to_meter: 0.91439523 },\n  mi: { to_meter: 1609.344 },\n  yd: { to_meter: 0.9144 },\n  ch: { to_meter: 20.1168 },\n  link: { to_meter: 0.201168 },\n  dm: { to_meter: 0.1 },\n  in: { to_meter: 0.0254 },\n  'ind-ch': { to_meter: 20.11669506 },\n  'us-in': { to_meter: 0.025400050800101 },\n  'us-yd': { to_meter: 0.914401828803658 }\n};\n", "var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n", "import { D2R } from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\n/**\n * @param {string} defData\n * @returns {import('./defs').ProjectionDefinition}\n */\nexport default function (defData) {\n  /** @type {import('./defs').ProjectionDefinition} */\n  var self = {};\n  var paramObj = defData.split('+').map(function (v) {\n    return v.trim();\n  }).filter(function (a) {\n    return a;\n  }).reduce(function (p, a) {\n    /** @type {Array<?>} */\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function (v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function (v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function (v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function (v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function (v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function (v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function (v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function (v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function (v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function (v) {\n      self.rectified_grid_angle = parseFloat(v) * D2R;\n    },\n    lonc: function (v) {\n      self.longc = v * D2R;\n    },\n    x_0: function (v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function (v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function (v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function (v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function (v) {\n      self.a = parseFloat(v);\n    },\n    b: function (v) {\n      self.b = parseFloat(v);\n    },\n    r: function (v) {\n      self.a = self.b = parseFloat(v);\n    },\n    r_a: function () {\n      self.R_A = true;\n    },\n    zone: function (v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function () {\n      self.utmSouth = true;\n    },\n    towgs84: function (v) {\n      self.datum_params = v.split(',').map(function (a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function (v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function (v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function (v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function (v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function (v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      } else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function (v) {\n      var legalAxis = 'ewnsud';\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function () {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      } else {\n        self[paramOutname] = paramVal;\n      }\n    } else {\n      self[paramName] = paramVal;\n    }\n  }\n  if (typeof self.datumCode === 'string' && self.datumCode !== 'WGS84') {\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n", "class PROJJSONBuilderBase {\n  static getId(node) {\n    const idNode = node.find((child) => Array.isArray(child) && child[0] === 'ID');\n    if (idNode && idNode.length >= 3) {\n      return {\n        authority: idNode[1],\n        code: parseInt(idNode[2], 10),\n      };\n    }\n    return null;\n  }\n\n  static convertUnit(node, type = 'unit') {\n    if (!node || node.length < 3) {\n      return { type, name: 'unknown', conversion_factor: null };\n    }\n\n    const name = node[1];\n    const conversionFactor = parseFloat(node[2]) || null;\n\n    const idNode = node.find((child) => Array.isArray(child) && child[0] === 'ID');\n    const id = idNode\n      ? {\n        authority: idNode[1],\n        code: parseInt(idNode[2], 10),\n      }\n      : null;\n\n    return {\n      type,\n      name,\n      conversion_factor: conversionFactor,\n      id,\n    };\n  }\n\n  static convertAxis(node) {\n    const name = node[1] || 'Unknown';\n\n    // Determine the direction\n    let direction;\n    const abbreviationMatch = name.match(/^\\((.)\\)$/); // Match abbreviations like \"(E)\" or \"(N)\"\n    if (abbreviationMatch) {\n      // Use the abbreviation to determine the direction\n      const abbreviation = abbreviationMatch[1].toUpperCase();\n      if (abbreviation === 'E') direction = 'east';\n      else if (abbreviation === 'N') direction = 'north';\n      else if (abbreviation === 'U') direction = 'up';\n      else throw new Error(`Unknown axis abbreviation: ${abbreviation}`);\n    } else {\n      // Use the explicit direction provided in the AXIS node\n      direction = node[2] ? node[2].toLowerCase() : 'unknown';\n    }\n\n    const orderNode = node.find((child) => Array.isArray(child) && child[0] === 'ORDER');\n    const order = orderNode ? parseInt(orderNode[1], 10) : null;\n\n    const unitNode = node.find(\n      (child) =>\n        Array.isArray(child) &&\n        (child[0] === 'LENGTHUNIT' || child[0] === 'ANGLEUNIT' || child[0] === 'SCALEUNIT')\n    );\n    const unit = this.convertUnit(unitNode);\n\n    return {\n      name,\n      direction, // Use the valid PROJJSON direction value\n      unit,\n      order,\n    };\n  }\n\n  static extractAxes(node) {\n    return node\n      .filter((child) => Array.isArray(child) && child[0] === 'AXIS')\n      .map((axis) => this.convertAxis(axis))\n      .sort((a, b) => (a.order || 0) - (b.order || 0)); // Sort by the \"order\" property\n  }\n\n  static convert(node, result = {}) {\n\n    switch (node[0]) {\n      case 'PROJCRS':\n        result.type = 'ProjectedCRS';\n        result.name = node[1];\n        result.base_crs = node.find((child) => Array.isArray(child) && child[0] === 'BASEGEOGCRS')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'BASEGEOGCRS'))\n          : null;\n        result.conversion = node.find((child) => Array.isArray(child) && child[0] === 'CONVERSION')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'CONVERSION'))\n          : null;\n\n        const csNode = node.find((child) => Array.isArray(child) && child[0] === 'CS');\n        if (csNode) {\n          result.coordinate_system = {\n            type: csNode[1],\n            axis: this.extractAxes(node),\n          };\n        }\n\n        const lengthUnitNode = node.find((child) => Array.isArray(child) && child[0] === 'LENGTHUNIT');\n        if (lengthUnitNode) {\n          const unit = this.convertUnit(lengthUnitNode);\n          result.coordinate_system.unit = unit; // Add unit to coordinate_system\n        }\n\n        result.id = this.getId(node);\n        break;\n\n      case 'BASEGEOGCRS':\n      case 'GEOGCRS':\n        result.type = 'GeographicCRS';\n        result.name = node[1];\n      \n        // Handle DATUM or ENSEMBLE\n        const datumOrEnsembleNode = node.find(\n          (child) => Array.isArray(child) && (child[0] === 'DATUM' || child[0] === 'ENSEMBLE')\n        );\n        if (datumOrEnsembleNode) {\n          const datumOrEnsemble = this.convert(datumOrEnsembleNode);\n          if (datumOrEnsembleNode[0] === 'ENSEMBLE') {\n            result.datum_ensemble = datumOrEnsemble;\n          } else {\n            result.datum = datumOrEnsemble;\n          }\n          const primem = node.find((child) => Array.isArray(child) && child[0] === 'PRIMEM');\n          if (primem && primem[1] !== 'Greenwich') {\n            datumOrEnsemble.prime_meridian = {\n              name: primem[1],\n              longitude: parseFloat(primem[2]),\n            }\n          }\n        }\n      \n        result.coordinate_system = {\n          type: 'ellipsoidal',\n          axis: this.extractAxes(node),\n        };\n      \n        result.id = this.getId(node);\n        break;\n\n      case 'DATUM':\n        result.type = 'GeodeticReferenceFrame';\n        result.name = node[1];\n        result.ellipsoid = node.find((child) => Array.isArray(child) && child[0] === 'ELLIPSOID')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'ELLIPSOID'))\n          : null;\n        break;\n      \n      case 'ENSEMBLE':\n        result.type = 'DatumEnsemble';\n        result.name = node[1];\n      \n        // Extract ensemble members\n        result.members = node\n          .filter((child) => Array.isArray(child) && child[0] === 'MEMBER')\n          .map((member) => ({\n            type: 'DatumEnsembleMember',\n            name: member[1],\n            id: this.getId(member), // Extract ID as { authority, code }\n          }));\n      \n        // Extract accuracy\n        const accuracyNode = node.find((child) => Array.isArray(child) && child[0] === 'ENSEMBLEACCURACY');\n        if (accuracyNode) {\n          result.accuracy = parseFloat(accuracyNode[1]);\n        }\n      \n        // Extract ellipsoid\n        const ellipsoidNode = node.find((child) => Array.isArray(child) && child[0] === 'ELLIPSOID');\n        if (ellipsoidNode) {\n          result.ellipsoid = this.convert(ellipsoidNode); // Convert the ellipsoid node\n        }\n      \n        // Extract identifier for the ensemble\n        result.id = this.getId(node);\n        break;\n\n      case 'ELLIPSOID':\n        result.type = 'Ellipsoid';\n        result.name = node[1];\n        result.semi_major_axis = parseFloat(node[2]);\n        result.inverse_flattening = parseFloat(node[3]);\n        const units = node.find((child) => Array.isArray(child) && child[0] === 'LENGTHUNIT')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'LENGTHUNIT'), result)\n          : null;\n        break;\n\n      case 'CONVERSION':\n        result.type = 'Conversion';\n        result.name = node[1];\n        result.method = node.find((child) => Array.isArray(child) && child[0] === 'METHOD')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'METHOD'))\n          : null;\n        result.parameters = node\n          .filter((child) => Array.isArray(child) && child[0] === 'PARAMETER')\n          .map((param) => this.convert(param));\n        break;\n\n      case 'METHOD':\n        result.type = 'Method';\n        result.name = node[1];\n        result.id = this.getId(node);\n        break;\n\n      case 'PARAMETER':\n        result.type = 'Parameter';\n        result.name = node[1];\n        result.value = parseFloat(node[2]);\n        result.unit = this.convertUnit(\n          node.find(\n            (child) =>\n              Array.isArray(child) &&\n              (child[0] === 'LENGTHUNIT' || child[0] === 'ANGLEUNIT' || child[0] === 'SCALEUNIT')\n          )\n        );\n        result.id = this.getId(node);\n        break;\n\n      case 'BOUNDCRS':\n        result.type = 'BoundCRS';\n\n        // Process SOURCECRS\n        const sourceCrsNode = node.find((child) => Array.isArray(child) && child[0] === 'SOURCECRS');\n        if (sourceCrsNode) {\n          const sourceCrsContent = sourceCrsNode.find((child) => Array.isArray(child));\n          result.source_crs = sourceCrsContent ? this.convert(sourceCrsContent) : null;\n        }\n\n        // Process TARGETCRS\n        const targetCrsNode = node.find((child) => Array.isArray(child) && child[0] === 'TARGETCRS');\n        if (targetCrsNode) {\n          const targetCrsContent = targetCrsNode.find((child) => Array.isArray(child));\n          result.target_crs = targetCrsContent ? this.convert(targetCrsContent) : null;\n        }\n\n        // Process ABRIDGEDTRANSFORMATION\n        const transformationNode = node.find((child) => Array.isArray(child) && child[0] === 'ABRIDGEDTRANSFORMATION');\n        if (transformationNode) {\n          result.transformation = this.convert(transformationNode);\n        } else {\n          result.transformation = null;\n        }\n        break;\n\n      case 'ABRIDGEDTRANSFORMATION':\n        result.type = 'Transformation';\n        result.name = node[1];\n        result.method = node.find((child) => Array.isArray(child) && child[0] === 'METHOD')\n          ? this.convert(node.find((child) => Array.isArray(child) && child[0] === 'METHOD'))\n          : null;\n\n        result.parameters = node\n          .filter((child) => Array.isArray(child) && (child[0] === 'PARAMETER' || child[0] === 'PARAMETERFILE'))\n          .map((param) => {\n            if (param[0] === 'PARAMETER') {\n              return this.convert(param);\n            } else if (param[0] === 'PARAMETERFILE') {\n              return {\n                name: param[1],\n                value: param[2],\n                id: {\n                  'authority': 'EPSG',\n                  'code': 8656\n                }\n              };\n            }\n          });\n\n        // Adjust the Scale difference parameter if present\n        if (result.parameters.length === 7) {\n          const scaleDifference = result.parameters[6];\n          if (scaleDifference.name === 'Scale difference') {\n            scaleDifference.value = Math.round((scaleDifference.value - 1) * 1e12) / 1e6;\n          }\n        }\n\n        result.id = this.getId(node);\n        break;\n      \n      case 'AXIS':\n        if (!result.coordinate_system) {\n          result.coordinate_system = { type: 'unspecified', axis: [] };\n        }\n        result.coordinate_system.axis.push(this.convertAxis(node));\n        break;\n      \n      case 'LENGTHUNIT':\n        const unit = this.convertUnit(node, 'LinearUnit');\n        if (result.coordinate_system && result.coordinate_system.axis) {\n          result.coordinate_system.axis.forEach((axis) => {\n            if (!axis.unit) {\n              axis.unit = unit;\n            }\n          });\n        }\n        if (unit.conversion_factor && unit.conversion_factor !== 1) {\n          if (result.semi_major_axis) {\n            result.semi_major_axis = {\n              value: result.semi_major_axis,\n              unit,\n            }\n          }\n        }\n        break;\n\n      default:\n        result.keyword = node[0];\n        break;\n    }\n\n    return result;\n  }\n}\n\nexport default PROJJSONBuilderBase;", "import PROJJSONBuilderBase from './PROJJSONBuilderBase.js';\n\nclass PROJJSONBuilder2015 extends PROJJSONBuilderBase {\n  static convert(node, result = {}) {\n    super.convert(node, result);\n\n    // Skip `CS` and `USAGE` nodes for WKT2-2015\n    if (result.coordinate_system && result.coordinate_system.subtype === 'Cartesian') {\n      delete result.coordinate_system;\n    }\n    if (result.usage) {\n      delete result.usage;\n    }\n\n    return result;\n  }\n}\n\nexport default PROJJSONBuilder2015;", "import PROJJSONBuilderBase from './PROJJSONBuilderBase.js';\n\nclass PROJJSONBuilder2019 extends PROJJSONBuilderBase {\n  static convert(node, result = {}) {\n    super.convert(node, result);\n\n    // Handle `CS` node for WKT2-2019\n    const csNode = node.find((child) => Array.isArray(child) && child[0] === 'CS');\n    if (csNode) {\n      result.coordinate_system = {\n        subtype: csNode[1],\n        axis: this.extractAxes(node),\n      };\n    }\n\n    // Handle `USAGE` node for WKT2-2019\n    const usageNode = node.find((child) => Array.isArray(child) && child[0] === 'USAGE');\n    if (usageNode) {\n      const scope = usageNode.find((child) => Array.isArray(child) && child[0] === 'SCOPE');\n      const area = usageNode.find((child) => Array.isArray(child) && child[0] === 'AREA');\n      const bbox = usageNode.find((child) => Array.isArray(child) && child[0] === 'BBOX');\n      result.usage = {};\n      if (scope) {\n        result.usage.scope = scope[1];\n      }\n      if (area) {\n        result.usage.area = area[1];\n      }\n      if (bbox) {\n        result.usage.bbox = bbox.slice(1);\n      }\n    }\n\n    return result;\n  }\n}\n\nexport default PROJJSONBuilder2019;", "import PROJJSONBuilder2015 from './PROJJSONBuilder2015.js';\nimport PROJJSONBuilder2019 from './PROJJSONBuilder2019.js';\n\n/**\n * Detects the WKT2 version based on the structure of the WKT.\n * @param {Array} root The root WKT array node.\n * @returns {string} The detected version (\"2015\" or \"2019\").\n */\nfunction detectWKT2Version(root) {\n  // Check for WKT2-2019-specific nodes\n  if (root.find((child) => Array.isArray(child) && child[0] === 'USAGE')) {\n    return '2019'; // `USAGE` is specific to WKT2-2019\n  }\n\n  // Check for WKT2-2015-specific nodes\n  if (root.find((child) => Array.isArray(child) && child[0] === 'CS')) {\n    return '2015'; // `CS` is valid in both, but default to 2015 unless `USAGE` is present\n  }\n\n  if (root[0] === 'BOUNDCRS' || root[0] === 'PROJCRS' || root[0] === 'GEOGCRS') {\n    return '2015'; // These are valid in both, but default to 2015\n  }\n\n  // Default to WKT2-2015 if no specific indicators are found\n  return '2015';\n}\n\n/**\n * Builds a PROJJSON object from a WKT array structure.\n * @param {Array} root The root WKT array node.\n * @returns {Object} The PROJJSON object.\n */\nexport function buildPROJJSON(root) {\n  const version = detectWKT2Version(root);\n  const builder = version === '2019' ? PROJJSONBuilder2019 : PROJJSONBuilder2015;\n  return builder.convert(root);\n}\n", "/**\n * Detects whether the WKT string is WKT1 or WKT2.\n * @param {string} wkt The WKT string.\n * @returns {string} The detected version (\"WKT1\" or \"WKT2\").\n */\nexport function detectWKTVersion(wkt) {\n  // Normalize the WKT string for easier keyword matching\n  const normalizedWKT = wkt.toUpperCase();\n\n  // Check for WKT2-specific keywords\n  if (\n    normalizedWKT.includes('PROJCRS') ||\n    normalizedWKT.includes('GEOGCRS') ||\n    normalizedWKT.includes('BOUNDCRS') ||\n    normalizedWKT.includes('VERTCRS') ||\n    normalizedWKT.includes('LENGTHUNIT') ||\n    normalizedWKT.includes('ANGLEUNIT') ||\n    normalizedWKT.includes('SCALEUNIT')\n  ) {\n    return 'WKT2';\n  }\n\n  // Check for WKT1-specific keywords\n  if (\n    normalizedWKT.includes('PROJCS') ||\n    normalizedWKT.includes('GEOGCS') ||\n    normalizedWKT.includes('LOCAL_CS') ||\n    normalizedWKT.includes('VERT_CS') ||\n    normalizedWKT.includes('UNIT')\n  ) {\n    return 'WKT1';\n  }\n\n  // Default to WKT1 if no specific indicators are found\n  return 'WKT1';\n}", "export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n", "\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'FITTED_CS':\n    // the followings are the crs defined in\n    // https://github.com/proj4js/proj4js/blob/1da4ed0b865d0fcb51c136090569210cdcc9019e/lib/parseCode.js#L11\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'ENGCRS':\n    case 'ENGINEERINGCRS':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      obj[key].type = key;\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n", "var D2R = 0.01745329251994329577;\n\nexport function d2r(input) {\n  return input * D2R;\n}\n\nexport function applyProjectionDefaults(wkt) {\n  // Normalize projName for WKT2 compatibility\n  const normalizedProjName = (wkt.projName || '').toLowerCase().replace(/_/g, ' ');\n\n  if (!wkt.long0 && wkt.longc && (normalizedProjName === 'albers conic equal area' || normalizedProjName === 'lambert azimuthal equal area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (normalizedProjName === 'stereographic south pole' || normalizedProjName === 'polar stereographic (variant b)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n    delete wkt.lat1;\n  } else if (!wkt.lat_ts && wkt.lat0 && (normalizedProjName === 'polar stereographic' || normalizedProjName === 'polar stereographic (variant a)')) {\n    wkt.lat_ts = wkt.lat0;\n    wkt.lat0 = d2r(wkt.lat0 > 0 ? 90 : -90);\n    delete wkt.lat1;\n  }\n}", "import { applyProjectionDefaults } from './util.js';\n\n// Helper function to process units and to_meter\nfunction processUnit(unit) {\n  let result = { units: null, to_meter: undefined };\n\n  if (typeof unit === 'string') {\n    result.units = unit.toLowerCase();\n    if (result.units === 'metre') {\n      result.units = 'meter'; // Normalize 'metre' to 'meter'\n    }\n    if (result.units === 'meter') {\n      result.to_meter = 1; // Only set to_meter if units are 'meter'\n    }\n  } else if (unit && unit.name) {\n    result.units = unit.name.toLowerCase();\n    if (result.units === 'metre') {\n      result.units = 'meter'; // Normalize 'metre' to 'meter'\n    }\n    result.to_meter = unit.conversion_factor;\n  }\n\n  return result;\n}\n\nfunction toValue(valueOrObject) {\n  if (typeof valueOrObject === 'object') {\n    return valueOrObject.value * valueOrObject.unit.conversion_factor;\n  }\n  return valueOrObject;\n}\n\nfunction calculateEllipsoid(value, result) {\n  if (value.ellipsoid.radius) {\n    result.a = value.ellipsoid.radius;\n    result.rf = 0;\n  } else {\n    result.a = toValue(value.ellipsoid.semi_major_axis);\n    if (value.ellipsoid.inverse_flattening !== undefined) {\n      result.rf = value.ellipsoid.inverse_flattening;\n    } else if (value.ellipsoid.semi_major_axis !== undefined && value.ellipsoid.semi_minor_axis !== undefined) {\n      result.rf = result.a / (result.a - toValue(value.ellipsoid.semi_minor_axis));\n    }\n  }\n}\n\nexport function transformPROJJSON(projjson, result = {}) {\n  if (!projjson || typeof projjson !== 'object') {\n    return projjson; // Return primitive values as-is\n  }\n\n  if (projjson.type === 'BoundCRS') {\n    transformPROJJSON(projjson.source_crs, result);\n\n    if (projjson.transformation) {\n      if (projjson.transformation.method && projjson.transformation.method.name === 'NTv2') {\n        // Set nadgrids to the filename from the parameterfile\n        result.nadgrids = projjson.transformation.parameters[0].value;\n      } else {\n        // Populate datum_params if no parameterfile is found\n        result.datum_params = projjson.transformation.parameters.map((param) => param.value);\n      }\n    }\n    return result; // Return early for BoundCRS\n  }\n\n  // Handle specific keys in PROJJSON\n  Object.keys(projjson).forEach((key) => {\n    const value = projjson[key];\n    if (value === null) {\n      return;\n    }\n\n    switch (key) {\n      case 'name':\n        if (result.srsCode) {\n          break;\n        }\n        result.name = value;\n        result.srsCode = value; // Map `name` to `srsCode`\n        break;\n\n      case 'type':\n        if (value === 'GeographicCRS') {\n          result.projName = 'longlat';\n        } else if (value === 'ProjectedCRS' && projjson.conversion && projjson.conversion.method) {\n          result.projName = projjson.conversion.method.name; // Retain original capitalization\n        }\n        break;\n\n      case 'datum':\n      case 'datum_ensemble': // Handle both datum and ensemble\n        if (value.ellipsoid) {\n          // Extract ellipsoid properties\n          result.ellps = value.ellipsoid.name;\n          calculateEllipsoid(value, result);\n        }\n        if (value.prime_meridian) {\n          result.from_greenwich = value.prime_meridian.longitude * Math.PI / 180; // Convert to radians\n        }\n        break;\n\n      case 'ellipsoid':\n        result.ellps = value.name;\n        calculateEllipsoid(value, result);\n        break;\n\n      case 'prime_meridian':\n        result.long0 = (value.longitude || 0) * Math.PI / 180; // Convert to radians\n        break;\n\n      case 'coordinate_system':\n        if (value.axis) {\n          result.axis = value.axis\n            .map((axis) => {\n              const direction = axis.direction;\n              if (direction === 'east') return 'e';\n              if (direction === 'north') return 'n';\n              if (direction === 'west') return 'w';\n              if (direction === 'south') return 's';\n              throw new Error(`Unknown axis direction: ${direction}`);\n            })\n            .join('') + 'u'; // Combine into a single string (e.g., \"enu\")\n\n          if (value.unit) {\n            const { units, to_meter } = processUnit(value.unit);\n            result.units = units;\n            result.to_meter = to_meter;\n          } else if (value.axis[0] && value.axis[0].unit) {\n            const { units, to_meter } = processUnit(value.axis[0].unit);\n            result.units = units;\n            result.to_meter = to_meter;\n          }\n        }\n        break;\n        \n      case 'id':\n        if (value.authority && value.code) {\n          result.title = value.authority + ':' + value.code;\n        }\n        break;\n\n      case 'conversion':\n        if (value.method && value.method.name) {\n          result.projName = value.method.name; // Retain original capitalization\n        }\n        if (value.parameters) {\n          value.parameters.forEach((param) => {\n            const paramName = param.name.toLowerCase().replace(/\\s+/g, '_');\n            const paramValue = param.value;\n            if (param.unit && param.unit.conversion_factor) {\n              result[paramName] = paramValue * param.unit.conversion_factor; // Convert to radians or meters\n            } else if (param.unit === 'degree') {\n              result[paramName] = paramValue * Math.PI / 180; // Convert to radians\n            } else {\n              result[paramName] = paramValue;\n            }\n          });\n        }\n        break;\n\n      case 'unit':\n        if (value.name) {\n          result.units = value.name.toLowerCase();\n          if (result.units === 'metre') {\n            result.units = 'meter';\n          }\n        }\n        if (value.conversion_factor) {\n          result.to_meter = value.conversion_factor;\n        }\n        break;\n\n      case 'base_crs':\n        transformPROJJSON(value, result); // Pass `result` directly\n        result.datumCode = value.id ? value.id.authority + '_' + value.id.code : value.name; // Set datumCode\n        break;\n\n      default:\n        // Ignore irrelevant or unneeded properties\n        break;\n    }\n  });\n\n  // Additional calculated properties\n  if (result.latitude_of_false_origin !== undefined) {\n    result.lat0 = result.latitude_of_false_origin; // Already in radians\n  }\n  if (result.longitude_of_false_origin !== undefined) {\n    result.long0 = result.longitude_of_false_origin;\n  }\n  if (result.latitude_of_standard_parallel !== undefined) {\n    result.lat0 = result.latitude_of_standard_parallel;\n    result.lat1 = result.latitude_of_standard_parallel;\n  }\n  if (result.latitude_of_1st_standard_parallel !== undefined) {\n    result.lat1 = result.latitude_of_1st_standard_parallel;\n  }\n  if (result.latitude_of_2nd_standard_parallel !== undefined) {\n    result.lat2 = result.latitude_of_2nd_standard_parallel; \n  }\n  if (result.latitude_of_projection_centre !== undefined) {\n    result.lat0 = result.latitude_of_projection_centre;\n  }\n  if (result.longitude_of_projection_centre !== undefined) {\n    result.longc = result.longitude_of_projection_centre;\n  }\n  if (result.easting_at_false_origin !== undefined) {\n    result.x0 = result.easting_at_false_origin;\n  }\n  if (result.northing_at_false_origin !== undefined) {\n    result.y0 = result.northing_at_false_origin;\n  }\n  if (result.latitude_of_natural_origin !== undefined) {\n    result.lat0 = result.latitude_of_natural_origin;\n  }\n  if (result.longitude_of_natural_origin !== undefined) {\n    result.long0 = result.longitude_of_natural_origin;\n  }\n  if (result.longitude_of_origin !== undefined) {\n    result.long0 = result.longitude_of_origin;\n  }\n  if (result.false_easting !== undefined) {\n    result.x0 = result.false_easting;\n  }\n  if (result.easting_at_projection_centre) {\n    result.x0 = result.easting_at_projection_centre;\n  }\n  if (result.false_northing !== undefined) {\n    result.y0 = result.false_northing;\n  }\n  if (result.northing_at_projection_centre) {\n    result.y0 = result.northing_at_projection_centre;\n  }\n  if (result.standard_parallel_1 !== undefined) {\n    result.lat1 = result.standard_parallel_1;\n  }\n  if (result.standard_parallel_2 !== undefined) {\n    result.lat2 = result.standard_parallel_2;\n  }\n  if (result.scale_factor_at_natural_origin !== undefined) {\n    result.k0 = result.scale_factor_at_natural_origin;\n  }\n  if (result.scale_factor_at_projection_centre !== undefined) {\n    result.k0 = result.scale_factor_at_projection_centre;\n  }\n  if (result.scale_factor_on_pseudo_standard_parallel !== undefined) {  \n    result.k0 = result.scale_factor_on_pseudo_standard_parallel;\n  }\n  if (result.azimuth !== undefined) {\n    result.alpha = result.azimuth;\n  }\n  if (result.azimuth_at_projection_centre !== undefined) {\n    result.alpha = result.azimuth_at_projection_centre;\n  }\n  if (result.angle_from_rectified_to_skew_grid) {\n    result.rectified_grid_angle = result.angle_from_rectified_to_skew_grid;\n  }\n\n  // Apply projection defaults\n  applyProjectionDefaults(result);\n\n  return result;\n}", "import { buildPROJJSON } from './buildPROJJSON.js';\nimport { detectWKTVersion } from './detectWKTVersion.js';\nimport parser from './parser.js';\nimport {sExpr} from './process.js';\nimport { transformPROJJSON } from './transformPROJJSON.js';\nimport { applyProjectionDefaults, d2r } from './util.js';\n\nvar knownTypes = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS', 'GEOCCS', 'PROJCS', 'LOCAL_CS', 'GEODCRS',\n  'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction cleanWKT(wkt) {\n  var keys = Object.keys(wkt);\n  for (var i = 0, ii = keys.length; i <ii; ++i) {\n    var key = keys[i];\n    // the followings are the crs defined in\n    // https://github.com/proj4js/proj4js/blob/1da4ed0b865d0fcb51c136090569210cdcc9019e/lib/parseCode.js#L11\n    if (knownTypes.indexOf(key) !== -1) {\n      setPropertiesFromWkt(wkt[key]);\n    }\n    if (typeof wkt[key] === 'object') {\n      cleanWKT(wkt[key]);\n    }\n  }\n}\n\nfunction setPropertiesFromWkt(wkt) {\n  if (wkt.AUTHORITY) {\n    var authority = Object.keys(wkt.AUTHORITY)[0];\n    if (authority && authority in wkt.AUTHORITY) {\n      wkt.title = authority + ':' + wkt.AUTHORITY[authority];\n    }\n  }\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode === 'belge_1972') {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n  if (wkt.rectified_grid_angle) {\n    wkt.rectified_grid_angle = d2r(wkt.rectified_grid_angle);\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  applyProjectionDefaults(wkt);\n}\nexport default function(wkt) {\n  if (typeof wkt === 'object') {\n    return transformPROJJSON(wkt);\n  }\n  const version = detectWKTVersion(wkt);\n  var lisp = parser(wkt);\n  if (version === 'WKT2') {\n    const projjson = buildPROJJSON(lisp);\n    return transformPROJJSON(projjson);\n  }\n  var type = lisp[0];\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj[type];\n}\n", "import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\n/**\n * @typedef {Object} ProjectionDefinition\n * @property {string} title\n * @property {string} [projName]\n * @property {string} [ellps]\n * @property {import('./Proj.js').DatumDefinition} [datum]\n * @property {string} [datumName]\n * @property {number} [rf]\n * @property {number} [lat0]\n * @property {number} [lat1]\n * @property {number} [lat2]\n * @property {number} [lat_ts]\n * @property {number} [long0]\n * @property {number} [long1]\n * @property {number} [long2]\n * @property {number} [alpha]\n * @property {number} [longc]\n * @property {number} [x0]\n * @property {number} [y0]\n * @property {number} [k0]\n * @property {number} [a]\n * @property {number} [b]\n * @property {true} [R_A]\n * @property {number} [zone]\n * @property {true} [utmSouth]\n * @property {string|Array<number>} [datum_params]\n * @property {number} [to_meter]\n * @property {string} [units]\n * @property {number} [from_greenwich]\n * @property {string} [datumCode]\n * @property {string} [nadgrids]\n * @property {string} [axis]\n * @property {boolean} [sphere]\n * @property {number} [rectified_grid_angle]\n * @property {boolean} [approx]\n * @property {<T extends import('./core').TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} inverse\n * @property {<T extends import('./core').TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} forward\n */\n\n/**\n * @overload\n * @param {string} name\n * @param {string|ProjectionDefinition|import('./core.js').PROJJSONDefinition} projection\n * @returns {void}\n */\n/**\n * @overload\n * @param {Array<[string, string]>} name\n * @returns {Array<ProjectionDefinition|undefined>}\n */\n/**\n * @overload\n * @param {string} name\n * @returns {ProjectionDefinition}\n */\n\n/**\n * @param {string | Array<Array<string>> | Partial<Record<'EPSG'|'ESRI'|'IAU2000', ProjectionDefinition>>} name\n * @returns {ProjectionDefinition | Array<ProjectionDefinition|undefined> | void}\n */\nfunction defs(name) {\n  /* global console */\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[/** @type {string} */ (name)] = parseProj(arguments[1]);\n      } else {\n        defs[/** @type {string} */ (name)] = wkt(arguments[1]);\n      }\n    } else {\n      defs[/** @type {string} */ (name)] = def;\n    }\n  } else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function (v) {\n        if (Array.isArray(v)) {\n          return defs.apply(that, v);\n        } else {\n          return defs(v);\n        }\n      });\n    } else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    } else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    } else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    } else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    } else {\n      console.log(name);\n    }\n    return;\n  }\n}\nglobals(defs);\nexport default defs;\n", "import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code) {\n  return typeof code === 'string';\n}\nfunction testDef(code) {\n  return code in defs;\n}\nfunction testWKT(code) {\n  return (code.indexOf('+') !== 0 && code.indexOf('[') !== -1) || (typeof code === 'object' && !('srsCode' in code));\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code) {\n  return code[0] === '+';\n}\n/**\n * @param {string | import('./core').PROJJSONDefinition | import('./defs').ProjectionDefinition} code\n * @returns {import('./defs').ProjectionDefinition}\n */\nfunction parse(code) {\n  if (testObj(code)) {\n    // check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  } else if (!('projName' in code)) {\n    return wkt(code);\n  } else {\n    return code;\n  }\n}\n\nexport default parse;\n", "export default function (destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n", "export default function (eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}\n", "export default function (x) {\n  return x < 0 ? -1 : 1;\n}\n", "import { TWO_PI, SPI } from '../constants/values';\nimport sign from './sign';\n\nexport default function (x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n", "import { HALF_PI } from '../constants/values';\n\nexport default function (eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n", "import { HALF_PI } from '../constants/values';\n\nexport default function (eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  // console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n", "import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport { FORTPI, R2D, EPSLN, HALF_PI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} es\n * @property {number} e\n * @property {number} k\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if (!('x0' in this)) {\n    this.x0 = 0;\n  }\n  if (!('y0' in this)) {\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    } else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  } else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      } else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  -------------------------------------------------- */\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  } else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    } else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  -------------------------------------------------- */\nexport function inverse(p) {\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  } else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Mercator', 'Popular Visualisation Pseudo Mercator', 'Mercator_1SP', 'Mercator_Auxiliary_Sphere', 'Mercator_Variant_A', 'merc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "export function init() {\n  // no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport { identity as forward };\nexport { identity as inverse };\nexport var names = ['longlat', 'identity'];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n", "import merc from './projections/merc';\nimport longlat from './projections/longlat';\n/** @type {Array<Partial<import('./Proj').default>>} */\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\n/**\n * @param {import('./Proj').default} proj\n * @param {number} i\n */\nexport function add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function (n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport function getNormalizedProjName(n) {\n  return n.replace(/[-\\(\\)\\s]+/g, ' ').trim().replace(/ /g, '_');\n}\n\n/**\n * Get a projection by name.\n * @param {string} name\n * @returns {import('./Proj').default|false}\n */\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n  n = getNormalizedProjName(n);\n  if (n in names && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n", "var ellipsoids = {\n  MERIT: {\n    a: 6378137,\n    rf: 298.257,\n    ellipseName: 'MERIT 1983'\n  },\n  SGS85: {\n    a: 6378136,\n    rf: 298.257,\n    ellipseName: 'Soviet Geodetic System 85'\n  },\n  GRS80: {\n    a: 6378137,\n    rf: 298.257222101,\n    ellipseName: 'GRS 1980(IUGG, 1980)'\n  },\n  IAU76: {\n    a: 6378140,\n    rf: 298.257,\n    ellipseName: 'IAU 1976'\n  },\n  airy: {\n    a: 6377563.396,\n    b: 6356256.91,\n    ellipseName: 'Airy 1830'\n  },\n  APL4: {\n    a: 6378137,\n    rf: 298.25,\n    ellipseName: 'Appl. Physics. 1965'\n  },\n  NWL9D: {\n    a: 6378145,\n    rf: 298.25,\n    ellipseName: 'Naval Weapons Lab., 1965'\n  },\n  mod_airy: {\n    a: 6377340.189,\n    b: 6356034.446,\n    ellipseName: 'Modified Airy'\n  },\n  andrae: {\n    a: 6377104.43,\n    rf: 300,\n    ellipseName: 'Andrae 1876 (Den., Iclnd.)'\n  },\n  aust_SA: {\n    a: 6378160,\n    rf: 298.25,\n    ellipseName: 'Australian Natl & S. Amer. 1969'\n  },\n  GRS67: {\n    a: 6378160,\n    rf: 298.247167427,\n    ellipseName: 'GRS 67(IUGG 1967)'\n  },\n  bessel: {\n    a: 6377397.155,\n    rf: 299.1528128,\n    ellipseName: 'Bessel 1841'\n  },\n  bess_nam: {\n    a: 6377483.865,\n    rf: 299.1528128,\n    ellipseName: 'Bessel 1841 (Namibia)'\n  },\n  clrk66: {\n    a: 6378206.4,\n    b: 6356583.8,\n    ellipseName: 'Clarke 1866'\n  },\n  clrk80: {\n    a: 6378249.145,\n    rf: 293.4663,\n    ellipseName: 'Clarke 1880 mod.'\n  },\n  clrk80ign: {\n    a: 6378249.2,\n    b: 6356515,\n    rf: 293.4660213,\n    ellipseName: 'Clarke 1880 (IGN)'\n  },\n  clrk58: {\n    a: 6378293.645208759,\n    rf: 294.2606763692654,\n    ellipseName: 'Clarke 1858'\n  },\n  CPM: {\n    a: 6375738.7,\n    rf: 334.29,\n    ellipseName: 'Comm. des Poids et Mesures 1799'\n  },\n  delmbr: {\n    a: 6376428,\n    rf: 311.5,\n    ellipseName: 'Delambre 1810 (Belgium)'\n  },\n  engelis: {\n    a: 6378136.05,\n    rf: 298.2566,\n    ellipseName: 'Engelis 1985'\n  },\n  evrst30: {\n    a: 6377276.345,\n    rf: 300.8017,\n    ellipseName: 'Everest 1830'\n  },\n  evrst48: {\n    a: 6377304.063,\n    rf: 300.8017,\n    ellipseName: 'Everest 1948'\n  },\n  evrst56: {\n    a: 6377301.243,\n    rf: 300.8017,\n    ellipseName: 'Everest 1956'\n  },\n  evrst69: {\n    a: 6377295.664,\n    rf: 300.8017,\n    ellipseName: 'Everest 1969'\n  },\n  evrstSS: {\n    a: 6377298.556,\n    rf: 300.8017,\n    ellipseName: 'Everest (Sabah & Sarawak)'\n  },\n  fschr60: {\n    a: 6378166,\n    rf: 298.3,\n    ellipseName: 'Fischer (Mercury Datum) 1960'\n  },\n  fschr60m: {\n    a: 6378155,\n    rf: 298.3,\n    ellipseName: 'Fischer 1960'\n  },\n  fschr68: {\n    a: 6378150,\n    rf: 298.3,\n    ellipseName: 'Fischer 1968'\n  },\n  helmert: {\n    a: 6378200,\n    rf: 298.3,\n    ellipseName: 'Helmert 1906'\n  },\n  hough: {\n    a: 6378270,\n    rf: 297,\n    ellipseName: 'Hough'\n  },\n  intl: {\n    a: 6378388,\n    rf: 297,\n    ellipseName: 'International 1909 (Hayford)'\n  },\n  kaula: {\n    a: 6378163,\n    rf: 298.24,\n    ellipseName: 'Kaula 1961'\n  },\n  lerch: {\n    a: 6378139,\n    rf: 298.257,\n    ellipseName: 'Lerch 1979'\n  },\n  mprts: {\n    a: 6397300,\n    rf: 191,\n    ellipseName: 'Maupertius 1738'\n  },\n  new_intl: {\n    a: 6378157.5,\n    b: 6356772.2,\n    ellipseName: 'New International 1967'\n  },\n  plessis: {\n    a: 6376523,\n    rf: 6355863,\n    ellipseName: 'Plessis 1817 (France)'\n  },\n  krass: {\n    a: 6378245,\n    rf: 298.3,\n    ellipseName: 'Krassovsky, 1942'\n  },\n  SEasia: {\n    a: 6378155,\n    b: 6356773.3205,\n    ellipseName: 'Southeast Asia'\n  },\n  walbeck: {\n    a: 6376896,\n    b: 6355834.8467,\n    ellipseName: 'Walbeck'\n  },\n  WGS60: {\n    a: 6378165,\n    rf: 298.3,\n    ellipseName: 'WGS 60'\n  },\n  WGS66: {\n    a: 6378145,\n    rf: 298.25,\n    ellipseName: 'WGS 66'\n  },\n  WGS7: {\n    a: 6378135,\n    rf: 298.26,\n    ellipseName: 'WGS 72'\n  },\n  WGS84: {\n    a: 6378137,\n    rf: 298.257223563,\n    ellipseName: 'WGS 84'\n  },\n  sphere: {\n    a: 6370997,\n    b: 6370997,\n    ellipseName: 'Normal Sphere (r=6370997)'\n  }\n};\n\nexport default ellipsoids;\n", "import { SIXTH, RA4, RA6, EPSLN } from './constants/values';\nimport { default as Ellipsoid } from './constants/Ellipsoid';\nimport match from './match';\n\nconst WGS84 = Ellipsoid.WGS84; // default ellipsoid\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n", "var datums = {\n  wgs84: {\n    towgs84: '0,0,0',\n    ellipse: 'WGS84',\n    datumName: 'WGS84'\n  },\n  ch1903: {\n    towgs84: '674.374,15.056,405.346',\n    ellipse: 'bessel',\n    datumName: 'swiss'\n  },\n  ggrs87: {\n    towgs84: '-199.87,74.79,246.62',\n    ellipse: 'GRS80',\n    datumName: 'Greek_Geodetic_Reference_System_1987'\n  },\n  nad83: {\n    towgs84: '0,0,0',\n    ellipse: 'GRS80',\n    datumName: 'North_American_Datum_1983'\n  },\n  nad27: {\n    nadgrids: '@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat',\n    ellipse: 'clrk66',\n    datumName: 'North_American_Datum_1927'\n  },\n  potsdam: {\n    towgs84: '598.1,73.7,418.2,0.202,0.045,-2.455,6.7',\n    ellipse: 'bessel',\n    datumName: 'Potsdam Rauenberg 1950 DHDN'\n  },\n  carthage: {\n    towgs84: '-263.0,6.0,431.0',\n    ellipse: 'clark80',\n    datumName: 'Carthage 1934 Tunisia'\n  },\n  hermannskogel: {\n    towgs84: '577.326,90.129,463.919,5.137,1.474,5.297,2.4232',\n    ellipse: 'bessel',\n    datumName: 'Hermannskogel'\n  },\n  mgi: {\n    towgs84: '577.326,90.129,463.919,5.137,1.474,5.297,2.4232',\n    ellipse: 'bessel',\n    datumName: 'Militar-Geographische Institut'\n  },\n  osni52: {\n    towgs84: '482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15',\n    ellipse: 'airy',\n    datumName: 'Irish National'\n  },\n  ire65: {\n    towgs84: '482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15',\n    ellipse: 'mod_airy',\n    datumName: 'Ireland 1965'\n  },\n  rassadiran: {\n    towgs84: '-133.63,-157.5,-158.62',\n    ellipse: 'intl',\n    datumName: 'Rassadiran'\n  },\n  nzgd49: {\n    towgs84: '59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993',\n    ellipse: 'intl',\n    datumName: 'New Zealand Geodetic Datum 1949'\n  },\n  osgb36: {\n    towgs84: '446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894',\n    ellipse: 'airy',\n    datumName: 'Ordnance Survey of Great Britain 1936'\n  },\n  s_jtsk: {\n    towgs84: '589,76,480',\n    ellipse: 'bessel',\n    datumName: 'S-JTSK (Ferro)'\n  },\n  beduaram: {\n    towgs84: '-106,-87,188',\n    ellipse: 'clrk80',\n    datumName: 'Beduaram'\n  },\n  gunung_segara: {\n    towgs84: '-403,684,41',\n    ellipse: 'bessel',\n    datumName: 'Gunung Segara Jakarta'\n  },\n  rnb72: {\n    towgs84: '106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1',\n    ellipse: 'intl',\n    datumName: 'Reseau National Belge 1972'\n  },\n  EPSG_5451: {\n    towgs84: '6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649'\n  },\n  IGNF_LURESG: {\n    towgs84: '-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43'\n  },\n  EPSG_4614: {\n    towgs84: '-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065'\n  },\n  EPSG_4615: {\n    towgs84: '-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748'\n  },\n  ESRI_37241: {\n    towgs84: '-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031'\n  },\n  ESRI_37249: {\n    towgs84: '-440.296,58.548,296.265,1.128,10.202,4.559,-0.438'\n  },\n  ESRI_37245: {\n    towgs84: '-511.151,-181.269,139.609,1.05,2.703,1.798,3.071'\n  },\n  EPSG_4178: {\n    towgs84: '24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01'\n  },\n  EPSG_4622: {\n    towgs84: '-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984'\n  },\n  EPSG_4625: {\n    towgs84: '126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227'\n  },\n  EPSG_5252: {\n    towgs84: '0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439'\n  },\n  EPSG_4314: {\n    towgs84: '597.1,71.4,412.1,0.894,0.068,-1.563,7.58'\n  },\n  EPSG_4282: {\n    towgs84: '-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166'\n  },\n  EPSG_4231: {\n    towgs84: '-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218'\n  },\n  EPSG_4274: {\n    towgs84: '-230.994,102.591,25.199,0.633,-0.239,0.9,1.95'\n  },\n  EPSG_4134: {\n    towgs84: '-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006'\n  },\n  EPSG_4254: {\n    towgs84: '18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013'\n  },\n  EPSG_4159: {\n    towgs84: '-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175'\n  },\n  EPSG_4687: {\n    towgs84: '0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093'\n  },\n  EPSG_4227: {\n    towgs84: '-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225'\n  },\n  EPSG_4746: {\n    towgs84: '599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46'\n  },\n  EPSG_4745: {\n    towgs84: '612.4,77,440.2,-0.054,0.057,-2.797,2.55'\n  },\n  EPSG_6311: {\n    towgs84: '8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926'\n  },\n  EPSG_4289: {\n    towgs84: '565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244'\n  },\n  EPSG_4230: {\n    towgs84: '-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4'\n  },\n  EPSG_4154: {\n    towgs84: '-123.02,-158.95,-168.47'\n  },\n  EPSG_4156: {\n    towgs84: '570.8,85.7,462.8,4.998,1.587,5.261,3.56'\n  },\n  EPSG_4299: {\n    towgs84: '482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15'\n  },\n  EPSG_4179: {\n    towgs84: '33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84'\n  },\n  EPSG_4313: {\n    towgs84: '-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747'\n  },\n  EPSG_4194: {\n    towgs84: '163.511,127.533,-159.789'\n  },\n  EPSG_4195: {\n    towgs84: '105,326,-102.5'\n  },\n  EPSG_4196: {\n    towgs84: '-45,417,-3.5'\n  },\n  EPSG_4611: {\n    towgs84: '-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246'\n  },\n  EPSG_4633: {\n    towgs84: '137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824'\n  },\n  EPSG_4641: {\n    towgs84: '-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993'\n  },\n  EPSG_4643: {\n    towgs84: '-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002'\n  },\n  EPSG_4300: {\n    towgs84: '482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15'\n  },\n  EPSG_4188: {\n    towgs84: '482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15'\n  },\n  EPSG_4660: {\n    towgs84: '982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805'\n  },\n  EPSG_4662: {\n    towgs84: '97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259'\n  },\n  EPSG_3906: {\n    towgs84: '577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664'\n  },\n  EPSG_4307: {\n    towgs84: '-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547'\n  },\n  EPSG_6892: {\n    towgs84: '-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686'\n  },\n  EPSG_4690: {\n    towgs84: '221.597,152.441,176.523,2.403,1.3893,0.884,11.4648'\n  },\n  EPSG_4691: {\n    towgs84: '218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817'\n  },\n  EPSG_4629: {\n    towgs84: '72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653'\n  },\n  EPSG_4630: {\n    towgs84: '165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111'\n  },\n  EPSG_4692: {\n    towgs84: '217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093'\n  },\n  EPSG_9333: {\n    towgs84: '0,0,0,-8.393,0.749,-10.276,0'\n  },\n  EPSG_9059: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4312: {\n    towgs84: '601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887'\n  },\n  EPSG_4123: {\n    towgs84: '-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496'\n  },\n  EPSG_4309: {\n    towgs84: '-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365'\n  },\n  ESRI_104106: {\n    towgs84: '-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058'\n  },\n  EPSG_4281: {\n    towgs84: '-219.247,-73.802,269.529'\n  },\n  EPSG_4322: {\n    towgs84: '0,0,4.5'\n  },\n  EPSG_4324: {\n    towgs84: '0,0,1.9'\n  },\n  EPSG_4284: {\n    towgs84: '43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549'\n  },\n  EPSG_4277: {\n    towgs84: '446.448,-125.157,542.06,0.15,0.247,0.842,-20.489'\n  },\n  EPSG_4207: {\n    towgs84: '-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46'\n  },\n  EPSG_4688: {\n    towgs84: '347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647'\n  },\n  EPSG_4689: {\n    towgs84: '410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218'\n  },\n  EPSG_4720: {\n    towgs84: '0,0,4.5'\n  },\n  EPSG_4273: {\n    towgs84: '278.3,93,474.5,7.889,0.05,-6.61,6.21'\n  },\n  EPSG_4240: {\n    towgs84: '204.64,834.74,293.8'\n  },\n  EPSG_4817: {\n    towgs84: '278.3,93,474.5,7.889,0.05,-6.61,6.21'\n  },\n  ESRI_104131: {\n    towgs84: '426.62,142.62,460.09,4.98,4.49,-12.42,-17.1'\n  },\n  EPSG_4265: {\n    towgs84: '-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68'\n  },\n  EPSG_4263: {\n    towgs84: '-111.92,-87.85,114.5,1.875,0.202,0.219,0.032'\n  },\n  EPSG_4298: {\n    towgs84: '-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536'\n  },\n  EPSG_4270: {\n    towgs84: '-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424'\n  },\n  EPSG_4229: {\n    towgs84: '-121.8,98.1,-10.7'\n  },\n  EPSG_4220: {\n    towgs84: '-55.5,-348,-229.2'\n  },\n  EPSG_4214: {\n    towgs84: '12.646,-155.176,-80.863'\n  },\n  EPSG_4232: {\n    towgs84: '-345,3,223'\n  },\n  EPSG_4238: {\n    towgs84: '-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037'\n  },\n  EPSG_4168: {\n    towgs84: '-170,33,326'\n  },\n  EPSG_4131: {\n    towgs84: '199,931,318.9'\n  },\n  EPSG_4152: {\n    towgs84: '-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0'\n  },\n  EPSG_5228: {\n    towgs84: '572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378'\n  },\n  EPSG_8351: {\n    towgs84: '485.021,169.465,483.839,7.786342,4.397554,4.102655,0'\n  },\n  EPSG_4683: {\n    towgs84: '-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06'\n  },\n  EPSG_4133: {\n    towgs84: '0,0,0'\n  },\n  EPSG_7373: {\n    towgs84: '0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693'\n  },\n  EPSG_9075: {\n    towgs84: '-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0'\n  },\n  EPSG_9072: {\n    towgs84: '-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0'\n  },\n  EPSG_9294: {\n    towgs84: '1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388'\n  },\n  EPSG_4212: {\n    towgs84: '-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492'\n  },\n  EPSG_4191: {\n    towgs84: '-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703'\n  },\n  EPSG_4237: {\n    towgs84: '52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191'\n  },\n  EPSG_4740: {\n    towgs84: '-1.08,-0.27,-0.9'\n  },\n  EPSG_4124: {\n    towgs84: '419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496'\n  },\n  EPSG_5681: {\n    towgs84: '584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922'\n  },\n  EPSG_4141: {\n    towgs84: '23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262'\n  },\n  EPSG_4204: {\n    towgs84: '-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194'\n  },\n  EPSG_4319: {\n    towgs84: '226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798'\n  },\n  EPSG_4200: {\n    towgs84: '24.82,-131.21,-82.66'\n  },\n  EPSG_4130: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4127: {\n    towgs84: '-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359'\n  },\n  EPSG_4149: {\n    towgs84: '674.374,15.056,405.346'\n  },\n  EPSG_4617: {\n    towgs84: '-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0'\n  },\n  EPSG_4663: {\n    towgs84: '-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485'\n  },\n  EPSG_4664: {\n    towgs84: '-211.939,137.626,58.3,-0.089,0.251,0.079,0.384'\n  },\n  EPSG_4665: {\n    towgs84: '-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048'\n  },\n  EPSG_4666: {\n    towgs84: '631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43'\n  },\n  EPSG_4756: {\n    towgs84: '-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188'\n  },\n  EPSG_4723: {\n    towgs84: '-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925'\n  },\n  EPSG_4726: {\n    towgs84: '8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081'\n  },\n  EPSG_4267: {\n    towgs84: '-8.0,160.0,176.0'\n  },\n  EPSG_5365: {\n    towgs84: '-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693'\n  },\n  EPSG_4218: {\n    towgs84: '304.5,306.5,-318.1'\n  },\n  EPSG_4242: {\n    towgs84: '-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95'\n  },\n  EPSG_4216: {\n    towgs84: '-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289'\n  },\n  ESRI_104105: {\n    towgs84: '631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43'\n  },\n  ESRI_104129: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4673: {\n    towgs84: '174.05,-25.49,112.57'\n  },\n  EPSG_4202: {\n    towgs84: '-124,-60,154'\n  },\n  EPSG_4203: {\n    towgs84: '-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191'\n  },\n  EPSG_3819: {\n    towgs84: '595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408'\n  },\n  EPSG_8694: {\n    towgs84: '-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169'\n  },\n  EPSG_4145: {\n    towgs84: '275.57,676.78,229.6'\n  },\n  EPSG_4283: {\n    towgs84: '61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994'\n  },\n  EPSG_4317: {\n    towgs84: '2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266'\n  },\n  EPSG_4272: {\n    towgs84: '59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993'\n  },\n  EPSG_4248: {\n    towgs84: '-307.7,265.3,-363.5'\n  },\n  EPSG_5561: {\n    towgs84: '24,-121,-76'\n  },\n  EPSG_5233: {\n    towgs84: '-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338'\n  },\n  ESRI_104130: {\n    towgs84: '-86,-98,-119'\n  },\n  ESRI_104102: {\n    towgs84: '682,-203,480'\n  },\n  ESRI_37207: {\n    towgs84: '7,-10,-26'\n  },\n  EPSG_4675: {\n    towgs84: '59.935,118.4,-10.871'\n  },\n  ESRI_104109: {\n    towgs84: '-89.121,-348.182,260.871'\n  },\n  ESRI_104112: {\n    towgs84: '-185.583,-230.096,281.361'\n  },\n  ESRI_104113: {\n    towgs84: '25.1,-275.6,222.6'\n  },\n  IGNF_WGS72G: {\n    towgs84: '0,12,6'\n  },\n  IGNF_NTFG: {\n    towgs84: '-168,-60,320'\n  },\n  IGNF_EFATE57G: {\n    towgs84: '-127,-769,472'\n  },\n  IGNF_PGP50G: {\n    towgs84: '324.8,153.6,172.1'\n  },\n  IGNF_REUN47G: {\n    towgs84: '94,-948,-1262'\n  },\n  IGNF_CSG67G: {\n    towgs84: '-186,230,110'\n  },\n  IGNF_GUAD48G: {\n    towgs84: '-467,-16,-300'\n  },\n  IGNF_TAHI51G: {\n    towgs84: '162,117,154'\n  },\n  IGNF_TAHAAG: {\n    towgs84: '65,342,77'\n  },\n  IGNF_NUKU72G: {\n    towgs84: '84,274,65'\n  },\n  IGNF_PETRELS72G: {\n    towgs84: '365,194,166'\n  },\n  IGNF_WALL78G: {\n    towgs84: '253,-133,-127'\n  },\n  IGNF_MAYO50G: {\n    towgs84: '-382,-59,-262'\n  },\n  IGNF_TANNAG: {\n    towgs84: '-139,-967,436'\n  },\n  IGNF_IGN72G: {\n    towgs84: '-13,-348,292'\n  },\n  IGNF_ATIGG: {\n    towgs84: '1118,23,66'\n  },\n  IGNF_FANGA84G: {\n    towgs84: '150.57,158.33,118.32'\n  },\n  IGNF_RUSAT84G: {\n    towgs84: '202.13,174.6,-15.74'\n  },\n  IGNF_KAUE70G: {\n    towgs84: '126.74,300.1,-75.49'\n  },\n  IGNF_MOP90G: {\n    towgs84: '-10.8,-1.8,12.77'\n  },\n  IGNF_MHPF67G: {\n    towgs84: '338.08,212.58,-296.17'\n  },\n  IGNF_TAHI79G: {\n    towgs84: '160.61,116.05,153.69'\n  },\n  IGNF_ANAA92G: {\n    towgs84: '1.5,3.84,4.81'\n  },\n  IGNF_MARQUI72G: {\n    towgs84: '330.91,-13.92,58.56'\n  },\n  IGNF_APAT86G: {\n    towgs84: '143.6,197.82,74.05'\n  },\n  IGNF_TUBU69G: {\n    towgs84: '237.17,171.61,-77.84'\n  },\n  IGNF_STPM50G: {\n    towgs84: '11.363,424.148,373.13'\n  },\n  EPSG_4150: {\n    towgs84: '674.374,15.056,405.346'\n  },\n  EPSG_4754: {\n    towgs84: '-208.4058,-109.8777,-2.5764'\n  },\n  ESRI_104101: {\n    towgs84: '374,150,588'\n  },\n  EPSG_4693: {\n    towgs84: '0,-0.15,0.68'\n  },\n  EPSG_6207: {\n    towgs84: '293.17,726.18,245.36'\n  },\n  EPSG_4153: {\n    towgs84: '-133.63,-157.5,-158.62'\n  },\n  EPSG_4132: {\n    towgs84: '-241.54,-163.64,396.06'\n  },\n  EPSG_4221: {\n    towgs84: '-154.5,150.7,100.4'\n  },\n  EPSG_4266: {\n    towgs84: '-80.7,-132.5,41.1'\n  },\n  EPSG_4193: {\n    towgs84: '-70.9,-151.8,-41.4'\n  },\n  EPSG_5340: {\n    towgs84: '-0.41,0.46,-0.35'\n  },\n  EPSG_4246: {\n    towgs84: '-294.7,-200.1,525.5'\n  },\n  EPSG_4318: {\n    towgs84: '-3.2,-5.7,2.8'\n  },\n  EPSG_4121: {\n    towgs84: '-199.87,74.79,246.62'\n  },\n  EPSG_4223: {\n    towgs84: '-260.1,5.5,432.2'\n  },\n  EPSG_4158: {\n    towgs84: '-0.465,372.095,171.736'\n  },\n  EPSG_4285: {\n    towgs84: '-128.16,-282.42,21.93'\n  },\n  EPSG_4613: {\n    towgs84: '-404.78,685.68,45.47'\n  },\n  EPSG_4607: {\n    towgs84: '195.671,332.517,274.607'\n  },\n  EPSG_4475: {\n    towgs84: '-381.788,-57.501,-256.673'\n  },\n  EPSG_4208: {\n    towgs84: '-157.84,308.54,-146.6'\n  },\n  EPSG_4743: {\n    towgs84: '70.995,-335.916,262.898'\n  },\n  EPSG_4710: {\n    towgs84: '-323.65,551.39,-491.22'\n  },\n  EPSG_7881: {\n    towgs84: '-0.077,0.079,0.086'\n  },\n  EPSG_4682: {\n    towgs84: '283.729,735.942,261.143'\n  },\n  EPSG_4739: {\n    towgs84: '-156,-271,-189'\n  },\n  EPSG_4679: {\n    towgs84: '-80.01,253.26,291.19'\n  },\n  EPSG_4750: {\n    towgs84: '-56.263,16.136,-22.856'\n  },\n  EPSG_4644: {\n    towgs84: '-10.18,-350.43,291.37'\n  },\n  EPSG_4695: {\n    towgs84: '-103.746,-9.614,-255.95'\n  },\n  EPSG_4292: {\n    towgs84: '-355,21,72'\n  },\n  EPSG_4302: {\n    towgs84: '-61.702,284.488,472.052'\n  },\n  EPSG_4143: {\n    towgs84: '-124.76,53,466.79'\n  },\n  EPSG_4606: {\n    towgs84: '-153,153,307'\n  },\n  EPSG_4699: {\n    towgs84: '-770.1,158.4,-498.2'\n  },\n  EPSG_4247: {\n    towgs84: '-273.5,110.6,-357.9'\n  },\n  EPSG_4160: {\n    towgs84: '8.88,184.86,106.69'\n  },\n  EPSG_4161: {\n    towgs84: '-233.43,6.65,173.64'\n  },\n  EPSG_9251: {\n    towgs84: '-9.5,122.9,138.2'\n  },\n  EPSG_9253: {\n    towgs84: '-78.1,101.6,133.3'\n  },\n  EPSG_4297: {\n    towgs84: '-198.383,-240.517,-107.909'\n  },\n  EPSG_4269: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4301: {\n    towgs84: '-147,506,687'\n  },\n  EPSG_4618: {\n    towgs84: '-59,-11,-52'\n  },\n  EPSG_4612: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4678: {\n    towgs84: '44.585,-131.212,-39.544'\n  },\n  EPSG_4250: {\n    towgs84: '-130,29,364'\n  },\n  EPSG_4144: {\n    towgs84: '214,804,268'\n  },\n  EPSG_4147: {\n    towgs84: '-17.51,-108.32,-62.39'\n  },\n  EPSG_4259: {\n    towgs84: '-254.1,-5.36,-100.29'\n  },\n  EPSG_4164: {\n    towgs84: '-76,-138,67'\n  },\n  EPSG_4211: {\n    towgs84: '-378.873,676.002,-46.255'\n  },\n  EPSG_4182: {\n    towgs84: '-422.651,-172.995,84.02'\n  },\n  EPSG_4224: {\n    towgs84: '-143.87,243.37,-33.52'\n  },\n  EPSG_4225: {\n    towgs84: '-205.57,168.77,-4.12'\n  },\n  EPSG_5527: {\n    towgs84: '-67.35,3.88,-38.22'\n  },\n  EPSG_4752: {\n    towgs84: '98,390,-22'\n  },\n  EPSG_4310: {\n    towgs84: '-30,190,89'\n  },\n  EPSG_9248: {\n    towgs84: '-192.26,65.72,132.08'\n  },\n  EPSG_4680: {\n    towgs84: '124.5,-63.5,-281'\n  },\n  EPSG_4701: {\n    towgs84: '-79.9,-158,-168.9'\n  },\n  EPSG_4706: {\n    towgs84: '-146.21,112.63,4.05'\n  },\n  EPSG_4805: {\n    towgs84: '682,-203,480'\n  },\n  EPSG_4201: {\n    towgs84: '-165,-11,206'\n  },\n  EPSG_4210: {\n    towgs84: '-157,-2,-299'\n  },\n  EPSG_4183: {\n    towgs84: '-104,167,-38'\n  },\n  EPSG_4139: {\n    towgs84: '11,72,-101'\n  },\n  EPSG_4668: {\n    towgs84: '-86,-98,-119'\n  },\n  EPSG_4717: {\n    towgs84: '-2,151,181'\n  },\n  EPSG_4732: {\n    towgs84: '102,52,-38'\n  },\n  EPSG_4280: {\n    towgs84: '-377,681,-50'\n  },\n  EPSG_4209: {\n    towgs84: '-138,-105,-289'\n  },\n  EPSG_4261: {\n    towgs84: '31,146,47'\n  },\n  EPSG_4658: {\n    towgs84: '-73,46,-86'\n  },\n  EPSG_4721: {\n    towgs84: '265.025,384.929,-194.046'\n  },\n  EPSG_4222: {\n    towgs84: '-136,-108,-292'\n  },\n  EPSG_4601: {\n    towgs84: '-255,-15,71'\n  },\n  EPSG_4602: {\n    towgs84: '725,685,536'\n  },\n  EPSG_4603: {\n    towgs84: '72,213.7,93'\n  },\n  EPSG_4605: {\n    towgs84: '9,183,236'\n  },\n  EPSG_4621: {\n    towgs84: '137,248,-430'\n  },\n  EPSG_4657: {\n    towgs84: '-28,199,5'\n  },\n  EPSG_4316: {\n    towgs84: '103.25,-100.4,-307.19'\n  },\n  EPSG_4642: {\n    towgs84: '-13,-348,292'\n  },\n  EPSG_4698: {\n    towgs84: '145,-187,103'\n  },\n  EPSG_4192: {\n    towgs84: '-206.1,-174.7,-87.7'\n  },\n  EPSG_4311: {\n    towgs84: '-265,120,-358'\n  },\n  EPSG_4135: {\n    towgs84: '58,-283,-182'\n  },\n  ESRI_104138: {\n    towgs84: '198,-226,-347'\n  },\n  EPSG_4245: {\n    towgs84: '-11,851,5'\n  },\n  EPSG_4142: {\n    towgs84: '-125,53,467'\n  },\n  EPSG_4213: {\n    towgs84: '-106,-87,188'\n  },\n  EPSG_4253: {\n    towgs84: '-133,-77,-51'\n  },\n  EPSG_4129: {\n    towgs84: '-132,-110,-335'\n  },\n  EPSG_4713: {\n    towgs84: '-77,-128,142'\n  },\n  EPSG_4239: {\n    towgs84: '217,823,299'\n  },\n  EPSG_4146: {\n    towgs84: '295,736,257'\n  },\n  EPSG_4155: {\n    towgs84: '-83,37,124'\n  },\n  EPSG_4165: {\n    towgs84: '-173,253,27'\n  },\n  EPSG_4672: {\n    towgs84: '175,-38,113'\n  },\n  EPSG_4236: {\n    towgs84: '-637,-549,-203'\n  },\n  EPSG_4251: {\n    towgs84: '-90,40,88'\n  },\n  EPSG_4271: {\n    towgs84: '-2,374,172'\n  },\n  EPSG_4175: {\n    towgs84: '-88,4,101'\n  },\n  EPSG_4716: {\n    towgs84: '298,-304,-375'\n  },\n  EPSG_4315: {\n    towgs84: '-23,259,-9'\n  },\n  EPSG_4744: {\n    towgs84: '-242.2,-144.9,370.3'\n  },\n  EPSG_4244: {\n    towgs84: '-97,787,86'\n  },\n  EPSG_4293: {\n    towgs84: '616,97,-251'\n  },\n  EPSG_4714: {\n    towgs84: '-127,-769,472'\n  },\n  EPSG_4736: {\n    towgs84: '260,12,-147'\n  },\n  EPSG_6883: {\n    towgs84: '-235,-110,393'\n  },\n  EPSG_6894: {\n    towgs84: '-63,176,185'\n  },\n  EPSG_4205: {\n    towgs84: '-43,-163,45'\n  },\n  EPSG_4256: {\n    towgs84: '41,-220,-134'\n  },\n  EPSG_4262: {\n    towgs84: '639,405,60'\n  },\n  EPSG_4604: {\n    towgs84: '174,359,365'\n  },\n  EPSG_4169: {\n    towgs84: '-115,118,426'\n  },\n  EPSG_4620: {\n    towgs84: '-106,-129,165'\n  },\n  EPSG_4184: {\n    towgs84: '-203,141,53'\n  },\n  EPSG_4616: {\n    towgs84: '-289,-124,60'\n  },\n  EPSG_9403: {\n    towgs84: '-307,-92,127'\n  },\n  EPSG_4684: {\n    towgs84: '-133,-321,50'\n  },\n  EPSG_4708: {\n    towgs84: '-491,-22,435'\n  },\n  EPSG_4707: {\n    towgs84: '114,-116,-333'\n  },\n  EPSG_4709: {\n    towgs84: '145,75,-272'\n  },\n  EPSG_4712: {\n    towgs84: '-205,107,53'\n  },\n  EPSG_4711: {\n    towgs84: '124,-234,-25'\n  },\n  EPSG_4718: {\n    towgs84: '230,-199,-752'\n  },\n  EPSG_4719: {\n    towgs84: '211,147,111'\n  },\n  EPSG_4724: {\n    towgs84: '208,-435,-229'\n  },\n  EPSG_4725: {\n    towgs84: '189,-79,-202'\n  },\n  EPSG_4735: {\n    towgs84: '647,1777,-1124'\n  },\n  EPSG_4722: {\n    towgs84: '-794,119,-298'\n  },\n  EPSG_4728: {\n    towgs84: '-307,-92,127'\n  },\n  EPSG_4734: {\n    towgs84: '-632,438,-609'\n  },\n  EPSG_4727: {\n    towgs84: '912,-58,1227'\n  },\n  EPSG_4729: {\n    towgs84: '185,165,42'\n  },\n  EPSG_4730: {\n    towgs84: '170,42,84'\n  },\n  EPSG_4733: {\n    towgs84: '276,-57,149'\n  },\n  ESRI_37218: {\n    towgs84: '230,-199,-752'\n  },\n  ESRI_37240: {\n    towgs84: '-7,215,225'\n  },\n  ESRI_37221: {\n    towgs84: '252,-209,-751'\n  },\n  ESRI_4305: {\n    towgs84: '-123,-206,219'\n  },\n  ESRI_104139: {\n    towgs84: '-73,-247,227'\n  },\n  EPSG_4748: {\n    towgs84: '51,391,-36'\n  },\n  EPSG_4219: {\n    towgs84: '-384,664,-48'\n  },\n  EPSG_4255: {\n    towgs84: '-333,-222,114'\n  },\n  EPSG_4257: {\n    towgs84: '-587.8,519.75,145.76'\n  },\n  EPSG_4646: {\n    towgs84: '-963,510,-359'\n  },\n  EPSG_6881: {\n    towgs84: '-24,-203,268'\n  },\n  EPSG_6882: {\n    towgs84: '-183,-15,273'\n  },\n  EPSG_4715: {\n    towgs84: '-104,-129,239'\n  },\n  IGNF_RGF93GDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGM04GDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGSPM06GDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGTAAF07GDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGFG95GDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGNCG: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGPFGDD: {\n    towgs84: '0,0,0'\n  },\n  IGNF_ETRS89G: {\n    towgs84: '0,0,0'\n  },\n  IGNF_RGR92GDD: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4173: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4180: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4619: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4667: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4075: {\n    towgs84: '0,0,0'\n  },\n  EPSG_6706: {\n    towgs84: '0,0,0'\n  },\n  EPSG_7798: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4661: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4669: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8685: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4151: {\n    towgs84: '0,0,0'\n  },\n  EPSG_9702: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4758: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4761: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4765: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8997: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4023: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4670: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4694: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4148: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4163: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4167: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4189: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4190: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4176: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4659: {\n    towgs84: '0,0,0'\n  },\n  EPSG_3824: {\n    towgs84: '0,0,0'\n  },\n  EPSG_3889: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4046: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4081: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4558: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4483: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5013: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5264: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5324: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5354: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5371: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5373: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5381: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5393: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5489: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5593: {\n    towgs84: '0,0,0'\n  },\n  EPSG_6135: {\n    towgs84: '0,0,0'\n  },\n  EPSG_6365: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5246: {\n    towgs84: '0,0,0'\n  },\n  EPSG_7886: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8431: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8427: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8699: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8818: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4757: {\n    towgs84: '0,0,0'\n  },\n  EPSG_9140: {\n    towgs84: '0,0,0'\n  },\n  EPSG_8086: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4686: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4737: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4702: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4747: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4749: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4674: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4755: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4759: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4762: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4763: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4764: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4166: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4170: {\n    towgs84: '0,0,0'\n  },\n  EPSG_5546: {\n    towgs84: '0,0,0'\n  },\n  EPSG_7844: {\n    towgs84: '0,0,0'\n  },\n  EPSG_4818: {\n    towgs84: '589,76,480'\n  }\n};\n\nfor (var key in datums) {\n  var datum = datums[key];\n  if (!datum.datumName) {\n    continue;\n  }\n  datums[datum.datumName] = datum;\n}\n\nexport default datums;\n", "import { PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD } from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; // datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n", "/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\n/**\n * @typedef {Object} NadgridInfo\n * @property {string} name The name of the NAD grid or 'null' if not specified.\n * @property {boolean} mandatory Indicates if the grid is mandatory (true) or optional (false).\n * @property {*} grid The loaded NAD grid object, or null if not loaded or not applicable.\n * @property {boolean} isNull True if the grid is explicitly 'null', otherwise false.\n */\n\n/**\n * @typedef {Object} NTV2GridOptions\n * @property {boolean} [includeErrorFields=true] Whether to include error fields in the subgrids.\n */\n\n/**\n * @typedef {Object} NadgridHeader\n * @property {number} [nFields] Number of fields in the header.\n * @property {number} [nSubgridFields] Number of fields in each subgrid header.\n * @property {number} nSubgrids Number of subgrids in the file.\n * @property {string} [shiftType] Type of shift (e.g., \"SECONDS\").\n * @property {number} [fromSemiMajorAxis] Source ellipsoid semi-major axis.\n * @property {number} [fromSemiMinorAxis] Source ellipsoid semi-minor axis.\n * @property {number} [toSemiMajorAxis] Target ellipsoid semi-major axis.\n * @property {number} [toSemiMinorAxis] Target ellipsoid semi-minor axis.\n */\n\n/**\n * @typedef {Object} Subgrid\n * @property {Array<number>} ll Lower left corner of the grid in radians [longitude, latitude].\n * @property {Array<number>} del Grid spacing in radians [longitude interval, latitude interval].\n * @property {Array<number>} lim Number of columns in the grid [longitude columns, latitude columns].\n * @property {number} [count] Total number of grid nodes.\n * @property {Array} cvs Mapped node values for the grid.\n */\n\n/** @typedef {{header: NadgridHeader, subgrids: Array<Subgrid>}} NADGrid */\n\n/**\n * @typedef {Object} GeoTIFF\n * @property {() => Promise<number>} getImageCount - Returns the number of images in the GeoTIFF.\n * @property {(index: number) => Promise<GeoTIFFImage>} getImage - Returns a GeoTIFFImage for the given index.\n */\n\n/**\n * @typedef {Object} GeoTIFFImage\n * @property {() => number} getWidth - Returns the width of the image.\n * @property {() => number} getHeight - Returns the height of the image.\n * @property {() => number[]} getBoundingBox - Returns the bounding box as [minX, minY, maxX, maxY] in degrees.\n * @property {() => Promise<ArrayLike<ArrayLike<number>>>} readRasters - Returns the raster data as an array of bands.\n * @property {Object} fileDirectory - The file directory object containing metadata.\n * @property {Object} fileDirectory.ModelPixelScale - The pixel scale array [scaleX, scaleY, scaleZ] in degrees.\n */\n\nvar loadedNadgrids = {};\n\n/**\n * @overload\n * @param {string} key - The key to associate with the loaded grid.\n * @param {ArrayBuffer} data - The NTv2 grid data as an ArrayBuffer.\n * @param {NTV2GridOptions} [options] - Optional parameters for loading the grid.\n * @returns {NADGrid} - The loaded NAD grid information.\n */\n/**\n * @overload\n * @param {string} key - The key to associate with the loaded grid.\n * @param {GeoTIFF} data - The GeoTIFF instance to read the grid from.\n * @returns {{ready: Promise<NADGrid>}} - A promise that resolves to the loaded grid information.\n */\n/**\n * Load either a NTv2 file (.gsb) or a Geotiff (.tif) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer. Pass Geotiff as a GeoTIFF instance from the geotiff.js library.\n * @param {string} key - The key to associate with the loaded grid.\n * @param {ArrayBuffer|GeoTIFF} data The data to load, either an ArrayBuffer for NTv2 or a GeoTIFF instance.\n * @param {NTV2GridOptions} [options] Optional parameters.\n * @returns {{ready: Promise<NADGrid>}|NADGrid} - A promise that resolves to the loaded grid information.\n */\nexport default function nadgrid(key, data, options) {\n  if (data instanceof ArrayBuffer) {\n    return readNTV2Grid(key, data, options);\n  }\n  return { ready: readGeotiffGrid(key, data) };\n}\n\n/**\n * @param {string} key The key to associate with the loaded grid.\n * @param {ArrayBuffer} data The NTv2 grid data as an ArrayBuffer.\n * @param {NTV2GridOptions} [options] Optional parameters for loading the grid.\n * @returns {NADGrid} The loaded NAD grid information.\n */\nfunction readNTV2Grid(key, data, options) {\n  var includeErrorFields = true;\n  if (options !== undefined && options.includeErrorFields === false) {\n    includeErrorFields = false;\n  }\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  var subgrids = readSubgrids(view, header, isLittleEndian, includeErrorFields);\n  var nadgrid = { header: header, subgrids: subgrids };\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * @param {string} key The key to associate with the loaded grid.\n * @param {GeoTIFF} tiff The GeoTIFF instance to read the grid from.\n * @returns {Promise<NADGrid>} A promise that resolves to the loaded NAD grid information.\n */\nasync function readGeotiffGrid(key, tiff) {\n  var subgrids = [];\n  var subGridCount = await tiff.getImageCount();\n  // proj produced tiff grid shift files appear to organize lower res subgrids first, higher res/ child subgrids last.\n  for (var subgridIndex = subGridCount - 1; subgridIndex >= 0; subgridIndex--) {\n    var image = await tiff.getImage(subgridIndex);\n\n    var rasters = await image.readRasters();\n    var data = rasters;\n    var lim = [image.getWidth(), image.getHeight()];\n    var imageBBoxRadians = image.getBoundingBox().map(degreesToRadians);\n    var del = [image.fileDirectory.ModelPixelScale[0], image.fileDirectory.ModelPixelScale[1]].map(degreesToRadians);\n\n    var maxX = imageBBoxRadians[0] + (lim[0] - 1) * del[0];\n    var minY = imageBBoxRadians[3] - (lim[1] - 1) * del[1];\n\n    var latitudeOffsetBand = data[0];\n    var longitudeOffsetBand = data[1];\n    var nodes = [];\n\n    for (let i = lim[1] - 1; i >= 0; i--) {\n      for (let j = lim[0] - 1; j >= 0; j--) {\n        var index = i * lim[0] + j;\n        nodes.push([-secondsToRadians(longitudeOffsetBand[index]), secondsToRadians(latitudeOffsetBand[index])]);\n      }\n    }\n\n    subgrids.push({\n      del: del,\n      lim: lim,\n      ll: [-maxX, minY],\n      cvs: nodes\n    });\n  }\n\n  var tifGrid = {\n    header: {\n      nSubgrids: subGridCount\n    },\n    subgrids: subgrids\n  };\n  loadedNadgrids[key] = tifGrid;\n  return tifGrid;\n};\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n * @param {string} nadgrids A comma-separated list of grid names, optionally prefixed with '@' to indicate optional grids.\n * @returns\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) {\n    return null;\n  }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\n/**\n * @param {string} value The nadgrid string to get information for.\n * @returns {NadgridInfo|null} An object with grid information, or null if the input is empty.\n */\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return { name: 'null', mandatory: !optional, grid: null, isNull: true };\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction degreesToRadians(degrees) {\n  return (degrees) * Math.PI / 180;\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian)\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian, includeErrorFields) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian, includeErrorFields);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n    var rowSize = 16;\n    if (includeErrorFields === false) {\n      rowSize = 8;\n    }\n    gridOffset += 176 + subHeader.gridNodeCount * rowSize;\n  }\n  return grids;\n}\n\n/**\n * @param {*} nodes\n * @returns Array<Array<number>>\n */\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {\n    return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];\n  });\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian, includeErrorFields) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n\n  if (includeErrorFields === false) {\n    gridRecordLength = 8;\n  }\n\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian)\n\n    };\n\n    if (includeErrorFields !== false) {\n      record.latitudeAccuracy = view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian);\n      record.longitudeAccuracy = view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian);\n    }\n\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n", "import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport { sphere as dc_sphere, eccentricity as dc_eccentricity } from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport { getNadgrids } from './nadgrid';\n\n/**\n * @typedef {Object} DatumDefinition\n * @property {number} datum_type - The type of datum.\n * @property {number} a - Semi-major axis of the ellipsoid.\n * @property {number} b - Semi-minor axis of the ellipsoid.\n * @property {number} es - Eccentricity squared of the ellipsoid.\n * @property {number} ep2 - Second eccentricity squared of the ellipsoid.\n */\n\n/**\n * @param {string | import('./core').PROJJSONDefinition | import('./defs').ProjectionDefinition} srsCode\n * @param {(errorMessage?: string, instance?: Projection) => void} [callback]\n */\nfunction Projection(srsCode, callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  /** @type {<T extends import('./core').TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} */\n  this.forward = null;\n  /** @type {<T extends import('./core').TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} */\n  this.inverse = null;\n  /** @type {function(): void} */\n  this.init = null;\n  /** @type {string} */\n  this.name;\n  /** @type {Array<string>} */\n  this.names = null;\n  /** @type {string} */\n  this.title;\n  callback = callback || function (error) {\n    if (error) {\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if (typeof json !== 'object') {\n    callback('Could not parse to valid json: ' + srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if (!ourProj) {\n    callback('Could not get projection name from: ' + srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  /** @type {DatumDefinition} */\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calculated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  if ('init' in this && typeof this.init === 'function') {\n    this.init();\n  }\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n", "'use strict';\nimport { PJD_3PARAM, PJD_7PARAM, HALF_PI } from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; // Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    // ..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; // Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2]\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2]\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } // cs_geocentric_from_wgs84()\n}\n", "import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport { geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums } from './datumUtils';\nimport adjust_lon from './common/adjust_lon';\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function (source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) && !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = { x: -point.x, y: point.y };\n  var output = { x: Number.NaN, y: Number.NaN };\n  var attemptedGrids = [];\n  outer:\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log('Unable to find mandatory grid \\'' + grid.name + '\\'');\n        return -1;\n      }\n      continue;\n    }\n    var subgrids = grid.grid.subgrids;\n    for (var j = 0, jj = subgrids.length; j < jj; j++) {\n      var subgrid = subgrids[j];\n      // skip tables that don't match our point at all\n      var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n      var minX = subgrid.ll[0] - epsilon;\n      var minY = subgrid.ll[1] - epsilon;\n      var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n      var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n      if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x) {\n        continue;\n      }\n      output = applySubgridShift(input, inverse, subgrid);\n      if (!isNaN(output.x)) {\n        break outer;\n      }\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log('Failed to find a grid shift table for location \\''\n      + -input.x * R2D + ' ' + input.y * R2D + ' tried: \\'' + attemptedGrids + '\\'');\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = { x: Number.NaN, y: Number.NaN };\n  if (isNaN(pin.x)) {\n    return val;\n  }\n  var tb = { x: pin.x, y: pin.y };\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log('Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.');\n        break;\n      }\n      dif = { x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y) };\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log('Inverse grid shift iterator failed to converge.');\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = { x: pin.x / ct.del[0], y: pin.y / ct.del[1] };\n  var indx = { x: Math.floor(t.x), y: Math.floor(t.y) };\n  var frct = { x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y };\n  var val = { x: Number.NaN, y: Number.NaN };\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = { x: ct.cvs[inx][0], y: ct.cvs[inx][1] };\n  inx++;\n  var f10 = { x: ct.cvs[inx][0], y: ct.cvs[inx][1] };\n  inx += ct.lim[0];\n  var f11 = { x: ct.cvs[inx][0], y: ct.cvs[inx][1] };\n  inx--;\n  var f01 = { x: ct.cvs[inx][0], y: ct.cvs[inx][1] };\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n", "export default function (crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  /** @type {import(\"./core\").InterfaceCoordinates} */\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if ('ew'.indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n    } else if (i === 1) {\n      v = yin;\n      if ('ns'.indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    } else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n      case 'e':\n        out[t] = v;\n        break;\n      case 'w':\n        out[t] = -v;\n        break;\n      case 'n':\n        out[t] = v;\n        break;\n      case 's':\n        out[t] = -v;\n        break;\n      case 'u':\n        if (point[t] !== undefined) {\n          out.z = v;\n        }\n        break;\n      case 'd':\n        if (point[t] !== undefined) {\n          out.z = -v;\n        }\n        break;\n      default:\n      // console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n        return null;\n    }\n  }\n  return out;\n}\n", "/**\n * @param {Array<number>} array\n * @returns {import(\"../core\").InterfaceCoordinates}\n */\nexport default function (array) {\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length > 2) {\n    out.z = array[2];\n  }\n  if (array.length > 3) {\n    out.m = array[3];\n  }\n  return out;\n}\n", "export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n", "import { D2R, R2D, PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT } from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return (\n    (source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM || source.datum.datum_type === PJD_GRIDSHIFT) && dest.datumCode !== 'WGS84')\n  || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM || dest.datum.datum_type === PJD_GRIDSHIFT) && source.datumCode !== 'WGS84');\n}\n\n/**\n * @param {import('./defs').ProjectionDefinition} source\n * @param {import('./defs').ProjectionDefinition} dest\n * @param {import('./core').TemplateCoordinates} point\n * @param {boolean} enforceAxis\n * @returns {import('./core').InterfaceCoordinates | undefined}\n */\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  } else {\n    // Clone the point object so inputs don't get modified\n    point = {\n      x: point.x,\n      y: point.y,\n      z: point.z,\n      m: point.m\n    };\n  }\n  var hasZ = point.z !== undefined;\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  point = /** @type {import('./core').InterfaceCoordinates} */ (point);\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  if (point && !hasZ) {\n    delete point.z;\n  }\n  return point;\n}\n", "import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\n/**\n * @typedef {{x: number, y: number, z?: number, m?: number}} InterfaceCoordinates\n */\n\n/**\n * @typedef {Array<number> | InterfaceCoordinates} TemplateCoordinates\n */\n\n/**\n * @typedef {Object} Converter\n * @property {<T extends TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} forward\n * @property {<T extends TemplateCoordinates>(coordinates: T, enforceAxis?: boolean) => T} inverse\n * @property {proj} [oProj]\n */\n\n/**\n * @typedef {Object} PROJJSONDefinition\n * @property {string} [$schema]\n * @property {string} type\n * @property {string} [name]\n * @property {{authority: string, code: number}} [id]\n * @property {string} [scope]\n * @property {string} [area]\n * @property {{south_latitude: number, west_longitude: number, north_latitude: number, east_longitude: number}} [bbox]\n * @property {PROJJSONDefinition[]} [components]\n * @property {{type: string, name: string}} [datum]\n * @property {{\n *   name: string,\n *   members: Array<{\n *     name: string,\n *     id?: {authority: string, code: number}\n *   }>,\n *   ellipsoid?: {\n *     name: string,\n *     semi_major_axis: number,\n *     inverse_flattening?: number\n *   },\n *   accuracy?: string,\n *   id?: {authority: string, code: number}\n * }} [datum_ensemble]\n * @property {{\n *   subtype: string,\n *   axis: Array<{\n *     name: string,\n *     abbreviation?: string,\n *     direction: string,\n *     unit: string\n *   }>\n * }} [coordinate_system]\n * @property {{\n *   name: string,\n *   method: {name: string},\n *   parameters: Array<{\n *     name: string,\n *     value: number,\n *     unit?: string\n *   }>\n * }} [conversion]\n * @property {{\n *   name: string,\n *   method: {name: string},\n *   parameters: Array<{\n *     name: string,\n *     value: number,\n *     unit?: string,\n *     type?: string,\n *     file_name?: string\n *   }>\n * }} [transformation]\n */\n\n/**\n * @template {TemplateCoordinates} T\n * @param {proj} from\n * @param {proj} to\n * @param {T} coords\n * @param {boolean} [enforceAxis]\n * @returns {T}\n */\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || { x: NaN, y: NaN };\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return /** @type {T} */ ([transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.slice(3)));\n        } else {\n          return /** @type {T} */ ([transformedArray.x, transformedArray.y, coords[2]].concat(coords.slice(3)));\n        }\n      } else {\n        return /** @type {T} */ ([transformedArray.x, transformedArray.y].concat(coords.slice(2)));\n      }\n    } else {\n      return /** @type {T} */ ([transformedArray.x, transformedArray.y]);\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return /** @type {T} */ (out);\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return /** @type {T} */ (out);\n  }\n}\n\n/**\n * @param {proj | string | PROJJSONDefinition | Converter} item\n * @returns {import('./Proj').default}\n */\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (typeof item === 'object' && 'oProj' in item) {\n    return item.oProj;\n  }\n  return proj(/** @type {string | PROJJSONDefinition} */ (item));\n}\n\n/**\n * @overload\n * @param {string | PROJJSONDefinition | proj} toProj\n * @returns {Converter}\n */\n/**\n * @overload\n * @param {string | PROJJSONDefinition | proj} fromProj\n * @param {string | PROJJSONDefinition | proj} toProj\n * @returns {Converter}\n */\n/**\n * @template {TemplateCoordinates} T\n * @overload\n * @param {string | PROJJSONDefinition | proj} toProj\n * @param {T} coord\n * @returns {T}\n */\n/**\n * @template {TemplateCoordinates} T\n * @overload\n * @param {string | PROJJSONDefinition | proj} fromProj\n * @param {string | PROJJSONDefinition | proj} toProj\n * @param {T} coord\n * @returns {T}\n */\n/**\n * @template {TemplateCoordinates} T\n * @param {string | PROJJSONDefinition | proj} fromProjOrToProj\n * @param {string | PROJJSONDefinition | proj | TemplateCoordinates} [toProjOrCoord]\n * @param {T} [coord]\n * @returns {T|Converter}\n */\nfunction proj4(fromProjOrToProj, toProjOrCoord, coord) {\n  /** @type {proj} */\n  var fromProj;\n  /** @type {proj} */\n  var toProj;\n  var single = false;\n  /** @type {Converter} */\n  var obj;\n  if (typeof toProjOrCoord === 'undefined') {\n    toProj = checkProj(fromProjOrToProj);\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof /** @type {?} */ (toProjOrCoord).x !== 'undefined' || Array.isArray(toProjOrCoord)) {\n    coord = /** @type {T} */ (/** @type {?} */ (toProjOrCoord));\n    toProj = checkProj(fromProjOrToProj);\n    fromProj = wgs84;\n    single = true;\n  }\n  if (!fromProj) {\n    fromProj = checkProj(fromProjOrToProj);\n  }\n  if (!toProj) {\n    toProj = checkProj(/** @type {string | PROJJSONDefinition | proj } */ (toProjOrCoord));\n  }\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      /**\n       * @template {TemplateCoordinates} T\n       * @param {T} coords\n       * @param {boolean=} enforceAxis\n       * @returns {T}\n       */\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      /**\n       * @template {TemplateCoordinates} T\n       * @param {T} coords\n       * @param {boolean=} enforceAxis\n       * @returns {T}\n       */\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\n\nexport default proj4;\n", "\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n", "import { toPoint, forward } from 'mgrs';\n\n/**\n * @deprecated v3.0.0 - use proj4.toPoint instead\n * @param {number | import('./core').TemplateCoordinates | string} x\n * @param {number} [y]\n * @param {number} [z]\n */\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if (typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0]);\n    this.y = parseFloat(coords[1]);\n    this.z = parseFloat(coords[2]) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function (mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function (accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n", "var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function (es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}\n", "export default function (phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}\n", "import pj_mlfn from './pj_mlfn';\nimport { EPSLN } from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function (arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    // t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    // phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  // ..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n", "// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport { EPSLN, HALF_PI } from '../constants/values';\nimport sign from '../common/sign';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} es\n * @property {Array<number>} en\n * @property {number} ml0\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    } else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        } else {\n          y = 0;\n        }\n      } else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  } else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1\n      + als / 6 * (1 - t + c\n        + als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c\n          + als / 42 * (61 + 179 * ts - ts * t - 479 * t)))))\n        + this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0\n      + sin_phi * delta_lon * al / 2 * (1\n        + als / 12 * (5 - t + 9 * c + 4 * cs\n          + als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c\n            + als / 56 * (1385 + 543 * ts - ts * t - 3111 * t))))))\n          + this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    } else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  } else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1\n        - ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs\n          - ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c\n            - ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1\n        - ds / 6 * (1 + 2 * t + c\n          - ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c\n            - ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    } else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = ['Fast_Transverse_Mercator', 'Fast Transverse Mercator'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "export default function (x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}\n", "export default function (x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n", "export default function (x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n", "import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function (x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n", "export default function (pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n", "export default function (pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n", "export default function (x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}\n", "import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function (pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n", "// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} es\n * @property {Array<number>} cbg\n * @property {Array<number>} cgb\n * @property {Array<number>} utg\n * @property {Array<number>} gtu\n * @property {number} Qn\n * @property {number} Zb\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675))))));\n  this.cbg[0] = n * (-2 + n * (2 / 3 + n * (4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * (-13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * (-24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * (2 / 3 + n * (-37 / 96 + n * (1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  } else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  } else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = ['Extended_Transverse_Mercator', 'Extended Transverse Mercator', 'etmerc', 'Transverse_Mercator', 'Transverse Mercator', 'Gauss Kruger', 'Gauss_Kruger', 'tmerc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from './adjust_lon';\n\nexport default function (zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n", "import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport { D2R } from '../constants/values';\n\n/** @this {import('../defs.js').ProjectionDefinition} */\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 = ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = ['Universal Transverse Mercator System', 'utm'];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n", "export default function (esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}\n", "import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport { HALF_PI, FORTPI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} rc\n * @property {number} C\n * @property {number} phic0\n * @property {number} ratexp\n * @property {number} K\n * @property {number} e\n * @property {number} es\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), -0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['gauss'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} sinc0\n * @property {number} cosc0\n * @property {number} R2\n * @property {number} rc\n * @property {number} phic0\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = 'Oblique Stereographic Alternative';\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = hypot(p.x, p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  } else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = ['Stereographic_North_Pole', 'Oblique_Stereographic', 'sterea', 'Oblique Stereographic Alternative', 'Double_Stereographic'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import { EPSLN, HALF_PI } from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} coslat0\n * @property {number} sinlat0\n * @property {number} ms1\n * @property {number} X0\n * @property {number} cosX0\n * @property {number} sinX0\n * @property {number} con\n * @property {number} cons\n * @property {number} e\n */\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  // setting default parameters\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  } else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        // North pole\n        // trace('stere:north pole');\n        this.con = 1;\n      } else {\n        // South pole\n        // trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN && Math.abs(Math.cos(this.lat_ts)) > EPSLN) {\n      // When k0 is 1 (default value) and lat_ts is a vaild number and lat0 is at a pole and lat_ts is not at a pole\n      // Recalculate k0 using formula 21-35 from p161 of Snyder, 1987\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    // case of the origine point\n    // trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    // trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  } else {\n    X = 2 * Math.atan(ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      // trace(p.toString());\n      return p;\n    } else if (Math.abs(this.sinlat0) < EPSLN) {\n      // Eq\n      // trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    } else {\n      // other case\n      // trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  // trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, -1 * p.y));\n      } else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    } else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  } else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        // trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, -1 * p.y));\n    } else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      } else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  // trace(p.toString());\n  return p;\n}\n\nexport var names = ['stere', 'Stereographic_South_Pole', 'Polar_Stereographic_variant_A', 'Polar_Stereographic_variant_B', 'Polar_Stereographic'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n", "/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme  axe oblique et pour la transformation entre\n    des systmes de rfrence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} lambda0\n * @property {number} e\n * @property {number} R\n * @property {number} b0\n * @property {number} K\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      // ...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    // S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = ['somerc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\nimport { getNormalizedProjName } from '../projections';\n\n/**\n * @typedef {Object} LocalThis\n * @property {boolean} no_off\n * @property {boolean} no_rot\n * @property {number} rectified_grid_angle\n * @property {number} es\n * @property {number} A\n * @property {number} B\n * @property {number} E\n * @property {number} e\n * @property {number} lam0\n * @property {number} singam\n * @property {number} cosgam\n * @property {number} sinrot\n * @property {number} cosrot\n * @property {number} rB\n * @property {number} ArB\n * @property {number} BrA\n * @property {number} u_0\n * @property {number} v_pole_n\n * @property {number} v_pole_s\n */\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator', 'Hotine_Oblique_Mercator_variant_A', 'Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.projName === 'object' ? Object.keys(P.projName)[0] : P.projName;\n\n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1 || typeAProjections.indexOf(getNormalizedProjName(projectionName)) !== -1;\n}\n\n/**\n * Initialize the Oblique Mercator  projection\n * @this {import('../defs.js').ProjectionDefinition & LocalThis}\n */\nexport function init() {\n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0;\n\n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n\n  var alp = false;\n  if ('alpha' in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if ('rectified_grid_angle' in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n\n  if (gam) {\n    gamma = this.rectified_grid_angle;\n  }\n\n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n\n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL\n      || Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL\n      || Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n\n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n\n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D - 1;\n\n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n\n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n\n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n\n    if (con < -Math.PI) {\n      lam2 -= TWO_PI;\n    } else if (con > Math.PI) {\n      lam2 += TWO_PI;\n    }\n\n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n\n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n\n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n\n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n\n    if (this.lat0 < 0) {\n      this.u_0 = -this.u_0;\n    }\n  }\n\n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ---------------------------------------------------------- */\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n\n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n\n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n\n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n\n    v = 0.5 * this.ArB * Math.log((1 - U) / (1 + U));\n    temp = Math.cos(this.B * p.x);\n\n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }\n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n\n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n\n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n\n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n\n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n\n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n\n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n\n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n\n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n\n  coords.x += this.lam0;\n\n  return coords;\n}\n\nexport var names = ['Hotine_Oblique_Mercator', 'Hotine Oblique Mercator', 'Hotine_Oblique_Mercator_variant_A', 'Hotine_Oblique_Mercator_Variant_B', 'Hotine_Oblique_Mercator_Azimuth_Natural_Origin', 'Hotine_Oblique_Mercator_Two_Point_Natural_Origin', 'Hotine_Oblique_Mercator_Azimuth_Center', 'Oblique_Mercator', 'omerc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { HALF_PI, EPSLN } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} e\n * @property {number} ns\n * @property {number} f0\n * @property {number} rh\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  // double lat0;                    /* the reference latitude               */\n  // double long0;                   /* the reference longitude              */\n  // double lat1;                    /* first standard parallel              */\n  // double lat2;                    /* second standard parallel             */\n  // double r_maj;                   /* major axis                           */\n  // double r_min;                   /* minor axis                           */\n  // double false_east;              /* x offset in meters                   */\n  // double false_north;             /* y offset in meters                   */\n\n  // the above value can be set with proj4.defs\n  // example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } // if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = Math.abs(Math.abs(this.lat0) - HALF_PI) < EPSLN\n    ? 0 // Handle poles by setting ts0 to 0\n    : tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  } else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = 'Lambert Conformal Conic';\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  } else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  } else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  } else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  'Lambert Tangential Conformal Conic Projection',\n  'Lambert_Conformal_Conic',\n  'Lambert_Conformal_Conic_1SP',\n  'Lambert_Conformal_Conic_2SP',\n  'lcc',\n  'Lambert Conic Conformal (1SP)',\n  'Lambert Conic Conformal (2SP)'\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x */\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, -1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = ['Krovak', 'krovak'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "export default function (e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}\n", "export default function (x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}\n", "export default function (x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}\n", "export default function (x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}\n", "export default function (x) {\n  return (x * x * x * (35 / 3072));\n}\n", "export default function (a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}\n", "import { HALF_PI } from '../constants/values';\nimport sign from './sign';\n\nexport default function (x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n", "export default function (ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  // ..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}\n", "import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport { HALF_PI, EPSLN } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} es\n * @property {number} e0\n * @property {number} e1\n * @property {number} e2\n * @property {number} e3\n * @property {number} ml0\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  ----------------------------------------------------------------------- */\nexport function forward(p) {\n  /* Forward equations\n      ----------------- */\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  } else {\n    // ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  ----------------- */\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  } else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nexport var names = ['Cassini', 'Cassini_Soldner', 'cass'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "export default function (eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  } else {\n    return (2 * sinphi);\n  }\n}\n", "import { HALF_PI, EPSLN, FORTPI } from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} mode\n * @property {Array<number>} apa\n * @property {number} dd\n * @property {number} e\n * @property {number} es\n * @property {number} mmf\n * @property {number} rq\n * @property {number} qp\n * @property {number} sinb1\n * @property {number} cosb1\n * @property {number} ymf\n * @property {number} xmf\n * @property {number} sinph0\n * @property {number} cosph0\n */\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/**\n * Initialize the Lambert Azimuthal Equal Area projection\n * @this {import('../defs.js').ProjectionDefinition & LocalThis}\n */\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? S_POLE : N_POLE;\n  } else if (Math.abs(t) < EPSLN) {\n    this.mode = EQUIT;\n  } else {\n    this.mode = OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n      case N_POLE:\n        this.dd = 1;\n        break;\n      case S_POLE:\n        this.dd = 1;\n        break;\n      case EQUIT:\n        this.rq = Math.sqrt(0.5 * this.qp);\n        this.dd = 1 / this.rq;\n        this.xmf = 1;\n        this.ymf = 0.5 * this.qp;\n        break;\n      case OBLIQ:\n        this.rq = Math.sqrt(0.5 * this.qp);\n        sinphi = Math.sin(this.lat0);\n        this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n        this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n        this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n        this.ymf = (this.xmf = this.rq) / this.dd;\n        this.xmf *= this.dd;\n        break;\n    }\n  } else {\n    if (this.mode === OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  ----------------------------------------------------------------------- */\nexport function forward(p) {\n  /* Forward equations\n      ----------------- */\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    } else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  } else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n      case this.OBLIQ:\n        b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n        break;\n      case this.EQUIT:\n        b = 1 + cosb * coslam;\n        break;\n      case this.N_POLE:\n        b = HALF_PI + phi;\n        q = this.qp - q;\n        break;\n      case this.S_POLE:\n        b = phi - HALF_PI;\n        q = this.qp + q;\n        break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n      case this.OBLIQ:\n      case this.EQUIT:\n        b = Math.sqrt(2 / b);\n        if (this.mode === this.OBLIQ) {\n          y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n        } else {\n          y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n        }\n        x = this.xmf * b * cosb * sinlam;\n        break;\n      case this.N_POLE:\n      case this.S_POLE:\n        if (q >= 0) {\n          x = (b = Math.sqrt(q)) * sinlam;\n          y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n        } else {\n          x = y = 0;\n        }\n        break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  ----------------- */\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n      case this.EQUIT:\n        phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n        x *= sinz;\n        y = cosz * rh;\n        break;\n      case this.OBLIQ:\n        phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n        x *= sinz * this.cosph0;\n        y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n        break;\n      case this.N_POLE:\n        y = -y;\n        phi = HALF_PI - phi;\n        break;\n      case this.S_POLE:\n        phi -= HALF_PI;\n        break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  } else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      } else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    } else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = ['Lambert Azimuthal Equal Area', 'Lambert_Azimuthal_Equal_Area', 'laea'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n", "export default function (x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}\n", "import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport { EPSLN } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} temp\n * @property {number} es\n * @property {number} e3\n * @property {number} sin_po\n * @property {number} cos_po\n * @property {number} t1\n * @property {number} con\n * @property {number} ms1\n * @property {number} qs1\n * @property {number} t2\n * @property {number} ms2\n * @property {number} qs2\n * @property {number} t3\n * @property {number} qs0\n * @property {number} ns0\n * @property {number} c\n * @property {number} rh\n * @property {number} sin_phi\n * @property {number} cos_phi\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  } else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  ------------------------------------------------------------------- */\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  } else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  } else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n------------------------------------------- */\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = ['Albers_Conic_Equal_Area', 'Albers_Equal_Area', 'Albers', 'aea'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n", "import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport { EPSLN } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} sin_p14\n * @property {number} cos_p14\n * @property {number} infinity_dist\n * @property {number} rc\n */\n\n/**\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n   @this {import('../defs.js').ProjectionDefinition & LocalThis}\n */\nexport function init() {\n  /* Place parameters in static storage for common use\n      ------------------------------------------------- */\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    --------------------------------------------------- */\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      ----------------- */\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  } else {\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      ----------------- */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  } else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['gnom'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import { HALF_PI } from '../constants/values';\n\nexport default function (eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    } else {\n      return HALF_PI;\n    }\n  }\n  // var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  // console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n", "import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} e\n */\n\n/**\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n  @this {import('../defs.js').ProjectionDefinition & LocalThis}\n*/\nexport function init() {\n  // no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------ */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      ----------------- */\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  } else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------ */\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  } else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['cea'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || 'Equidistant Cylindrical (Plate Carre)';\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = ['Equirectangular', 'Equidistant_Cylindrical', 'Equidistant_Cylindrical_Spherical', 'eqc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport { EPSLN } from '../constants/values';\n\nimport gN from '../common/gN';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} temp\n * @property {number} es\n * @property {number} e\n * @property {number} e0\n * @property {number} e1\n * @property {number} e2\n * @property {number} e3\n * @property {number} ml0\n */\n\nvar MAX_ITER = 20;\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  /* Place parameters in static storage for common use\n      ------------------------------------------------- */\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); // si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    --------------------------------------------------- */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    } else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  } else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    } else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  ----------------- */\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    } else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  } else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    } else {\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      // lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Polyconic', 'American_Polyconic', 'poly'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import { SEC_TO_RAD } from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = ['New_Zealand_Map_Grid', 'nzmg'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n/* Initialize the Miller Cylindrical projection\n  ------------------------------------------- */\nexport function init() {\n  // no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------ */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      ----------------- */\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------ */\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Miller_Cylindrical', 'mill'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport { EPSLN, HALF_PI } from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/**\n * @typedef {Object} LocalThis\n * @property {Array<number>} en\n * @property {number} n\n * @property {number} m\n * @property {number} C_y\n * @property {number} C_x\n * @property {number} es\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  /* Place parameters in static storage for common use\n    ------------------------------------------------- */\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  } else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  ----------------------------------------------------- */\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    ----------------- */\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    } else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n  } else {\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    } else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  } else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      // temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    } else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Sinusoidal', 'sinu'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport { EPSLN } from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ---------------------------------------------------- */\nexport function forward(p) {\n  /* Forward equations\n      ----------------- */\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      ----------------------------------------------------- */\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       -------------------------------------------------------------------------- */\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      ----------------- */\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       ------------------------------------------------------------------- */\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Mollweide', 'moll'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport { EPSLN } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} temp\n * @property {number} es\n * @property {number} e\n * @property {number} e0\n * @property {number} e1\n * @property {number} e2\n * @property {number} e3\n * @property {number} sin_phi\n * @property {number} cos_phi\n * @property {number} ms1\n * @property {number} ml1\n * @property {number} ms2\n * @property {number} ml2\n * @property {number} ns\n * @property {number} g\n * @property {number} ml0\n * @property {number} rh\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  /* Place parameters in static storage for common use\n      ------------------------------------------------- */\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sin_phi = Math.sin(this.lat1);\n  this.cos_phi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sin_phi, this.cos_phi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sin_phi;\n  } else {\n    this.sin_phi = Math.sin(this.lat2);\n    this.cos_phi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sin_phi, this.cos_phi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  ----------------------------------------------------------- */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      ----------------- */\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  } else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  ----------------- */\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  } else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  } else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n}\n\nexport var names = ['Equidistant_Conic', 'eqdc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\n\nimport { HALF_PI, EPSLN } from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} R - Radius of the Earth\n */\n\n/**\n * Initialize the Van Der Grinten projection\n * @this {import('../defs.js').ProjectionDefinition & LocalThis}\n */\nexport function init() {\n  // this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    ----------------- */\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    } else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  // con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    // y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  } else {\n    // y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  --------------------------------------------------------- */\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    ----------------- */\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    } else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  } else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  } else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Van_der_Grinten_I', 'VanDerGrinten', 'Van_der_Grinten', 'vandg'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "/**\n * Calculates the inverse geodesic problem using Vincenty's formulae.\n * Computes the forward azimuth and ellipsoidal distance between two points\n * specified by latitude and longitude on the surface of an ellipsoid.\n *\n * @param {number} lat1 Latitude of the first point in radians.\n * @param {number} lon1 Longitude of the first point in radians.\n * @param {number} lat2 Latitude of the second point in radians.\n * @param {number} lon2 Longitude of the second point in radians.\n * @param {number} a Semi-major axis of the ellipsoid (meters).\n * @param {number} f Flattening of the ellipsoid.\n * @returns {{ azi1: number, s12: number }} An object containing:\n *   - azi1: Forward azimuth from the first point to the second point (radians).\n *   - s12: Ellipsoidal distance between the two points (meters).\n */\nexport function vincentyInverse(lat1, lon1, lat2, lon2, a, f) {\n  const L = lon2 - lon1;\n  const U1 = Math.atan((1 - f) * Math.tan(lat1));\n  const U2 = Math.atan((1 - f) * Math.tan(lat2));\n  const sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n  const sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);\n\n  let lambda = L, lambdaP, iterLimit = 100;\n  let sinLambda, cosLambda, sinSigma, cosSigma, sigma, sinAlpha, cos2Alpha, cos2SigmaM, C;\n  let uSq, A, B, deltaSigma, s;\n\n  do {\n    sinLambda = Math.sin(lambda);\n    cosLambda = Math.cos(lambda);\n    sinSigma = Math.sqrt(\n      (cosU2 * sinLambda) * (cosU2 * sinLambda)\n      + (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda)\n      * (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda)\n    );\n    if (sinSigma === 0) {\n      return { azi1: 0, s12: 0 }; // coincident points\n    }\n    cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;\n    sigma = Math.atan2(sinSigma, cosSigma);\n    sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;\n    cos2Alpha = 1 - sinAlpha * sinAlpha;\n    cos2SigmaM = (cos2Alpha !== 0) ? (cosSigma - 2 * sinU1 * sinU2 / cos2Alpha) : 0;\n    C = f / 16 * cos2Alpha * (4 + f * (4 - 3 * cos2Alpha));\n    lambdaP = lambda;\n    lambda = L + (1 - C) * f * sinAlpha\n    * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));\n  } while (Math.abs(lambda - lambdaP) > 1e-12 && --iterLimit > 0);\n\n  if (iterLimit === 0) {\n    return { azi1: NaN, s12: NaN }; // formula failed to converge\n  }\n\n  uSq = cos2Alpha * (a * a - (a * (1 - f)) * (a * (1 - f))) / ((a * (1 - f)) * (a * (1 - f)));\n  A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));\n  B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));\n  deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)\n    - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));\n\n  s = (a * (1 - f)) * A * (sigma - deltaSigma);\n\n  // Forward azimuth\n  const azi1 = Math.atan2(cosU2 * sinLambda, cosU1 * sinU2 - sinU1 * cosU2 * cosLambda);\n\n  return { azi1, s12: s };\n}\n\n/**\n * Solves the direct geodetic problem using Vincenty's formulae.\n * Given a starting point, initial azimuth, and distance, computes the destination point on the ellipsoid.\n *\n * @param {number} lat1 Latitude of the starting point in radians.\n * @param {number} lon1 Longitude of the starting point in radians.\n * @param {number} azi1 Initial azimuth (forward azimuth) in radians.\n * @param {number} s12 Distance to travel from the starting point in meters.\n * @param {number} a Semi-major axis of the ellipsoid in meters.\n * @param {number} f Flattening of the ellipsoid.\n * @returns {{lat2: number, lon2: number}} The latitude and longitude (in radians) of the destination point.\n */\nexport function vincentyDirect(lat1, lon1, azi1, s12, a, f) {\n  const U1 = Math.atan((1 - f) * Math.tan(lat1));\n  const sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n  const sinAlpha1 = Math.sin(azi1), cosAlpha1 = Math.cos(azi1);\n\n  const sigma1 = Math.atan2(sinU1, cosU1 * cosAlpha1);\n  const sinAlpha = cosU1 * sinAlpha1;\n  const cos2Alpha = 1 - sinAlpha * sinAlpha;\n  const uSq = cos2Alpha * (a * a - (a * (1 - f)) * (a * (1 - f))) / ((a * (1 - f)) * (a * (1 - f)));\n  const A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));\n  const B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));\n\n  let sigma = s12 / ((a * (1 - f)) * A), sigmaP, iterLimit = 100;\n  let cos2SigmaM, sinSigma, cosSigma, deltaSigma;\n\n  do {\n    cos2SigmaM = Math.cos(2 * sigma1 + sigma);\n    sinSigma = Math.sin(sigma);\n    cosSigma = Math.cos(sigma);\n    deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)\n      - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));\n    sigmaP = sigma;\n    sigma = s12 / ((a * (1 - f)) * A) + deltaSigma;\n  } while (Math.abs(sigma - sigmaP) > 1e-12 && --iterLimit > 0);\n\n  if (iterLimit === 0) {\n    return { lat2: NaN, lon2: NaN };\n  }\n\n  const tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1;\n  const lat2 = Math.atan2(\n    sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1,\n    (1 - f) * Math.sqrt(sinAlpha * sinAlpha + tmp * tmp)\n  );\n  const lambda = Math.atan2(\n    sinSigma * sinAlpha1,\n    cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1\n  );\n  const C = f / 16 * cos2Alpha * (4 + f * (4 - 3 * cos2Alpha));\n  const L = lambda - (1 - C) * f * sinAlpha\n    * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));\n  const lon2 = lon1 + L;\n\n  return { lat2, lon2 };\n}\n", "import adjust_lon from '../common/adjust_lon';\nimport { HALF_PI, EPSLN } from '../constants/values';\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\nimport { vincentyDirect, vincentyInverse } from '../common/vincenty';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} es\n * @property {number} sin_p12\n * @property {number} cos_p12\n * @property {number} a\n * @property {number} f\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n  // flattening for ellipsoid\n  this.f = this.es / (1 + Math.sqrt(1 - this.es));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, c, kp, cos_c, vars, azi1;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      // North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    } else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      // South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    } else {\n      // default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  } else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      // North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    } else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      // South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    } else {\n      // Default case\n      if (Math.abs(lon) < EPSLN && Math.abs(lat - this.lat0) < EPSLN) {\n        p.x = p.y = 0;\n        return p;\n      }\n      vars = vincentyInverse(this.lat0, this.long0, lat, lon, this.a, this.f);\n      azi1 = vars.azi1;\n      p.x = vars.s12 * Math.sin(azi1);\n      p.y = vars.s12 * Math.cos(azi1);\n      return p;\n    }\n  }\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, azi1, s12, vars;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    } else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, -p.y));\n        } else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      } else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  } else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      // North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, -1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    } else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      // South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    } else {\n      // default case\n      azi1 = Math.atan2(p.x, p.y);\n      s12 = Math.sqrt(p.x * p.x + p.y * p.y);\n      vars = vincentyDirect(this.lat0, this.long0, azi1, s12, this.a, this.f);\n\n      p.x = vars.lon2;\n      p.y = vars.lat2;\n      return p;\n    }\n  }\n}\n\nexport var names = ['Azimuthal_Equidistant', 'aeqd'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport { EPSLN, HALF_PI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} sin_p14\n * @property {number} cos_p14\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  // double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      ------------------------------------------------- */\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    --------------------------------------------------- */\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      ----------------- */\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      ----------------- */\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, -p.y));\n    } else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['ortho'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport { EPSLN, TWO_PI, SPI, HALF_PI, FORTPI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} face\n * @property {number} x0\n * @property {number} y0\n * @property {number} es\n * @property {number} one_minus_f\n * @property {number} one_minus_f_squared\n */\n\n/* constants */\nvar FACE_ENUM = {\n  FRONT: 1,\n  RIGHT: 2,\n  BACK: 3,\n  LEFT: 4,\n  TOP: 5,\n  BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n  AREA_0: 1,\n  AREA_1: 2,\n  AREA_2: 3,\n  AREA_3: 4\n};\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || 'Quadrilateralized Spherical Cube';\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = { x: 0, y: 0 };\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = { value: 0 };\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) { // if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; // lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = { lam: 0, phi: 0 };\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = { value: 0 };\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = ['Quadrilateralized Spherical Cube', 'Quadrilateralized_Spherical_Cube', 'qsc'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport { HALF_PI, D2R, R2D, EPSLN } from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n  [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n  [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n  [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n  [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n  [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n  [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n  [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n  [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n  [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n  [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n  [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n  [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n  [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n  [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n  [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n  [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n  [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n  [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n  [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n  [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n  [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n  [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n  [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n  [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n  [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n  [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n  [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n  [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n  [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n  [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n  [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n  [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n  [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n  [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n  [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n  [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n  [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n  [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D / 5; // rad to 5-degree interval\nvar RC1 = 1 / C1;\nvar NODES = 18;\n\nvar poly3_val = function (coefs, x) {\n  return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function (coefs, x) {\n  return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n  var x = start;\n  for (; iters; --iters) {\n    var upd = f_df(x);\n    x -= upd;\n    if (Math.abs(upd) < max_err) {\n      break;\n    }\n  }\n  return x;\n}\n\nexport function init() {\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.long0 = this.long0 || 0;\n  this.es = 0;\n  this.title = this.title || 'Robinson';\n}\n\nexport function forward(ll) {\n  var lon = adjust_lon(ll.x - this.long0);\n\n  var dphi = Math.abs(ll.y);\n  var i = Math.floor(dphi * C1);\n  if (i < 0) {\n    i = 0;\n  } else if (i >= NODES) {\n    i = NODES - 1;\n  }\n  dphi = R2D * (dphi - RC1 * i);\n  var xy = {\n    x: poly3_val(COEFS_X[i], dphi) * lon,\n    y: poly3_val(COEFS_Y[i], dphi)\n  };\n  if (ll.y < 0) {\n    xy.y = -xy.y;\n  }\n\n  xy.x = xy.x * this.a * FXC + this.x0;\n  xy.y = xy.y * this.a * FYC + this.y0;\n  return xy;\n}\n\nexport function inverse(xy) {\n  var ll = {\n    x: (xy.x - this.x0) / (this.a * FXC),\n    y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n  };\n\n  if (ll.y >= 1) { // pathologic case\n    ll.x /= COEFS_X[NODES][0];\n    ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    // find table interval\n    var i = Math.floor(ll.y * NODES);\n    if (i < 0) {\n      i = 0;\n    } else if (i >= NODES) {\n      i = NODES - 1;\n    }\n    for (;;) {\n      if (COEFS_Y[i][0] > ll.y) {\n        --i;\n      } else if (COEFS_Y[i + 1][0] <= ll.y) {\n        ++i;\n      } else {\n        break;\n      }\n    }\n    // linear interpolation in 5 degree interval\n    var coefs = COEFS_Y[i];\n    var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i + 1][0] - coefs[0]);\n    // find t so that poly3_val(coefs, t) = ll.y\n    t = newton_rapshon(function (x) {\n      return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n    }, t, EPSLN, 100);\n\n    ll.x /= poly3_val(COEFS_X[i], t);\n    ll.y = (5 * i + t) * D2R;\n    if (xy.y < 0) {\n      ll.y = -ll.y;\n    }\n  }\n\n  ll.x = adjust_lon(ll.x + this.long0);\n  return ll;\n}\n\nexport var names = ['Robinson', 'robin'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import {\n  geodeticToGeocentric,\n  geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n  this.name = 'geocent';\n}\n\nexport function forward(p) {\n  var point = geodeticToGeocentric(p, this.es, this.a);\n  return point;\n}\n\nexport function inverse(p) {\n  var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n  return point;\n}\n\nexport var names = ['Geocentric', 'geocentric', 'geocent', 'Geocent'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import { D2R, HALF_PI, EPSLN } from '../constants/values';\nimport hypot from '../common/hypot';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} mode\n * @property {number} sinph0\n * @property {number} cosph0\n * @property {number} pn1\n * @property {number} h\n * @property {number} rp\n * @property {number} p\n * @property {number} h1\n * @property {number} pfact\n * @property {number} es\n * @property {number} tilt\n * @property {number} azi\n * @property {number} cg\n * @property {number} sg\n * @property {number} cw\n * @property {number} sw\n */\n\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nvar params = {\n  h: { def: 100000, num: true }, // default is Karman line, no default in PROJ.7\n  azi: { def: 0, num: true, degrees: true }, // default is North\n  tilt: { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true }, // default is Greenwich, conversion to rad is automatic\n  lat0: { def: 0, num: true } // default is Equator, conversion to rad is automatic\n};\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === 'undefined') {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error('Invalid parameter value, must be numeric ' + p + ' = ' + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a; // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error('Invalid height');\n  }\n\n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt\n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = ['Tilted_Perspective', 'tpers'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import hypot from '../common/hypot';\n\n/**\n * @typedef {Object} LocalThis\n * @property {1 | 0} flip_axis\n * @property {number} h\n * @property {number} radius_g_1\n * @property {number} radius_g\n * @property {number} radius_p\n * @property {number} radius_p2\n * @property {number} radius_p_inv2\n * @property {'ellipse'|'sphere'} shape\n * @property {number} C\n * @property {string} sweep\n * @property {number} es\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  this.flip_axis = (this.sweep === 'x' ? 1 : 0);\n  this.h = Number(this.h);\n  this.radius_g_1 = this.h / this.a;\n\n  if (this.radius_g_1 <= 0 || this.radius_g_1 > 1e10) {\n    throw new Error();\n  }\n\n  this.radius_g = 1.0 + this.radius_g_1;\n  this.C = this.radius_g * this.radius_g - 1.0;\n\n  if (this.es !== 0.0) {\n    var one_es = 1.0 - this.es;\n    var rone_es = 1 / one_es;\n\n    this.radius_p = Math.sqrt(one_es);\n    this.radius_p2 = one_es;\n    this.radius_p_inv2 = rone_es;\n\n    this.shape = 'ellipse'; // Use as a condition in the forward and inverse functions.\n  } else {\n    this.radius_p = 1.0;\n    this.radius_p2 = 1.0;\n    this.radius_p_inv2 = 1.0;\n\n    this.shape = 'sphere'; // Use as a condition in the forward and inverse functions.\n  }\n\n  if (!this.title) {\n    this.title = 'Geostationary Satellite View';\n  }\n}\n\nfunction forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var tmp, v_x, v_y, v_z;\n  lon = lon - this.long0;\n\n  if (this.shape === 'ellipse') {\n    lat = Math.atan(this.radius_p2 * Math.tan(lat));\n    var r = this.radius_p / hypot(this.radius_p * Math.cos(lat), Math.sin(lat));\n\n    v_x = r * Math.cos(lon) * Math.cos(lat);\n    v_y = r * Math.sin(lon) * Math.cos(lat);\n    v_z = r * Math.sin(lat);\n\n    if (((this.radius_g - v_x) * v_x - v_y * v_y - v_z * v_z * this.radius_p_inv2) < 0.0) {\n      p.x = Number.NaN;\n      p.y = Number.NaN;\n      return p;\n    }\n\n    tmp = this.radius_g - v_x;\n    if (this.flip_axis) {\n      p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n      p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n    } else {\n      p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n      p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n    }\n  } else if (this.shape === 'sphere') {\n    tmp = Math.cos(lat);\n    v_x = Math.cos(lon) * tmp;\n    v_y = Math.sin(lon) * tmp;\n    v_z = Math.sin(lat);\n    tmp = this.radius_g - v_x;\n\n    if (this.flip_axis) {\n      p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n      p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n    } else {\n      p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n      p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n    }\n  }\n  p.x = p.x * this.a;\n  p.y = p.y * this.a;\n  return p;\n}\n\nfunction inverse(p) {\n  var v_x = -1.0;\n  var v_y = 0.0;\n  var v_z = 0.0;\n  var a, b, det, k;\n\n  p.x = p.x / this.a;\n  p.y = p.y / this.a;\n\n  if (this.shape === 'ellipse') {\n    if (this.flip_axis) {\n      v_z = Math.tan(p.y / this.radius_g_1);\n      v_y = Math.tan(p.x / this.radius_g_1) * hypot(1.0, v_z);\n    } else {\n      v_y = Math.tan(p.x / this.radius_g_1);\n      v_z = Math.tan(p.y / this.radius_g_1) * hypot(1.0, v_y);\n    }\n\n    var v_zp = v_z / this.radius_p;\n    a = v_y * v_y + v_zp * v_zp + v_x * v_x;\n    b = 2 * this.radius_g * v_x;\n    det = (b * b) - 4 * a * this.C;\n\n    if (det < 0.0) {\n      p.x = Number.NaN;\n      p.y = Number.NaN;\n      return p;\n    }\n\n    k = (-b - Math.sqrt(det)) / (2.0 * a);\n    v_x = this.radius_g + k * v_x;\n    v_y *= k;\n    v_z *= k;\n\n    p.x = Math.atan2(v_y, v_x);\n    p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n    p.y = Math.atan(this.radius_p_inv2 * Math.tan(p.y));\n  } else if (this.shape === 'sphere') {\n    if (this.flip_axis) {\n      v_z = Math.tan(p.y / this.radius_g_1);\n      v_y = Math.tan(p.x / this.radius_g_1) * Math.sqrt(1.0 + v_z * v_z);\n    } else {\n      v_y = Math.tan(p.x / this.radius_g_1);\n      v_z = Math.tan(p.y / this.radius_g_1) * Math.sqrt(1.0 + v_y * v_y);\n    }\n\n    a = v_y * v_y + v_z * v_z + v_x * v_x;\n    b = 2 * this.radius_g * v_x;\n    det = (b * b) - 4 * a * this.C;\n    if (det < 0.0) {\n      p.x = Number.NaN;\n      p.y = Number.NaN;\n      return p;\n    }\n\n    k = (-b - Math.sqrt(det)) / (2.0 * a);\n    v_x = this.radius_g + k * v_x;\n    v_y *= k;\n    v_z *= k;\n\n    p.x = Math.atan2(v_y, v_x);\n    p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n  }\n  p.x = p.x + this.long0;\n  return p;\n}\n\nexport var names = ['Geostationary Satellite View', 'Geostationary_Satellite', 'geos'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "/**\n * Copyright 2018 Bernie Jenny, Monash University, Melbourne, Australia.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Equal Earth is a projection inspired by the Robinson projection, but unlike\n * the Robinson projection retains the relative size of areas. The projection\n * was designed in 2018 by Bojan Savric, Tom Patterson and Bernhard Jenny.\n *\n * Publication:\n * Bojan Savric, Tom Patterson & Bernhard Jenny (2018). The Equal Earth map\n * projection, International Journal of Geographical Information Science,\n * DOI: 10.1080/13658816.2018.1504949\n *\n * Code released August 2018\n * Ported to JavaScript and adapted for mapshaper-proj by Matthew Bloch August 2018\n * Modified for proj4js by Andreas Hocevar by Andreas Hocevar March 2024\n */\n\nimport adjust_lon from '../common/adjust_lon';\n\nvar A1 = 1.340264,\n  A2 = -0.081106,\n  A3 = 0.000893,\n  A4 = 0.003796,\n  M = Math.sqrt(3) / 2.0;\n\nexport function init() {\n  this.es = 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n}\n\nexport function forward(p) {\n  var lam = adjust_lon(p.x - this.long0);\n  var phi = p.y;\n  var paramLat = Math.asin(M * Math.sin(phi)),\n    paramLatSq = paramLat * paramLat,\n    paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n  p.x = lam * Math.cos(paramLat)\n    / (M * (A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq)));\n  p.y = paramLat * (A1 + A2 * paramLatSq + paramLatPow6 * (A3 + A4 * paramLatSq));\n\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  var EPS = 1e-9,\n    NITER = 12,\n    paramLat = p.y,\n    paramLatSq, paramLatPow6, fy, fpy, dlat, i;\n\n  for (i = 0; i < NITER; ++i) {\n    paramLatSq = paramLat * paramLat;\n    paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n    fy = paramLat * (A1 + A2 * paramLatSq + paramLatPow6 * (A3 + A4 * paramLatSq)) - p.y;\n    fpy = A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq);\n    paramLat -= dlat = fy / fpy;\n    if (Math.abs(dlat) < EPS) {\n      break;\n    }\n  }\n  paramLatSq = paramLat * paramLat;\n  paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n  p.x = M * p.x * (A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq))\n    / Math.cos(paramLat);\n  p.y = Math.asin(Math.sin(paramLat) / M);\n\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = ['eqearth', 'Equal Earth', 'Equal_Earth'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n", "import adjust_lat from '../common/adjust_lat';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\nimport pj_enfn from '../common/pj_enfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport { HALF_PI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} phi1\n * @property {number} cphi1\n * @property {number} es\n * @property {Array<number>} en\n * @property {number} m1\n * @property {number} am1\n */\n\nvar EPS10 = 1e-10;\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var c;\n\n  this.phi1 = this.lat1;\n  if (Math.abs(this.phi1) < EPS10) {\n    throw new Error();\n  }\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.m1 = pj_mlfn(this.phi1, this.am1 = Math.sin(this.phi1),\n      c = Math.cos(this.phi1), this.en);\n    this.am1 = c / (Math.sqrt(1 - this.es * this.am1 * this.am1) * this.am1);\n    this.inverse = e_inv;\n    this.forward = e_fwd;\n  } else {\n    if (Math.abs(this.phi1) + EPS10 >= HALF_PI) {\n      this.cphi1 = 0;\n    } else {\n      this.cphi1 = 1 / Math.tan(this.phi1);\n    }\n    this.inverse = s_inv;\n    this.forward = s_fwd;\n  }\n}\n\nfunction e_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0));\n  var phi = p.y;\n  var rh, E, c;\n  rh = this.am1 + this.m1 - pj_mlfn(phi, E = Math.sin(phi), c = Math.cos(phi), this.en);\n  E = c * lam / (rh * Math.sqrt(1 - this.es * E * E));\n  p.x = rh * Math.sin(E);\n  p.y = this.am1 - rh * Math.cos(E);\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction e_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var s, rh, lam, phi;\n  rh = hypot(p.x, p.y = this.am1 - p.y);\n  phi = pj_inv_mlfn(this.am1 + this.m1 - rh, this.es, this.en);\n  if ((s = Math.abs(phi)) < HALF_PI) {\n    s = Math.sin(phi);\n    lam = rh * Math.atan2(p.x, p.y) * Math.sqrt(1 - this.es * s * s) / Math.cos(phi);\n  } else if (Math.abs(s - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    throw new Error();\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0));\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nfunction s_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0));\n  var phi = p.y;\n  var E, rh;\n  rh = this.cphi1 + this.phi1 - phi;\n  if (Math.abs(rh) > EPS10) {\n    p.x = rh * Math.sin(E = lam * Math.cos(phi) / rh);\n    p.y = this.cphi1 - rh * Math.cos(E);\n  } else {\n    p.x = p.y = 0;\n  }\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction s_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var lam, phi;\n  var rh = hypot(p.x, p.y = this.cphi1 - p.y);\n  phi = this.cphi1 + this.phi1 - rh;\n  if (Math.abs(phi) > HALF_PI) {\n    throw new Error();\n  }\n  if (Math.abs(Math.abs(phi) - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    lam = rh * Math.atan2(p.x, p.y) / Math.cos(phi);\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0));\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nexport var names = ['bonne', 'Bonne (Werner lat_1=90)'];\nexport default {\n  init: init,\n  names: names\n};\n", "import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nimport geos from './lib/projections/geos';\nimport eqearth from './lib/projections/eqearth';\nimport bonne from './lib/projections/bonne';\nexport default function (proj4) {\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n  proj4.Proj.projections.add(geos);\n  proj4.Proj.projections.add(eqearth);\n  proj4.Proj.projections.add(bonne);\n}\n", "import core from './core';\nimport Proj from './Proj';\nimport Point from './Point';\nimport common from './common/toPoint';\nimport defs from './defs';\nimport nadgrid from './nadgrid';\nimport transform from './transform';\nimport mgrs from 'mgrs';\nimport includedProjections from '../projs';\n\n/**\n * @typedef {Object} Mgrs\n * @property {(lonlat: [number, number]) => string} forward\n * @property {(mgrsString: string) => [number, number, number, number]} inverse\n * @property {(mgrsString: string) => [number, number]} toPoint\n */\n\n/**\n * @typedef {import('./defs').ProjectionDefinition} ProjectionDefinition\n * @typedef {import('./core').TemplateCoordinates} TemplateCoordinates\n * @typedef {import('./core').InterfaceCoordinates} InterfaceCoordinates\n * @typedef {import('./core').Converter} Converter\n * @typedef {import('./Proj').DatumDefinition} DatumDefinition\n */\n\n/**\n * @template {import('./core').TemplateCoordinates} T\n * @type {core<T> & {defaultDatum: string, Proj: typeof Proj, WGS84: Proj, Point: typeof Point, toPoint: typeof common, defs: typeof defs, nadgrid: typeof nadgrid, transform: typeof transform, mgrs: Mgrs, version: string}}\n */\nconst proj4 = Object.assign(core, {\n  defaultDatum: 'WGS84',\n  Proj,\n  WGS84: new Proj('WGS84'),\n  Point,\n  toPoint: common,\n  defs,\n  nadgrid,\n  transform,\n  mgrs,\n  version: '__VERSION__'\n});\nincludedProjections(proj4);\nexport default proj4;\n", "import proj4 from 'proj4';\nimport { defaultGcpTransformerOptions } from '@allmaps/transform';\nconst lonLatEquivalentDefinitions = [\n    '+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees',\n    '+proj=longlat +datum=WGS84 +no_defs +type=crs',\n    'EPSG:4326',\n    'WGS84'\n];\nconst webMercatorEquivalentDefinitions = [\n    '+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs',\n    'EPSG:3857',\n    'EPSG:3785',\n    'GOOGLE',\n    'EPSG:900913',\n    'EPSG:102113'\n];\nexport const lonLatProjection = {\n    name: 'EPSG:4326',\n    definition: lonLatEquivalentDefinitions[0]\n};\nexport const webMercatorProjection = {\n    name: 'EPSG:3857',\n    definition: webMercatorEquivalentDefinitions[0]\n};\nexport const defaultProjectedGcpTransformerOptions = {\n    internalProjection: webMercatorProjection,\n    projection: webMercatorProjection,\n    ...defaultGcpTransformerOptions\n};\nexport const defaultProjectedGcpTransformOptions = {\n    projection: webMercatorProjection,\n    ...defaultGcpTransformerOptions\n};\nconst lonLatProjectionToWebMecatorProjectionConverter = proj4(lonLatProjection.definition, webMercatorProjection.definition);\nexport const lonLatToWebMercator = lonLatProjectionToWebMecatorProjectionConverter.forward;\nexport const webMercatorToLonLat = lonLatProjectionToWebMecatorProjectionConverter.inverse;\nfunction projectionDefinitionToAntialiasedDefinition(stringProjectionDefinition) {\n    if (stringProjectionDefinition === undefined) {\n        return undefined;\n    }\n    const lonLatIndex = lonLatEquivalentDefinitions.indexOf(stringProjectionDefinition);\n    const webMercatorIndex = webMercatorEquivalentDefinitions.indexOf(stringProjectionDefinition);\n    if (lonLatIndex != -1) {\n        return lonLatProjection.definition;\n    }\n    else if (webMercatorIndex != -1) {\n        return webMercatorProjection.definition;\n    }\n    else {\n        return stringProjectionDefinition;\n    }\n}\nexport function isEqualProjection(projection0, projection1) {\n    return (projectionDefinitionToAntialiasedDefinition(String(projection0?.definition)) ==\n        projectionDefinitionToAntialiasedDefinition(String(projection1?.definition)));\n}\n", "import proj4 from 'proj4';\nimport { mergeOptions, mergeOptionsUnlessUndefined, mergePartialOptions } from '@allmaps/stdlib';\nimport { GcpTransformer } from '@allmaps/transform';\nimport { defaultProjectedGcpTransformerOptions, lonLatProjection } from '../shared/project-functions.js';\n/**\n * Class for Projected Ground Control Point Transformers.\n *\n * A Projected GCP Transformer can transform input geometries between 'resource' and 'projected geo' spaces.\n *\n * It does this using a transformation (of a certain type) built from\n * a set of Ground Control Points (with coordinates in\n * resource and geo space), a transformation type,\n * and an internal projection and projection.\n *\n * GCPs are expected in lon-lat 'EPSG:4326' (and are projected to the internal projection).\n * The default projection for the internal projection and projection is WebMercator 'EPSG:3857'.\n *\n * A postToGeo function is built from the internal projection to the projection (by default an identity projection).\n * A preToResource function is built from the projection to the internal projection (by default an identity projection).\n *\n * Like the GCP Transformer class it extends,\n * it has a method to transform 'toGeo' (from resource to projected geo space)\n * and 'toResource' (from projected geo to resource space),\n *\n * Like the GCP Transformer class it extends,\n * the `differentHandedness` setting is `true` by default,\n * since we expect the resource coordinates to identify pixels on an image,\n * with origin in the top left and the y-axis pointing down.\n *\n * @param internalProjection - the internal projection to which the GCPs (supplied in lon-lat 'EPSG:4326') are projected before building the transformation functions.\n * @param projection - the projection of the 'projected geo' space, in which the 'toGeo()' methods results its results.\n * @param internalProjectionToProjection - the postToGeo used to go from the internal projection to the projection.\n * @param projectionToInternalProjection - the preToResource function used to go from the projection to the internal projection.\n */\nexport class ProjectedGcpTransformer extends GcpTransformer {\n    internalProjection;\n    projection;\n    internalProjectionToProjection;\n    projectionToInternalProjection;\n    lonLatToProjection;\n    projectionToLatLon;\n    /**\n     * Create a ProjectedGcpTransformer\n     *\n     * @param gcps - An array of Ground Control Points (GCPs) in lon-lat 'EPSG:4326'\n     * @param type - The transformation type\n     * @param partialProjectedGcpTransformerOptions - Projected GCP Transformer options\n     */ constructor(gcps, type = 'polynomial', partialProjectedGcpTransformerOptions) {\n        const projectedGcpTransformerOptions = mergeOptionsUnlessUndefined(defaultProjectedGcpTransformerOptions, partialProjectedGcpTransformerOptions);\n        const internalProjectionToProjectionConverter = proj4(projectedGcpTransformerOptions.internalProjection.definition, projectedGcpTransformerOptions.projection.definition);\n        const postToGeo = internalProjectionToProjectionConverter.forward;\n        const preToResource = internalProjectionToProjectionConverter.inverse;\n        const lonLatToProjectionConverter = proj4(lonLatProjection.definition, projectedGcpTransformerOptions.projection.definition);\n        const lonLatToProjection = lonLatToProjectionConverter.forward;\n        const projectionToLatLon = lonLatToProjectionConverter.inverse;\n        const partialGcpTransformerOptions = {\n            ...partialProjectedGcpTransformerOptions,\n            postToGeo,\n            preToResource\n        };\n        gcps = gcps.map((gcp) => {\n            return {\n                resource: gcp.resource,\n                geo: lonLatToProjection(gcp.geo)\n            };\n        });\n        super(gcps, type, partialGcpTransformerOptions);\n        this.internalProjection = projectedGcpTransformerOptions.internalProjection;\n        this.projection = projectedGcpTransformerOptions.projection;\n        this.internalProjectionToProjection = postToGeo;\n        this.projectionToInternalProjection = preToResource;\n        this.lonLatToProjection = lonLatToProjection;\n        this.projectionToLatLon = projectionToLatLon;\n    }\n    // Note: this is different from generalGcpsInternal from the BaseTransformer,\n    // which also includes a possible handedness flip\n    get interalProjectedGcps() {\n        return this.gcps.map(({ resource, geo }) => ({\n            resource,\n            geo: this.projectionToInternalProjection(this.lonLatToProjection(geo))\n        }));\n    }\n    get projectedGcps() {\n        return this.gcps.map(({ resource, geo }) => ({\n            resource,\n            geo: this.lonLatToProjection(geo)\n        }));\n    }\n    /**\n     * Set the projection.\n     *\n     * To transform 'toGeo' or 'toResource' to or from a different projection\n     * than set on a transformer's construction (but using the same internal projection)\n     * it's possible to specify the requested projection in the transform options.\n     *\n     * This way we circumvent a possibly expensive recomputation\n     * of the toGeo and/or toResource transformations.\n     *\n     * To do this more systematically, it's possible to set\n     * a projected gcp transformer's projection using this method\n     *\n     * Combine this with a deep clone of the transformer instance\n     * to keep the original transformer as well.\n     *\n     * @returns this\n     */\n    setProjection(projection) {\n        if (projection == this.projection) {\n            return this;\n        }\n        const internalProjectionToProjectionConverter = proj4(this.internalProjection.definition, projection.definition);\n        const postToGeo = internalProjectionToProjectionConverter.forward;\n        const preToResource = internalProjectionToProjectionConverter.inverse;\n        const lonLatToProjectionConverter = proj4(lonLatProjection.definition, projection.definition);\n        const lonLatToProjection = lonLatToProjectionConverter.forward;\n        const projectionToLatLon = lonLatToProjectionConverter.inverse;\n        const partialGcpTransformerOptions = {\n            postToGeo,\n            preToResource\n        };\n        // Note: no need to change the GCPs!\n        // They have already been converted to the internal projection\n        // in the GCP Transformer constructor\n        this.setTransformerOptionsInternal(partialGcpTransformerOptions);\n        this.projection = projection;\n        this.internalProjectionToProjection = postToGeo;\n        this.projectionToInternalProjection = preToResource;\n        this.lonLatToProjection = lonLatToProjection;\n        this.projectionToLatLon = projectionToLatLon;\n        return this;\n    }\n    /**\n     * Transform a geometry to projected geo space\n     *\n     * @param geometry - Geometry to transform\n     * @param partialProjectedGcpTransformOptions - Projected GCP Transform options\n     * @param gcpToP - Return type function\n     * @returns Input geometry transformed to projected geo space\n     */\n    transformToGeo(geometry, partialProjectedGcpTransformOptions, gcpToP) {\n        const projection = partialProjectedGcpTransformOptions?.projection;\n        let partialGcpTransformOptions = partialProjectedGcpTransformOptions;\n        if (projection) {\n            const internalProjectionToProjectionConverter = proj4(this.internalProjection.definition, projection.definition);\n            const postToGeo = internalProjectionToProjectionConverter.forward;\n            const preToResource = internalProjectionToProjectionConverter.inverse;\n            partialGcpTransformOptions = mergePartialOptions(partialGcpTransformOptions, {\n                postToGeo,\n                preToResource\n            });\n        }\n        return super.transformToGeo(geometry, partialGcpTransformOptions, gcpToP);\n    }\n    /**\n     * Transform a geometry to resource space\n     *\n     * @param geometry - Geometry to transform\n     * @param partialProjectedGcpTransformOptions - Projected GCP Transform options\n     * @param gcpToP - Return type function\n     * @returns Input geometry transformed to resource space\n     */\n    transformToResource(geometry, partialProjectedGcpTransformOptions, gcpToP) {\n        const projection = partialProjectedGcpTransformOptions?.projection;\n        let partialGcpTransformOptions = partialProjectedGcpTransformOptions;\n        if (projection) {\n            const internalProjectionToProjectionConverter = proj4(this.internalProjection.definition, projection.definition);\n            const postToGeo = internalProjectionToProjectionConverter.forward;\n            const preToResource = internalProjectionToProjectionConverter.inverse;\n            partialGcpTransformOptions = mergePartialOptions(partialGcpTransformOptions, {\n                postToGeo,\n                preToResource\n            });\n        }\n        return super.transformToResource(geometry, partialGcpTransformOptions, gcpToP);\n    }\n    /**\n     * Create a Projected GCP Transformer from a Georeferenced Map\n     *\n     * @param georeferencedMap - A Georeferenced Map\n     * @param options - Options, including Projected GCP Transformer Options, and a transformation type to overrule the type defined in the Georeferenced Map\n     * @returns A Projected GCP Transformer\n     */\n    static fromGeoreferencedMap(georeferencedMap, options) {\n        const georeferencedMapInput = {\n            transformationType: georeferencedMap.transformation?.type,\n            internalProjection: georeferencedMap.resourceCrs\n        };\n        options = mergeOptions(georeferencedMapInput, options);\n        return new ProjectedGcpTransformer(georeferencedMap.gcps, options.transformationType, options);\n    }\n}\n", "export const epsilon = 1.1102230246251565e-16;\nexport const splitter = 134217729;\nexport const resulterrbound = (3 + 8 * epsilon) * epsilon;\n\n// fast_expansion_sum_zeroelim routine from oritinal code\nexport function sum(elen, e, flen, f, h) {\n    let Q, Qnew, hh, bvirt;\n    let enow = e[0];\n    let fnow = f[0];\n    let eindex = 0;\n    let findex = 0;\n    if ((fnow > enow) === (fnow > -enow)) {\n        Q = enow;\n        enow = e[++eindex];\n    } else {\n        Q = fnow;\n        fnow = f[++findex];\n    }\n    let hindex = 0;\n    if (eindex < elen && findex < flen) {\n        if ((fnow > enow) === (fnow > -enow)) {\n            Qnew = enow + Q;\n            hh = Q - (Qnew - enow);\n            enow = e[++eindex];\n        } else {\n            Qnew = fnow + Q;\n            hh = Q - (Qnew - fnow);\n            fnow = f[++findex];\n        }\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        while (eindex < elen && findex < flen) {\n            if ((fnow > enow) === (fnow > -enow)) {\n                Qnew = Q + enow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (enow - bvirt);\n                enow = e[++eindex];\n            } else {\n                Qnew = Q + fnow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n                fnow = f[++findex];\n            }\n            Q = Qnew;\n            if (hh !== 0) {\n                h[hindex++] = hh;\n            }\n        }\n    }\n    while (eindex < elen) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    while (findex < flen) {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function sum_three(alen, a, blen, b, clen, c, tmp, out) {\n    return sum(sum(alen, a, blen, b, tmp), tmp, clen, c, out);\n}\n\n// scale_expansion_zeroelim routine from oritinal code\nexport function scale(elen, e, b, h) {\n    let Q, sum, hh, product1, product0;\n    let bvirt, c, ahi, alo, bhi, blo;\n\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    let enow = e[0];\n    Q = enow * b;\n    c = splitter * enow;\n    ahi = c - (c - enow);\n    alo = enow - ahi;\n    hh = alo * blo - (Q - ahi * bhi - alo * bhi - ahi * blo);\n    let hindex = 0;\n    if (hh !== 0) {\n        h[hindex++] = hh;\n    }\n    for (let i = 1; i < elen; i++) {\n        enow = e[i];\n        product1 = enow * b;\n        c = splitter * enow;\n        ahi = c - (c - enow);\n        alo = enow - ahi;\n        product0 = alo * blo - (product1 - ahi * bhi - alo * bhi - ahi * blo);\n        sum = Q + product0;\n        bvirt = sum - Q;\n        hh = Q - (sum - bvirt) + (product0 - bvirt);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        Q = product1 + sum;\n        hh = sum - (Q - product1);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function negate(elen, e) {\n    for (let i = 0; i < elen; i++) e[i] = -e[i];\n    return elen;\n}\n\nexport function estimate(elen, e) {\n    let Q = e[0];\n    for (let i = 1; i < elen; i++) Q += e[i];\n    return Q;\n}\n\nexport function vec(n) {\n    return new Float64Array(n);\n}\n", "import {epsilon, splitter, resulterrbound, estimate, vec, sum} from './util.js';\n\nconst ccwerrboundA = (3 + 16 * epsilon) * epsilon;\nconst ccwerrboundB = (2 + 12 * epsilon) * epsilon;\nconst ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\n\nconst B = vec(4);\nconst C1 = vec(8);\nconst C2 = vec(12);\nconst D = vec(16);\nconst u = vec(4);\n\nfunction orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n    let acxtail, acytail, bcxtail, bcytail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const acx = ax - cx;\n    const bcx = bx - cx;\n    const acy = ay - cy;\n    const bcy = by - cy;\n\n    s1 = acx * bcy;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcx;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    B[3] = u3;\n\n    let det = estimate(4, B);\n    let errbound = ccwerrboundB * detsum;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - acx;\n    acxtail = ax - (acx + bvirt) + (bvirt - cx);\n    bvirt = bx - bcx;\n    bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n    bvirt = ay - acy;\n    acytail = ay - (acy + bvirt) + (bvirt - cy);\n    bvirt = by - bcy;\n    bcytail = by - (bcy + bvirt) + (bvirt - cy);\n\n    if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n        return det;\n    }\n\n    errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n    det += (acx * bcytail + bcy * acxtail) - (acy * bcxtail + bcx * acytail);\n    if (det >= errbound || -det >= errbound) return det;\n\n    s1 = acxtail * bcy;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcx;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C1len = sum(4, B, 4, u, C1);\n\n    s1 = acx * bcytail;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcxtail;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C2len = sum(C1len, C1, 4, u, C2);\n\n    s1 = acxtail * bcytail;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcxtail;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const Dlen = sum(C2len, C2, 4, u, D);\n\n    return D[Dlen - 1];\n}\n\nexport function orient2d(ax, ay, bx, by, cx, cy) {\n    const detleft = (ay - cy) * (bx - cx);\n    const detright = (ax - cx) * (by - cy);\n    const det = detleft - detright;\n\n    const detsum = Math.abs(detleft + detright);\n    if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n\n    return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n}\n\nexport function orient2dfast(ax, ay, bx, by, cx, cy) {\n    return (ay - cy) * (bx - cx) - (ax - cx) * (by - cy);\n}\n", "import {epsilon, splitter, resulterrbound, estimate, vec, sum, scale} from './util.js';\n\nconst o3derrboundA = (7 + 56 * epsilon) * epsilon;\nconst o3derrboundB = (3 + 28 * epsilon) * epsilon;\nconst o3derrboundC = (26 + 288 * epsilon) * epsilon * epsilon;\n\nconst bc = vec(4);\nconst ca = vec(4);\nconst ab = vec(4);\nconst at_b = vec(4);\nconst at_c = vec(4);\nconst bt_c = vec(4);\nconst bt_a = vec(4);\nconst ct_a = vec(4);\nconst ct_b = vec(4);\nconst bct = vec(8);\nconst cat = vec(8);\nconst abt = vec(8);\nconst u = vec(4);\n\nconst _8 = vec(8);\nconst _8b = vec(8);\nconst _16 = vec(8);\nconst _12 = vec(12);\n\nlet fin = vec(192);\nlet fin2 = vec(192);\n\nfunction finadd(finlen, alen, a) {\n    finlen = sum(finlen, fin, alen, a, fin2);\n    const tmp = fin; fin = fin2; fin2 = tmp;\n    return finlen;\n}\n\nfunction tailinit(xtail, ytail, ax, ay, bx, by, a, b) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3, negate;\n    if (xtail === 0) {\n        if (ytail === 0) {\n            a[0] = 0;\n            b[0] = 0;\n            return 1;\n        } else {\n            negate = -ytail;\n            s1 = negate * ax;\n            c = splitter * negate;\n            ahi = c - (c - negate);\n            alo = negate - ahi;\n            c = splitter * ax;\n            bhi = c - (c - ax);\n            blo = ax - bhi;\n            a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            a[1] = s1;\n            s1 = ytail * bx;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * bx;\n            bhi = c - (c - bx);\n            blo = bx - bhi;\n            b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            b[1] = s1;\n            return 2;\n        }\n    } else {\n        if (ytail === 0) {\n            s1 = xtail * ay;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * ay;\n            bhi = c - (c - ay);\n            blo = ay - bhi;\n            a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            a[1] = s1;\n            negate = -xtail;\n            s1 = negate * by;\n            c = splitter * negate;\n            ahi = c - (c - negate);\n            alo = negate - ahi;\n            c = splitter * by;\n            bhi = c - (c - by);\n            blo = by - bhi;\n            b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            b[1] = s1;\n            return 2;\n        } else {\n            s1 = xtail * ay;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * ay;\n            bhi = c - (c - ay);\n            blo = ay - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = ytail * ax;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * ax;\n            bhi = c - (c - ax);\n            blo = ax - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            a[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            a[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            a[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            a[3] = u3;\n            s1 = ytail * bx;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * bx;\n            bhi = c - (c - bx);\n            blo = bx - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = xtail * by;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * by;\n            bhi = c - (c - by);\n            blo = by - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            b[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            b[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            b[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            b[3] = u3;\n            return 4;\n        }\n    }\n}\n\nfunction tailadd(finlen, a, b, k, z) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, u3;\n    s1 = a * b;\n    c = splitter * a;\n    ahi = c - (c - a);\n    alo = a - ahi;\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    c = splitter * k;\n    bhi = c - (c - k);\n    blo = k - bhi;\n    _i = s0 * k;\n    c = splitter * s0;\n    ahi = c - (c - s0);\n    alo = s0 - ahi;\n    u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n    _j = s1 * k;\n    c = splitter * s1;\n    ahi = c - (c - s1);\n    alo = s1 - ahi;\n    _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n    _k = _i + _0;\n    bvirt = _k - _i;\n    u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n    u3 = _j + _k;\n    u[2] = _k - (u3 - _j);\n    u[3] = u3;\n    finlen = finadd(finlen, 4, u);\n    if (z !== 0) {\n        c = splitter * z;\n        bhi = c - (c - z);\n        blo = z - bhi;\n        _i = s0 * z;\n        c = splitter * s0;\n        ahi = c - (c - s0);\n        alo = s0 - ahi;\n        u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n        _j = s1 * z;\n        c = splitter * s1;\n        ahi = c - (c - s1);\n        alo = s1 - ahi;\n        _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n        _k = _i + _0;\n        bvirt = _k - _i;\n        u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n        u3 = _j + _k;\n        u[2] = _k - (u3 - _j);\n        u[3] = u3;\n        finlen = finadd(finlen, 4, u);\n    }\n    return finlen;\n}\n\nfunction orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent) {\n    let finlen;\n    let adxtail, bdxtail, cdxtail;\n    let adytail, bdytail, cdytail;\n    let adztail, bdztail, cdztail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3;\n\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    s1 = bdx * cdy;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cdx * bdy;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cdx * ady;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = adx * cdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ca[3] = u3;\n    s1 = adx * bdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bdx * ady;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n\n    finlen = sum(\n        sum(\n            scale(4, bc, adz, _8), _8,\n            scale(4, ca, bdz, _8b), _8b, _16), _16,\n        scale(4, ab, cdz, _8), _8, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = o3derrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - adx;\n    adxtail = ax - (adx + bvirt) + (bvirt - dx);\n    bvirt = bx - bdx;\n    bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n    bvirt = cx - cdx;\n    cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n    bvirt = ay - ady;\n    adytail = ay - (ady + bvirt) + (bvirt - dy);\n    bvirt = by - bdy;\n    bdytail = by - (bdy + bvirt) + (bvirt - dy);\n    bvirt = cy - cdy;\n    cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n    bvirt = az - adz;\n    adztail = az - (adz + bvirt) + (bvirt - dz);\n    bvirt = bz - bdz;\n    bdztail = bz - (bdz + bvirt) + (bvirt - dz);\n    bvirt = cz - cdz;\n    cdztail = cz - (cdz + bvirt) + (bvirt - dz);\n\n    if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 &&\n        adytail === 0 && bdytail === 0 && cdytail === 0 &&\n        adztail === 0 && bdztail === 0 && cdztail === 0) {\n        return det;\n    }\n\n    errbound = o3derrboundC * permanent + resulterrbound * Math.abs(det);\n    det +=\n        adz * (bdx * cdytail + cdy * bdxtail - (bdy * cdxtail + cdx * bdytail)) + adztail * (bdx * cdy - bdy * cdx) +\n        bdz * (cdx * adytail + ady * cdxtail - (cdy * adxtail + adx * cdytail)) + bdztail * (cdx * ady - cdy * adx) +\n        cdz * (adx * bdytail + bdy * adxtail - (ady * bdxtail + bdx * adytail)) + cdztail * (adx * bdy - ady * bdx);\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    const at_len = tailinit(adxtail, adytail, bdx, bdy, cdx, cdy, at_b, at_c);\n    const bt_len = tailinit(bdxtail, bdytail, cdx, cdy, adx, ady, bt_c, bt_a);\n    const ct_len = tailinit(cdxtail, cdytail, adx, ady, bdx, bdy, ct_a, ct_b);\n\n    const bctlen = sum(bt_len, bt_c, ct_len, ct_b, bct);\n    finlen = finadd(finlen, scale(bctlen, bct, adz, _16), _16);\n\n    const catlen = sum(ct_len, ct_a, at_len, at_c, cat);\n    finlen = finadd(finlen, scale(catlen, cat, bdz, _16), _16);\n\n    const abtlen = sum(at_len, at_b, bt_len, bt_a, abt);\n    finlen = finadd(finlen, scale(abtlen, abt, cdz, _16), _16);\n\n    if (adztail !== 0) {\n        finlen = finadd(finlen, scale(4, bc, adztail, _12), _12);\n        finlen = finadd(finlen, scale(bctlen, bct, adztail, _16), _16);\n    }\n    if (bdztail !== 0) {\n        finlen = finadd(finlen, scale(4, ca, bdztail, _12), _12);\n        finlen = finadd(finlen, scale(catlen, cat, bdztail, _16), _16);\n    }\n    if (cdztail !== 0) {\n        finlen = finadd(finlen, scale(4, ab, cdztail, _12), _12);\n        finlen = finadd(finlen, scale(abtlen, abt, cdztail, _16), _16);\n    }\n\n    if (adxtail !== 0) {\n        if (bdytail !== 0) {\n            finlen = tailadd(finlen, adxtail, bdytail, cdz, cdztail);\n        }\n        if (cdytail !== 0) {\n            finlen = tailadd(finlen, -adxtail, cdytail, bdz, bdztail);\n        }\n    }\n    if (bdxtail !== 0) {\n        if (cdytail !== 0) {\n            finlen = tailadd(finlen, bdxtail, cdytail, adz, adztail);\n        }\n        if (adytail !== 0) {\n            finlen = tailadd(finlen, -bdxtail, adytail, cdz, cdztail);\n        }\n    }\n    if (cdxtail !== 0) {\n        if (adytail !== 0) {\n            finlen = tailadd(finlen, cdxtail, adytail, bdz, bdztail);\n        }\n        if (bdytail !== 0) {\n            finlen = tailadd(finlen, -cdxtail, bdytail, adz, adztail);\n        }\n    }\n\n    return fin[finlen - 1];\n}\n\nexport function orient3d(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    const bdxcdy = bdx * cdy;\n    const cdxbdy = cdx * bdy;\n\n    const cdxady = cdx * ady;\n    const adxcdy = adx * cdy;\n\n    const adxbdy = adx * bdy;\n    const bdxady = bdx * ady;\n\n    const det =\n        adz * (bdxcdy - cdxbdy) +\n        bdz * (cdxady - adxcdy) +\n        cdz * (adxbdy - bdxady);\n\n    const permanent =\n        (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz) +\n        (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz) +\n        (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz);\n\n    const errbound = o3derrboundA * permanent;\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n\n    return orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent);\n}\n\nexport function orient3dfast(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    return adx * (bdy * cdz - bdz * cdy) +\n        bdx * (cdy * adz - cdz * ady) +\n        cdx * (ady * bdz - adz * bdy);\n}\n", "import {epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale} from './util.js';\n\nconst iccerrboundA = (10 + 96 * epsilon) * epsilon;\nconst iccerrboundB = (4 + 48 * epsilon) * epsilon;\nconst iccerrboundC = (44 + 576 * epsilon) * epsilon * epsilon;\n\nconst bc = vec(4);\nconst ca = vec(4);\nconst ab = vec(4);\nconst aa = vec(4);\nconst bb = vec(4);\nconst cc = vec(4);\nconst u = vec(4);\nconst v = vec(4);\nconst axtbc = vec(8);\nconst aytbc = vec(8);\nconst bxtca = vec(8);\nconst bytca = vec(8);\nconst cxtab = vec(8);\nconst cytab = vec(8);\nconst abt = vec(8);\nconst bct = vec(8);\nconst cat = vec(8);\nconst abtt = vec(4);\nconst bctt = vec(4);\nconst catt = vec(4);\n\nconst _8 = vec(8);\nconst _16 = vec(16);\nconst _16b = vec(16);\nconst _16c = vec(16);\nconst _32 = vec(32);\nconst _32b = vec(32);\nconst _48 = vec(48);\nconst _64 = vec(64);\n\nlet fin = vec(1152);\nlet fin2 = vec(1152);\n\nfunction finadd(finlen, a, alen) {\n    finlen = sum(finlen, fin, a, alen, fin2);\n    const tmp = fin; fin = fin2; fin2 = tmp;\n    return finlen;\n}\n\nfunction incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent) {\n    let finlen;\n    let adxtail, bdxtail, cdxtail, adytail, bdytail, cdytail;\n    let axtbclen, aytbclen, bxtcalen, bytcalen, cxtablen, cytablen;\n    let abtlen, bctlen, catlen;\n    let abttlen, bcttlen, cattlen;\n    let n1, n0;\n\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n\n    s1 = bdx * cdy;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cdx * bdy;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cdx * ady;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = adx * cdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ca[3] = u3;\n    s1 = adx * bdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bdx * ady;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n\n    finlen = sum(\n        sum(\n            sum(\n                scale(scale(4, bc, adx, _8), _8, adx, _16), _16,\n                scale(scale(4, bc, ady, _8), _8, ady, _16b), _16b, _32), _32,\n            sum(\n                scale(scale(4, ca, bdx, _8), _8, bdx, _16), _16,\n                scale(scale(4, ca, bdy, _8), _8, bdy, _16b), _16b, _32b), _32b, _64), _64,\n        sum(\n            scale(scale(4, ab, cdx, _8), _8, cdx, _16), _16,\n            scale(scale(4, ab, cdy, _8), _8, cdy, _16b), _16b, _32), _32, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = iccerrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - adx;\n    adxtail = ax - (adx + bvirt) + (bvirt - dx);\n    bvirt = ay - ady;\n    adytail = ay - (ady + bvirt) + (bvirt - dy);\n    bvirt = bx - bdx;\n    bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n    bvirt = by - bdy;\n    bdytail = by - (bdy + bvirt) + (bvirt - dy);\n    bvirt = cx - cdx;\n    cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n    bvirt = cy - cdy;\n    cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n    if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 && adytail === 0 && bdytail === 0 && cdytail === 0) {\n        return det;\n    }\n\n    errbound = iccerrboundC * permanent + resulterrbound * Math.abs(det);\n    det += ((adx * adx + ady * ady) * ((bdx * cdytail + cdy * bdxtail) - (bdy * cdxtail + cdx * bdytail)) +\n        2 * (adx * adxtail + ady * adytail) * (bdx * cdy - bdy * cdx)) +\n        ((bdx * bdx + bdy * bdy) * ((cdx * adytail + ady * cdxtail) - (cdy * adxtail + adx * cdytail)) +\n        2 * (bdx * bdxtail + bdy * bdytail) * (cdx * ady - cdy * adx)) +\n        ((cdx * cdx + cdy * cdy) * ((adx * bdytail + bdy * adxtail) - (ady * bdxtail + bdx * adytail)) +\n        2 * (cdx * cdxtail + cdy * cdytail) * (adx * bdy - ady * bdx));\n\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n        s1 = adx * adx;\n        c = splitter * adx;\n        ahi = c - (c - adx);\n        alo = adx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = ady * ady;\n        c = splitter * ady;\n        ahi = c - (c - ady);\n        alo = ady - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        aa[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        aa[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        aa[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        aa[3] = u3;\n    }\n    if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n        s1 = bdx * bdx;\n        c = splitter * bdx;\n        ahi = c - (c - bdx);\n        alo = bdx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = bdy * bdy;\n        c = splitter * bdy;\n        ahi = c - (c - bdy);\n        alo = bdy - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        bb[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        bb[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        bb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        bb[3] = u3;\n    }\n    if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n        s1 = cdx * cdx;\n        c = splitter * cdx;\n        ahi = c - (c - cdx);\n        alo = cdx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = cdy * cdy;\n        c = splitter * cdy;\n        ahi = c - (c - cdy);\n        alo = cdy - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        cc[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        cc[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        cc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        cc[3] = u3;\n    }\n\n    if (adxtail !== 0) {\n        axtbclen = scale(4, bc, adxtail, axtbc);\n        finlen = finadd(finlen, sum_three(\n            scale(axtbclen, axtbc, 2 * adx, _16), _16,\n            scale(scale(4, cc, adxtail, _8), _8, bdy, _16b), _16b,\n            scale(scale(4, bb, adxtail, _8), _8, -cdy, _16c), _16c, _32, _48), _48);\n    }\n    if (adytail !== 0) {\n        aytbclen = scale(4, bc, adytail, aytbc);\n        finlen = finadd(finlen, sum_three(\n            scale(aytbclen, aytbc, 2 * ady, _16), _16,\n            scale(scale(4, bb, adytail, _8), _8, cdx, _16b), _16b,\n            scale(scale(4, cc, adytail, _8), _8, -bdx, _16c), _16c, _32, _48), _48);\n    }\n    if (bdxtail !== 0) {\n        bxtcalen = scale(4, ca, bdxtail, bxtca);\n        finlen = finadd(finlen, sum_three(\n            scale(bxtcalen, bxtca, 2 * bdx, _16), _16,\n            scale(scale(4, aa, bdxtail, _8), _8, cdy, _16b), _16b,\n            scale(scale(4, cc, bdxtail, _8), _8, -ady, _16c), _16c, _32, _48), _48);\n    }\n    if (bdytail !== 0) {\n        bytcalen = scale(4, ca, bdytail, bytca);\n        finlen = finadd(finlen, sum_three(\n            scale(bytcalen, bytca, 2 * bdy, _16), _16,\n            scale(scale(4, cc, bdytail, _8), _8, adx, _16b), _16b,\n            scale(scale(4, aa, bdytail, _8), _8, -cdx, _16c), _16c, _32, _48), _48);\n    }\n    if (cdxtail !== 0) {\n        cxtablen = scale(4, ab, cdxtail, cxtab);\n        finlen = finadd(finlen, sum_three(\n            scale(cxtablen, cxtab, 2 * cdx, _16), _16,\n            scale(scale(4, bb, cdxtail, _8), _8, ady, _16b), _16b,\n            scale(scale(4, aa, cdxtail, _8), _8, -bdy, _16c), _16c, _32, _48), _48);\n    }\n    if (cdytail !== 0) {\n        cytablen = scale(4, ab, cdytail, cytab);\n        finlen = finadd(finlen, sum_three(\n            scale(cytablen, cytab, 2 * cdy, _16), _16,\n            scale(scale(4, aa, cdytail, _8), _8, bdx, _16b), _16b,\n            scale(scale(4, bb, cdytail, _8), _8, -adx, _16c), _16c, _32, _48), _48);\n    }\n\n    if (adxtail !== 0 || adytail !== 0) {\n        if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n            s1 = bdxtail * cdy;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * cdy;\n            bhi = c - (c - cdy);\n            blo = cdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdx * cdytail;\n            c = splitter * bdx;\n            ahi = c - (c - bdx);\n            alo = bdx - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            s1 = cdxtail * -bdy;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * -bdy;\n            bhi = c - (c - -bdy);\n            blo = -bdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdx * -bdytail;\n            c = splitter * cdx;\n            ahi = c - (c - cdx);\n            alo = cdx - ahi;\n            c = splitter * -bdytail;\n            bhi = c - (c - -bdytail);\n            blo = -bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            bctlen = sum(4, u, 4, v, bct);\n            s1 = bdxtail * cdytail;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdxtail * bdytail;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            bctt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            bctt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            bctt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            bctt[3] = u3;\n            bcttlen = 4;\n        } else {\n            bct[0] = 0;\n            bctlen = 1;\n            bctt[0] = 0;\n            bcttlen = 1;\n        }\n        if (adxtail !== 0) {\n            const len = scale(bctlen, bct, adxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(axtbclen, axtbc, adxtail, _16), _16,\n                scale(len, _16c, 2 * adx, _32), _32, _48), _48);\n\n            const len2 = scale(bcttlen, bctt, adxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * adx, _16), _16,\n                scale(len2, _8, adxtail, _16b), _16b,\n                scale(len, _16c, adxtail, _32), _32, _32b, _64), _64);\n\n            if (bdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, cc, adxtail, _8), _8, bdytail, _16), _16);\n            }\n            if (cdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, bb, -adxtail, _8), _8, cdytail, _16), _16);\n            }\n        }\n        if (adytail !== 0) {\n            const len = scale(bctlen, bct, adytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(aytbclen, aytbc, adytail, _16), _16,\n                scale(len, _16c, 2 * ady, _32), _32, _48), _48);\n\n            const len2 = scale(bcttlen, bctt, adytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * ady, _16), _16,\n                scale(len2, _8, adytail, _16b), _16b,\n                scale(len, _16c, adytail, _32), _32, _32b, _64), _64);\n        }\n    }\n    if (bdxtail !== 0 || bdytail !== 0) {\n        if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n            s1 = cdxtail * ady;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * ady;\n            bhi = c - (c - ady);\n            blo = ady - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdx * adytail;\n            c = splitter * cdx;\n            ahi = c - (c - cdx);\n            alo = cdx - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            n1 = -cdy;\n            n0 = -cdytail;\n            s1 = adxtail * n1;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * n1;\n            bhi = c - (c - n1);\n            blo = n1 - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adx * n0;\n            c = splitter * adx;\n            ahi = c - (c - adx);\n            alo = adx - ahi;\n            c = splitter * n0;\n            bhi = c - (c - n0);\n            blo = n0 - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            catlen = sum(4, u, 4, v, cat);\n            s1 = cdxtail * adytail;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adxtail * cdytail;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            catt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            catt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            catt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            catt[3] = u3;\n            cattlen = 4;\n        } else {\n            cat[0] = 0;\n            catlen = 1;\n            catt[0] = 0;\n            cattlen = 1;\n        }\n        if (bdxtail !== 0) {\n            const len = scale(catlen, cat, bdxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(bxtcalen, bxtca, bdxtail, _16), _16,\n                scale(len, _16c, 2 * bdx, _32), _32, _48), _48);\n\n            const len2 = scale(cattlen, catt, bdxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * bdx, _16), _16,\n                scale(len2, _8, bdxtail, _16b), _16b,\n                scale(len, _16c, bdxtail, _32), _32, _32b, _64), _64);\n\n            if (cdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, aa, bdxtail, _8), _8, cdytail, _16), _16);\n            }\n            if (adytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, cc, -bdxtail, _8), _8, adytail, _16), _16);\n            }\n        }\n        if (bdytail !== 0) {\n            const len = scale(catlen, cat, bdytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(bytcalen, bytca, bdytail, _16), _16,\n                scale(len, _16c, 2 * bdy, _32), _32, _48), _48);\n\n            const len2 = scale(cattlen, catt, bdytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * bdy, _16), _16,\n                scale(len2, _8, bdytail, _16b), _16b,\n                scale(len, _16c, bdytail, _32), _32,  _32b, _64), _64);\n        }\n    }\n    if (cdxtail !== 0 || cdytail !== 0) {\n        if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n            s1 = adxtail * bdy;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * bdy;\n            bhi = c - (c - bdy);\n            blo = bdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adx * bdytail;\n            c = splitter * adx;\n            ahi = c - (c - adx);\n            alo = adx - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            n1 = -ady;\n            n0 = -adytail;\n            s1 = bdxtail * n1;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * n1;\n            bhi = c - (c - n1);\n            blo = n1 - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdx * n0;\n            c = splitter * bdx;\n            ahi = c - (c - bdx);\n            alo = bdx - ahi;\n            c = splitter * n0;\n            bhi = c - (c - n0);\n            blo = n0 - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            abtlen = sum(4, u, 4, v, abt);\n            s1 = adxtail * bdytail;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdxtail * adytail;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            abtt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            abtt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            abtt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            abtt[3] = u3;\n            abttlen = 4;\n        } else {\n            abt[0] = 0;\n            abtlen = 1;\n            abtt[0] = 0;\n            abttlen = 1;\n        }\n        if (cdxtail !== 0) {\n            const len = scale(abtlen, abt, cdxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(cxtablen, cxtab, cdxtail, _16), _16,\n                scale(len, _16c, 2 * cdx, _32), _32, _48), _48);\n\n            const len2 = scale(abttlen, abtt, cdxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * cdx, _16), _16,\n                scale(len2, _8, cdxtail, _16b), _16b,\n                scale(len, _16c, cdxtail, _32), _32, _32b, _64), _64);\n\n            if (adytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, bb, cdxtail, _8), _8, adytail, _16), _16);\n            }\n            if (bdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, aa, -cdxtail, _8), _8, bdytail, _16), _16);\n            }\n        }\n        if (cdytail !== 0) {\n            const len = scale(abtlen, abt, cdytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(cytablen, cytab, cdytail, _16), _16,\n                scale(len, _16c, 2 * cdy, _32), _32, _48), _48);\n\n            const len2 = scale(abttlen, abtt, cdytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * cdy, _16), _16,\n                scale(len2, _8, cdytail, _16b), _16b,\n                scale(len, _16c, cdytail, _32), _32, _32b, _64), _64);\n        }\n    }\n\n    return fin[finlen - 1];\n}\n\nexport function incircle(ax, ay, bx, by, cx, cy, dx, dy) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n\n    const bdxcdy = bdx * cdy;\n    const cdxbdy = cdx * bdy;\n    const alift = adx * adx + ady * ady;\n\n    const cdxady = cdx * ady;\n    const adxcdy = adx * cdy;\n    const blift = bdx * bdx + bdy * bdy;\n\n    const adxbdy = adx * bdy;\n    const bdxady = bdx * ady;\n    const clift = cdx * cdx + cdy * cdy;\n\n    const det =\n        alift * (bdxcdy - cdxbdy) +\n        blift * (cdxady - adxcdy) +\n        clift * (adxbdy - bdxady);\n\n    const permanent =\n        (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * alift +\n        (Math.abs(cdxady) + Math.abs(adxcdy)) * blift +\n        (Math.abs(adxbdy) + Math.abs(bdxady)) * clift;\n\n    const errbound = iccerrboundA * permanent;\n\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n    return incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent);\n}\n\nexport function incirclefast(ax, ay, bx, by, cx, cy, dx, dy) {\n    const adx = ax - dx;\n    const ady = ay - dy;\n    const bdx = bx - dx;\n    const bdy = by - dy;\n    const cdx = cx - dx;\n    const cdy = cy - dy;\n\n    const abdet = adx * bdy - bdx * ady;\n    const bcdet = bdx * cdy - cdx * bdy;\n    const cadet = cdx * ady - adx * cdy;\n    const alift = adx * adx + ady * ady;\n    const blift = bdx * bdx + bdy * bdy;\n    const clift = cdx * cdx + cdy * cdy;\n\n    return alift * bcdet + blift * cadet + clift * abdet;\n}\n", "import {epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale, negate} from './util.js';\n\nconst isperrboundA = (16 + 224 * epsilon) * epsilon;\nconst isperrboundB = (5 + 72 * epsilon) * epsilon;\nconst isperrboundC = (71 + 1408 * epsilon) * epsilon * epsilon;\n\nconst ab = vec(4);\nconst bc = vec(4);\nconst cd = vec(4);\nconst de = vec(4);\nconst ea = vec(4);\nconst ac = vec(4);\nconst bd = vec(4);\nconst ce = vec(4);\nconst da = vec(4);\nconst eb = vec(4);\n\nconst abc = vec(24);\nconst bcd = vec(24);\nconst cde = vec(24);\nconst dea = vec(24);\nconst eab = vec(24);\nconst abd = vec(24);\nconst bce = vec(24);\nconst cda = vec(24);\nconst deb = vec(24);\nconst eac = vec(24);\n\nconst adet = vec(1152);\nconst bdet = vec(1152);\nconst cdet = vec(1152);\nconst ddet = vec(1152);\nconst edet = vec(1152);\nconst abdet = vec(2304);\nconst cddet = vec(2304);\nconst cdedet = vec(3456);\nconst deter = vec(5760);\n\nconst _8 = vec(8);\nconst _8b = vec(8);\nconst _8c = vec(8);\nconst _16 = vec(16);\nconst _24 = vec(24);\nconst _48 = vec(48);\nconst _48b = vec(48);\nconst _96 = vec(96);\nconst _192 = vec(192);\nconst _384x = vec(384);\nconst _384y = vec(384);\nconst _384z = vec(384);\nconst _768 = vec(768);\n\nfunction sum_three_scale(a, b, c, az, bz, cz, out) {\n    return sum_three(\n        scale(4, a, az, _8), _8,\n        scale(4, b, bz, _8b), _8b,\n        scale(4, c, cz, _8c), _8c, _16, out);\n}\n\nfunction liftexact(alen, a, blen, b, clen, c, dlen, d, x, y, z, out) {\n    const len = sum(\n        sum(alen, a, blen, b, _48), _48,\n        negate(sum(clen, c, dlen, d, _48b), _48b), _48b, _96);\n\n    return sum_three(\n        scale(scale(len, _96, x, _192), _192, x, _384x), _384x,\n        scale(scale(len, _96, y, _192), _192, y, _384y), _384y,\n        scale(scale(len, _96, z, _192), _192, z, _384z), _384z, _768, out);\n}\n\nfunction insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    s1 = ax * by;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bx * ay;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n    s1 = bx * cy;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cx * by;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cx * dy;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dx * cy;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    cd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    cd[3] = u3;\n    s1 = dx * ey;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ex * dy;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    de[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    de[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    de[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    de[3] = u3;\n    s1 = ex * ay;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ax * ey;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ea[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ea[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ea[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ea[3] = u3;\n    s1 = ax * cy;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cx * ay;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ac[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ac[3] = u3;\n    s1 = bx * dy;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dx * by;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bd[3] = u3;\n    s1 = cx * ey;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ex * cy;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ce[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ce[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ce[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ce[3] = u3;\n    s1 = dx * ay;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ax * dy;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    da[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    da[3] = u3;\n    s1 = ex * by;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bx * ey;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    eb[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    eb[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    eb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    eb[3] = u3;\n\n    const abclen = sum_three_scale(ab, bc, ac, cz, az, -bz, abc);\n    const bcdlen = sum_three_scale(bc, cd, bd, dz, bz, -cz, bcd);\n    const cdelen = sum_three_scale(cd, de, ce, ez, cz, -dz, cde);\n    const dealen = sum_three_scale(de, ea, da, az, dz, -ez, dea);\n    const eablen = sum_three_scale(ea, ab, eb, bz, ez, -az, eab);\n    const abdlen = sum_three_scale(ab, bd, da, dz, az, bz, abd);\n    const bcelen = sum_three_scale(bc, ce, eb, ez, bz, cz, bce);\n    const cdalen = sum_three_scale(cd, da, ac, az, cz, dz, cda);\n    const deblen = sum_three_scale(de, eb, bd, bz, dz, ez, deb);\n    const eaclen = sum_three_scale(ea, ac, ce, cz, ez, az, eac);\n\n    const deterlen = sum_three(\n        liftexact(cdelen, cde, bcelen, bce, deblen, deb, bcdlen, bcd, ax, ay, az, adet), adet,\n        liftexact(dealen, dea, cdalen, cda, eaclen, eac, cdelen, cde, bx, by, bz, bdet), bdet,\n        sum_three(\n            liftexact(eablen, eab, deblen, deb, abdlen, abd, dealen, dea, cx, cy, cz, cdet), cdet,\n            liftexact(abclen, abc, eaclen, eac, bcelen, bce, eablen, eab, dx, dy, dz, ddet), ddet,\n            liftexact(bcdlen, bcd, abdlen, abd, cdalen, cda, abclen, abc, ex, ey, ez, edet), edet, cddet, cdedet), cdedet, abdet, deter);\n\n    return deter[deterlen - 1];\n}\n\nconst xdet = vec(96);\nconst ydet = vec(96);\nconst zdet = vec(96);\nconst fin = vec(1152);\n\nfunction liftadapt(a, b, c, az, bz, cz, x, y, z, out) {\n    const len = sum_three_scale(a, b, c, az, bz, cz, _24);\n    return sum_three(\n        scale(scale(len, _24, x, _48), _48, x, xdet), xdet,\n        scale(scale(len, _24, y, _48), _48, y, ydet), ydet,\n        scale(scale(len, _24, z, _48), _48, z, zdet), zdet, _192, out);\n}\n\nfunction insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent) {\n    let ab3, bc3, cd3, da3, ac3, bd3;\n\n    let aextail, bextail, cextail, dextail;\n    let aeytail, beytail, ceytail, deytail;\n    let aeztail, beztail, ceztail, deztail;\n\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0;\n\n    const aex = ax - ex;\n    const bex = bx - ex;\n    const cex = cx - ex;\n    const dex = dx - ex;\n    const aey = ay - ey;\n    const bey = by - ey;\n    const cey = cy - ey;\n    const dey = dy - ey;\n    const aez = az - ez;\n    const bez = bz - ez;\n    const cez = cz - ez;\n    const dez = dz - ez;\n\n    s1 = aex * bey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bex * aey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    ab3 = _j + _i;\n    bvirt = ab3 - _j;\n    ab[2] = _j - (ab3 - bvirt) + (_i - bvirt);\n    ab[3] = ab3;\n    s1 = bex * cey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cex * bey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    bc3 = _j + _i;\n    bvirt = bc3 - _j;\n    bc[2] = _j - (bc3 - bvirt) + (_i - bvirt);\n    bc[3] = bc3;\n    s1 = cex * dey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dex * cey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    cd3 = _j + _i;\n    bvirt = cd3 - _j;\n    cd[2] = _j - (cd3 - bvirt) + (_i - bvirt);\n    cd[3] = cd3;\n    s1 = dex * aey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = aex * dey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    da3 = _j + _i;\n    bvirt = da3 - _j;\n    da[2] = _j - (da3 - bvirt) + (_i - bvirt);\n    da[3] = da3;\n    s1 = aex * cey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cex * aey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    ac3 = _j + _i;\n    bvirt = ac3 - _j;\n    ac[2] = _j - (ac3 - bvirt) + (_i - bvirt);\n    ac[3] = ac3;\n    s1 = bex * dey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dex * bey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    bd3 = _j + _i;\n    bvirt = bd3 - _j;\n    bd[2] = _j - (bd3 - bvirt) + (_i - bvirt);\n    bd[3] = bd3;\n\n    const finlen = sum(\n        sum(\n            negate(liftadapt(bc, cd, bd, dez, bez, -cez, aex, aey, aez, adet), adet), adet,\n            liftadapt(cd, da, ac, aez, cez, dez, bex, bey, bez, bdet), bdet, abdet), abdet,\n        sum(\n            negate(liftadapt(da, ab, bd, bez, dez, aez, cex, cey, cez, cdet), cdet), cdet,\n            liftadapt(ab, bc, ac, cez, aez, -bez, dex, dey, dez, ddet), ddet, cddet), cddet, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = isperrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - aex;\n    aextail = ax - (aex + bvirt) + (bvirt - ex);\n    bvirt = ay - aey;\n    aeytail = ay - (aey + bvirt) + (bvirt - ey);\n    bvirt = az - aez;\n    aeztail = az - (aez + bvirt) + (bvirt - ez);\n    bvirt = bx - bex;\n    bextail = bx - (bex + bvirt) + (bvirt - ex);\n    bvirt = by - bey;\n    beytail = by - (bey + bvirt) + (bvirt - ey);\n    bvirt = bz - bez;\n    beztail = bz - (bez + bvirt) + (bvirt - ez);\n    bvirt = cx - cex;\n    cextail = cx - (cex + bvirt) + (bvirt - ex);\n    bvirt = cy - cey;\n    ceytail = cy - (cey + bvirt) + (bvirt - ey);\n    bvirt = cz - cez;\n    ceztail = cz - (cez + bvirt) + (bvirt - ez);\n    bvirt = dx - dex;\n    dextail = dx - (dex + bvirt) + (bvirt - ex);\n    bvirt = dy - dey;\n    deytail = dy - (dey + bvirt) + (bvirt - ey);\n    bvirt = dz - dez;\n    deztail = dz - (dez + bvirt) + (bvirt - ez);\n    if (aextail === 0 && aeytail === 0 && aeztail === 0 &&\n        bextail === 0 && beytail === 0 && beztail === 0 &&\n        cextail === 0 && ceytail === 0 && ceztail === 0 &&\n        dextail === 0 && deytail === 0 && deztail === 0) {\n        return det;\n    }\n\n    errbound = isperrboundC * permanent + resulterrbound * Math.abs(det);\n\n    const abeps = (aex * beytail + bey * aextail) - (aey * bextail + bex * aeytail);\n    const bceps = (bex * ceytail + cey * bextail) - (bey * cextail + cex * beytail);\n    const cdeps = (cex * deytail + dey * cextail) - (cey * dextail + dex * ceytail);\n    const daeps = (dex * aeytail + aey * dextail) - (dey * aextail + aex * deytail);\n    const aceps = (aex * ceytail + cey * aextail) - (aey * cextail + cex * aeytail);\n    const bdeps = (bex * deytail + dey * bextail) - (bey * dextail + dex * beytail);\n    det +=\n        (((bex * bex + bey * bey + bez * bez) * ((cez * daeps + dez * aceps + aez * cdeps) +\n        (ceztail * da3 + deztail * ac3 + aeztail * cd3)) + (dex * dex + dey * dey + dez * dez) *\n        ((aez * bceps - bez * aceps + cez * abeps) + (aeztail * bc3 - beztail * ac3 + ceztail * ab3))) -\n        ((aex * aex + aey * aey + aez * aez) * ((bez * cdeps - cez * bdeps + dez * bceps) +\n        (beztail * cd3 - ceztail * bd3 + deztail * bc3)) + (cex * cex + cey * cey + cez * cez) *\n        ((dez * abeps + aez * bdeps + bez * daeps) + (deztail * ab3 + aeztail * bd3 + beztail * da3)))) +\n        2 * (((bex * bextail + bey * beytail + bez * beztail) * (cez * da3 + dez * ac3 + aez * cd3) +\n        (dex * dextail + dey * deytail + dez * deztail) * (aez * bc3 - bez * ac3 + cez * ab3)) -\n        ((aex * aextail + aey * aeytail + aez * aeztail) * (bez * cd3 - cez * bd3 + dez * bc3) +\n        (cex * cextail + cey * ceytail + cez * ceztail) * (dez * ab3 + aez * bd3 + bez * da3)));\n\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    return insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez);\n}\n\nexport function insphere(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n    const aex = ax - ex;\n    const bex = bx - ex;\n    const cex = cx - ex;\n    const dex = dx - ex;\n    const aey = ay - ey;\n    const bey = by - ey;\n    const cey = cy - ey;\n    const dey = dy - ey;\n    const aez = az - ez;\n    const bez = bz - ez;\n    const cez = cz - ez;\n    const dez = dz - ez;\n\n    const aexbey = aex * bey;\n    const bexaey = bex * aey;\n    const ab = aexbey - bexaey;\n    const bexcey = bex * cey;\n    const cexbey = cex * bey;\n    const bc = bexcey - cexbey;\n    const cexdey = cex * dey;\n    const dexcey = dex * cey;\n    const cd = cexdey - dexcey;\n    const dexaey = dex * aey;\n    const aexdey = aex * dey;\n    const da = dexaey - aexdey;\n    const aexcey = aex * cey;\n    const cexaey = cex * aey;\n    const ac = aexcey - cexaey;\n    const bexdey = bex * dey;\n    const dexbey = dex * bey;\n    const bd = bexdey - dexbey;\n\n    const alift = aex * aex + aey * aey + aez * aez;\n    const blift = bex * bex + bey * bey + bez * bez;\n    const clift = cex * cex + cey * cey + cez * cez;\n    const dlift = dex * dex + dey * dey + dez * dez;\n\n    const det =\n        (clift * (dez * ab + aez * bd + bez * da) - dlift * (aez * bc - bez * ac + cez * ab)) +\n        (alift * (bez * cd - cez * bd + dez * bc) - blift * (cez * da + dez * ac + aez * cd));\n\n    const aezplus = Math.abs(aez);\n    const bezplus = Math.abs(bez);\n    const cezplus = Math.abs(cez);\n    const dezplus = Math.abs(dez);\n    const aexbeyplus = Math.abs(aexbey) + Math.abs(bexaey);\n    const bexceyplus = Math.abs(bexcey) + Math.abs(cexbey);\n    const cexdeyplus = Math.abs(cexdey) + Math.abs(dexcey);\n    const dexaeyplus = Math.abs(dexaey) + Math.abs(aexdey);\n    const aexceyplus = Math.abs(aexcey) + Math.abs(cexaey);\n    const bexdeyplus = Math.abs(bexdey) + Math.abs(dexbey);\n    const permanent =\n        (cexdeyplus * bezplus + bexdeyplus * cezplus + bexceyplus * dezplus) * alift +\n        (dexaeyplus * cezplus + aexceyplus * dezplus + cexdeyplus * aezplus) * blift +\n        (aexbeyplus * dezplus + bexdeyplus * aezplus + dexaeyplus * bezplus) * clift +\n        (bexceyplus * aezplus + aexceyplus * bezplus + aexbeyplus * cezplus) * dlift;\n\n    const errbound = isperrboundA * permanent;\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n    return -insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent);\n}\n\nexport function inspherefast(pax, pay, paz, pbx, pby, pbz, pcx, pcy, pcz, pdx, pdy, pdz, pex, pey, pez) {\n    const aex = pax - pex;\n    const bex = pbx - pex;\n    const cex = pcx - pex;\n    const dex = pdx - pex;\n    const aey = pay - pey;\n    const bey = pby - pey;\n    const cey = pcy - pey;\n    const dey = pdy - pey;\n    const aez = paz - pez;\n    const bez = pbz - pez;\n    const cez = pcz - pez;\n    const dez = pdz - pez;\n\n    const ab = aex * bey - bex * aey;\n    const bc = bex * cey - cex * bey;\n    const cd = cex * dey - dex * cey;\n    const da = dex * aey - aex * dey;\n    const ac = aex * cey - cex * aey;\n    const bd = bex * dey - dex * bey;\n\n    const abc = aez * bc - bez * ac + cez * ab;\n    const bcd = bez * cd - cez * bd + dez * bc;\n    const cda = cez * da + dez * ac + aez * cd;\n    const dab = dez * ab + aez * bd + bez * da;\n\n    const alift = aex * aex + aey * aey + aez * aez;\n    const blift = bex * bex + bey * bey + bez * bez;\n    const clift = cex * cex + cey * cey + cez * cez;\n    const dlift = dex * dex + dey * dey + dez * dez;\n\n    return (clift * dab - dlift * abc) + (alift * bcd - blift * cda);\n}\n", "import { orient2d } from 'robust-predicates';\n\nfunction pointInPolygon(p, polygon) {\n    var i;\n    var ii;\n    var k = 0;\n    var f;\n    var u1;\n    var v1;\n    var u2;\n    var v2;\n    var currentP;\n    var nextP;\n\n    var x = p[0];\n    var y = p[1];\n\n    var numContours = polygon.length;\n    for (i = 0; i < numContours; i++) {\n        ii = 0;\n        var contour = polygon[i];\n        var contourLen = contour.length - 1;\n\n        currentP = contour[0];\n        if (currentP[0] !== contour[contourLen][0] &&\n            currentP[1] !== contour[contourLen][1]) {\n            throw new Error('First and last coordinates in a ring must be the same')\n        }\n\n        u1 = currentP[0] - x;\n        v1 = currentP[1] - y;\n\n        for (ii; ii < contourLen; ii++) {\n            nextP = contour[ii + 1];\n\n            u2 = nextP[0] - x;\n            v2 = nextP[1] - y;\n\n            if (v1 === 0 && v2 === 0) {\n                if ((u2 <= 0 && u1 >= 0) || (u1 <= 0 && u2 >= 0)) { return 0 }\n            } else if ((v2 >= 0 && v1 <= 0) || (v2 <= 0 && v1 >= 0)) {\n                f = orient2d(u1, u2, v1, v2, 0, 0);\n                if (f === 0) { return 0 }\n                if ((f > 0 && v2 > 0 && v1 <= 0) || (f < 0 && v2 <= 0 && v1 > 0)) { k++; }\n            }\n            currentP = nextP;\n            v1 = v2;\n            u1 = u2;\n        }\n    }\n\n    if (k % 2 === 0) { return false }\n    return true\n}\n\nexport { pointInPolygon as default };\n", "// TODO: consider using\n// https://github.com/mourner/flatbush\nimport RBush from 'rbush'\n\nimport inside from 'point-in-polygon-hao'\n\nimport { computeBbox } from '@allmaps/stdlib'\n\nimport type { Bbox, Point, Polygon } from '@allmaps/types'\n\nconst DEFAULT_FILTER_INSIDE_POLYGON = true\n\ntype RTreeItem = {\n  minX: number\n  minY: number\n  maxX: number\n  maxY: number\n  id: string\n}\n/**\n * 2D spatial index for polygons\n */\nexport class RTree {\n  rbush: RBush<RTreeItem> = new RBush()\n\n  polygonsById: Map<string, Polygon> = new Map()\n  bboxesById: Map<string, Bbox> = new Map()\n  itemsById: Map<string, RTreeItem> = new Map()\n\n  addItem(id: string, polygon: Polygon) {\n    this.removeItem(id)\n\n    const bbox = computeBbox(polygon)\n\n    const item = {\n      minX: bbox[0],\n      minY: bbox[1],\n      maxX: bbox[2],\n      maxY: bbox[3],\n      id\n    }\n\n    this.polygonsById.set(id, polygon)\n    this.bboxesById.set(id, bbox)\n    this.itemsById.set(id, item)\n\n    this.rbush.insert(item)\n  }\n\n  removeItem(id: string) {\n    const item = this.itemsById.get(id)\n\n    if (item) {\n      this.rbush.remove(item)\n\n      this.polygonsById.delete(id)\n      this.bboxesById.delete(id)\n      this.itemsById.delete(id)\n    }\n  }\n\n  clear() {\n    this.polygonsById.clear()\n    this.bboxesById.clear()\n    this.itemsById.clear()\n\n    this.rbush.clear()\n  }\n\n  private search(\n    minX: number,\n    minY: number,\n    maxX: number,\n    maxY: number\n  ): RTreeItem[] {\n    return this.rbush.search({\n      minX,\n      minY,\n      maxX,\n      maxY\n    })\n  }\n\n  getBbox(id: string) {\n    return this.bboxesById.get(id)\n  }\n\n  getPolygon(id: string) {\n    return this.polygonsById.get(id)\n  }\n\n  searchFromBbox(bbox: Bbox): string[] {\n    const [minX, minY, maxX, maxY] = bbox\n    return this.search(minX, minY, maxX, maxY).map((item) => item.id)\n  }\n\n  searchFromPoint(\n    point: Point,\n    filterInsidePolygon = DEFAULT_FILTER_INSIDE_POLYGON\n  ): string[] {\n    const [minX, minY, maxX, maxY] = [point[0], point[1], point[0], point[1]]\n\n    const rtreeResults = this.search(minX, minY, maxX, maxY)\n\n    if (filterInsidePolygon) {\n      return rtreeResults\n        .filter((item) => {\n          const polygon = this.polygonsById.get(item.id)\n\n          if (polygon) {\n            return inside(point, polygon)\n          } else {\n            return false\n          }\n        })\n        .map((item) => item.id)\n    } else {\n      return rtreeResults.map((item) => item.id)\n    }\n  }\n}\n", "import { generateChecksum } from '@allmaps/id'\nimport {\n  parseAnnotation,\n  validateGeoreferencedMap,\n  type GeoreferencedMap\n} from '@allmaps/annotation'\nimport { isEqualProjection, proj4 } from '@allmaps/project'\n\nimport { RTree } from './RTree.js'\nimport { WarpedMap } from './WarpedMap.js'\n\nimport {\n  bboxToCenter,\n  computeBbox,\n  convexHull,\n  mergeOptions,\n  mergePartialOptions\n} from '@allmaps/stdlib'\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\n\nimport type {\n  ProjectionOptions,\n  SelectionOptions,\n  WarpedMapFactory,\n  WarpedMapListOptions\n} from '../shared/types.js'\n\nimport type { DistortionMeasure, TransformationType } from '@allmaps/transform'\nimport type { Projection } from '@allmaps/project'\nimport type { Ring, Bbox, Gcp, Point, ImageInformations } from '@allmaps/types'\n\nconst defaultSelectionOptions: SelectionOptions = {\n  onlyVisible: true\n}\n\nconst defaultWarpedMapListOptions: Partial<WarpedMapListOptions> = {\n  createRTree: true,\n  imageInformations: new Map()\n}\n\n/**\n * An ordered list of WarpedMaps. This class contains an optional RTree\n * for quickly looking up maps using their Bbox\n * @template W - The type of WarpedMap objects in this list\n */\nexport class WarpedMapList<W extends WarpedMap> extends EventTarget {\n  warpedMapFactory: WarpedMapFactory<W>\n\n  /**\n   * Maps in this list, indexed by their ID\n   */\n  warpedMapsById: Map<string, W>\n  zIndices: Map<string, number>\n\n  rtree?: RTree\n\n  partialWarpedMapListOptions: Partial<WarpedMapListOptions>\n\n  /**\n   * Creates an instance of a WarpedMapList\n   *\n   * @constructor\n   * @param warpedMapFactory - Factory function for creating WarpedMap objects\n   * @param partialWarpedMapListOptions - Options\n   */\n  constructor(\n    warpedMapFactory: WarpedMapFactory<W>,\n    partialWarpedMapListOptions?: Partial<WarpedMapListOptions>\n  ) {\n    super()\n\n    this.warpedMapsById = new Map()\n    this.zIndices = new Map()\n\n    this.warpedMapFactory = warpedMapFactory\n\n    this.partialWarpedMapListOptions = mergePartialOptions(\n      defaultWarpedMapListOptions,\n      partialWarpedMapListOptions\n    )\n\n    if (this.partialWarpedMapListOptions.createRTree) {\n      this.rtree = new RTree()\n    }\n  }\n\n  /**\n   * Get mapIds for selected maps\n   *\n   * Also allows to only select maps whose geoBbox overlaps with the specified geoBbox\n   *\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   * @returns mapIds\n   */\n  getMapIds(\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): Iterable<string> {\n    // Enable the same selection options when getting mapIds\n    return Array.from(this.getWarpedMaps(partialSelectionOptions)).map(\n      (warpedMap) => warpedMap.mapId\n    )\n  }\n\n  /**\n   * Get the WarpedMap instances for selected maps\n   *\n   * Also allows to only select maps whose geoBbox overlaps with the specified geoBbox\n   *\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   * @returns WarpedMap instances\n   */\n  getWarpedMaps(\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): Iterable<W> {\n    const selectionOptions = mergeOptions(\n      defaultSelectionOptions,\n      partialSelectionOptions\n    )\n\n    let mapIds\n    if (selectionOptions.mapIds === undefined) {\n      if (this.rtree && selectionOptions.geoBbox) {\n        mapIds = this.rtree.searchFromBbox(selectionOptions.geoBbox)\n      } else {\n        mapIds = Array.from(this.warpedMapsById.keys())\n      }\n    } else {\n      mapIds = selectionOptions.mapIds\n    }\n\n    const warpedMaps: W[] = []\n\n    if (mapIds === undefined) {\n      return warpedMaps\n    }\n\n    for (const mapId of mapIds) {\n      const warpedMap = this.warpedMapsById.get(mapId)\n      if (\n        warpedMap &&\n        (selectionOptions.onlyVisible ? warpedMap.visible : true)\n      ) {\n        warpedMaps.push(warpedMap)\n      }\n    }\n    return warpedMaps\n  }\n\n  /**\n   * Get the WarpedMap instance for a specific map\n   *\n   * @param mapId - Map ID of the requested WarpedMap instance\n   * @returns WarpedMap instance, or undefined\n   */\n  getWarpedMap(mapId: string): W | undefined {\n    return this.warpedMapsById.get(mapId)\n  }\n\n  /**\n   * Get the z-index for a specific map\n   *\n   * @param mapId\n   * @returns\n   */\n  getMapZIndex(mapId: string): number | undefined {\n    return this.zIndices.get(mapId)\n  }\n\n  /**\n   * Get the center of the bounding box of the maps in this list\n   *\n   * Use {projection: 'EPSG:4326'} to request the result in lon-lat `EPSG:4326`\n   *\n   * @param partialSelectionAndProjectionOptions - Selection (e.g. mapIds) and projection options, defaults to all visible maps and current projection\n   * @returns The center of the bbox of all selected maps, in the chosen projection, or undefined if there were no maps matching the selection.\n   */\n  getMapsCenter(\n    partialSelectionAndProjectionOptions?: Partial<\n      SelectionOptions & ProjectionOptions\n    >\n  ): Point | undefined {\n    const bbox = this.getMapsBbox(partialSelectionAndProjectionOptions)\n    if (bbox) {\n      return bboxToCenter(bbox)\n    }\n  }\n\n  /**\n   * Get the bounding box of the maps in this list\n   *\n   * Use {projection: 'EPSG:4326'} to request the result in lon-lat `EPSG:4326`\n   *\n   * @param partialSelectionAndProjectionOptions - Selection (e.g. mapIds) and projection options, defaults to all visible maps and current projection\n   * @returns The bbox of all selected maps, in the chosen projection, or undefined if there were no maps matching the selection.\n   */\n  getMapsBbox(\n    partialSelectionAndProjectionOptions?: Partial<\n      SelectionOptions & ProjectionOptions\n    >\n  ): Bbox | undefined {\n    // Note: we can't use the geoMaskBboxes since creating a bbox\n    // gives a different result in a different projection\n\n    const projectedGeoMaskPoints = this.getProjectedGeoMaskPoints(\n      partialSelectionAndProjectionOptions\n    )\n    return computeBbox(projectedGeoMaskPoints)\n  }\n\n  /**\n   * Get the convex hull of the maps in this list\n   *\n   * Use {projection: 'EPSG:4326'} to request the result in lon-lat `EPSG:4326`\n   *\n   * @param partialSelectionAndProjectionOptions - Selection (e.g. mapIds) and projection options, defaults to all visible maps and current projection\n   * @returns The convex hull of all selected maps, in the chosen projection, or undefined if there were no maps matching the selection.\n   */\n  getMapsConvexHull(\n    partialSelectionAndProjectionOptions?: Partial<\n      SelectionOptions & ProjectionOptions\n    >\n  ): Ring | undefined {\n    const projectedGeoMaskPoints = this.getProjectedGeoMaskPoints(\n      partialSelectionAndProjectionOptions\n    )\n    return convexHull(projectedGeoMaskPoints)\n  }\n\n  /**\n   * Set the Warped Map List options\n   *\n   * @param partialWarpedMapListOptions - Options\n   */\n  setOptions(\n    partialWarpedMapListOptions?: Partial<WarpedMapListOptions>\n  ): void {\n    this.partialWarpedMapListOptions = mergeOptions(\n      this.partialWarpedMapListOptions,\n      partialWarpedMapListOptions\n    )\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.OPTIONSCHANGED, this.getMapIds())\n    )\n  }\n\n  /**\n   * Sets the object that caches image information\n   *\n   * @param imageInformations - object that caches image information\n   */\n  setImageInformations(imageInformations: ImageInformations): void {\n    this.partialWarpedMapListOptions.imageInformations = imageInformations\n  }\n\n  /**\n   * Sets the GCPs for a specific map\n   *\n   * @param gcps - new GCPs\n   * @param mapId - ID of the map\n   */\n  setMapGcps(gcps: Gcp[], mapId: string): void {\n    const warpedMap = this.warpedMapsById.get(mapId)\n    if (warpedMap) {\n      warpedMap.setGcps(gcps)\n      this.addToOrUpdateRtree(warpedMap)\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.GCPSCHANGED, mapId)\n      )\n    }\n  }\n\n  /**\n   * Sets the resource mask for a specific map\n   *\n   * @param resourceMask - the new resource mask\n   * @param mapId - ID of the map\n   */\n  setMapResourceMask(resourceMask: Ring, mapId: string): void {\n    const warpedMap = this.warpedMapsById.get(mapId)\n    if (warpedMap) {\n      warpedMap.setResourceMask(resourceMask)\n      this.addToOrUpdateRtree(warpedMap)\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.RESOURCEMASKCHANGED, mapId)\n      )\n    }\n  }\n\n  /**\n   * Sets the transformation type for a specific map\n   *\n   * @param transformationType - the new transformation type\n   * @param mapId - the ID of the map\n   */\n  setMapTransformationType(\n    transformationType: TransformationType,\n    mapId: string\n  ): void {\n    this.setMapsTransformationType(transformationType, { mapIds: [mapId] })\n  }\n\n  /**\n   * Sets the transformation type for selected maps\n   *\n   * @param transformationType - the new transformation type\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   */\n  setMapsTransformationType(\n    transformationType: TransformationType,\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): void {\n    const mapIdsChanged = []\n    const warpedMaps = this.getWarpedMaps(partialSelectionOptions)\n    for (const warpedMap of warpedMaps) {\n      if (warpedMap.transformationType !== transformationType) {\n        mapIdsChanged.push(warpedMap.mapId)\n      }\n    }\n\n    if (mapIdsChanged.length > 0) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.PRECHANGE, mapIdsChanged)\n      )\n      mapIdsChanged.forEach((mapId) => {\n        const warpedMap = this.warpedMapsById.get(mapId)\n        if (warpedMap) {\n          warpedMap.setTransformationType(transformationType)\n          this.addToOrUpdateRtree(warpedMap)\n        }\n      })\n      this.dispatchEvent(\n        new WarpedMapEvent(\n          WarpedMapEventType.TRANSFORMATIONCHANGED,\n          mapIdsChanged\n        )\n      )\n    }\n  }\n\n  /**\n   * Sets the distortionMeasure for a specific map\n   *\n   * @param distortionMeasure - the distortion measure\n   * @param mapId - the ID of the map\n   */\n  setMapDistortionMeasure(\n    distortionMeasure: DistortionMeasure | undefined,\n    mapId: string\n  ): void {\n    this.setMapsDistortionMeasure(distortionMeasure, { mapIds: [mapId] })\n  }\n\n  /**\n   * Sets the distortion measure for selected maps\n   *\n   * @param distortionMeasure - the distortion measure\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   */\n  setMapsDistortionMeasure(\n    distortionMeasure?: DistortionMeasure,\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): void {\n    const mapIdsChanged = []\n    const warpedMaps = this.getWarpedMaps(partialSelectionOptions)\n    for (const warpedMap of warpedMaps) {\n      if (warpedMap.distortionMeasure !== distortionMeasure) {\n        mapIdsChanged.push(warpedMap.mapId)\n      }\n    }\n    if (mapIdsChanged.length > 0) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.PRECHANGE, mapIdsChanged)\n      )\n      mapIdsChanged.forEach((mapId) => {\n        const warpedMap = this.warpedMapsById.get(mapId)\n        if (warpedMap) {\n          warpedMap.setDistortionMeasure(distortionMeasure)\n        }\n      })\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.DISTORTIONCHANGED, mapIdsChanged)\n      )\n    }\n  }\n\n  /**\n   * Sets the internal projection for a specific map\n   *\n   * @param projection - the internal projection\n   * @param mapId - the ID of the map\n   */\n  setMapInternalProjection(projection: Projection, mapId: string): void {\n    this.setMapsInternalProjection(projection, { mapIds: [mapId] })\n  }\n\n  /**\n   * Sets the internal projection for selected maps\n   *\n   * @param projection - the internal projection\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   */\n  setMapsInternalProjection(\n    projection: Projection | undefined,\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): void {\n    const mapIdsChanged = []\n    const warpedMaps = this.getWarpedMaps(partialSelectionOptions)\n    for (const warpedMap of warpedMaps) {\n      if (!isEqualProjection(warpedMap.internalProjection, projection)) {\n        mapIdsChanged.push(warpedMap.mapId)\n      }\n    }\n    if (mapIdsChanged.length > 0) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.PRECHANGE, mapIdsChanged)\n      )\n      mapIdsChanged.forEach((mapId) => {\n        const warpedMap = this.warpedMapsById.get(mapId)\n        if (warpedMap) {\n          warpedMap.setInternalProjection(projection)\n          this.addToOrUpdateRtree(warpedMap)\n        }\n      })\n      this.dispatchEvent(\n        new WarpedMapEvent(\n          WarpedMapEventType.INTERNALPROJECTIONCHANGED,\n          mapIdsChanged\n        )\n      )\n    }\n  }\n\n  /**\n   * Sets the projection for a specific map\n   *\n   * @param projection - the projection\n   * @param mapId - the ID of the map\n   */\n  setMapProjection(projection: Projection, mapId: string): void {\n    this.setMapsProjection(projection, { mapIds: [mapId] })\n  }\n\n  /**\n   * Sets the projection for selected maps\n   *\n   * @param projection - the projection\n   * @param partialSelectionOptions - Selection options (e.g. mapIds), defaults to all visible maps\n   */\n  setMapsProjection(\n    projection: Projection | undefined,\n    partialSelectionOptions?: Partial<SelectionOptions>\n  ): void {\n    const mapIdsChanged = []\n    const warpedMaps = this.getWarpedMaps(partialSelectionOptions)\n    for (const warpedMap of warpedMaps) {\n      if (!isEqualProjection(warpedMap.projection, projection)) {\n        mapIdsChanged.push(warpedMap.mapId)\n      }\n    }\n    if (mapIdsChanged.length > 0) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.PRECHANGE, mapIdsChanged)\n      )\n      mapIdsChanged.forEach((mapId) => {\n        const warpedMap = this.warpedMapsById.get(mapId)\n        if (warpedMap) {\n          warpedMap.setProjection(projection)\n          this.addToOrUpdateRtree(warpedMap)\n        }\n      })\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.PROJECTIONCHANGED, mapIdsChanged)\n      )\n    }\n  }\n\n  /**\n   * Removes a warped map by its ID\n   *\n   * @param mapId - the ID of the map\n   *\n   * @param mapIds - Map IDs\n   */\n  removeGeoreferencedMapById(mapId: string) {\n    const warpedMap = this.warpedMapsById.get(mapId)\n    if (warpedMap) {\n      this.removeGeoreferencedMap(warpedMap)\n      this.removeFromRtree(warpedMap)\n\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.WARPEDMAPREMOVED, mapId)\n      )\n    }\n  }\n\n  /**\n   * Changes the z-index of the specified maps to bring them to front\n   *\n   * @param mapIds - Map IDs\n   */\n  bringMapsToFront(mapIds: Iterable<string>): void {\n    let newZIndex = this.warpedMapsById.size\n    for (const mapId of mapIds) {\n      if (this.zIndices.has(mapId)) {\n        this.zIndices.set(mapId, newZIndex)\n        newZIndex++\n      }\n    }\n    this.removeZIndexHoles()\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n  }\n\n  /**\n   * Changes the z-index of the specified maps to send them to back\n   *\n   * @param mapIds - Map IDs\n   */\n  sendMapsToBack(mapIds: Iterable<string>): void {\n    let newZIndex = -Array.from(mapIds).length\n    for (const mapId of mapIds) {\n      if (this.zIndices.has(mapId)) {\n        this.zIndices.set(mapId, newZIndex)\n        newZIndex++\n      }\n    }\n    this.removeZIndexHoles()\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n  }\n\n  /**\n   * Changes the z-index of the specified maps to bring them forward\n   *\n   * @param mapIds - Map IDs\n   */\n  bringMapsForward(mapIds: Iterable<string>): void {\n    for (const [mapId, zIndex] of this.zIndices.entries()) {\n      this.zIndices.set(mapId, zIndex * 2)\n    }\n    for (const mapId of mapIds) {\n      const zIndex = this.zIndices.get(mapId)\n      if (zIndex !== undefined) {\n        this.zIndices.set(mapId, zIndex + 3)\n      }\n    }\n    this.removeZIndexHoles()\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n  }\n\n  /**\n   * Changes the zIndex of the specified maps to send them backward\n   *\n   * @param mapIds - Map IDs\n   */\n  sendMapsBackward(mapIds: Iterable<string>): void {\n    for (const [mapId, zIndex] of this.zIndices.entries()) {\n      this.zIndices.set(mapId, zIndex * 2)\n    }\n    for (const mapId of mapIds) {\n      const zIndex = this.zIndices.get(mapId)\n      if (zIndex !== undefined) {\n        this.zIndices.set(mapId, zIndex - 3)\n      }\n    }\n    this.removeZIndexHoles()\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n  }\n\n  /**\n   * Changes the visibility of the specified maps to `true`\n   *\n   * @param mapIds - Map IDs\n   */\n  showMaps(mapIds: Iterable<string>): void {\n    for (const mapId of mapIds) {\n      const warpedMap = this.warpedMapsById.get(mapId)\n      if (warpedMap) {\n        warpedMap.visible = true\n      }\n    }\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.VISIBILITYCHANGED, mapIds)\n    )\n  }\n\n  /**\n   * Changes the visibility of the specified maps to `false`\n   *\n   * @param mapIds - Map IDs\n   */\n  hideMaps(mapIds: Iterable<string>): void {\n    for (const mapId of mapIds) {\n      const warpedMap = this.warpedMapsById.get(mapId)\n      if (warpedMap) {\n        warpedMap.visible = false\n      }\n    }\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.VISIBILITYCHANGED, mapIds)\n    )\n  }\n\n  /**\n   * Adds a georeferenced map to this list\n   *\n   * @param georeferencedMap\n   * @returns\n   */\n  async addGeoreferencedMap(\n    georeferencedMap: unknown\n  ): Promise<string | Error> {\n    const validatedGeoreferencedMapOrMaps =\n      validateGeoreferencedMap(georeferencedMap)\n    const validatedGeoreferencedMap = Array.isArray(\n      validatedGeoreferencedMapOrMaps\n    )\n      ? validatedGeoreferencedMapOrMaps[0]\n      : validatedGeoreferencedMapOrMaps\n    return this.addGeoreferencedMapInternal(validatedGeoreferencedMap)\n  }\n\n  /**\n   * Removes a georeferenced map from this list\n   *\n   * @param georeferencedMap\n   * @returns\n   */\n  async removeGeoreferencedMap(\n    georeferencedMap: unknown\n  ): Promise<string | Error> {\n    const validatedGeoreferencedMapOrMaps =\n      validateGeoreferencedMap(georeferencedMap)\n    const validatedGeoreferencedMap = Array.isArray(\n      validatedGeoreferencedMapOrMaps\n    )\n      ? validatedGeoreferencedMapOrMaps[0]\n      : validatedGeoreferencedMapOrMaps\n    return this.removeGeoreferencedMapInternal(validatedGeoreferencedMap)\n  }\n\n  /**\n   * Parses an annotation and adds its georeferenced map to this list\n   *\n   * @param annotation\n   * @returns\n   */\n  async addGeoreferenceAnnotation(annotation: unknown) {\n    const results: (string | Error)[] = []\n    const maps = parseAnnotation(annotation)\n    const settledResults = await Promise.allSettled(\n      maps.map((map) => this.addGeoreferencedMapInternal(map))\n    )\n    // TODO: make sure reason contains Error\n    for (const settledResult of settledResults) {\n      if (settledResult.status === 'fulfilled') {\n        results.push(settledResult.value)\n      } else {\n        results.push(settledResult.reason)\n      }\n    }\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.GEOREFERENCEANNOTATIONADDED)\n    )\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n    return results\n  }\n\n  /**\n   * Parses an annotation and removes its georeferenced map from this list\n   *\n   * @param annotation\n   * @returns\n   */\n  async removeGeoreferenceAnnotation(\n    annotation: unknown\n  ): Promise<(string | Error)[]> {\n    const results: (string | Error)[] = []\n    const maps = parseAnnotation(annotation)\n    for (const map of maps) {\n      const mapIdOrError = await this.removeGeoreferencedMapInternal(map)\n      results.push(mapIdOrError)\n    }\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.GEOREFERENCEANNOTATIONREMOVED)\n    )\n    return results\n  }\n\n  clear(): void {\n    this.warpedMapsById = new Map()\n    this.zIndices = new Map()\n    this.rtree?.clear()\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.CLEARED))\n  }\n\n  destroy() {\n    for (const warpedMap of this.getWarpedMaps()) {\n      this.removeEventListenersFromWarpedMap(warpedMap)\n      warpedMap.destroy()\n    }\n\n    this.clear()\n  }\n\n  private async addGeoreferencedMapInternal(\n    georeferencedMap: GeoreferencedMap\n  ): Promise<string> {\n    const mapId = await this.getOrComputeMapId(georeferencedMap)\n\n    const warpedMap = this.warpedMapFactory(\n      mapId,\n      georeferencedMap,\n      this.partialWarpedMapListOptions\n    )\n\n    this.warpedMapsById.set(mapId, warpedMap)\n    this.zIndices.set(mapId, this.warpedMapsById.size - 1)\n    this.addToOrUpdateRtree(warpedMap)\n    this.addEventListenersToWarpedMap(warpedMap)\n    this.dispatchEvent(\n      new WarpedMapEvent(WarpedMapEventType.WARPEDMAPADDED, mapId)\n    )\n    return mapId\n  }\n\n  private async removeGeoreferencedMapInternal(\n    georeferencedMap: GeoreferencedMap\n  ): Promise<string> {\n    const mapId = await this.getOrComputeMapId(georeferencedMap)\n    const warpedMap = this.warpedMapsById.get(mapId)\n    if (warpedMap) {\n      this.warpedMapsById.delete(mapId)\n      this.zIndices.delete(mapId)\n      this.removeFromRtree(warpedMap)\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.WARPEDMAPREMOVED, mapId)\n      )\n      this.removeZIndexHoles()\n      this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.ZINDICESCHANGED))\n\n      warpedMap.destroy()\n    } else {\n      throw new Error(`No map found with ID ${mapId}`)\n    }\n    return mapId\n  }\n\n  private async getOrComputeMapId(\n    georeferencedMap: GeoreferencedMap\n  ): Promise<string> {\n    const mapId =\n      georeferencedMap.id || (await generateChecksum(georeferencedMap))\n    return mapId\n  }\n\n  private getProjectedGeoMaskPoints(\n    partialSelectionAndProjectionOptions?: Partial<\n      SelectionOptions & ProjectionOptions\n    >\n  ): Point[] {\n    const warpedMaps = this.getWarpedMaps(partialSelectionAndProjectionOptions)\n\n    // Project geoMask using projection, if specified in options\n    // otherwise use available projectedGeoMask\n    const projection = partialSelectionAndProjectionOptions?.projection\n    if (projection) {\n      const geoMaskPoints: Point[] = []\n      for (const warpedMap of warpedMaps) {\n        geoMaskPoints.push(...warpedMap.geoMask)\n      }\n\n      const projectedGeoMaskPoints = geoMaskPoints.map((point) =>\n        proj4(projection.definition, point)\n      )\n      return projectedGeoMaskPoints\n    } else {\n      const projectedGeoMaskPoints: Point[] = []\n      for (const warpedMap of warpedMaps) {\n        projectedGeoMaskPoints.push(...warpedMap.projectedGeoMask)\n      }\n\n      return projectedGeoMaskPoints\n    }\n  }\n\n  private addToOrUpdateRtree(warpedMap: W): void {\n    if (this.rtree) {\n      this.rtree.removeItem(warpedMap.mapId)\n      this.rtree.addItem(warpedMap.mapId, [warpedMap.geoMask])\n    }\n  }\n\n  private removeFromRtree(warpedMap: W): void {\n    if (this.rtree) {\n      this.rtree.removeItem(warpedMap.mapId)\n    }\n  }\n\n  private removeZIndexHoles(): void {\n    const sortedZIndices = [...this.zIndices.entries()].sort(\n      (entryA, entryB) => entryA[1] - entryB[1]\n    )\n    let zIndex = 0\n    for (const entry of sortedZIndices) {\n      const mapId = entry[0]\n      this.zIndices.set(mapId, zIndex)\n      zIndex++\n    }\n  }\n\n  // This function and the listeners below transform an IMAGEINFOLOADED event by a WarpedMap\n  // to an IMAGEINFOLOADED of the WarpedMapList, which is listened to in the Renderer\n  private imageInfoLoaded() {\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.IMAGEINFOLOADED))\n  }\n\n  private addEventListenersToWarpedMap(warpedMap: W) {\n    warpedMap.addEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.imageInfoLoaded.bind(this)\n    )\n  }\n\n  private removeEventListenersFromWarpedMap(warpedMap: W) {\n    warpedMap.removeEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.imageInfoLoaded.bind(this)\n    )\n  }\n}\n", "import { WarpedMapWithImageInfo } from '../maps/WarpedMap.js'\nimport { fetchableTileKey, tileKey } from '../shared/tiles.js'\n\nimport type { Tile, ImageRequest } from '@allmaps/types'\n\n/**\n * Class for tiles that can be fetched.\n */\nexport class FetchableTile {\n  readonly mapId: string\n  readonly tile: Tile\n  readonly imageRequest: ImageRequest\n  readonly tileUrl: string\n  readonly tileKey: string\n  readonly fetchableTileKey: string\n\n  /**\n   * Creates an instance of FetchableTile.\n   *\n   * @constructor\n   * @param tile - the tile\n   * @param warpedMap - A WarpedMap with fetched image information\n   */\n  constructor(tile: Tile, warpedMap: WarpedMapWithImageInfo) {\n    this.mapId = warpedMap.mapId\n    this.tile = tile\n\n    const imageRequest = warpedMap.parsedImage.getTileImageRequest(\n      tile.tileZoomLevel,\n      tile.column,\n      tile.row\n    )\n    this.imageRequest = imageRequest\n    this.tileUrl = warpedMap.parsedImage.getImageUrl(imageRequest)\n    this.tileKey = tileKey(tile)\n    this.fetchableTileKey = fetchableTileKey(this)\n  }\n}\n", "import { TileCache } from '../tilecache/TileCache.js'\nimport { WarpedMapList } from '../maps/WarpedMapList.js'\nimport { FetchableTile } from '../tilecache/FetchableTile.js'\n\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\nimport {\n  getTileZoomLevelForScale,\n  computeTilesCoveringRingAtTileZoomLevel,\n  getTilesResolution,\n  getTilesAtScaleFactor,\n  getTileZoomLevelResolution,\n  squaredDistanceTileToPoint\n} from '../shared/tiles.js'\n\nimport {\n  bboxToCenter,\n  computeBbox,\n  squaredDistance,\n  intersectBboxes,\n  bboxToRectangle,\n  mergeOptions\n} from '@allmaps/stdlib'\nimport { lonLatProjection, proj4 } from '@allmaps/project'\n\nimport type { Viewport } from '../viewport/Viewport.js'\nimport type { WarpedMap } from '../maps/WarpedMap.js'\nimport type {\n  CachableTileFactory,\n  WarpedMapFactory,\n  BaseRendererOptions,\n  MapPruneInfo\n} from '../shared/types.js'\n\n// TODO: move defaults for tunable options here\nconst defaultBaseRendererOptions = {}\n\n// These buffers should be in growing order\nconst REQUEST_VIEWPORT_BUFFER_RATIO = 0\nconst OVERVIEW_REQUEST_VIEWPORT_BUFFER_RATIO = 2\nconst PRUNE_VIEWPORT_BUFFER_RATIO = 4\nconst OVERVIEW_PRUNE_VIEWPORT_BUFFER_RATIO = 10\n\n/**\n * 0 = no correction, -1 = shaper, +1 = less sharp\n * Normal has more effect on smaller scale factors\n * Log2 (i.e. per zoomlevel) has equal effect all scale factors\n */\nconst SCALE_FACTOR_CORRECTION = 0\nconst LOG2_SCALE_FACTOR_CORRECTION = 0.4\n\nconst MAX_MAP_OVERVIEW_RESOLUTION = 1024 * 1024 // Support one 1024 * 1024 overview tile, e.g. for Rotterdam map.\nconst MAX_TOTAL_RESOLUTION_RATIO = 10\n\nconst MAX_GCPS_EXACT_TPS_TO_RESOURCE = 100\n\n/**\n * Abstract base class for renderers\n */\nexport abstract class BaseRenderer<W extends WarpedMap, D> extends EventTarget {\n  partialBaseRendererOptions: Partial<BaseRendererOptions>\n\n  warpedMapList: WarpedMapList<W>\n  tileCache: TileCache<D>\n\n  mapsInPreviousViewport: Set<string> = new Set()\n  mapsInViewport: Set<string> = new Set()\n  mapsWithRequestedTilesForViewport: Set<string> = new Set()\n  protected viewport: Viewport | undefined\n\n  constructor(\n    cachableTileFactory: CachableTileFactory<D>,\n    warpedMapFactory: WarpedMapFactory<W>,\n    partialBaseRendererOptions?: Partial<BaseRendererOptions>\n  ) {\n    super()\n\n    this.partialBaseRendererOptions = mergeOptions(\n      defaultBaseRendererOptions,\n      partialBaseRendererOptions\n    )\n\n    this.tileCache = new TileCache(\n      cachableTileFactory,\n      partialBaseRendererOptions\n    )\n    this.warpedMapList = new WarpedMapList(\n      warpedMapFactory,\n      partialBaseRendererOptions\n    )\n  }\n\n  /**\n   * Parses an annotation and adds its georeferenced map to this renderer's warped map list\n   *\n   * @param annotation\n   * @returns\n   */\n  async addGeoreferenceAnnotation(annotation: unknown) {\n    return this.warpedMapList.addGeoreferenceAnnotation(annotation)\n  }\n\n  /**\n   * Adds a georeferenced map to this renderer's warped map list\n   *\n   * @param georeferencedMap\n   * @returns\n   */\n  async addGeoreferencedMap(georeferencedMap: unknown) {\n    return this.warpedMapList.addGeoreferencedMap(georeferencedMap)\n  }\n\n  /**\n   * Set the Base Renderer options\n   *\n   * @param partialBaseRendererOptions - Options\n   */\n  setOptions(partialBaseRendererOptions?: Partial<BaseRendererOptions>): void {\n    this.partialBaseRendererOptions = mergeOptions(\n      this.partialBaseRendererOptions,\n      partialBaseRendererOptions\n    )\n    this.tileCache.setOptions(partialBaseRendererOptions)\n    this.warpedMapList.setOptions(partialBaseRendererOptions)\n  }\n\n  protected loadMissingImageInfosInViewport(): Promise<void>[] {\n    if (!this.viewport) {\n      return []\n    }\n\n    return Array.from(\n      this.warpedMapList.getWarpedMaps({\n        geoBbox: this.viewport.geoRectangleBbox\n      })\n    )\n      .filter(\n        (warpedMap) => !warpedMap.hasImageInfo() && !warpedMap.loadingImageInfo\n      )\n      .map((warpedMap) => warpedMap.loadImageInfo())\n  }\n\n  protected someImageInfosInViewport(): boolean {\n    if (!this.viewport) {\n      return false\n    }\n\n    // Note: this must be the largest buffer\n    // to make sure prune info is made and maps are pruned\n    return Array.from(\n      this.findMapsInViewport(\n        this.shouldAnticipateInteraction()\n          ? OVERVIEW_PRUNE_VIEWPORT_BUFFER_RATIO\n          : 0\n      )\n    )\n      .map((mapId) => this.warpedMapList.getWarpedMap(mapId) as WarpedMap)\n      .map((warpedMap) => warpedMap.hasImageInfo())\n      .some(Boolean)\n  }\n\n  protected shouldRequestFetchableTiles() {\n    return true\n  }\n\n  // Should we anticipate user interaction (panning or zooming)\n  // and hence buffer the viewport or get overview tiles\n  protected shouldAnticipateInteraction() {\n    return false\n  }\n\n  protected assureProjection() {\n    if (!this.viewport) {\n      return\n    }\n\n    this.warpedMapList.partialWarpedMapListOptions.projection =\n      this.viewport.projection\n    this.warpedMapList.setMapsProjection(this.viewport.projection, {\n      onlyVisible: false\n    })\n  }\n\n  protected requestFetchableTiles(): void {\n    if (!this.shouldRequestFetchableTiles()) {\n      return\n    }\n\n    const fetchableTilesForViewport: FetchableTile[] = []\n    const overviewFetchableTilesForViewport: FetchableTile[] = []\n\n    const mapsInViewportForRequest = this.findMapsInViewport(\n      this.shouldAnticipateInteraction() ? REQUEST_VIEWPORT_BUFFER_RATIO : 0\n    )\n    const mapsInViewportForOverviewRequest = this.findMapsInViewport(\n      this.shouldAnticipateInteraction()\n        ? OVERVIEW_REQUEST_VIEWPORT_BUFFER_RATIO\n        : 0\n    )\n    const mapsInViewportForPrune = this.findMapsInViewport(\n      this.shouldAnticipateInteraction() ? PRUNE_VIEWPORT_BUFFER_RATIO : 0\n    )\n    const mapsInViewportForOverviewPrune = this.findMapsInViewport(\n      this.shouldAnticipateInteraction()\n        ? OVERVIEW_PRUNE_VIEWPORT_BUFFER_RATIO\n        : 0\n    )\n\n    // For all maps, reset properties for the current viewport: the (overview) zoomlevels, resource viewport ring and fetchable tiles\n    for (const warpedMap of this.warpedMapList.getWarpedMaps()) {\n      warpedMap.resetForViewport()\n    }\n\n    // Get fetchable tiles for all maps in viewport with request buffer\n    // (and set properties for the current viewport for all maps in viewport with prune buffer)\n    for (const mapId of mapsInViewportForPrune) {\n      fetchableTilesForViewport.push(\n        ...this.getMapFetchableTilesForViewport(mapId, mapsInViewportForRequest)\n      )\n    }\n\n    // Get overview fetchable tiles for all maps in viewport with overview buffer\n    // (and set properties for the current viewport for all maps in viewport with prune buffer)\n    if (this.shouldAnticipateInteraction()) {\n      for (const mapId of mapsInViewportForOverviewPrune) {\n        overviewFetchableTilesForViewport.push(\n          ...this.getMapOverviewFetchableTilesForViewport(\n            mapId,\n            [\n              ...fetchableTilesForViewport,\n              ...overviewFetchableTilesForViewport\n            ],\n            mapsInViewportForOverviewRequest\n          )\n        )\n      }\n    }\n\n    // Request all those fetchable tiles\n    this.tileCache.requestFetchableTiles([\n      ...fetchableTilesForViewport,\n      ...overviewFetchableTilesForViewport\n    ])\n\n    this.updateMapsForViewport([\n      ...fetchableTilesForViewport,\n      ...overviewFetchableTilesForViewport\n    ])\n    this.pruneTileCache(mapsInViewportForOverviewPrune)\n  }\n\n  protected findMapsInViewport(viewportBufferRatio = 0): Set<string> {\n    if (!this.viewport) {\n      return new Set()\n    }\n    const viewport = this.viewport\n\n    const projectedGeoBufferedRectangle =\n      this.viewport.getProjectedGeoBufferedRectangle(viewportBufferRatio)\n    const geoBufferedRectangleBbox = computeBbox(\n      projectedGeoBufferedRectangle.map((point) =>\n        proj4(\n          viewport.projection.definition,\n          lonLatProjection.definition,\n          point\n        )\n      )\n    )\n\n    return new Set(\n      Array.from(\n        this.warpedMapList.getWarpedMaps({ geoBbox: geoBufferedRectangleBbox })\n      )\n        .sort((warpedMapA, warpedMapB) => {\n          if (warpedMapA && warpedMapB) {\n            return (\n              squaredDistance(\n                bboxToCenter(warpedMapA.projectedGeoMaskBbox),\n                viewport.projectedGeoCenter\n              ) -\n              squaredDistance(\n                bboxToCenter(warpedMapB.projectedGeoMaskBbox),\n                viewport.projectedGeoCenter\n              )\n            )\n          } else {\n            return 0\n          }\n        })\n        .map((warpedMap) => warpedMap.mapId)\n    )\n  }\n\n  protected getMapFetchableTilesForViewport(\n    mapId: string,\n    mapsInViewportForRequest: Set<string>\n  ): FetchableTile[] {\n    if (!this.viewport) {\n      return []\n    }\n    const viewport = this.viewport\n\n    const warpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n    if (!warpedMap) {\n      return []\n    }\n\n    if (!warpedMap.visible) {\n      return []\n    }\n\n    if (!warpedMap.hasImageInfo()) {\n      // Note: don't load image information here\n      // this would imply waiting for the first throttling cycle to complete\n      // before acting on a sucessful load\n      return []\n    }\n\n    // Find TileZoomLevel for the current viewport\n    // Note the equivalence of the following two:\n    // - warpedMap.getApproxResourceToCanvasScale(this.viewport)\n    // - warpedMap.resourceToProjectedGeoScale * this.viewport.projectedGeoPerCanvasScale\n    const tileZoomLevel = getTileZoomLevelForScale(\n      warpedMap.parsedImage.tileZoomLevels,\n      warpedMap.getResourceToCanvasScale(viewport),\n      SCALE_FACTOR_CORRECTION,\n      LOG2_SCALE_FACTOR_CORRECTION\n    )\n    warpedMap.setTileZoomLevelForViewport(tileZoomLevel)\n\n    // Transforming the viewport back to resource\n    const transformerOptions = {\n      maxDepth: 0,\n      // maxDepth: 2,\n      // minOffsetRatio: 0.00001,\n      sourceIsGeographic: false,\n      destinationIsGeographic: true\n    }\n    // This can be expensive at high maxDepth and seems to work fine with maxDepth = 0\n    // TODO: Consider recusive refinement via options like {minOffsetRatio: 0.00001, maxDepth: 2}\n    // Note: if recursive refinement, use geographic distances and midpoints for lon-lat destination points\n    const projectedGeoBufferedViewportRectangle =\n      viewport.getProjectedGeoBufferedRectangle(\n        this.shouldAnticipateInteraction() ? REQUEST_VIEWPORT_BUFFER_RATIO : 0\n      )\n    // Optimise computation time of backwards transformation:\n    // Since this is the only place transformToResource is called\n    // (and hence backwards transformation is computed)\n    // and computing thinPlateSpline can be expensive for maps with many gcps\n    // we can chose to compute the less expensive polynomial backward transformation.\n    // Note: for very deformed maps (with TPS and many gcps),\n    // this could lead to inaccurate tile loading (in addition to the reason explained below).\n    const projectedTransformer =\n      warpedMap.transformationType === 'thinPlateSpline' &&\n      warpedMap.gcps.length > MAX_GCPS_EXACT_TPS_TO_RESOURCE\n        ? warpedMap.getProjectedTransformer('polynomial')\n        : warpedMap.projectedTransformer\n    // Compute viewport in resource\n    // Note: since the backward transformation is not the exact inverse of the forward\n    // there is an inherent imperfection in this computation\n    // which could lead to inaccurate tile loading.\n    // In general, this is made up for by the buffers.\n    const resourceBufferedViewportRing =\n      projectedTransformer.transformToResource(\n        [projectedGeoBufferedViewportRectangle],\n        transformerOptions\n      )[0]\n    warpedMap.setProjectedGeoBufferedViewportRectangleForViewport(\n      projectedGeoBufferedViewportRectangle\n    )\n    warpedMap.setResourceBufferedViewportRingForViewport(\n      resourceBufferedViewportRing\n    )\n    // Assure variables exist on warpedMap, that should be computed by the setters above\n    if (\n      !warpedMap.resourceBufferedViewportRingBboxForViewport ||\n      !warpedMap.resourceBufferedViewportRingBboxForViewport\n    ) {\n      throw new Error(\n        'No resourceBufferedViewportRingBboxForViewport or resourceBufferedViewportRingBboxForViewport'\n      )\n    }\n\n    // Compute intersection of bboxes of to-resource-back-transformed viewport and resource mask\n    const resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection =\n      intersectBboxes(\n        warpedMap.resourceBufferedViewportRingBboxForViewport,\n        warpedMap.resourceMaskBbox\n      )\n    warpedMap.setResourceBufferedViewportRingBboxAndResourceMaskBboxIntersectionForViewport(\n      resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection\n    )\n\n    // If this map it outside of the viewport with request buffer, stop here:\n    // in thise case we only ran this function to set the properties for the current viewport\n    // so we can use them relyably while pruning\n    if (!mapsInViewportForRequest.has(mapId)) {\n      return []\n    }\n\n    // If the intersection of the bboxes is undefined, we don't need to compute any tiles.\n    // This should in general only happen if the previous check also returned false.\n    if (!resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection) {\n      return []\n    }\n\n    // Find tiles covering this intersection of bboxes of to-resource-back-transformed viewport and mask\n    // by computing the tiles covering this bbox's rectangle at the tilezoomlevel\n    const tiles = computeTilesCoveringRingAtTileZoomLevel(\n      bboxToRectangle(\n        resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection\n      ),\n      tileZoomLevel,\n      [warpedMap.parsedImage.width, warpedMap.parsedImage.height]\n    )\n\n    // Sort tiles to load in order of their distance to viewport center\n    const resourceBufferedViewportRingCenter = bboxToCenter(\n      warpedMap.resourceBufferedViewportRingBboxForViewport\n    )\n    tiles.sort(\n      (tileA, tileB) =>\n        squaredDistanceTileToPoint(tileA, resourceBufferedViewportRingCenter) -\n        squaredDistanceTileToPoint(tileB, resourceBufferedViewportRingCenter)\n    )\n\n    // Make fetchable tiles\n    const fetchableTiles = tiles.map(\n      (tile) => new FetchableTile(tile, warpedMap)\n    )\n    warpedMap.setFetchableTilesForViewport(fetchableTiles)\n\n    return fetchableTiles\n  }\n\n  protected getMapOverviewFetchableTilesForViewport(\n    mapId: string,\n    totalFetchableTilesForViewport: FetchableTile[],\n    mapsInViewportForOverviewRequest: Set<string>\n  ): FetchableTile[] {\n    if (!this.viewport) {\n      return []\n    }\n\n    const warpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n    if (!warpedMap) {\n      return []\n    }\n\n    if (!warpedMap.visible) {\n      return []\n    }\n\n    if (!warpedMap.hasImageInfo()) {\n      // Note: don't load image information here\n      // this would imply waiting for the first throttling cycle to complete\n      // before acting on a sucessful load\n      return []\n    }\n\n    // No overview tiles if too many fetchable tiles in total already\n    const totalFetchableTilesResolution = getTilesResolution(\n      totalFetchableTilesForViewport.map((fetchableTile) => fetchableTile.tile)\n    )\n    const maxTotalFetchableTilesResolution =\n      this.viewport.canvasResolution * MAX_TOTAL_RESOLUTION_RATIO\n\n    if (totalFetchableTilesResolution > maxTotalFetchableTilesResolution) {\n      return []\n    }\n\n    // Find the fitting overview zoomlevel, if any\n    const overviewTileZoomLevel = warpedMap.parsedImage.tileZoomLevels\n      .filter(\n        (tileZoomLevel) =>\n          getTileZoomLevelResolution(tileZoomLevel) <=\n          MAX_MAP_OVERVIEW_RESOLUTION\n        // Neglect zoomlevels that contain too many pixels\n      )\n      .sort(\n        (tileZoomLevel0, tileZoomLevel1) =>\n          tileZoomLevel0.scaleFactor - tileZoomLevel1.scaleFactor\n        // Enforcing default ascending order, e.g. from 1 to 16\n      )\n      .at(-1)\n    warpedMap.setOverviewTileZoomLevelForViewport(overviewTileZoomLevel)\n\n    // If this map it ourside of the viewport with overview buffer, stop here:\n    // in thise case we only ran this function to set the properties for the current viewport\n    // so we can use them relyably while pruning\n    if (!mapsInViewportForOverviewRequest.has(mapId)) {\n      return []\n    }\n\n    // If the overview tile zoomlevel scalefactor is the same or lower then tile zoom level scalefactor for the current viewport\n    // then this is not really an 'overview' tilezoomlevel, so don't proceed\n    if (\n      !overviewTileZoomLevel ||\n      (warpedMap.tileZoomLevelForViewport &&\n        overviewTileZoomLevel.scaleFactor <=\n          warpedMap.tileZoomLevelForViewport.scaleFactor)\n    ) {\n      return []\n    }\n\n    // Find all tiles at overview scalefactor\n    const overviewTiles = getTilesAtScaleFactor(\n      overviewTileZoomLevel.scaleFactor,\n      warpedMap.parsedImage\n    )\n\n    // Make fechable tiles\n    const overviewFetchableTiles = overviewTiles.map(\n      (tile) => new FetchableTile(tile, warpedMap)\n    )\n    warpedMap.setOverviewFetchableTilesForViewport(overviewFetchableTiles)\n\n    return overviewFetchableTiles\n  }\n\n  protected updateMapsForViewport(tiles: FetchableTile[]): {\n    mapsEnteringViewport: string[]\n    mapsLeavingViewport: string[]\n  } {\n    // Sort to process by zIndex later\n    this.mapsWithRequestedTilesForViewport = new Set(\n      tiles\n        .map((tile) => tile.mapId)\n        .filter((v, i, a) => {\n          // filter out duplicate mapIds\n          return a.indexOf(v) === i\n        })\n        .sort((mapIdA, mapIdB) => {\n          const zIndexA = this.warpedMapList.getMapZIndex(mapIdA)\n          const zIndexB = this.warpedMapList.getMapZIndex(mapIdB)\n          if (zIndexA !== undefined && zIndexB !== undefined) {\n            return zIndexA - zIndexB\n          }\n          return 0\n        })\n    )\n\n    this.mapsInPreviousViewport = this.mapsInViewport\n    this.mapsInViewport = this.findMapsInViewport()\n\n    // TODO: handle everything as Set() once JS supports filter on sets.\n    // And speed up with anonymous functions with the Set.prototype.difference() once broadly supported\n    const mapsInPreviousViewportAsArray = Array.from(\n      this.mapsInPreviousViewport\n    )\n    const mapsInViewportAsArray = Array.from(this.mapsInViewport)\n\n    const mapsEnteringViewport = mapsInViewportAsArray.filter(\n      (mapId) => !mapsInPreviousViewportAsArray.includes(mapId)\n    )\n    const mapsLeavingViewport = mapsInPreviousViewportAsArray.filter(\n      (mapId) => !mapsInViewportAsArray.includes(mapId)\n    )\n\n    for (const mapId of mapsEnteringViewport) {\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.WARPEDMAPENTER, mapId)\n      )\n    }\n    for (const mapId of mapsLeavingViewport) {\n      this.clearMap(mapId)\n      this.dispatchEvent(\n        new WarpedMapEvent(WarpedMapEventType.WARPEDMAPLEAVE, mapId)\n      )\n    }\n\n    return {\n      mapsEnteringViewport,\n      mapsLeavingViewport\n    }\n  }\n\n  protected pruneTileCache(mapsInViewportForOverviewPrune: Set<string>) {\n    // Create pruneInfo for all maps in viewport with prune overview buffer\n    const pruneInfoByMapId: Map<string, MapPruneInfo> = new Map()\n    for (const warpedMap of this.warpedMapList.getWarpedMaps({\n      mapIds: mapsInViewportForOverviewPrune\n    })) {\n      pruneInfoByMapId.set(warpedMap.mapId, {\n        tileZoomLevelForViewport: warpedMap.tileZoomLevelForViewport,\n        overviewTileZoomLevelForViewport:\n          warpedMap.overviewTileZoomLevelForViewport,\n        resourceViewportRingBboxForViewport:\n          warpedMap.resourceBufferedViewportRingBboxForViewport\n      })\n    }\n    this.tileCache.prune(pruneInfoByMapId)\n  }\n\n  destroy() {\n    this.tileCache.destroy()\n    this.warpedMapList.destroy()\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected clearMap(mapId: string): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected mapTileLoaded(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected mapTileRemoved(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected imageInfoLoaded(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected warpedMapAdded(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected warpedMapRemoved(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected preChange(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected optionsChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected gcpsChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected resourceMaskChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected transformationChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected distortionChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected internalProjectionChanged(event: Event): void {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n  protected projectionChanged(event: Event): void {}\n\n  protected addEventListeners() {\n    this.tileCache.addEventListener(\n      WarpedMapEventType.MAPTILELOADED,\n      this.mapTileLoaded.bind(this)\n    )\n\n    this.tileCache.addEventListener(\n      WarpedMapEventType.MAPTILEREMOVED,\n      this.mapTileRemoved.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.imageInfoLoaded.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.WARPEDMAPADDED,\n      this.warpedMapAdded.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.WARPEDMAPREMOVED,\n      this.warpedMapRemoved.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.PRECHANGE,\n      this.preChange.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.OPTIONSCHANGED,\n      this.optionsChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.GCPSCHANGED,\n      this.gcpsChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.RESOURCEMASKCHANGED,\n      this.gcpsChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.TRANSFORMATIONCHANGED,\n      this.transformationChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.DISTORTIONCHANGED,\n      this.distortionChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.INTERNALPROJECTIONCHANGED,\n      this.internalProjectionChanged.bind(this)\n    )\n\n    this.warpedMapList.addEventListener(\n      WarpedMapEventType.PROJECTIONCHANGED,\n      this.projectionChanged.bind(this)\n    )\n  }\n\n  protected removeEventListeners() {\n    this.tileCache.removeEventListener(\n      WarpedMapEventType.MAPTILELOADED,\n      this.mapTileLoaded.bind(this)\n    )\n\n    this.tileCache.removeEventListener(\n      WarpedMapEventType.MAPTILEREMOVED,\n      this.mapTileRemoved.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.imageInfoLoaded.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.WARPEDMAPADDED,\n      this.warpedMapAdded.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.WARPEDMAPREMOVED,\n      this.warpedMapRemoved.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.PRECHANGE,\n      this.preChange.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.OPTIONSCHANGED,\n      this.optionsChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.GCPSCHANGED,\n      this.gcpsChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.RESOURCEMASKCHANGED,\n      this.gcpsChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.TRANSFORMATIONCHANGED,\n      this.transformationChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.DISTORTIONCHANGED,\n      this.distortionChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.INTERNALPROJECTIONCHANGED,\n      this.internalProjectionChanged.bind(this)\n    )\n\n    this.warpedMapList.removeEventListener(\n      WarpedMapEventType.PROJECTIONCHANGED,\n      this.projectionChanged.bind(this)\n    )\n  }\n}\n", "import inside from 'point-in-polygon-hao';\nimport { distance, stepDistanceAngle, lineAngle, closeRing, closePolygon } from '@allmaps/stdlib';\n// Return an array of points containing the first line point,\n// and betwen the first and last line point other points every `dist`\nfunction interpolateLine(line, dist) {\n    const lineDistance = distance(line);\n    // Note: ciel - 1 instead of floor, such that for round numbers we don't include the last step\n    const steps = Math.ceil(lineDistance / dist) - 1;\n    const angle = lineAngle(line);\n    let currentPoint = line[0];\n    const result = [currentPoint];\n    for (let step = 1; step <= steps; step++) {\n        currentPoint = stepDistanceAngle(currentPoint, dist, angle);\n        result.push(currentPoint);\n    }\n    // Note: the last nextpoint, which is also line[1], is not pushed\n    return result;\n}\n// Return an array of points containing the ring points,\n// and between every pair of ring points other points every `dist`\nexport function interpolateRing(ring, dist) {\n    ring = closeRing(ring);\n    let result = [];\n    for (let i = 0; i < ring.length - 1; i++) {\n        result = result.concat(interpolateLine([ring[i], ring[i + 1]], dist));\n    }\n    return result;\n}\nexport function interpolatePolygon(polygon, dist) {\n    return polygon.map((ring) => interpolateRing(ring, dist));\n}\nexport function getGridPointsInBbox(bbox, gridSize) {\n    const grid = [];\n    for (let x = bbox[0] + gridSize, i = 0; x <= bbox[2]; i++, x += gridSize) {\n        for (let y = bbox[1] + gridSize, j = 0; y <= bbox[3]; j++, y += gridSize) {\n            grid.push([x, y]);\n        }\n    }\n    return grid;\n}\n// Returns true if point is inside of polygon with holes\nexport function pointInPolygon(point, polygon) {\n    try {\n        return inside(point, closePolygon(polygon)) === true;\n    }\n    catch (error) {\n        console.error('Error determining if point is inside polygon:', error);\n        return false;\n    }\n}\n", "\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nimport {orient2d} from 'robust-predicates';\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        // find the point closest to the seed\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                const d = this._dists[id];\n                if (d > d0) {\n                    hull[j++] = id;\n                    d0 = d;\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient2d(i0x, i0y, i1x, i1y, i2x, i2y) < 0) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], orient2d(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1]) >= 0) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient2d(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1]) < 0) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient2d(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1]) < 0) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n", "import { incircle, orient2d } from 'robust-predicates';\n\n/**\n * A set of numbers, stored as bits in a typed array. The amount of numbers /\n * the maximum number that can be stored is limited by the length, which is\n * fixed at construction time.\n */\nclass BitSet {\n    constructor(W, bs) {\n        this.W = W;\n        this.bs = bs;\n    }\n    /**\n     * Add a number to the set.\n     *\n     * @param idx The number to add. Must be 0 <= idx < len.\n     * @return this.\n     */\n    add(idx) {\n        const W = this.W, byte = (idx / W) | 0, bit = idx % W;\n        this.bs[byte] |= 1 << bit;\n        return this;\n    }\n    /**\n     * Delete a number from the set.\n     *\n     * @param idx The number to delete. Must be 0 <= idx < len.\n     * @return this.\n     */\n    delete(idx) {\n        const W = this.W, byte = (idx / W) | 0, bit = idx % W;\n        this.bs[byte] &= ~(1 << bit);\n        return this;\n    }\n    /**\n     * Add or delete a number in the set, depending on the second argument.\n     *\n     * @param idx The number to add or delete. Must be 0 <= idx < len.\n     * @param val If true, add the number, otherwise delete.\n     * @return val.\n     */\n    set(idx, val) {\n        const W = this.W, byte = (idx / W) | 0, bit = idx % W, m = 1 << bit;\n        //this.bs[byte] = set ? this.bs[byte] | m : this.bs[byte] & ~m;\n        this.bs[byte] ^= (-val ^ this.bs[byte]) & m; // -set == set * 255\n        return val;\n    }\n    /**\n     * Whether the number is in the set.\n     *\n     * @param idx The number to test. Must be 0 <= idx < len.\n     * @return True if the number is in the set.\n     */\n    has(idx) {\n        const W = this.W, byte = (idx / W) | 0, bit = idx % W;\n        return !!(this.bs[byte] & (1 << bit));\n    }\n    /**\n     * Iterate over the numbers that are in the set. The callback is invoked\n     * with each number that is set. It is allowed to change the BitSet during\n     * iteration. If it deletes a number that has not been iterated over, that\n     * number will not show up in a later call. If it adds a number during\n     * iteration, that number may or may not show up in a later call.\n     *\n     * @param fn The function to call for each number.\n     * @return this.\n     */\n    forEach(fn) {\n        const W = this.W, bs = this.bs, len = bs.length;\n        for (let byte = 0; byte < len; byte++) {\n            let bit = 0;\n            // bs[byte] may change during iteration\n            while (bs[byte] && bit < W) {\n                if (bs[byte] & (1 << bit)) {\n                    fn(byte * W + bit);\n                }\n                bit++;\n            }\n        }\n        return this;\n    }\n}\n/**\n * A bit set using 8 bits per cell.\n */\nclass BitSet8 extends BitSet {\n    /**\n     * Create a bit set.\n     *\n     * @param len The length of the bit set, limiting the maximum value that\n     *        can be stored in it to len - 1.\n     */\n    constructor(len) {\n        const W = 8, bs = new Uint8Array(Math.ceil(len / W)).fill(0);\n        super(W, bs);\n    }\n}\n\nfunction nextEdge(e) { return (e % 3 === 2) ? e - 2 : e + 1; }\nfunction prevEdge(e) { return (e % 3 === 0) ? e + 2 : e - 1; }\n/**\n * Constrain a triangulation from Delaunator, using (parts of) the algorithm\n * in \"A fast algorithm for generating constrained Delaunay triangulations\" by\n * S. W. Sloan.\n */\nclass Constrainautor {\n    /**\n     * Make a Constrainautor.\n     *\n     * @param del The triangulation output from Delaunator.\n     * @param edges If provided, constrain these edges as by constrainAll.\n     */\n    constructor(del, edges) {\n        if (!del || typeof del !== 'object' || !del.triangles || !del.halfedges || !del.coords) {\n            throw new Error(\"Expected an object with Delaunator output\");\n        }\n        if (del.triangles.length % 3 || del.halfedges.length !== del.triangles.length || del.coords.length % 2) {\n            throw new Error(\"Delaunator output appears inconsistent\");\n        }\n        if (del.triangles.length < 3) {\n            throw new Error(\"No edges in triangulation\");\n        }\n        this.del = del;\n        const U32NIL = 2 ** 32 - 1, // Max value of a Uint32Array: use as a sentinel for not yet defined \n        numPoints = del.coords.length >> 1, numEdges = del.triangles.length;\n        // Map every vertex id to the right-most edge that points to that vertex.\n        this.vertMap = new Uint32Array(numPoints).fill(U32NIL);\n        // Keep track of edges flipped while constraining\n        this.flips = new BitSet8(numEdges);\n        // Keep track of constrained edges\n        this.consd = new BitSet8(numEdges);\n        for (let e = 0; e < numEdges; e++) {\n            const v = del.triangles[e];\n            if (this.vertMap[v] === U32NIL) {\n                this.updateVert(e);\n            }\n        }\n        if (edges) {\n            this.constrainAll(edges);\n        }\n    }\n    /**\n     * Constrain the triangulation such that there is an edge between p1 and p2.\n     *\n     * @param segP1 The index of one segment end-point in the coords array.\n     * @param segP2 The index of the other segment end-point in the coords array.\n     * @return The id of the edge that points from p1 to p2. If the\n     *         constrained edge lies on the hull and points in the opposite\n     *         direction (p2 to p1), the negative of its id is returned.\n     */\n    constrainOne(segP1, segP2) {\n        const { triangles, halfedges } = this.del, vm = this.vertMap, consd = this.consd, start = vm[segP1];\n        // Loop over the edges touching segP1\n        let edg = start;\n        do {\n            // edg points toward segP1, so its start-point is opposite it\n            const p4 = triangles[edg], nxt = nextEdge(edg);\n            // already constrained, but in reverse order\n            if (p4 === segP2) {\n                return this.protect(edg);\n            }\n            // The edge opposite segP1\n            const opp = prevEdge(edg), p3 = triangles[opp];\n            // already constrained\n            if (p3 === segP2) {\n                this.protect(nxt);\n                return nxt;\n            }\n            // edge opposite segP1 intersects constraint\n            if (this.intersectSegments(segP1, segP2, p3, p4)) {\n                edg = opp;\n                break;\n            }\n            const adj = halfedges[nxt];\n            // The next edge pointing to segP1\n            edg = adj;\n        } while (edg !== -1 && edg !== start);\n        let conEdge = edg;\n        // Walk through the triangulation looking for further intersecting\n        // edges and flip them. If an intersecting edge cannot be flipped,\n        // assign its id to `rescan` and restart from there, until there are\n        // no more intersects.\n        let rescan = -1;\n        while (edg !== -1) {\n            // edg is the intersecting half-edge in the triangle we came from\n            // adj is now the opposite half-edge in the adjacent triangle, which\n            // is away from segP1.\n            const adj = halfedges[edg], \n            // cross diagonal\n            bot = prevEdge(edg), top = prevEdge(adj), rgt = nextEdge(adj);\n            if (adj === -1) {\n                throw new Error(\"Constraining edge exited the hull\");\n            }\n            if (consd.has(edg)) { // || consd.has(adj) // assume consd is consistent\n                throw new Error(\"Edge intersects already constrained edge\");\n            }\n            if (this.isCollinear(segP1, segP2, triangles[edg]) ||\n                this.isCollinear(segP1, segP2, triangles[adj])) {\n                throw new Error(\"Constraining edge intersects point\");\n            }\n            const convex = this.intersectSegments(triangles[edg], triangles[adj], triangles[bot], triangles[top]);\n            // The quadrilateral formed by the two triangles adjoing edg is not\n            // convex, so the edge can't be flipped. Continue looking for the\n            // next intersecting edge and restart at this one later.\n            if (!convex) {\n                if (rescan === -1) {\n                    rescan = edg;\n                }\n                if (triangles[top] === segP2) {\n                    if (edg === rescan) {\n                        throw new Error(\"Infinite loop: non-convex quadrilateral\");\n                    }\n                    edg = rescan;\n                    rescan = -1;\n                    continue;\n                }\n                // Look for the next intersect\n                if (this.intersectSegments(segP1, segP2, triangles[top], triangles[adj])) {\n                    edg = top;\n                }\n                else if (this.intersectSegments(segP1, segP2, triangles[rgt], triangles[top])) {\n                    edg = rgt;\n                }\n                else if (rescan === edg) {\n                    throw new Error(\"Infinite loop: no further intersect after non-convex\");\n                }\n                continue;\n            }\n            this.flipDiagonal(edg);\n            // The new edge might still intersect, which will be fixed in the\n            // next rescan.\n            if (this.intersectSegments(segP1, segP2, triangles[bot], triangles[top])) {\n                if (rescan === -1) {\n                    rescan = bot;\n                }\n                if (rescan === bot) {\n                    throw new Error(\"Infinite loop: flipped diagonal still intersects\");\n                }\n            }\n            // Reached the other segment end-point? Start the rescan.\n            if (triangles[top] === segP2) {\n                conEdge = top;\n                edg = rescan;\n                rescan = -1;\n                // Otherwise, for the next edge that intersects. Because we just\n                // flipped, it's either edg again, or rgt.\n            }\n            else if (this.intersectSegments(segP1, segP2, triangles[rgt], triangles[top])) {\n                edg = rgt;\n            }\n        }\n        const flips = this.flips;\n        this.protect(conEdge);\n        do {\n            // need to use var to scope it outside the loop, but re-initialize\n            // to 0 each iteration\n            var flipped = 0;\n            flips.forEach(edg => {\n                flips.delete(edg);\n                const adj = halfedges[edg];\n                if (adj === -1) {\n                    return;\n                }\n                flips.delete(adj);\n                if (!this.isDelaunay(edg)) {\n                    this.flipDiagonal(edg);\n                    flipped++;\n                }\n            });\n        } while (flipped > 0);\n        return this.findEdge(segP1, segP2);\n    }\n    /**\n     * Fix the Delaunay condition. It is no longer necessary to call this\n     * method after constraining (many) edges, since constrainOne will do it\n     * after each.\n     *\n     * @param deep If true, keep checking & flipping edges until all\n     *        edges are Delaunay, otherwise only check the edges once.\n     * @return The triangulation object.\n     */\n    delaunify(deep = false) {\n        const halfedges = this.del.halfedges, flips = this.flips, consd = this.consd, len = halfedges.length;\n        do {\n            var flipped = 0;\n            for (let edg = 0; edg < len; edg++) {\n                if (consd.has(edg)) {\n                    continue;\n                }\n                flips.delete(edg);\n                const adj = halfedges[edg];\n                if (adj === -1) {\n                    continue;\n                }\n                flips.delete(adj);\n                if (!this.isDelaunay(edg)) {\n                    this.flipDiagonal(edg);\n                    flipped++;\n                }\n            }\n        } while (deep && flipped > 0);\n        return this;\n    }\n    /**\n     * Call constrainOne on each edge, and delaunify afterwards.\n     *\n     * @param edges The edges to constrain: each element is an array with\n     *        [p1, p2] which are indices into the points array originally\n     *        supplied to Delaunator.\n     * @return The triangulation object.\n     */\n    constrainAll(edges) {\n        const len = edges.length;\n        for (let i = 0; i < len; i++) {\n            const e = edges[i];\n            this.constrainOne(e[0], e[1]);\n        }\n        return this;\n    }\n    /**\n     * Whether an edge is a constrained edge.\n     *\n     * @param edg The edge id.\n     * @return True if the edge is constrained.\n     */\n    isConstrained(edg) {\n        return this.consd.has(edg);\n    }\n    /**\n     * Find the edge that points from p1 -> p2. If there is only an edge from\n     * p2 -> p1 (i.e. it is on the hull), returns the negative id of it.\n     *\n     * @param p1 The index of the first point into the points array.\n     * @param p2 The index of the second point into the points array.\n     * @return The id of the edge that points from p1 -> p2, or the negative\n     *         id of the edge that goes from p2 -> p1, or Infinity if there is\n     *         no edge between p1 and p2.\n     */\n    findEdge(p1, p2) {\n        const start1 = this.vertMap[p2], { triangles, halfedges } = this.del;\n        let edg = start1, prv = -1;\n        // Walk around p2, iterating over the edges pointing to it\n        do {\n            if (triangles[edg] === p1) {\n                return edg;\n            }\n            prv = nextEdge(edg);\n            edg = halfedges[prv];\n        } while (edg !== -1 && edg !== start1);\n        // Did not find p1 -> p2, the only option is that it is on the hull on\n        // the 'left-hand' side, pointing p2 -> p1 (or there is no edge)\n        if (triangles[nextEdge(prv)] === p1) {\n            return -prv;\n        }\n        return Infinity;\n    }\n    /**\n     * Mark an edge as constrained, i.e. should not be touched by `delaunify`.\n     *\n     * @private\n     * @param edg The edge id.\n     * @return If edg has an adjacent, returns that, otherwise -edg.\n     */\n    protect(edg) {\n        const adj = this.del.halfedges[edg], flips = this.flips, consd = this.consd;\n        flips.delete(edg);\n        consd.add(edg);\n        if (adj !== -1) {\n            flips.delete(adj);\n            consd.add(adj);\n            return adj;\n        }\n        return -edg;\n    }\n    /**\n     * Mark an edge as flipped, unless it is already marked as constrained.\n     *\n     * @private\n     * @param edg The edge id.\n     * @return True if edg was not constrained.\n     */\n    markFlip(edg) {\n        const halfedges = this.del.halfedges, flips = this.flips, consd = this.consd;\n        if (consd.has(edg)) {\n            return false;\n        }\n        const adj = halfedges[edg];\n        if (adj !== -1) {\n            flips.add(edg);\n            flips.add(adj);\n        }\n        return true;\n    }\n    /**\n     * Flip the edge shared by two triangles.\n     *\n     * @private\n     * @param edg The edge shared by the two triangles, must have an\n     *        adjacent half-edge.\n     * @return The new diagonal.\n     */\n    flipDiagonal(edg) {\n        // Flip a diagonal\n        //                top                     edg\n        //          o  <----- o            o <------  o \n        //         | ^ \\      ^           |       ^ / ^\n        //      lft|  \\ \\     |        lft|      / /  |\n        //         |   \\ \\adj |           |  bot/ /   |\n        //         | edg\\ \\   |           |    / /top |\n        //         |     \\ \\  |rgt        |   / /     |rgt\n        //         v      \\ v |           v  / v      |\n        //         o ----->  o            o   ------> o \n        //           bot                     adj\n        const { triangles, halfedges } = this.del, flips = this.flips, consd = this.consd, adj = halfedges[edg], bot = prevEdge(edg), lft = nextEdge(edg), top = prevEdge(adj), rgt = nextEdge(adj), adjBot = halfedges[bot], adjTop = halfedges[top];\n        if (consd.has(edg)) { // || consd.has(adj) // assume consd is consistent\n            throw new Error(\"Trying to flip a constrained edge\");\n        }\n        // move *edg to *top\n        triangles[edg] = triangles[top];\n        halfedges[edg] = adjTop;\n        if (!flips.set(edg, flips.has(top))) {\n            consd.set(edg, consd.has(top));\n        }\n        if (adjTop !== -1) {\n            halfedges[adjTop] = edg;\n        }\n        halfedges[bot] = top;\n        // move *adj to *bot\n        triangles[adj] = triangles[bot];\n        halfedges[adj] = adjBot;\n        if (!flips.set(adj, flips.has(bot))) {\n            consd.set(adj, consd.has(bot));\n        }\n        if (adjBot !== -1) {\n            halfedges[adjBot] = adj;\n        }\n        halfedges[top] = bot;\n        this.markFlip(edg);\n        this.markFlip(lft);\n        this.markFlip(adj);\n        this.markFlip(rgt);\n        // mark flips unconditionally\n        flips.add(bot);\n        consd.delete(bot);\n        flips.add(top);\n        consd.delete(top);\n        this.updateVert(edg);\n        this.updateVert(lft);\n        this.updateVert(adj);\n        this.updateVert(rgt);\n        return bot;\n    }\n    /**\n     * Whether the two triangles sharing edg conform to the Delaunay condition.\n     * As a shortcut, if the given edge has no adjacent (is on the hull), it is\n     * certainly Delaunay.\n     *\n     * @private\n     * @param edg The edge shared by the triangles to test.\n     * @return True if they are Delaunay.\n     */\n    isDelaunay(edg) {\n        const { triangles, halfedges } = this.del, adj = halfedges[edg];\n        if (adj === -1) {\n            return true;\n        }\n        const p1 = triangles[prevEdge(edg)], p2 = triangles[edg], p3 = triangles[nextEdge(edg)], px = triangles[prevEdge(adj)];\n        return !this.inCircle(p1, p2, p3, px);\n    }\n    /**\n     * Update the vertex -> incoming edge map.\n     *\n     * @private\n     * @param start The id of an *outgoing* edge.\n     * @return The id of the right-most incoming edge.\n     */\n    updateVert(start) {\n        const { triangles, halfedges } = this.del, vm = this.vertMap, v = triangles[start];\n        // When iterating over incoming edges around a vertex, we do so in\n        // clockwise order ('going left'). If the vertex lies on the hull, two\n        // of the edges will have no opposite, leaving a gap. If the starting\n        // incoming edge is not the right-most, we will miss edges between it\n        // and the gap. So walk counter-clockwise until we find an edge on the\n        // hull, or get back to where we started.\n        let inc = prevEdge(start), adj = halfedges[inc];\n        while (adj !== -1 && adj !== start) {\n            inc = prevEdge(adj);\n            adj = halfedges[inc];\n        }\n        vm[v] = inc;\n        return inc;\n    }\n    /**\n     * Whether the segment between [p1, p2] intersects with [p3, p4]. When the\n     * segments share an end-point (e.g. p1 == p3 etc.), they are not considered\n     * intersecting.\n     *\n     * @private\n     * @param p1 The index of point 1 into this.del.coords.\n     * @param p2 The index of point 2 into this.del.coords.\n     * @param p3 The index of point 3 into this.del.coords.\n     * @param p4 The index of point 4 into this.del.coords.\n     * @return True if the segments intersect.\n     */\n    intersectSegments(p1, p2, p3, p4) {\n        const pts = this.del.coords;\n        // If the segments share one of the end-points, they cannot intersect\n        // (provided the input is properly segmented, and the triangulation is\n        // correct), but intersectSegments will say that they do. We can catch\n        // it here already.\n        if (p1 === p3 || p1 === p4 || p2 === p3 || p2 === p4) {\n            return false;\n        }\n        return intersectSegments(pts[p1 * 2], pts[p1 * 2 + 1], pts[p2 * 2], pts[p2 * 2 + 1], pts[p3 * 2], pts[p3 * 2 + 1], pts[p4 * 2], pts[p4 * 2 + 1]);\n    }\n    /**\n     * Whether point px is in the circumcircle of the triangle formed by p1, p2,\n     * and p3 (which are in counter-clockwise order).\n     *\n     * @param p1 The index of point 1 into this.del.coords.\n     * @param p2 The index of point 2 into this.del.coords.\n     * @param p3 The index of point 3 into this.del.coords.\n     * @param px The index of point x into this.del.coords.\n     * @return True if (px, py) is in the circumcircle.\n     */\n    inCircle(p1, p2, p3, px) {\n        const pts = this.del.coords;\n        return incircle(pts[p1 * 2], pts[p1 * 2 + 1], pts[p2 * 2], pts[p2 * 2 + 1], pts[p3 * 2], pts[p3 * 2 + 1], pts[px * 2], pts[px * 2 + 1]) < 0.0;\n    }\n    /**\n     * Whether point p1, p2, and p are collinear.\n     *\n     * @private\n     * @param p1 The index of segment point 1 into this.del.coords.\n     * @param p2 The index of segment point 2 into this.del.coords.\n     * @param p The index of the point p into this.del.coords.\n     * @return True if the points are collinear.\n     */\n    isCollinear(p1, p2, p) {\n        const pts = this.del.coords;\n        return orient2d(pts[p1 * 2], pts[p1 * 2 + 1], pts[p2 * 2], pts[p2 * 2 + 1], pts[p * 2], pts[p * 2 + 1]) === 0.0;\n    }\n}\nConstrainautor.intersectSegments = intersectSegments;\n/**\n * Compute if two line segments [p1, p2] and [p3, p4] intersect.\n *\n * @name Constrainautor.intersectSegments\n * @source https://github.com/mikolalysenko/robust-segment-intersect\n * @param p1x The x coordinate of point 1 of the first segment.\n * @param p1y The y coordinate of point 1 of the first segment.\n * @param p2x The x coordinate of point 2 of the first segment.\n * @param p2y The y coordinate of point 2 of the first segment.\n * @param p3x The x coordinate of point 1 of the second segment.\n * @param p3y The y coordinate of point 1 of the second segment.\n * @param p4x The x coordinate of point 2 of the second segment.\n * @param p4y The y coordinate of point 2 of the second segment.\n * @return True if the line segments intersect.\n */\nfunction intersectSegments(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    const x0 = orient2d(p1x, p1y, p3x, p3y, p4x, p4y), y0 = orient2d(p2x, p2y, p3x, p3y, p4x, p4y);\n    if ((x0 > 0 && y0 > 0) || (x0 < 0 && y0 < 0)) {\n        return false;\n    }\n    const x1 = orient2d(p3x, p3y, p1x, p1y, p2x, p2y), y1 = orient2d(p4x, p4y, p1x, p1y, p2x, p2y);\n    if ((x1 > 0 && y1 > 0) || (x1 < 0 && y1 < 0)) {\n        return false;\n    }\n    //Check for degenerate collinear case\n    if (x0 === 0 && y0 === 0 && x1 === 0 && y1 === 0) {\n        return !(Math.max(p3x, p4x) < Math.min(p1x, p2x) ||\n            Math.max(p1x, p2x) < Math.min(p3x, p4x) ||\n            Math.max(p3y, p4y) < Math.min(p1y, p2y) ||\n            Math.max(p1y, p2y) < Math.min(p3y, p4y));\n    }\n    return true;\n}\n\nexport { Constrainautor as default };\n", "import { getGridPointsInBbox, interpolatePolygon, pointInPolygon } from './shared.js';\nimport { computeBbox, conformPolygon, mergeOptions, midPoint, triangleAngles } from '@allmaps/stdlib';\nimport Delaunator from 'delaunator';\n// @ts-expect-error Ignore missing types\nimport Constrainautor from '@kninnug/constrainautor';\nconst MINIMUM_TRIANGLE_ANGLE = 0.0001;\nconst defaultTriangulationOptions = {\n    steinerPoints: [],\n    minimumTriangleAngle: MINIMUM_TRIANGLE_ANGLE\n};\n/**\n * Triangulate a polygon to triangles smaller then a distance\n *\n * Grid points are placed inside the polygon to obtain small, well conditioned triangles.\n *\n * @param polygon - Polygon\n * @param distance - Distance that conditions the triangles\n * @param triangulationOptions - Triangulation Options.\n * @returns Array of triangles partitioning the polygon\n */\nexport function triangulate(polygon, distance, triangulationOptions) {\n    {\n        const { triangles } = triangulateToUnique(polygon, distance, triangulationOptions);\n        return triangles;\n    }\n}\n/**\n * Triangulate a polygon to triangles smaller then a distance, and return them via unique points.\n *\n * Grid points are placed inside the polygon to obtain small, well conditioned triangles.\n *\n * This function returns the triangulation as an array of unique points, and triangles of indices refering to those unique points.\n *\n * @param polygon - Polygon\n * @param distance - Distance that conditions the triangles\n * @param triangulationOptions - Triangulation Options.\n * @returns Triangulation Object with uniquePointIndexTriangles and uniquePoints\n */\nexport function triangulateToUnique(polygon, distance, triangulationOptions) {\n    const mergedTriangulationOptions = mergeOptions(defaultTriangulationOptions, triangulationOptions);\n    const steinerPoints = mergedTriangulationOptions.steinerPoints;\n    const minimumTriangleAngle = mergedTriangulationOptions.minimumTriangleAngle;\n    // Conform polygon (this also checks if there are at least 3 points)\n    polygon = conformPolygon(polygon);\n    let interpolatedPolygon = [];\n    let interpolatedPolygonPoints = [];\n    let gridPoints = [];\n    let gridPointsInPolygon = [];\n    if (distance) {\n        // Interpolate polygon\n        interpolatedPolygon = interpolatePolygon(polygon, distance);\n        interpolatedPolygonPoints = interpolatedPolygon.flat();\n        // Add grid points inside the polygon\n        gridPoints = getGridPointsInBbox(computeBbox(polygon), distance);\n        gridPointsInPolygon = gridPoints.filter((point) => pointInPolygon(point, polygon));\n    }\n    else {\n        interpolatedPolygon = polygon;\n        interpolatedPolygonPoints = polygon.flat();\n    }\n    const steinerPointsInPolygon = steinerPoints.filter((point) => pointInPolygon(point, polygon));\n    const uniquePoints = [\n        ...interpolatedPolygonPoints,\n        ...gridPointsInPolygon,\n        ...steinerPointsInPolygon\n    ];\n    // Initialize Delaunay triangulation from polygon + grid points\n    const delautator = new Delaunator(uniquePoints.flat());\n    // Collect indices of (interpolated) polygon edges\n    let ringOffset = 0;\n    const uniquePointIndexInterpolatedPolygon = interpolatedPolygon.map((ring) => {\n        const uniqueIndexRing = ring.map((_point, index) => ringOffset + index);\n        ringOffset += ring.length;\n        return uniqueIndexRing;\n    });\n    const uniquePointIndexEdges = uniquePointIndexInterpolatedPolygon\n        .map((ring) => ring.map((uniqueIndex) => [uniqueIndex, (uniqueIndex + 1) % ring.length]))\n        .flat();\n    // Constrain triangulation\n    // Note: instead of\n    // const constrainautor = new Constrainautor(delautator, uniquePointIndexEdges)\n    // which gives an error \"Constraining edge intersects point\" for small distances, e.g. maxDepth 7 on https://gist.githubusercontent.com/sammeltassen/fa3dbfaf4dfa800e00824478c4bd1928/raw/f182beac911e38b0a1d1eb420fbd54b4e6d2f2eb/nl-railway-map.json\n    // we perform a delaunify check first as proposed by\n    // https://github.com/kninnug/Constrainautor/issues/11#issuecomment-2571296247\n    // Keep an eye on proposed solutions, sinche the delaunify check is expensive\n    const constrainautor = new Constrainautor(delautator);\n    constrainautor.delaunify(true);\n    constrainautor.constrainAll(uniquePointIndexEdges);\n    let uniquePointIndexTriangles = [];\n    let triangles = [];\n    const shouldClassifyTriangles = [];\n    for (let i = 0; i < constrainautor.del.triangles.length; i += 3) {\n        uniquePointIndexTriangles.push([\n            constrainautor.del.triangles[i],\n            constrainautor.del.triangles[i + 1],\n            constrainautor.del.triangles[i + 2]\n        ]);\n        triangles.push([\n            uniquePoints[constrainautor.del.triangles[i]],\n            uniquePoints[constrainautor.del.triangles[i + 1]],\n            uniquePoints[constrainautor.del.triangles[i + 2]]\n        ]);\n        // Only classify triangles if they are along the border\n        shouldClassifyTriangles.push(constrainautor.del.triangles[i] < interpolatedPolygonPoints.length ||\n            constrainautor.del.triangles[i + 1] <\n                interpolatedPolygonPoints.length ||\n            constrainautor.del.triangles[i + 2] < interpolatedPolygonPoints.length);\n    }\n    // Check if triangles inside\n    const shouldKeep = triangles.map((triangle, index) => {\n        // Only keep if inside\n        if (shouldClassifyTriangles[index]) {\n            return (pointInPolygon(midPoint(...triangle), polygon) &&\n                triangleAngles(triangle).every((angle) => angle >= minimumTriangleAngle));\n        }\n        else {\n            return true;\n        }\n    });\n    uniquePointIndexTriangles = uniquePointIndexTriangles.filter((_triangle, index) => shouldKeep[index]);\n    triangles = triangles.filter((_triangle, index) => shouldKeep[index]);\n    // Fill in edges using unique\n    const edges = [];\n    for (let i = 0; i < uniquePointIndexEdges.length; i += 1) {\n        edges.push([\n            uniquePoints[uniquePointIndexEdges[i][0]],\n            uniquePoints[uniquePointIndexEdges[i][1]]\n        ]);\n    }\n    return {\n        interpolatedPolygon,\n        interpolatedPolygonPoints,\n        gridPoints,\n        gridPointsInPolygon,\n        uniquePoints,\n        triangles,\n        uniquePointIndexTriangles,\n        uniquePointIndexInterpolatedPolygon,\n        uniquePointIndexEdges\n    };\n}\n", "import type { HomogeneousTransform, Point, Matrix4 } from '@allmaps/types'\n\nexport function applyHomogeneousTransform(\n  homogeneousTransform: HomogeneousTransform,\n  coordinate: Point\n): Point {\n  const x = coordinate[0]\n  const y = coordinate[1]\n\n  return [\n    homogeneousTransform[0] * x +\n      homogeneousTransform[2] * y +\n      homogeneousTransform[4],\n    homogeneousTransform[1] * x +\n      homogeneousTransform[3] * y +\n      homogeneousTransform[5]\n  ]\n}\n\nexport function createHomogeneousTransform(): HomogeneousTransform {\n  return [1, 0, 0, 1, 0, 0]\n}\n\nexport function multiplyHomogeneousTransform(\n  homogeneousTransform1: HomogeneousTransform,\n  homogeneousTransform2: HomogeneousTransform\n): HomogeneousTransform {\n  const a1 = homogeneousTransform1[0]\n  const b1 = homogeneousTransform1[1]\n  const c1 = homogeneousTransform1[2]\n  const d1 = homogeneousTransform1[3]\n  const e1 = homogeneousTransform1[4]\n  const f1 = homogeneousTransform1[5]\n  const a2 = homogeneousTransform2[0]\n  const b2 = homogeneousTransform2[1]\n  const c2 = homogeneousTransform2[2]\n  const d2 = homogeneousTransform2[3]\n  const e2 = homogeneousTransform2[4]\n  const f2 = homogeneousTransform2[5]\n\n  return [\n    a1 * a2 + c1 * b2,\n    b1 * a2 + d1 * b2,\n    a1 * c2 + c1 * d2,\n    b1 * c2 + d1 * d2,\n    a1 * e2 + c1 * f2 + e1,\n    b1 * e2 + d1 * f2 + f1\n  ]\n}\n\nexport function rotateHomogeneousTransform(\n  homogeneousTransform: HomogeneousTransform,\n  angle: number\n): HomogeneousTransform {\n  const cos = Math.cos(angle)\n  const sin = Math.sin(angle)\n  return multiplyHomogeneousTransform(homogeneousTransform, [\n    cos,\n    sin,\n    -sin,\n    cos,\n    0,\n    0\n  ])\n}\n\nexport function scaleHomogeneousTransform(\n  homogeneousTransform: HomogeneousTransform,\n  x: number,\n  y: number\n): HomogeneousTransform {\n  return multiplyHomogeneousTransform(homogeneousTransform, [x, 0, 0, y, 0, 0])\n}\n\nexport function translateHomogeneousTransform(\n  homogeneousTransform: HomogeneousTransform,\n  dx: number,\n  dy: number\n): HomogeneousTransform {\n  return multiplyHomogeneousTransform(homogeneousTransform, [\n    1,\n    0,\n    0,\n    1,\n    dx,\n    dy\n  ])\n}\n\nexport function composeHomogeneousTransform(\n  dx1: number,\n  dy1: number,\n  sx: number,\n  sy: number,\n  angle: number,\n  dx2: number,\n  dy2: number\n): HomogeneousTransform {\n  const sin = Math.sin(angle)\n  const cos = Math.cos(angle)\n\n  return [\n    sx * cos,\n    sy * sin,\n    -sx * sin,\n    sy * cos,\n    dx2 * sx * cos - dy2 * sx * sin + dx1,\n    dx2 * sy * sin + dy2 * sy * cos + dy1\n  ]\n}\n\nexport function invertHomogeneousTransform(\n  source: HomogeneousTransform\n): HomogeneousTransform {\n  const determinant = getDeterminant(source)\n\n  const a = source[0]\n  const b = source[1]\n  const c = source[2]\n  const d = source[3]\n  const e = source[4]\n  const f = source[5]\n\n  return [\n    d / determinant,\n    -b / determinant,\n    -c / determinant,\n    a / determinant,\n    (c * f - d * e) / determinant,\n    -(a * f - b * e) / determinant\n  ]\n}\n\nexport function getDeterminant(mat: HomogeneousTransform): number {\n  return mat[0] * mat[3] - mat[1] * mat[2]\n}\n\nexport function homogeneousTransformToMatrix4(\n  homogeneousTransform: HomogeneousTransform\n): Matrix4 {\n  const matrix4: Matrix4 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]\n\n  matrix4[0] = homogeneousTransform[0]\n  matrix4[1] = homogeneousTransform[1]\n  matrix4[4] = homogeneousTransform[2]\n  matrix4[5] = homogeneousTransform[3]\n  matrix4[12] = homogeneousTransform[4]\n  matrix4[13] = homogeneousTransform[5]\n\n  return matrix4\n}\n", "import { cloneDeep } from 'lodash-es'\n\nimport { GeoreferencedMap } from '@allmaps/annotation'\nimport { Image } from '@allmaps/iiif-parser'\nimport {\n  ProjectedGcpTransformer,\n  ProjectedGcpTransformerOptions,\n  Projection,\n  lonLatProjection,\n  webMercatorProjection\n} from '@allmaps/project'\nimport {\n  computeBbox,\n  bboxToRectangle,\n  rectanglesToScale,\n  fetchImageInfo,\n  getPropertyFromCacheOrComputation,\n  mixPoints,\n  sizeToRectangle,\n  mergePartialOptions,\n  mergeOptionsUnlessUndefined,\n  mergeOptions\n} from '@allmaps/stdlib'\n\nimport { applyHomogeneousTransform } from '../shared/homogeneous-transform.js'\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\n\nimport type { WarpedMapOptions } from '../shared/types.js'\n\nimport type {\n  Gcp,\n  Point,\n  Ring,\n  Rectangle,\n  Bbox,\n  FetchFn,\n  ImageInformations,\n  TileZoomLevel\n} from '@allmaps/types'\nimport type {\n  Helmert,\n  TransformationType,\n  DistortionMeasure\n} from '@allmaps/transform'\n\nimport type { Viewport } from '../viewport/Viewport.js'\nimport type { FetchableTile } from '../tilecache/FetchableTile.js'\n\n// TODO: consider to make the default options more precise\nconst DEFAULT_PROJECTED_GCP_TRANSFORMER_OPTIONS = {\n  minOffsetRatio: 0.01,\n  minOffsetDistance: 4,\n  maxDepth: 5,\n  differentHandedness: true\n} as Partial<ProjectedGcpTransformerOptions>\n\nconst DEFAULT_WARPED_MAP_OPTIONS = {\n  visible: true,\n  applyMask: true,\n  transformationType: 'polynomial' as TransformationType,\n  internalProjection: webMercatorProjection,\n  projection: webMercatorProjection\n}\n\nexport function createWarpedMapFactory() {\n  return (\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    options?: Partial<WarpedMapOptions>\n  ) => new WarpedMap(mapId, georeferencedMap, options)\n}\n\n/**\n * Class for warped maps.\n * This class describes how a georeferenced map is warped using a specific transformation.\n *\n * @param mapId - ID of the map\n * @param georeferencedMap - Georeferenced map used to construct the WarpedMap\n * @param imageInformations - Image informations\n * @param parsedImage - ID of the image\n * @param visible - Whether the map is visible\n * @param applyMask - Whether to apply the mask\n * @param gcps - Ground control points used for warping this map, from resource coordinates to geospatial coordinates\n * @param projectedGcps - Projected ground control points, from resource coordinates to projected geospatial coordinates\n * @param resourcePoints - The resource coordinates of the ground control points\n * @param geoPoints - The geospatial coordinates of the ground control points\n * @param projectedGeoPoints - The projected geospatial coordinates of the projected ground control points\n * @param projectedGeoPreviousTransformedResourcePoints - The projectedGeoTransformedResourcePoints of the previous transformation type, used during transformation transitions\n * @param projectedGeoTransformedResourcePoints - The resource coordinates of the ground control points, transformed to projected geospatial coordinates using the projected transformer\n * @param resourcePreviousMask - Resource mask of the previous transformation type\n * @param resourceMask - Resource mask\n * @param resourceMaskBbox - Bbox of the resourceMask\n * @param resourceMaskRectangle - Rectangle of the resourceMaskBbox\n * @param resourceFullMask - Resource full mask (describing the entire extent of the image)\n * @param resourceFullMaskBbox - Bbox of the resource full mask\n * @param resourceFullMaskRectangle - Rectangle of the resource full mask bbox\n * @param previousTransformationType - Previous transformation type\n * @param transformationType - Transformation type used in the transfomer. This is loaded from the georeference annotation.\n * @param previousInternalProjection - Previous internal projection\n * @param internalProjection - Internal projection used in the projected transformer\n * @param projection - Projection of the projected geospatial coordinates space\n * @param projectedPreviousTransformer - Previous transformer used for warping this map from resource coordinates to projected geospatial coordinates\n * @param projectedTransformer - Transformer used for warping this map from resource coordinates to projected geospatial coordinates\n * @param projectedTransformerByTransformationType - A Map of projected transformers by transformationType\n * @param geoMask - resourceMask in geospatial coordinates\n * @param geoMaskBbox - Bbox of the geoMask\n * @param geoMaskRectangle - resourceMaskRectangle in geospatial coordinates\n * @param geoFullMask - resourceFullMask in geospatial coordinates\n * @param geoFullMaskBbox - Bbox of the geoFullMask\n * @param geoFullMaskRectangle - resourceFullMaskRectangle in geospatial coordinates\n * @param projectedGeoPreviousMask - The projectedGeoMask of the previous transformation type, used during transformation transitions\n * @param projectedGeoMask - resourceMask in projected geospatial coordinates\n * @param projectedGeoMaskBbox - Bbox of the projectedGeoMask\n * @param projectedGeoMaskRectangle - resourceMaskRectanglee in projected geospatial coordinates\n * @param projectedGeoFullMask - resourceFullMask in projected geospatial coordinates\n * @param projectedGeoFullMaskBbox - Bbox of the projectedGeoFullMask\n * @param projectedGeoFullMaskRectangle - resourceFullMaskRectangle in projected geospatial coordinates\n * @param resourceToProjectedGeoScale - Scale of the warped map, in resource pixels per projected geospatial coordinates\n * @param previousDistortionMeasure - Previous distortion measure displayed for this map\n * @param distortionMeasure - Distortion measure displayed for this map\n * @param tileZoomLevelForViewport - The tile zoom level, for the current viewport\n * @param overviewTileZoomLevelForViewport - The overview tile zoom level, for the current viewport\n * @param projectedGeoBufferedViewportRectangleForViewport - The (buffered) viewport in projected geospatial coordinates, for the current viewport\n * @param projectedGeoBufferedViewportRectangleBboxForViewport - Bbox of the projectedGeoBufferedViewportRectangle\n * @param resourceBufferedViewportRingForViewport - The (buffered) viewport transformed back to resource coordinates, for the current viewport\n * @param resourceBufferedViewportRingBboxForViewport - Bbox of the resourceViewportRing\n * @param resourceBufferedViewportRingBboxAndResourceMaskBboxIntersectionForViewport - The intersection of the bbox of the (buffered) viewport transformed back to resource coordinates and the bbox of the resource mask, for the current viewport\n * @param fetchableTilesForViewport - The fetchable tiles for displaying this map, for the current viewport\n * @param overviewFetchableTilesForViewport - The overview fetchable tiles, for the current viewport\n */\nexport class WarpedMap extends EventTarget {\n  mapId: string\n  georeferencedMap: GeoreferencedMap\n\n  imageInformations?: ImageInformations\n  parsedImage?: Image\n  loadingImageInfo: boolean\n\n  fetchFn?: FetchFn\n  protected abortController?: AbortController\n\n  visible: boolean\n  applyMask: boolean\n  mixed = false\n\n  gcps: Gcp[]\n  projectedGcps!: Gcp[]\n  resourcePoints!: Point[]\n  geoPoints!: Point[]\n  projectedGeoPoints!: Point[]\n  projectedGeoPreviousTransformedResourcePoints!: Point[]\n  projectedGeoTransformedResourcePoints!: Point[]\n\n  resourceMask: Ring\n  resourceMaskBbox!: Bbox\n  resourceMaskRectangle!: Rectangle\n  resourceFullMask!: Ring\n  resourceFullMaskBbox!: Bbox\n  resourceFullMaskRectangle!: Rectangle\n\n  previousTransformationType: TransformationType\n  transformationType: TransformationType\n\n  previousInternalProjection: Projection\n  internalProjection: Projection\n  projection: Projection\n\n  projectedPreviousTransformer!: ProjectedGcpTransformer\n  projectedTransformer!: ProjectedGcpTransformer\n  protected projectedTransformerCache: Map<\n    TransformationType,\n    ProjectedGcpTransformer\n  >\n\n  geoMask!: Ring\n  geoMaskBbox!: Bbox\n  geoMaskRectangle!: Rectangle\n  geoFullMask!: Ring\n  geoFullMaskBbox!: Bbox\n  geoFullMaskRectangle!: Rectangle\n\n  projectedGeoMask!: Ring\n  projectedGeoMaskBbox!: Bbox\n  projectedGeoMaskRectangle!: Rectangle\n  projectedGeoFullMask!: Ring\n  projectedGeoFullMaskBbox!: Bbox\n  projectedGeoFullMaskRectangle!: Rectangle\n\n  resourceToProjectedGeoScale!: number\n\n  previousDistortionMeasure?: DistortionMeasure\n  distortionMeasure?: DistortionMeasure\n\n  tileZoomLevelForViewport?: TileZoomLevel\n  overviewTileZoomLevelForViewport?: TileZoomLevel\n\n  projectedGeoBufferedViewportRectangleForViewport?: Rectangle\n  projectedGeoBufferedViewportRectangleBboxForViewport?: Bbox\n\n  resourceBufferedViewportRingForViewport?: Ring\n  resourceBufferedViewportRingBboxForViewport?: Bbox\n\n  resourceBufferedViewportRingBboxAndResourceMaskBboxIntersectionForViewport?: Bbox\n\n  fetchableTilesForViewport: FetchableTile[] = []\n  overviewFetchableTilesForViewport: FetchableTile[] = []\n\n  /**\n   * Creates an instance of WarpedMap.\n   *\n   * @param mapId - ID of the map\n   * @param georeferencedMap - Georeferenced map used to construct the WarpedMap\n   * @param partialWarpedMapOptions - options\n   */\n  constructor(\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    partialWarpedMapOptions?: Partial<WarpedMapOptions>\n  ) {\n    super()\n\n    // Note: defaults are overwritten by georeferenced map input\n    // (only if they are defined), which is overwritten by options\n    // This way a warped map list's current\n    // transformation and projection can overwrite those of the map\n\n    const georeferencedMapInput = {\n      transformationType: georeferencedMap.transformation\n        ?.type as TransformationType,\n      internalProjection: georeferencedMap.resourceCrs\n    }\n\n    const mapAndConstructorOptions = mergeOptions(\n      georeferencedMapInput,\n      partialWarpedMapOptions\n    )\n    const warpedMapOptions = mergeOptionsUnlessUndefined(\n      DEFAULT_WARPED_MAP_OPTIONS,\n      mapAndConstructorOptions\n    )\n\n    this.projectedTransformerCache = new Map()\n\n    this.mapId = mapId\n    this.georeferencedMap = georeferencedMap\n\n    this.imageInformations = warpedMapOptions.imageInformations\n    this.loadingImageInfo = false\n\n    this.visible = warpedMapOptions.visible\n    this.applyMask = warpedMapOptions.applyMask\n    this.fetchFn = warpedMapOptions.fetchFn\n\n    this.gcps = this.georeferencedMap.gcps\n\n    this.resourceMask = this.applyMask\n      ? this.georeferencedMap.resourceMask\n      : this.getResourceFullMask()\n    this.updateResourceMaskProperties()\n    this.updateResourceFullMaskProperties()\n\n    this.transformationType = warpedMapOptions.transformationType\n    this.previousTransformationType = this.transformationType\n\n    this.internalProjection = warpedMapOptions.internalProjection\n    this.previousInternalProjection = this.internalProjection\n    this.projection = warpedMapOptions.projection\n\n    this.updateProjectedTransformerProperties()\n  }\n\n  /**\n   * Get resourceMask in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportMask(viewport: Viewport): Ring {\n    return this.projectedGeoMask.map((point) => {\n      return applyHomogeneousTransform(\n        viewport.projectedGeoToViewportHomogeneousTransform,\n        point\n      )\n    })\n  }\n\n  /**\n   * Get Bbox of resourceMask in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportMaskBbox(viewport: Viewport): Bbox {\n    return computeBbox(this.getViewportMask(viewport))\n  }\n\n  /**\n   * Get resourceMaskRectangle in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportMaskRectangle(viewport: Viewport): Rectangle {\n    return this.projectedGeoMaskRectangle.map((point) => {\n      return applyHomogeneousTransform(\n        viewport.projectedGeoToViewportHomogeneousTransform,\n        point\n      )\n    }) as Rectangle\n  }\n\n  /**\n   * Get resourceFullMask in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportFullMask(viewport: Viewport): Ring {\n    return this.projectedGeoFullMask.map((point) => {\n      return applyHomogeneousTransform(\n        viewport.projectedGeoToViewportHomogeneousTransform,\n        point\n      )\n    })\n  }\n\n  /**\n   * Get bbox of rresourceFullMask in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportFullMaskBbox(viewport: Viewport): Bbox {\n    return computeBbox(this.getViewportFullMask(viewport))\n  }\n\n  /**\n   * Get resourceFullMaskRectangle in viewport coordinates\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getViewportFullMaskRectangle(viewport: Viewport): Rectangle {\n    return this.projectedGeoFullMaskRectangle.map((point) => {\n      return applyHomogeneousTransform(\n        viewport.projectedGeoToViewportHomogeneousTransform,\n        point\n      )\n    }) as Rectangle\n  }\n\n  /**\n   * Get scale of the warped map, in resource pixels per viewport pixels.\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getResourceToViewportScale(viewport: Viewport): number {\n    return rectanglesToScale(\n      this.resourceMaskRectangle,\n      this.getViewportMaskRectangle(viewport)\n    )\n  }\n\n  /**\n   * Get scale of the warped map, in resource pixels per canvas pixels.\n   *\n   * @param viewport - the current viewport\n   * @returns\n   */\n  getResourceToCanvasScale(viewport: Viewport): number {\n    return this.getResourceToViewportScale(viewport) / viewport.devicePixelRatio\n  }\n\n  /**\n   * Get the reference scaling from the forward transformation of the projected Helmert transformer\n   *\n   * @returns\n   */\n  getReferenceScale(): number {\n    const projectedHelmertTransformer = this.getProjectedTransformer('helmert')\n    const toProjectedGeoHelmertTransformation =\n      projectedHelmertTransformer.getToGeoTransformation() as Helmert\n    const helmertMeasures = toProjectedGeoHelmertTransformation.getMeasures()\n    return helmertMeasures.scale as number\n  }\n\n  /**\n   * Get a projected transformer of the given transformation type.\n   *\n   * Uses cashed projected transformers by transformation type,\n   * and only computes a new projected transformer if none found.\n   *\n   * Returns a projected transformer in the current projection,\n   * even if the cached transformer was computed in a different projection.\n   *\n   * Default settings apply for the options.\n   *\n   * @params transformationType - the transformation type\n   * @params partialProjectedGcpTransformerOptions - options\n   * @params useCache - whether to use the cached projected transformers previously computed\n   * @returns A projected transformer\n   */\n  getProjectedTransformer(\n    transformationType: TransformationType,\n    partialProjectedGcpTransformerOptions?: Partial<ProjectedGcpTransformerOptions>\n  ): ProjectedGcpTransformer {\n    partialProjectedGcpTransformerOptions = mergePartialOptions(\n      {\n        projection: this.projection,\n        internalProjection: this.internalProjection\n      },\n      partialProjectedGcpTransformerOptions\n    )\n    partialProjectedGcpTransformerOptions = mergePartialOptions(\n      DEFAULT_PROJECTED_GCP_TRANSFORMER_OPTIONS,\n      partialProjectedGcpTransformerOptions\n    )\n\n    const projectedTransformer = getPropertyFromCacheOrComputation(\n      this.projectedTransformerCache,\n      transformationType,\n      () =>\n        new ProjectedGcpTransformer(\n          this.gcps,\n          transformationType,\n          partialProjectedGcpTransformerOptions\n        )\n    )\n    return projectedTransformer.setProjection(this.projection)\n  }\n\n  /**\n   * Update the ground control points loaded from a georeferenced map to new ground control points.\n   *\n   * @param gcps\n   */\n  setGcps(gcps: Gcp[]): void {\n    this.gcps = gcps\n    this.clearProjectedTransformerCaches()\n    this.updateProjectedTransformerProperties()\n    this.updateGcpsProperties()\n  }\n\n  /**\n   * Update the resource mask loaded from a georeferenced map to a new mask.\n   *\n   * @param resourceMask\n   */\n  setResourceMask(resourceMask: Ring): void {\n    this.applyMask = true\n    this.resourceMask = resourceMask\n    this.updateResourceMaskProperties()\n    this.updateResourceFullMaskProperties()\n    this.updateGeoMaskProperties()\n    this.updateProjectedGeoMaskProperties()\n  }\n\n  /**\n   * Set the transformationType\n   *\n   * @param transformationType\n   */\n  setTransformationType(transformationType: TransformationType): void {\n    this.transformationType = transformationType\n    this.updateProjectedTransformerProperties()\n  }\n\n  /**\n   * Set the distortionMeasure\n   *\n   * @param distortionMeasure - the disortion measure\n   */\n  setDistortionMeasure(distortionMeasure?: DistortionMeasure): void {\n    this.distortionMeasure = distortionMeasure\n  }\n\n  /**\n   * Set the internal projection\n   *\n   * @param projection - the internal projection\n   */\n  setInternalProjection(projection?: Projection): void {\n    this.internalProjection =\n      projection ||\n      DEFAULT_PROJECTED_GCP_TRANSFORMER_OPTIONS.internalProjection ||\n      webMercatorProjection\n    this.clearProjectedTransformerCaches()\n    // Note: the following will recreate a transformer with the internal projection\n    // and also assure the triangulation is updated.\n    this.updateProjectedTransformerProperties()\n  }\n\n  /**\n   * Set the projection\n   *\n   * @param projection - the projection\n   */\n  setProjection(projection?: Projection): void {\n    this.projection =\n      projection ||\n      DEFAULT_PROJECTED_GCP_TRANSFORMER_OPTIONS.projection ||\n      webMercatorProjection\n    // Note: the following will reuse the existing transformer but set it's projection\n    // and also assure the triangulation is updated.\n    this.updateProjectedTransformerProperties()\n  }\n\n  /**\n   * Set the tile zoom level for the current viewport\n   *\n   * @param tileZoomLevel - tile zoom level for the current viewport\n   */\n  setTileZoomLevelForViewport(tileZoomLevel?: TileZoomLevel) {\n    this.tileZoomLevelForViewport = tileZoomLevel\n  }\n\n  /**\n   * Set the overview tile zoom level for the current viewport\n   *\n   * @param tileZoomLevel - tile zoom level for the current viewport\n   */\n  setOverviewTileZoomLevelForViewport(tileZoomLevel?: TileZoomLevel) {\n    this.overviewTileZoomLevelForViewport = tileZoomLevel\n  }\n\n  /**\n   * Set projectedGeoBufferedViewportRectangle for the current viewport\n   *\n   * @param projectedGeoBufferedViewportRectangle\n   */\n  setProjectedGeoBufferedViewportRectangleForViewport(\n    projectedGeoBufferedViewportRectangle?: Rectangle\n  ) {\n    this.projectedGeoBufferedViewportRectangleForViewport =\n      projectedGeoBufferedViewportRectangle\n    this.projectedGeoBufferedViewportRectangleBboxForViewport =\n      projectedGeoBufferedViewportRectangle\n        ? computeBbox(projectedGeoBufferedViewportRectangle)\n        : undefined\n  }\n\n  /**\n   * Set resourceBufferedViewportRing for the current viewport\n   *\n   * @param resourceBufferedViewportRing\n   */\n  setResourceBufferedViewportRingForViewport(\n    resourceBufferedViewportRing?: Ring\n  ) {\n    this.resourceBufferedViewportRingForViewport = resourceBufferedViewportRing\n    this.resourceBufferedViewportRingBboxForViewport =\n      resourceBufferedViewportRing\n        ? computeBbox(resourceBufferedViewportRing)\n        : undefined\n  }\n\n  /**\n   * Set resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection for the current viewport\n   *\n   * @param resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection\n   */\n  setResourceBufferedViewportRingBboxAndResourceMaskBboxIntersectionForViewport(\n    resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection?: Bbox\n  ) {\n    this.resourceBufferedViewportRingBboxAndResourceMaskBboxIntersectionForViewport =\n      resourceBufferedViewportRingBboxAndResourceMaskBboxIntersection\n  }\n\n  /**\n   * Set tiles for the current viewport\n   *\n   * @param fetchableTiles\n   */\n  setFetchableTilesForViewport(fetchableTiles: FetchableTile[]) {\n    this.fetchableTilesForViewport = fetchableTiles\n  }\n\n  /**\n   * Set overview tiles for the current viewport\n   *\n   * @param overviewFetchableTiles\n   */\n  setOverviewFetchableTilesForViewport(\n    overviewFetchableTiles: FetchableTile[]\n  ) {\n    this.overviewFetchableTilesForViewport = overviewFetchableTiles\n  }\n\n  /**\n   * Reset the properties for the current values\n   */\n  resetForViewport() {\n    this.setTileZoomLevelForViewport()\n    this.setOverviewTileZoomLevelForViewport()\n    this.setProjectedGeoBufferedViewportRectangleForViewport()\n    this.setResourceBufferedViewportRingForViewport()\n    this.setFetchableTilesForViewport([])\n    this.setOverviewFetchableTilesForViewport([])\n  }\n\n  /**\n   * Reset previous transform properties to new ones (when completing a transformer transitions).\n   */\n  resetPrevious() {\n    this.mixed = false\n    this.previousTransformationType = this.transformationType\n    this.previousDistortionMeasure = this.distortionMeasure\n    this.previousInternalProjection = this.internalProjection\n    this.projectedPreviousTransformer = cloneDeep(this.projectedTransformer)\n    this.projectedGeoPreviousTransformedResourcePoints =\n      this.projectedGeoTransformedResourcePoints\n  }\n\n  /**\n   * Mix previous transform properties with new ones (when changing an ongoing transformer transition).\n   *\n   * @param t - animation progress\n   */\n  mixPreviousAndNew(t: number) {\n    this.mixed = true\n    this.previousTransformationType = this.transformationType\n    this.previousDistortionMeasure = this.distortionMeasure\n    this.previousInternalProjection = this.internalProjection\n    this.projectedPreviousTransformer = cloneDeep(this.projectedTransformer)\n    this.projectedGeoPreviousTransformedResourcePoints =\n      this.projectedGeoTransformedResourcePoints.map((point, index) => {\n        return mixPoints(\n          point,\n          this.projectedGeoPreviousTransformedResourcePoints[index],\n          t\n        )\n      })\n  }\n\n  /**\n   * Check if this instance has image info\n   *\n   * @returns\n   */\n  hasImageInfo(): this is WarpedMapWithImageInfo {\n    return this.parsedImage !== undefined\n  }\n\n  /**\n   * Fetch and parse the image info, and generate the image ID\n   *\n   * @returns\n   */\n  async loadImageInfo(): Promise<void> {\n    try {\n      this.loadingImageInfo = true\n      const imageUri = this.georeferencedMap.resource.id\n\n      let imageInfo\n\n      if (this.imageInformations?.get(imageUri)) {\n        imageInfo = this.imageInformations.get(imageUri)\n      } else {\n        this.abortController = new AbortController()\n        const signal = this.abortController.signal\n        imageInfo = await fetchImageInfo(imageUri, { signal }, this.fetchFn)\n        this.abortController = undefined\n\n        this.imageInformations?.set(imageUri, imageInfo)\n      }\n\n      this.parsedImage = Image.parse(imageInfo)\n\n      this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.IMAGEINFOLOADED))\n    } catch (err) {\n      this.loadingImageInfo = false\n      throw err\n    } finally {\n      this.loadingImageInfo = false\n    }\n  }\n\n  private updateResourceMaskProperties() {\n    this.resourceMaskBbox = computeBbox(this.resourceMask)\n    this.resourceMaskRectangle = bboxToRectangle(this.resourceMaskBbox)\n  }\n\n  private getResourceFullMask() {\n    const resourceWidth = this.georeferencedMap.resource.width\n    const resourceHeight = this.georeferencedMap.resource.height\n\n    if (resourceWidth && resourceHeight) {\n      return sizeToRectangle([resourceWidth, resourceHeight])\n    } else {\n      return bboxToRectangle(this.resourceMaskBbox)\n    }\n  }\n\n  private updateResourceFullMaskProperties() {\n    this.resourceFullMask = this.getResourceFullMask()\n\n    this.resourceFullMaskBbox = computeBbox(this.resourceFullMask)\n    this.resourceFullMaskRectangle = bboxToRectangle(this.resourceFullMaskBbox)\n  }\n\n  private updateGeoMaskProperties() {\n    this.updateGeoMask()\n    this.updateFullGeoMask()\n  }\n\n  private updateProjectedGeoMaskProperties() {\n    this.updateProjectedGeoMask()\n    this.updateProjectedFullGeoMask()\n    this.updateResourceToProjectedGeoScale()\n  }\n\n  protected updateProjectedTransformerProperties(): void {\n    this.updateProjectedTransformer()\n\n    this.updateGeoMaskProperties()\n    this.updateProjectedGeoMaskProperties()\n    this.updateGcpsProperties()\n  }\n\n  private updateProjectedTransformer(): void {\n    this.projectedTransformer = this.getProjectedTransformer(\n      this.transformationType\n    )\n    if (!this.projectedPreviousTransformer) {\n      this.projectedPreviousTransformer = this.projectedTransformer\n    }\n  }\n\n  private updateGeoMask(): void {\n    this.geoMask = this.projectedTransformer.transformToGeo(\n      [this.resourceMask],\n      { projection: lonLatProjection }\n    )[0]\n    this.geoMaskBbox = computeBbox(this.geoMask)\n    this.geoMaskRectangle = this.projectedTransformer.transformToGeo(\n      [this.resourceMaskRectangle],\n      { maxDepth: 0, projection: lonLatProjection }\n    )[0] as Rectangle\n  }\n\n  private updateFullGeoMask(): void {\n    this.geoFullMask = this.projectedTransformer.transformToGeo(\n      [this.resourceFullMask],\n      { projection: lonLatProjection }\n    )[0]\n    this.geoFullMaskBbox = computeBbox(this.geoFullMask)\n    this.geoFullMaskRectangle = this.projectedTransformer.transformToGeo(\n      [this.resourceFullMaskRectangle],\n      { maxDepth: 0, projection: lonLatProjection }\n    )[0] as Rectangle\n  }\n\n  private updateProjectedGeoMask(): void {\n    this.projectedGeoMask = this.projectedTransformer.transformToGeo([\n      this.resourceMask\n    ])[0]\n    this.projectedGeoMaskBbox = computeBbox(this.projectedGeoMask)\n    this.projectedGeoMaskRectangle = this.projectedTransformer.transformToGeo(\n      [this.resourceMaskRectangle],\n      { maxDepth: 0 }\n    )[0] as Rectangle\n  }\n\n  private updateProjectedFullGeoMask(): void {\n    this.projectedGeoFullMask = this.projectedTransformer.transformToGeo([\n      this.resourceFullMask\n    ])[0]\n    this.projectedGeoFullMaskBbox = computeBbox(this.projectedGeoFullMask)\n    this.projectedGeoFullMaskRectangle =\n      this.projectedTransformer.transformToGeo(\n        [this.resourceFullMaskRectangle],\n        { maxDepth: 0 }\n      )[0] as Rectangle\n  }\n\n  private updateResourceToProjectedGeoScale(): void {\n    this.resourceToProjectedGeoScale = rectanglesToScale(\n      this.resourceMaskRectangle,\n      this.projectedGeoMaskRectangle\n    )\n  }\n\n  private updateGcpsProperties() {\n    this.projectedGcps = this.gcps.map(({ resource, geo }) => ({\n      resource,\n      geo: this.projectedTransformer.lonLatToProjection(geo)\n    }))\n    this.resourcePoints = this.gcps.map((gcp) => gcp.resource)\n    this.geoPoints = this.gcps.map((gcp) => gcp.geo)\n    this.projectedGeoPoints = this.projectedGcps.map(\n      (projectedGcp) => projectedGcp.geo\n    )\n\n    this.projectedGeoTransformedResourcePoints = this.gcps.map((projectedGcp) =>\n      this.projectedTransformer.transformToGeo(projectedGcp.resource)\n    )\n\n    if (!this.projectedGeoPreviousTransformedResourcePoints) {\n      this.projectedGeoPreviousTransformedResourcePoints =\n        this.projectedGeoTransformedResourcePoints\n    }\n  }\n\n  protected clearProjectedTransformerCaches() {\n    this.projectedTransformerCache = new Map()\n  }\n\n  destroy() {\n    if (this.abortController) {\n      this.abortController.abort()\n    }\n  }\n}\n\n/**\n * Class for warped maps with image ID and parsed IIIF image.\n */\nexport class WarpedMapWithImageInfo extends WarpedMap {\n  declare imageId: string\n  declare parsedImage: Image\n\n  constructor(\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    options?: Partial<WarpedMapOptions>\n  ) {\n    super(mapId, georeferencedMap, options)\n  }\n}\n", "import { GeoreferencedMap } from '@allmaps/annotation'\nimport { triangulateToUnique } from '@allmaps/triangulate'\nimport {\n  mixNumbers,\n  mixPoints,\n  getPropertyFromCacheOrComputation,\n  getPropertyFromTripleCacheOrComputation\n} from '@allmaps/stdlib'\n\nimport { WarpedMap } from './WarpedMap.js'\n\nimport type { WarpedMapOptions } from '../shared/types.js'\n\nimport type {\n  GcpAndDistortions,\n  DistortionMeasure,\n  TransformationType\n} from '@allmaps/transform'\nimport type { Gcp, Point, Ring, TypedPolygon } from '@allmaps/types'\nimport type { TriangulationToUnique } from '@allmaps/triangulate'\nimport type { Projection } from '@allmaps/project'\n\nconst DEFAULT_RESOURCE_RESOLUTION = undefined // TODO: allow to set via options\nconst DEFAULT_DISTORTION_MEASURES: DistortionMeasure[] = [\n  'log2sigma',\n  'twoOmega'\n]\n// TODO: allow to set via options\n\nfunction createDefaultTriangulatedWarpedMapOptions(): Partial<WarpedMapOptions> {\n  return {}\n}\n\nexport function createTriangulatedWarpedMapFactory() {\n  return (\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    options?: Partial<WarpedMapOptions>\n  ) => new TriangulatedWarpedMap(mapId, georeferencedMap, options)\n}\n\ntype GcpTriangulation = {\n  resourceResolution: number | undefined\n  gcpUniquePoints: GcpAndDistortions[]\n  uniquePointIndices: number[]\n  uniquePointIndexInterpolatedPolygon: TypedPolygon<number>\n}\n\n/**\n * Class for triangulated WarpedMaps.\n *\n * @param resourcePreviousResolution - Resolution (or 'distance') used during the previous triangulation of the resource mask\n * @param resourceResolution - Resolution (or 'distance') used during the triangulation of the resource mask, computed as the finest resource segment resulting from a resource-to-geo transformation of the horizontal and vertical midline of the resource bbox using the current transformation type\n * @param triangulateErrorCount - Number of time the triangulation has resulted in an error\n * @param projectedGcpPreviousTriangulation - Previous triangulation of the resource mask\n * @param projectedGcpTriangulation - Triangulation of the resource mask of a specific resource resolution, with unique points in resource and projected geospatial coordinates with distortions, and indices pointing to the triangles points and indices pointing to the triangulation-refined resource mask\n * @param resourceTrianglePoints - Triangle points of the triangles the triangulated resourceMask\n * @param projectedGeoPreviousTrianglePoints - The projectedGeoTrianglePoints of the previous transformation type, used during transformation transitions\n * @param projectedGeoTrianglePoints - The resourceTrianglePoints in projected geospatial coordinates\n * @param previousTrianglePointsDistortion - The trianglePointsDistortion of the previous transformation type, used during transformation transitions\n * @param trianglePointsDistortion - Distortion amount of the distortionMeasure at the projectedGeoTrianglePoints\n * @param projectedGeoPreviousTriangulationMask - The resource mask refined by the previous triangulation, in projected geospatial coordinates\n * @param projectedGeoTriangulationMask - The resource mask refined by the triangulation, in projected geospatial coordinates\n */\nexport class TriangulatedWarpedMap extends WarpedMap {\n  previousResourceResolution: number | undefined\n  resourceResolution: number | undefined\n\n  triangulateErrorCount = 0\n\n  projectedGcpPreviousTriangulation?: GcpTriangulation\n  projectedGcpTriangulation?: GcpTriangulation\n  protected resourceTriangulationCache: Map<number, TriangulationToUnique>\n  protected projectedGcpTriangulationCache: Map<\n    number,\n    Map<TransformationType, Map<Projection, GcpTriangulation>>\n  >\n\n  resourceTrianglePoints: Point[] = []\n\n  projectedGeoPreviousTrianglePoints: Point[] = []\n  projectedGeoTrianglePoints: Point[] = []\n\n  previousTrianglePointsDistortion: number[] = []\n  trianglePointsDistortion: number[] = []\n\n  projectedGeoPreviousTriangulationMask: Ring = []\n  projectedGeoTriangulationMask: Ring = []\n\n  /**\n   * Creates an instance of a TriangulatedWarpedMap.\n   *\n   * @param mapId - ID of the map\n   * @param georeferencedMap - Georeferenced map used to construct the WarpedMap\n   * @param options - Options\n   */\n  constructor(\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    options?: Partial<WarpedMapOptions>\n  ) {\n    options = {\n      ...createDefaultTriangulatedWarpedMapOptions(),\n      ...options\n    }\n\n    super(mapId, georeferencedMap, options)\n\n    this.resourceTriangulationCache = new Map()\n    this.projectedGcpTriangulationCache = new Map()\n\n    this.updateTriangulation()\n  }\n\n  /**\n   * Update the ground control points loaded from a georeferenced map to new ground control points.\n   *\n   * @param gcps - the new ground control points\n   */\n  setGcps(gcps: Gcp[]): void {\n    super.setGcps(gcps)\n    this.clearResourceTriangulationCaches()\n    this.updateTriangulation()\n  }\n\n  /**\n   * Update the resource mask loaded from a georeferenced map to a new mask.\n   *\n   * @param resourceMask - the new mask\n   */\n  setResourceMask(resourceMask: Ring): void {\n    super.setResourceMask(resourceMask)\n    this.clearResourceTriangulationCaches()\n    this.updateTriangulation()\n  }\n\n  /**\n   * Set the distortionMeasure\n   *\n   * @param distortionMeasure - the disortion measure\n   */\n  setDistortionMeasure(distortionMeasure?: DistortionMeasure): void {\n    super.setDistortionMeasure(distortionMeasure)\n    this.updateTrianglePointsDistortion()\n  }\n\n  /**\n   * Set the internal projection\n   *\n   * @param projection - the internal projection\n   */\n  setInternalProjection(projection: Projection): void {\n    super.setInternalProjection(projection)\n    this.updateTriangulation()\n  }\n\n  /**\n   * Set the projection\n   *\n   * @param projection - the projection\n   */\n  setProjection(projection: Projection): void {\n    super.setProjection(projection)\n    this.clearProjectedTriangulationCaches()\n    this.updateTriangulation()\n  }\n\n  /**\n   * Reset previous transform properties to new ones (when completing a transformer transitions).\n   */\n  resetPrevious() {\n    super.resetPrevious()\n    this.previousResourceResolution = this.resourceResolution\n    this.projectedGcpPreviousTriangulation = this.projectedGcpTriangulation\n    this.projectedGeoPreviousTrianglePoints = this.projectedGeoTrianglePoints\n    this.previousTrianglePointsDistortion = this.trianglePointsDistortion\n\n    this.projectedGeoPreviousTriangulationMask =\n      this.projectedGeoTriangulationMask\n  }\n\n  /**\n   * Mix previous transform properties with new ones (when changing an ongoing transformer transition).\n   *\n   * @param t - animation progress\n   */\n  mixPreviousAndNew(t: number) {\n    super.mixPreviousAndNew(t)\n\n    if (\n      this.projectedGcpPreviousTriangulation &&\n      this.projectedGcpTriangulation\n    ) {\n      const projectedGcpPreviousTriangulation =\n        this.projectedGcpPreviousTriangulation\n      const projectedGcpTriangulation = this.projectedGcpTriangulation\n\n      this.previousResourceResolution = this.resourceResolution\n      this.projectedGcpPreviousTriangulation = {\n        resourceResolution:\n          projectedGcpPreviousTriangulation.resourceResolution,\n        gcpUniquePoints: projectedGcpPreviousTriangulation.gcpUniquePoints.map(\n          (projectedGcp, index) => {\n            return {\n              resource: projectedGcp.resource,\n              geo: mixPoints(\n                projectedGcpTriangulation.gcpUniquePoints[index].geo,\n                projectedGcp.geo,\n                t\n              ),\n              // Note: Not mixing the distortions Map, only the active distortion\n              distortions:\n                projectedGcpTriangulation.gcpUniquePoints[index].distortions,\n              distortion: mixNumbers(\n                projectedGcpTriangulation.gcpUniquePoints[index].distortion ||\n                  0,\n                projectedGcp.distortion || 0,\n                t\n              )\n            }\n          }\n        ),\n        uniquePointIndices:\n          projectedGcpPreviousTriangulation.uniquePointIndices,\n        uniquePointIndexInterpolatedPolygon:\n          projectedGcpPreviousTriangulation.uniquePointIndexInterpolatedPolygon\n      }\n\n      this.projectedGeoPreviousTrianglePoints =\n        projectedGcpPreviousTriangulation.uniquePointIndices.map(\n          (i) => projectedGcpPreviousTriangulation.gcpUniquePoints[i].geo\n        )\n      this.previousTrianglePointsDistortion =\n        projectedGcpPreviousTriangulation.uniquePointIndices.map(\n          (i) =>\n            projectedGcpPreviousTriangulation.gcpUniquePoints[i]\n              .distortion as number\n        )\n    }\n\n    this.projectedGeoPreviousTriangulationMask =\n      this.projectedGeoTriangulationMask.map((point, index) => {\n        return mixPoints(\n          point,\n          this.projectedGeoPreviousTriangulationMask[index],\n          t\n        )\n      })\n  }\n\n  /**\n   * Update the (previous and new) triangulation of the resourceMask. Use cache if available.\n   */\n  private updateTriangulation() {\n    // The following ensures this function is only run after initialisation\n    // This class' constructor calls this function twice\n    // Once via super() and updateTransformerProperties()\n    // but then the cache is not ready yet, so we make it return\n    // And once at the end\n    if (\n      !this.resourceTriangulationCache ||\n      !this.projectedGcpTriangulationCache\n    ) {\n      return\n    }\n\n    // Get resolution from transform\n    const resourceResolution =\n      DEFAULT_RESOURCE_RESOLUTION ||\n      this.projectedTransformer.getToGeoTransformationResolution(\n        this.resourceMaskBbox\n      )\n\n    // Adapt resolution from previous\n    let refinePrevious = false\n    if (resourceResolution && this.previousResourceResolution) {\n      refinePrevious = this.previousResourceResolution < resourceResolution\n      this.resourceResolution = Math.min(\n        resourceResolution,\n        this.previousResourceResolution\n      )\n    }\n    if (resourceResolution && !this.previousResourceResolution) {\n      refinePrevious = true\n      this.resourceResolution = resourceResolution\n    }\n    if (!resourceResolution && this.previousResourceResolution) {\n      this.resourceResolution = this.previousResourceResolution\n    } else if (!resourceResolution && !this.previousResourceResolution) {\n      this.resourceResolution = undefined\n    }\n\n    // Compute triangulation\n    this.projectedGcpTriangulation = getPropertyFromTripleCacheOrComputation(\n      this.projectedGcpTriangulationCache,\n      this.resourceResolution,\n      this.transformationType,\n      this.internalProjection,\n      () => {\n        const {\n          uniquePoints,\n          uniquePointIndexTriangles,\n          uniquePointIndexInterpolatedPolygon\n        } = getPropertyFromCacheOrComputation(\n          this.resourceTriangulationCache,\n          this.resourceResolution,\n          () =>\n            triangulateToUnique([this.resourceMask], this.resourceResolution, {\n              steinerPoints: this.gcps.map((gcp) => gcp.resource)\n            })\n        )\n\n        // Extend Triangulation to ProjectedGcpTriangulation\n        // By including projectedGeo and distortions\n        const resourceResolution = this.resourceResolution\n        const resourceUniquePoints = uniquePoints as Point[]\n        const gcpUniquePoints = resourceUniquePoints.map((resourcePoint) =>\n          this.projectedTransformer.transformToGeo(\n            resourcePoint,\n            {\n              distortionMeasures: DEFAULT_DISTORTION_MEASURES,\n              referenceScale: this.getReferenceScale()\n            },\n            (gcpPartialDistortion) => gcpPartialDistortion\n          )\n        )\n        const uniquePointIndices = uniquePointIndexTriangles.flat() as number[]\n\n        return {\n          resourceResolution,\n          gcpUniquePoints,\n          uniquePointIndices,\n          uniquePointIndexInterpolatedPolygon\n        }\n      }\n    )\n\n    if (!this.projectedGcpPreviousTriangulation) {\n      this.projectedGcpPreviousTriangulation = this.projectedGcpTriangulation\n    }\n\n    // If new triangulation has higher resolution then previous, refine previous from new\n    if (refinePrevious) {\n      this.previousResourceResolution = this.resourceResolution\n      this.projectedGcpPreviousTriangulation =\n        getPropertyFromTripleCacheOrComputation(\n          this.projectedGcpTriangulationCache,\n          this.previousResourceResolution,\n          this.previousTransformationType,\n          this.previousInternalProjection,\n          () => {\n            if (!this.projectedGcpTriangulation) {\n              // TODO: rewrite this function, make more readble?\n              throw new Error('No projectedGcpTriangulation')\n            }\n            const projectedGcpTriangulation = this.projectedGcpTriangulation\n\n            return {\n              resourceResolution:\n                this.projectedGcpTriangulation.resourceResolution,\n              gcpUniquePoints:\n                this.projectedGcpTriangulation.gcpUniquePoints.map(\n                  (projectedGcp) =>\n                    this.projectedPreviousTransformer.transformToGeo(\n                      projectedGcp.resource,\n                      {\n                        distortionMeasures: DEFAULT_DISTORTION_MEASURES,\n                        referenceScale: this.getReferenceScale()\n                      },\n                      (gcpPartialDistortion) => gcpPartialDistortion\n                    )\n                ),\n              uniquePointIndices:\n                this.projectedGcpTriangulation.uniquePointIndices,\n              uniquePointIndexInterpolatedPolygon:\n                projectedGcpTriangulation.uniquePointIndexInterpolatedPolygon\n            }\n          },\n          () => !this.mixed,\n          () => !this.mixed\n        )\n    }\n\n    this.updateTrianglePoints()\n  }\n\n  /**\n   * Derive the (previous and new) resource and projectedGeo points from their corresponding triangulations.\n   *\n   * Also derive the (previous and new) triangulation-refined resource and projectedGeo mask\n   */\n  private updateTrianglePoints() {\n    if (\n      !this.projectedGcpPreviousTriangulation ||\n      !this.projectedGcpTriangulation\n    ) {\n      return\n    }\n    const projectedGcpPreviousTriangulation =\n      this.projectedGcpPreviousTriangulation\n    const projectedGcpTriangulation = this.projectedGcpTriangulation\n\n    this.resourceTrianglePoints =\n      this.projectedGcpTriangulation.uniquePointIndices.map(\n        (i) => projectedGcpTriangulation.gcpUniquePoints[i].resource\n      )\n    this.projectedGeoPreviousTrianglePoints =\n      this.projectedGcpPreviousTriangulation.uniquePointIndices.map(\n        (i) => projectedGcpPreviousTriangulation.gcpUniquePoints[i].geo\n      )\n    this.projectedGeoTrianglePoints =\n      this.projectedGcpTriangulation.uniquePointIndices.map(\n        (i) => projectedGcpTriangulation.gcpUniquePoints[i].geo\n      )\n\n    this.projectedGeoPreviousTriangulationMask =\n      this.projectedGcpPreviousTriangulation.uniquePointIndexInterpolatedPolygon\n        .map((typedRing) =>\n          typedRing.map(\n            (i) => projectedGcpPreviousTriangulation.gcpUniquePoints[i].geo\n          )\n        )\n        .flat()\n    this.projectedGeoTriangulationMask =\n      this.projectedGcpTriangulation.uniquePointIndexInterpolatedPolygon\n        .map((typedRing) =>\n          typedRing.map((i) => projectedGcpTriangulation.gcpUniquePoints[i].geo)\n        )\n        .flat()\n\n    this.updateTrianglePointsDistortion()\n  }\n\n  /**\n   * Derive the (previous and new) distortions from their corresponding triangulations.\n   */\n  private updateTrianglePointsDistortion() {\n    if (\n      !this.projectedGcpPreviousTriangulation ||\n      !this.projectedGcpTriangulation\n    ) {\n      return\n    }\n    const projectedGcpPreviousTriangulation =\n      this.projectedGcpPreviousTriangulation\n    const projectedGcpTriangulation = this.projectedGcpTriangulation\n\n    this.previousTrianglePointsDistortion =\n      projectedGcpPreviousTriangulation.uniquePointIndices.map((i) => {\n        const distortions =\n          projectedGcpPreviousTriangulation.gcpUniquePoints[i].distortions\n        if (!this.previousDistortionMeasure || !distortions) {\n          return 0\n        } else {\n          return distortions.get(this.previousDistortionMeasure) as number\n        }\n      })\n    this.trianglePointsDistortion =\n      projectedGcpTriangulation.uniquePointIndices.map((i) => {\n        const distortions =\n          projectedGcpTriangulation.gcpUniquePoints[i].distortions\n        if (!this.distortionMeasure || !distortions) {\n          return 0\n        } else {\n          return distortions.get(this.distortionMeasure) as number\n        }\n      })\n  }\n\n  protected updateProjectedTransformerProperties(): void {\n    super.updateProjectedTransformerProperties()\n    this.updateTriangulation()\n  }\n\n  protected clearProjectedTransformerCaches() {\n    super.clearProjectedTransformerCaches()\n    this.clearResourceTriangulationCaches()\n  }\n\n  protected clearResourceTriangulationCaches() {\n    this.resourceTriangulationCache = new Map()\n    this.clearProjectedTriangulationCaches()\n  }\n\n  protected clearProjectedTriangulationCaches() {\n    this.projectedGcpTriangulationCache = new Map()\n  }\n}\n", "export function createShader(\n  gl: WebGL2RenderingContext,\n  type:\n    | WebGLRenderingContextBase['VERTEX_SHADER']\n    | WebGLRenderingContextBase['FRAGMENT_SHADER'],\n  source: string\n): WebGLShader {\n  // TODO: are all unneeded webgl objects properly deleted?\n\n  const shader = gl.createShader(type)\n  if (shader) {\n    gl.shaderSource(shader, source)\n    gl.compileShader(shader)\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS)\n    if (success) {\n      return shader\n    } else {\n      const message = gl.getShaderInfoLog(shader)\n      gl.deleteShader(shader)\n      throw new Error('Failed to compile shader: ' + message)\n    }\n  } else {\n    throw new Error('Failed to create shader')\n  }\n}\n\nexport function createProgram(\n  gl: WebGL2RenderingContext,\n  vertexShader: WebGLShader,\n  fragmentShader: WebGLShader\n): WebGLProgram {\n  // TODO: are all unneeded webgl objects properly deleted?\n\n  const program = gl.createProgram()\n  if (program) {\n    gl.attachShader(program, vertexShader)\n    gl.attachShader(program, fragmentShader)\n    gl.linkProgram(program)\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS)\n    if (success) {\n      return program\n    } else {\n      const message = gl.getProgramInfoLog(program)\n      gl.deleteProgram(program)\n      throw new Error('Failed to link program: ' + message)\n    }\n  } else {\n    throw new Error('Failed to create program')\n  }\n}\n\nexport function createBuffer(\n  gl: WebGL2RenderingContext,\n  program: WebGLProgram,\n  data: Float32Array,\n  size: number,\n  name: string\n) {\n  const buffer = gl.createBuffer()\n\n  if (!buffer) {\n    throw new Error('Failed to create buffer')\n  }\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n  gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW)\n\n  const type = gl.FLOAT\n  const normalize = false\n  const stride = 0\n  const offset = 0\n\n  const positionAttributeLocation = gl.getAttribLocation(program, name)\n  gl.vertexAttribPointer(\n    positionAttributeLocation,\n    size,\n    type,\n    normalize,\n    stride,\n    offset\n  )\n  gl.enableVertexAttribArray(positionAttributeLocation)\n\n  return buffer\n}\n", "import { throttle } from 'lodash-es'\n\nimport {\n  hexToFractionalOpaqueRgba,\n  lineStringToLines,\n  mergeOptions,\n  pointsAndPointsToLines,\n  subSetArray\n} from '@allmaps/stdlib'\nimport { GeoreferencedMap } from '@allmaps/annotation'\nimport {\n  black,\n  blue,\n  green,\n  pink,\n  white,\n  yellow,\n  gray\n} from '@allmaps/tailwind'\n\nimport { TriangulatedWarpedMap } from './TriangulatedWarpedMap.js'\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\nimport {\n  applyHomogeneousTransform,\n  createHomogeneousTransform,\n  invertHomogeneousTransform\n} from '../shared/homogeneous-transform.js'\nimport { createBuffer } from '../shared/webgl2.js'\nimport { getTilesAtOtherScaleFactors, tileKey } from '../shared/tiles.js'\n\nimport type { DebouncedFunc } from 'lodash-es'\n\nimport type { Image } from '@allmaps/iiif-parser'\nimport type { Line, Point, Tile, HomogeneousTransform } from '@allmaps/types'\n\nimport type {\n  LineLayer,\n  PointLayer,\n  SpecificWebGL2WarpedMapOptions,\n  WebGL2RendererOptions,\n  WebGL2WarpedMapOptions\n} from '../shared/types.js'\nimport type { CachedTile } from '../tilecache/CacheableTile.js'\nimport type { RenderOptions } from '../shared/types.js'\n\nconst THROTTLE_UPDATE_TEXTURES_WAIT_MS = 200\nconst THROTTLE_UPDATE_TEXTURES_OPTIONS = {\n  leading: true,\n  trailing: true\n}\n\nconst defaultRenderLineLayerOptions = {\n  viewportSize: 6,\n  color: black,\n  viewportBorderSize: 0,\n  borderColor: white\n}\n\nconst defaultRenderPointLayerOptions = {\n  viewportSize: 16,\n  color: black,\n  viewportBorderSize: 1,\n  borderColor: white\n}\n\nconst defaultWebgl2WarpedMapOptions = {\n  renderGcps: false,\n  renderGcpsColor: blue,\n  renderTransformedGcps: false,\n  renderTransformedGcpsColor: pink,\n  renderVectors: false,\n  renderMask: false,\n  renderMaskSize: 8,\n  renderMaskColor: pink,\n  renderFullMask: false,\n  renderFullMaskSize: 8,\n  renderFullMaskColor: green\n}\n\nconst DEBUG = false\n\nconst DEFAULT_OPACITY = 1\nconst DEFAULT_SATURATION = 1\n\nconst TEXTURES_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF = 5\nconst TEXTURES_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF = 1\n\nexport function createWebGL2WarpedMapFactory(\n  gl: WebGL2RenderingContext,\n  mapProgram: WebGLProgram,\n  linesProgram: WebGLProgram,\n  pointsProgram: WebGLProgram\n) {\n  return (\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    options?: Partial<WebGL2WarpedMapOptions>\n  ) =>\n    new WebGL2WarpedMap(\n      mapId,\n      georeferencedMap,\n      gl,\n      mapProgram,\n      linesProgram,\n      pointsProgram,\n      options\n    )\n}\n\n/**\n * Class for WarpedMaps that are rendered with WebGL 2\n */\nexport class WebGL2WarpedMap extends TriangulatedWarpedMap {\n  // De facto make this a WarpedMapWithImageInfo\n  // (Multiple inhertance is not possible in TypeScript)\n  declare imageId: string\n  declare parsedImage: Image\n\n  webgl2WarpedMapOptions: SpecificWebGL2WarpedMapOptions\n\n  gl: WebGL2RenderingContext\n  mapProgram!: WebGLProgram\n  linesProgram!: WebGLProgram\n  pointsProgram!: WebGLProgram\n\n  mapVao: WebGLVertexArrayObject | null = null\n  linesVao: WebGLVertexArrayObject | null = null\n  pointsVao: WebGLVertexArrayObject | null = null\n\n  lineLayers: LineLayer[] = []\n  pointLayers: PointLayer[] = []\n\n  // Consider to store cachedTilesByTileKey as a quadtree for faster lookups\n  cachedTilesByTileKey: Map<string, CachedTile<ImageData>>\n  cachedTilesByTileUrl: Map<string, CachedTile<ImageData>>\n  cachedTilesForTexture: CachedTile<ImageData>[] = []\n  previousCachedTilesForTexture: CachedTile<ImageData>[] = []\n\n  opacity: number = DEFAULT_OPACITY\n  saturation: number = DEFAULT_SATURATION\n  renderOptions: RenderOptions = {}\n\n  cachedTilesTextureArray: WebGLTexture | null = null\n  cachedTilesResourceOriginPointsAndDimensionsTexture: WebGLTexture | null =\n    null\n  cachedTilesScaleFactorsTexture: WebGLTexture | null = null\n\n  // About renderHomogeneousTransform and InvertedRenderHomogeneousTransform:\n  // renderHomogeneousTransform is the product of:\n  // - the viewport's projectedGeoToClipTransform (projected geo coordinates -> clip coordinates)\n  // - the saved invertedRenderHomogeneousTransform (projected clip coordinates -> geo coordinates)\n  // since updateVertexBuffers ('where to draw triangles') run with possibly a different Viewport then renderInternal ('drawing the triangles'), a difference caused by throttling, there needs to be an adjustment.\n  // this adjustment is minimal: indeed, since invertedRenderHomogeneousTransform is set as the inverse of the viewport's projectedGeoToClipTransform in updateVertexBuffers()\n  // this renderHomogeneousTransform is almost the identity transform [1, 0, 0, 1, 0, 0].\n  invertedRenderHomogeneousTransform: HomogeneousTransform\n\n  private throttledUpdateTextures: DebouncedFunc<typeof this.updateTextures>\n\n  /**\n   * Creates an instance of WebGL2WarpedMap.\n   *\n   * @constructor\n   * @param mapId - ID of the map\n   * @param georeferencedMap - Georeferenced map used to construct the WarpedMap\n   * @param gl - WebGL rendering context\n   * @param mapProgram - WebGL program for map\n   * @param options - WarpedMapOptions\n   */\n  constructor(\n    mapId: string,\n    georeferencedMap: GeoreferencedMap,\n    gl: WebGL2RenderingContext,\n    mapProgram: WebGLProgram,\n    linesProgram: WebGLProgram,\n    pointsProgram: WebGLProgram,\n    options?: Partial<WebGL2WarpedMapOptions>\n  ) {\n    super(mapId, georeferencedMap, options)\n\n    this.cachedTilesByTileKey = new Map()\n    this.cachedTilesByTileUrl = new Map()\n\n    this.webgl2WarpedMapOptions = mergeOptions(\n      defaultWebgl2WarpedMapOptions,\n      options\n    )\n\n    this.gl = gl\n    this.initializeWebGL(mapProgram, linesProgram, pointsProgram)\n\n    this.invertedRenderHomogeneousTransform = createHomogeneousTransform()\n\n    this.throttledUpdateTextures = throttle(\n      this.updateTextures.bind(this),\n      THROTTLE_UPDATE_TEXTURES_WAIT_MS,\n      THROTTLE_UPDATE_TEXTURES_OPTIONS\n    )\n  }\n\n  initializeWebGL(\n    mapProgram: WebGLProgram,\n    linesProgram: WebGLProgram,\n    pointsProgram: WebGLProgram\n  ) {\n    this.mapProgram = mapProgram\n    this.linesProgram = linesProgram\n    this.pointsProgram = pointsProgram\n\n    this.mapVao = this.gl.createVertexArray()\n    this.linesVao = this.gl.createVertexArray()\n    this.pointsVao = this.gl.createVertexArray()\n\n    this.cachedTilesTextureArray = this.gl.createTexture()\n    this.cachedTilesScaleFactorsTexture = this.gl.createTexture()\n    this.cachedTilesResourceOriginPointsAndDimensionsTexture =\n      this.gl.createTexture()\n  }\n\n  /**\n   * Update the vertex buffers of this warped map\n   *\n   * @param projectedGeoToClipHomogeneousTransform - Transform from projected geo coordinates to webgl2 coordinates in the [-1, 1] range. Equivalent to OpenLayers' projectionTransform.\n   */\n  updateVertexBuffers(\n    projectedGeoToClipHomogeneousTransform: HomogeneousTransform,\n    partialWebgl2RendererOptions: Partial<WebGL2RendererOptions>\n  ) {\n    this.invertedRenderHomogeneousTransform = invertHomogeneousTransform(\n      projectedGeoToClipHomogeneousTransform\n    )\n\n    if (partialWebgl2RendererOptions.renderMaps) {\n      this.updateVertexBuffersMap(projectedGeoToClipHomogeneousTransform)\n    }\n    if (partialWebgl2RendererOptions.renderLines) {\n      this.updateVertexBuffersLines(projectedGeoToClipHomogeneousTransform)\n    }\n    if (partialWebgl2RendererOptions.renderPoints) {\n      this.updateVertexBuffersPoints(projectedGeoToClipHomogeneousTransform)\n    }\n  }\n\n  /**\n   * Clear textures for this map\n   */\n  clearTextures() {\n    // TODO: implement clearing of texture: maybe a 1x1x1 texture that's empty\n    this.throttledUpdateTextures()\n  }\n\n  /**\n   * Add cached tile to the textures of this map and update textures\n   *\n   * @param cachedTile\n   */\n  addCachedTileAndUpdateTextures(cachedTile: CachedTile<ImageData>) {\n    this.cachedTilesByTileKey.set(cachedTile.tileKey, cachedTile)\n    this.cachedTilesByTileUrl.set(cachedTile.tileUrl, cachedTile)\n    this.throttledUpdateTextures()\n  }\n\n  /**\n   * Remove cached tile from the textures of this map and update textures\n   *\n   * @param tileUrl\n   */\n  removeCachedTileAndUpdateTextures(tileUrl: string) {\n    const cachedTile = this.cachedTilesByTileUrl.get(tileUrl)\n    if (cachedTile) {\n      this.cachedTilesByTileKey.delete(cachedTile.tileKey)\n    }\n    this.cachedTilesByTileUrl.delete(tileUrl)\n    this.throttledUpdateTextures()\n  }\n\n  cancelThrottledFunctions() {\n    this.throttledUpdateTextures.cancel()\n  }\n\n  destroy() {\n    this.gl.deleteVertexArray(this.mapVao)\n    this.gl.deleteVertexArray(this.linesVao)\n    this.gl.deleteVertexArray(this.pointsVao)\n    this.gl.deleteTexture(this.cachedTilesTextureArray)\n    this.gl.deleteTexture(this.cachedTilesScaleFactorsTexture)\n    this.gl.deleteTexture(\n      this.cachedTilesResourceOriginPointsAndDimensionsTexture\n    )\n\n    this.cancelThrottledFunctions()\n\n    super.destroy()\n  }\n\n  private setLineLayers() {\n    this.lineLayers = []\n\n    if (this.webgl2WarpedMapOptions.renderVectors) {\n      this.lineLayers.push({\n        projectedGeoLines: pointsAndPointsToLines(\n          this.projectedGeoPoints,\n          this.projectedGeoTransformedResourcePoints\n        ),\n        projectedGeoPreviousLines: pointsAndPointsToLines(\n          this.projectedGeoPoints,\n          this.projectedGeoPreviousTransformedResourcePoints\n        ),\n        viewportSize: this.webgl2WarpedMapOptions.renderVectorsSize,\n        color: this.webgl2WarpedMapOptions.renderVectorsColor,\n        viewportBorderSize: this.webgl2WarpedMapOptions.renderVectorsBorderSize,\n        borderColor: this.webgl2WarpedMapOptions.renderVectorsBorderColor\n      })\n    }\n\n    if (this.webgl2WarpedMapOptions.renderMask) {\n      this.lineLayers.push({\n        projectedGeoLines: lineStringToLines(\n          this.projectedGeoTriangulationMask\n        ),\n        projectedGeoPreviousLines: lineStringToLines(\n          this.projectedGeoPreviousTriangulationMask\n        ),\n        viewportSize: this.webgl2WarpedMapOptions.renderMaskSize,\n        color: this.webgl2WarpedMapOptions.renderMaskColor,\n        viewportBorderSize: this.webgl2WarpedMapOptions.renderMaskBorderSize,\n        borderColor: this.webgl2WarpedMapOptions.renderMaskBorderColor\n      })\n    }\n\n    if (this.webgl2WarpedMapOptions.renderFullMask) {\n      this.lineLayers.push({\n        projectedGeoLines: lineStringToLines(this.projectedGeoFullMask),\n        viewportSize: this.webgl2WarpedMapOptions.renderFullMaskSize,\n        color: this.webgl2WarpedMapOptions.renderFullMaskColor,\n        viewportBorderSize:\n          this.webgl2WarpedMapOptions.renderFullMaskBorderSize,\n        borderColor: this.webgl2WarpedMapOptions.renderFullMaskBorderColor\n      })\n    }\n  }\n\n  private setPointLayers() {\n    this.pointLayers = []\n\n    if (this.webgl2WarpedMapOptions.renderGcps) {\n      this.pointLayers.push({\n        projectedGeoPoints: this.projectedGeoPoints,\n        viewportSize: this.webgl2WarpedMapOptions.renderGcpsSize,\n        color: this.webgl2WarpedMapOptions.renderGcpsColor,\n        viewportBorderSize: this.webgl2WarpedMapOptions.renderGcpsBorderSize,\n        borderColor: this.webgl2WarpedMapOptions.renderGcpsBorderColor\n      })\n    }\n\n    if (this.webgl2WarpedMapOptions.renderTransformedGcps) {\n      this.pointLayers.push({\n        projectedGeoPoints: this.projectedGeoTransformedResourcePoints,\n        projectedGeoPreviousPoints:\n          this.projectedGeoPreviousTransformedResourcePoints,\n        viewportSize: this.webgl2WarpedMapOptions.renderTransformedGcpsSize,\n        color: this.webgl2WarpedMapOptions.renderTransformedGcpsColor,\n        viewportBorderSize:\n          this.webgl2WarpedMapOptions.renderTransformedGcpsBorderSize,\n        borderColor:\n          this.webgl2WarpedMapOptions.renderTransformedGcpsBorderColor\n      })\n    }\n\n    if (DEBUG) {\n      this.pointLayers.push({\n        projectedGeoPoints: this.projectedGeoPreviousTrianglePoints,\n        color: gray\n      })\n      this.pointLayers.push({\n        projectedGeoPoints: this.projectedGeoTrianglePoints,\n        color: yellow\n      })\n    }\n  }\n\n  private updateVertexBuffersMap(\n    projectedGeoToClipHomogeneousTransform: HomogeneousTransform\n  ) {\n    if (!this.mapVao) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.mapProgram\n    gl.bindVertexArray(this.mapVao)\n\n    // Resource triangle points\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(this.resourceTrianglePoints.flat()),\n      2,\n      'a_resourceTrianglePoint'\n    )\n\n    // Clip previous and new triangle points\n\n    const clipPreviousTrianglePoints =\n      this.projectedGeoPreviousTrianglePoints.map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipPreviousTrianglePoints.flat()),\n      2,\n      'a_clipPreviousTrianglePoint'\n    )\n\n    const clipTrianglePoints = this.projectedGeoTrianglePoints.map((point) =>\n      applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipTrianglePoints.flat()),\n      2,\n      'a_clipTrianglePoint'\n    )\n\n    // Previous and new distortion\n    // Note: we must update the distortion data even when we don't render distortions\n    // to ensure this array buffer is of the correct length, for example when triangulation changes\n\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(this.previousTrianglePointsDistortion),\n      1,\n      'a_previousTrianglePointDistortion'\n    )\n\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(this.trianglePointsDistortion),\n      1,\n      'a_trianglePointDistortion'\n    )\n\n    // Triangle Point index\n\n    const trianglePointsTriangleIndex = new Float32Array(\n      this.resourceTrianglePoints.length\n    ).map((_v, i) => {\n      return i\n    })\n    createBuffer(\n      gl,\n      program,\n      trianglePointsTriangleIndex,\n      1,\n      'a_trianglePointIndex'\n    )\n  }\n\n  private updateVertexBuffersLines(\n    projectedGeoToClipHomogeneousTransform: HomogeneousTransform\n  ) {\n    if (!this.linesVao) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.linesProgram\n    gl.bindVertexArray(this.linesVao)\n\n    this.setLineLayers()\n\n    const clipSixPoints = this.lineLayers\n      .reduce(\n        (accumulator: Line[], lineLayer) =>\n          accumulator.concat(lineLayer.projectedGeoLines),\n        []\n      )\n      .map((projectedGeoLine) => [\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[1]\n      ])\n      .flat()\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipSixPoints.flat()),\n      2,\n      'a_clipPoint'\n    )\n\n    const clipSixOtherPoints = this.lineLayers\n      .reduce(\n        (accumulator: Line[], lineLayer) =>\n          accumulator.concat(lineLayer.projectedGeoLines),\n        []\n      )\n      .map((projectedGeoLine) => [\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[0]\n      ])\n      .flat()\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipSixOtherPoints.flat()),\n      2,\n      'a_clipOtherPoint'\n    )\n\n    const clipSixPreviousPoints = this.lineLayers\n      .reduce(\n        (accumulator: Line[], lineLayer) =>\n          accumulator.concat(\n            lineLayer.projectedGeoPreviousLines || lineLayer.projectedGeoLines\n          ),\n        []\n      )\n      .map((projectedGeoLine) => [\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[1]\n      ])\n      .flat()\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipSixPreviousPoints.flat()),\n      2,\n      'a_clipPreviousPoint'\n    )\n\n    const clipSixPreviousOtherPoints = this.lineLayers\n      .reduce(\n        (accumulator: Line[], lineLayer) =>\n          accumulator.concat(\n            lineLayer.projectedGeoPreviousLines || lineLayer.projectedGeoLines\n          ),\n        []\n      )\n      .map((projectedGeoLine) => [\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[1],\n        projectedGeoLine[0],\n        projectedGeoLine[0],\n        projectedGeoLine[0]\n      ])\n      .flat()\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipSixPreviousOtherPoints.flat()),\n      2,\n      'a_clipPreviousOtherPoint'\n    )\n\n    const sixIsOtherPoints = this.lineLayers.reduce(\n      (accumulator: number[], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) => [\n            0, 0, 1, 0, 0, 1\n          ])\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(sixIsOtherPoints),\n      1,\n      'a_isOtherPoint'\n    )\n\n    const sixNormalSigns = this.lineLayers.reduce(\n      (accumulator: number[], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) => [\n            +1, -1, +1, +1, -1, +1\n          ])\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(sixNormalSigns),\n      1,\n      'a_normalSign'\n    )\n\n    const viewportSizes = this.lineLayers.reduce(\n      (accumulator: number[], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) =>\n            Array(6).fill(\n              lineLayer.viewportSize ??\n                defaultRenderLineLayerOptions.viewportSize\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(viewportSizes),\n      1,\n      'a_viewportSize'\n    )\n\n    const colors = this.lineLayers.reduce(\n      (accumulator: number[][], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) =>\n            Array(6).fill(\n              hexToFractionalOpaqueRgba(\n                lineLayer.color ?? defaultRenderLineLayerOptions.color\n              )\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(gl, program, new Float32Array(colors.flat()), 4, 'a_color')\n\n    const viewportBorderSizes = this.lineLayers.reduce(\n      (accumulator: number[], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) =>\n            Array(6).fill(\n              lineLayer.viewportBorderSize ??\n                defaultRenderLineLayerOptions.viewportBorderSize\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(viewportBorderSizes),\n      1,\n      'a_viewportBorderSize'\n    )\n\n    const borderColors = this.lineLayers.reduce(\n      (accumulator: number[][], lineLayer) =>\n        accumulator.concat(\n          lineLayer.projectedGeoLines.flatMap((_projectedGeoLine) =>\n            Array(6).fill(\n              hexToFractionalOpaqueRgba(\n                lineLayer.borderColor ??\n                  defaultRenderLineLayerOptions.borderColor\n              )\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(borderColors.flat()),\n      4,\n      'a_borderColor'\n    )\n  }\n\n  private updateVertexBuffersPoints(\n    projectedGeoToClipHomogeneousTransform: HomogeneousTransform\n  ) {\n    if (!this.pointsVao) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.pointsProgram\n    gl.bindVertexArray(this.pointsVao)\n\n    this.setPointLayers()\n\n    const clipPoints = this.pointLayers\n      .reduce(\n        (accumulator: Point[], pointLayer) =>\n          accumulator.concat(pointLayer.projectedGeoPoints),\n        []\n      )\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipPoints.flat()),\n      2,\n      'a_clipPoint'\n    )\n\n    const clipPreviousPoints = this.pointLayers\n      .reduce(\n        (accumulator: Point[], pointLayer) =>\n          accumulator.concat(\n            pointLayer.projectedGeoPreviousPoints ||\n              pointLayer.projectedGeoPoints\n          ),\n        []\n      )\n      .map((point) =>\n        applyHomogeneousTransform(projectedGeoToClipHomogeneousTransform, point)\n      )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(clipPreviousPoints.flat()),\n      2,\n      'a_clipPreviousPoint'\n    )\n\n    const viewportSizes = this.pointLayers.reduce(\n      (accumulator: number[], pointLayer) =>\n        accumulator.concat(\n          pointLayer.projectedGeoPoints.map(\n            (_projectedGeoPoint) =>\n              pointLayer.viewportSize ??\n              defaultRenderPointLayerOptions.viewportSize\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(viewportSizes),\n      1,\n      'a_viewportSize'\n    )\n\n    const colors = this.pointLayers.reduce(\n      (accumulator: number[][], pointLayer) =>\n        accumulator.concat(\n          pointLayer.projectedGeoPoints.map((_projectedGeoPoint) =>\n            hexToFractionalOpaqueRgba(\n              pointLayer.color ?? defaultRenderPointLayerOptions.color\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(gl, program, new Float32Array(colors.flat()), 4, 'a_color')\n\n    const viewportBorderSizes = this.pointLayers.reduce(\n      (accumulator: number[], pointLayer) =>\n        accumulator.concat(\n          pointLayer.projectedGeoPoints.map(\n            (_projectedGeoPoint) =>\n              pointLayer.viewportBorderSize ??\n              defaultRenderPointLayerOptions.viewportBorderSize\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(viewportBorderSizes),\n      1,\n      'a_viewportBorderSize'\n    )\n\n    const borderColors = this.pointLayers.reduce(\n      (accumulator: number[][], pointLayer) =>\n        accumulator.concat(\n          pointLayer.projectedGeoPoints.map((_projectedGeoPoint) =>\n            hexToFractionalOpaqueRgba(\n              pointLayer.borderColor ??\n                defaultRenderPointLayerOptions.borderColor\n            )\n          )\n        ),\n      []\n    )\n    createBuffer(\n      gl,\n      program,\n      new Float32Array(borderColors.flat()),\n      4,\n      'a_borderColor'\n    )\n  }\n\n  private async updateTextures() {\n    const gl = this.gl\n\n    // Find out which tiles to include in texture\n    this.updateCachedTilesForTextures()\n\n    // Don't update if same request is (non-null) subset of previous request\n    // This reduces (expensive) texture updates when just reducing the number of tiles\n    // (But keeps them when all tiles are gone to free up texture)\n    // And blocking updates on equal requests is important to\n    // prevent triggering an infinite loop\n    // caused by the TEXTURESUPDATED event at the end\n    if (\n      this.cachedTilesForTexture.length !== 0 &&\n      subSetArray(\n        this.previousCachedTilesForTexture.map(\n          (textureTile) => textureTile.tileUrl\n        ),\n        this.cachedTilesForTexture.map((textureTile) => textureTile.tileUrl)\n      )\n    ) {\n      return\n    }\n\n    // Cached tiles texture array\n\n    const requiredTextureWidth = Math.max(\n      ...this.parsedImage.tileZoomLevels.map((size) => size.width)\n    )\n    const requiredTextureHeigt = Math.max(\n      ...this.parsedImage.tileZoomLevels.map((size) => size.height)\n    )\n    const requiredTextureDepth = this.cachedTilesForTexture.length\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4)\n    gl.bindTexture(gl.TEXTURE_2D_ARRAY, this.cachedTilesTextureArray)\n\n    gl.texImage3D(\n      gl.TEXTURE_2D_ARRAY,\n      0,\n      gl.RGBA,\n      requiredTextureWidth,\n      requiredTextureHeigt,\n      requiredTextureDepth,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null\n    )\n\n    for (let i = 0; i < this.cachedTilesForTexture.length; i++) {\n      const imageData = this.cachedTilesForTexture[i].data\n\n      const pbo = gl.createBuffer()\n      gl.bindBuffer(gl.PIXEL_UNPACK_BUFFER, pbo)\n      gl.bufferData(gl.PIXEL_UNPACK_BUFFER, imageData.data, gl.STATIC_DRAW)\n\n      gl.texSubImage3D(\n        gl.TEXTURE_2D_ARRAY,\n        0,\n        0,\n        0,\n        i,\n        imageData.width,\n        imageData.height,\n        1,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        0\n      )\n\n      gl.bindBuffer(gl.PIXEL_UNPACK_BUFFER, null)\n    }\n\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    // Cached tiles resource origin points and dimensions texture\n\n    const cachedTilesResourceOriginPointsAndDimensions =\n      this.cachedTilesForTexture.map((textureTile) => {\n        if (\n          textureTile &&\n          textureTile.imageRequest &&\n          textureTile.imageRequest.region\n        ) {\n          return [\n            textureTile.imageRequest.region.x,\n            textureTile.imageRequest.region.y,\n            textureTile.imageRequest.region.width,\n            textureTile.imageRequest.region.height\n          ]\n        }\n      }) as number[][]\n\n    gl.bindTexture(\n      gl.TEXTURE_2D,\n      this.cachedTilesResourceOriginPointsAndDimensionsTexture\n    )\n\n    // A previous verions used gl.RGBA_INTEGER as this texture's format\n    // However, this seemed to cause Chrome to crash on some systems while\n    // zooming in and out. Using gl.RED_INTEGER and multiplying the width by 4\n    // to account for the 4 values per tile seems to fix the issue.\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.R32I,\n      1,\n      this.cachedTilesForTexture.length * 4,\n      0,\n      gl.RED_INTEGER,\n      gl.INT,\n      new Int32Array(cachedTilesResourceOriginPointsAndDimensions.flat())\n    )\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    // Cached tiles scale factors texture\n\n    const cachedTilesScaleFactors = this.cachedTilesForTexture.map(\n      (textureTile) => textureTile.tile.tileZoomLevel.scaleFactor\n    )\n\n    gl.bindTexture(gl.TEXTURE_2D, this.cachedTilesScaleFactorsTexture)\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.R32I,\n      1,\n      this.cachedTilesForTexture.length,\n      0,\n      gl.RED_INTEGER,\n      gl.INT,\n      new Int32Array(cachedTilesScaleFactors)\n    )\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.TEXTURESUPDATED))\n  }\n\n  private updateCachedTilesForTextures() {\n    // Select tiles form tileCache that should be included in the texture\n    const cachedTiles = []\n    const cachedTilesAtOtherScaleFactors = []\n    const overviewCachedTiles = []\n\n    // Try to include tiles that were requested\n    for (const fetchableTile of this.fetchableTilesForViewport) {\n      const cachedTile = this.cachedTilesByTileUrl.get(fetchableTile.tileUrl)\n      if (cachedTile) {\n        // If they are available, include them\n        cachedTiles.push(cachedTile)\n      } else {\n        // If they are not available, include their parents or children if they are available\n        for (const cachedTile of this.getCachedTilesAtOtherScaleFactors(\n          fetchableTile.tile\n        )) {\n          cachedTilesAtOtherScaleFactors.push(cachedTile)\n        }\n      }\n    }\n\n    // Try to include tiles that are at overview zoomlevel\n    for (const fetchableTile of this.overviewFetchableTilesForViewport) {\n      const cachedTile = this.cachedTilesByTileUrl.get(fetchableTile.tileUrl)\n      if (cachedTile) {\n        // If they are available, consider to include them\n        const tileZoolLevelTilesCount = this.tileZoomLevelForViewport\n          ? this.tileZoomLevelForViewport.rows *\n            this.tileZoomLevelForViewport.columns\n          : undefined\n        // If this map's cached tiles don't already cover the entire zoomlevel\n        if (\n          cachedTiles.length === 0 ||\n          (tileZoolLevelTilesCount &&\n            cachedTiles.length < tileZoolLevelTilesCount)\n        ) {\n          overviewCachedTiles.push(cachedTile)\n        }\n      }\n    }\n\n    let cachedTilesForTextures = [\n      ...cachedTiles,\n      ...cachedTilesAtOtherScaleFactors,\n      ...overviewCachedTiles\n    ]\n\n    // Making tiles unique by tileUrl\n    const cachedTilesForTexturesByTileUrl: Map<\n      string,\n      CachedTile<ImageData>\n    > = new Map()\n    cachedTilesForTextures.forEach((cachedTile) =>\n      cachedTilesForTexturesByTileUrl.set(cachedTile.tileUrl, cachedTile)\n    )\n    cachedTilesForTextures = [...cachedTilesForTexturesByTileUrl.values()]\n\n    this.previousCachedTilesForTexture = this.cachedTilesForTexture\n    this.cachedTilesForTexture = cachedTilesForTextures\n\n    return\n  }\n\n  private getCachedTilesAtOtherScaleFactors(\n    tile: Tile\n  ): CachedTile<ImageData>[] {\n    if (this.cachedTilesByTileUrl.size === 0) {\n      return []\n    }\n    if (!this.tileZoomLevelForViewport) {\n      return []\n    }\n\n    const cachedTiles = []\n    for (tile of getTilesAtOtherScaleFactors(\n      tile,\n      this.parsedImage,\n      this.tileZoomLevelForViewport.scaleFactor,\n      TEXTURES_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF,\n      TEXTURES_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF,\n      this.tileInCachedTiles.bind(this) // Only consider tiles in cache,\n    )) {\n      const cachedTile = this.tileToCachedTile(tile)\n      if (cachedTile) {\n        cachedTiles.push(cachedTile)\n      } else {\n        throw new Error(\"Tile supposed to be in cache isn't.\")\n      }\n    }\n\n    return cachedTiles\n  }\n\n  // Lookup by tileKey (zoomlevel, row, column) instead of tileUrl\n  // Because computing the tileUrl for every tile is expensive\n  private tileToCachedTile(tile: Tile): CachedTile<ImageData> | undefined {\n    return this.cachedTilesByTileKey.get(tileKey(tile))\n  }\n\n  private tileInCachedTiles(tile: Tile): boolean {\n    return this.cachedTilesByTileKey.has(tileKey(tile))\n  }\n}\n", "import { FetchableTile } from './FetchableTile.js'\n\nimport type { Tile, ImageRequest, FetchFn } from '@allmaps/types'\n\n/**\n * Class for tiles that can be cached.\n */\nexport abstract class CacheableTile<D> extends EventTarget {\n  readonly tile: Tile\n  readonly imageRequest: ImageRequest\n  readonly tileUrl: string\n  readonly tileKey: string\n  readonly fetchFn?: FetchFn\n\n  protected abortController: AbortController\n\n  protected data?: D\n\n  /**\n   * Creates an instance of CacheableTile.\n   *\n   * @constructor\n   * @param fetchableTile\n   * @param fetchFn - Optional fetch function to use\n   */\n  constructor(fetchableTile: FetchableTile, fetchFn?: FetchFn) {\n    super()\n\n    this.tile = fetchableTile.tile\n    this.imageRequest = fetchableTile.imageRequest\n    this.tileUrl = fetchableTile.tileUrl\n    this.tileKey = fetchableTile.tileKey\n    this.fetchFn = fetchFn\n\n    this.abortController = new AbortController()\n  }\n\n  abstract fetch(): Promise<D | undefined>\n\n  /**\n   * Whether a tile has fetched its data\n   *\n   * @returns\n   */\n  isCachedTile(): this is CachedTile<D> {\n    return this.data !== undefined\n  }\n\n  /**\n   * Abort the fetch\n   */\n  abort() {\n    if (!this.abortController.signal.aborted) {\n      this.abortController.abort()\n    }\n  }\n}\n\n/**\n * Class for tiles that are cached, i.e. their data has been fetched and processed\n */\nexport abstract class CachedTile<D> extends CacheableTile<D> {\n  declare data: D\n}\n", "import { proxy as comlinkProxy, type Remote as ComlinkRemote } from 'comlink'\n\nimport { FetchableTile } from './FetchableTile.js'\nimport { CacheableTile } from './CacheableTile.js'\nimport { WarpedMapEvent, WarpedMapEventType } from '../shared/events.js'\n\nimport type { FetchAndGetImageDataWorkerType } from '../workers/fetch-and-get-image-data.js'\n\nimport type { FetchFn } from '@allmaps/types'\n\n/**\n * Class for tiles that can be cached, and whose data can be processed to its imageData using a WebWorker.\n */\nexport class CacheableWorkerImageDataTile extends CacheableTile<ImageData> {\n  #worker: ComlinkRemote<FetchAndGetImageDataWorkerType>\n\n  constructor(\n    fetchableTile: FetchableTile,\n    worker: ComlinkRemote<FetchAndGetImageDataWorkerType>,\n    fetchFn?: FetchFn\n  ) {\n    super(fetchableTile, fetchFn)\n    this.#worker = worker\n  }\n\n  /**\n   * Fetch the tile and create its ImageData using a WebWorker.\n   *\n   * @returns\n   */\n  async fetch() {\n    try {\n      this.#worker\n        .getImageData(\n          this.tileUrl,\n          comlinkProxy(() => this.abortController.abort()),\n          this.fetchFn,\n          this.tile.tileZoomLevel.width,\n          this.tile.tileZoomLevel.height\n        )\n        .then((response) => {\n          this.data = response\n          this.dispatchEvent(\n            new WarpedMapEvent(WarpedMapEventType.TILEFETCHED, this.tileUrl)\n          )\n        })\n        .catch((err) => {\n          if (err instanceof Error && err.name === 'AbortError') {\n            console.log('Fetch aborted') // Handle the abort error\n          } else {\n            console.error(err) // Handle other errors\n          }\n        })\n    } catch (err) {\n      if (err instanceof Error && err.name === 'AbortError') {\n        // fetchImage was aborted because viewport was moved and tile\n        // is no longer needed. This error can be ignored, nothing to do.\n      } else {\n        this.dispatchEvent(\n          new WarpedMapEvent(WarpedMapEventType.TILEFETCHERROR, this.tileUrl)\n        )\n      }\n    }\n\n    return this.data\n  }\n\n  static createFactory(worker: ComlinkRemote<FetchAndGetImageDataWorkerType>) {\n    return (fetchableTile: FetchableTile, fetchFn?: FetchFn) =>\n      new CacheableWorkerImageDataTile(fetchableTile, worker, fetchFn)\n  }\n}\n\n/**\n * Class for tiles that is cached, and whose data has been processed to an ImageData object using a WebWorker.\n */\nexport class CachedWorkerImageDataTile extends CacheableWorkerImageDataTile {\n  declare data: ImageData\n}\n", "import {\n  computeBbox,\n  bboxToCenter,\n  bboxToRectangle,\n  bboxToSize,\n  sizesToScale,\n  bufferBboxByRatio,\n  scaleSize,\n  rotatePoints,\n  translatePoints,\n  sizeToResolution,\n  sizeToBbox,\n  sizeToCenter,\n  scalePoint,\n  sizeToRectangle,\n  midPoint,\n  scalePoints,\n  rotatePoint,\n  mergeOptions\n} from '@allmaps/stdlib'\nimport {\n  lonLatProjection,\n  webMercatorProjection,\n  proj4\n} from '@allmaps/project'\n\nimport {\n  composeHomogeneousTransform,\n  applyHomogeneousTransform,\n  invertHomogeneousTransform\n} from '../shared/homogeneous-transform.js'\nimport { WarpedMapList } from '../maps/WarpedMapList.js'\n\nimport type {\n  Point,\n  Rectangle,\n  Size,\n  Bbox,\n  HomogeneousTransform,\n  Fit,\n  Polygon\n} from '@allmaps/types'\n\nimport type { Projection } from '@allmaps/project'\n\nimport type { WarpedMap } from '../maps/WarpedMap.js'\nimport type { ProjectionOptions, SelectionOptions } from '../shared/types.js'\n\nexport type ViewportOptions = {\n  rotation: number\n  devicePixelRatio: number\n} & ProjectionOptions\n\nexport type ZoomOptions = {\n  zoom: number\n}\n\nexport type FitOptions = {\n  fit: Fit\n}\n\nconst defaultViewportOptions = {\n  rotation: 0,\n  devicePixelRatio: 1,\n  projection: webMercatorProjection\n} as ViewportOptions\n\nconst defaultZoomOptions = {\n  zoom: 1\n} as ZoomOptions\n\nconst defaultFitOptions = {\n  fit: 'contain'\n} as FitOptions\n\n/**\n * The viewport describes the view on the rendered map.\n * @property geoCenter - Center point of the viewport, in longitude/latitude coordinates.\n * @property geoRectangle - Rotated rectangle (possibly quadrilateral) of the viewport point, in longitude/latitude coordinates.\n * @property geoSize - Size of the viewport in longitude/latitude coordinates, as [width, height]. (This is the size of the bounding box of the rectangle, since longitude/latitude only makes sense in that case).\n * @property geoResolution - Resolution of the viewport in longitude/latitude coordinates, as width * height. (This is the size of the bounding box of the rectangle, since longitude/latitude only makes sense in that case).\n * @property geoRectangleBbox - Bounding box of the rotated rectangle of the viewport, in longitude/latitude coordinates.\n * @property projectedGeoCenter - Center point of the viewport, in projected geospatial coordinates.\n * @property projectedGeoRectangle - Rotated rectangle of the viewport point, in projected geospatial coordinates.\n * @property projectedGeoSize - Size of the viewport in projected geospatial coordinates, as [width, height]. (This is not the size of the bounding box of the rotated rectangle, but the width and hight of the rectangle).\n * @property projectedGeoResolution - Resolution of the viewport in projected geospatial coordinates, as width * height. (This is not the size of the bounding box of the rotated rectangle, but the width and hight of the rectangle).\n * @property projectedGeoRectangleBbox - Bounding box of the rotated rectangle of the viewport, in projected geospatial coordinates.\n * @property rotation - Rotation of the viewport with respect to the projected coordinate system.\n * @property projectedGeoPerViewportScale - Scale of the viewport, in projected geospatial coordinates per viewport pixel.\n * @property viewportCenter - Center point of the viewport, in viewport pixels.\n * @property viewportRectangle - Rectangle of the viewport point, in viewport pixels.\n * @property viewportSize - Size of the viewport in viewport pixels, as [width, height].\n * @property viewportResolution - Resolution of the viewport in viewport pixels, as width * height.\n * @property viewportBbox - Bounding box of the viewport, in viewport pixels.\n * @property devicePixelRatio - The devicePixelRatio of the viewport.\n * @property canvasCenter - Center point of the canvas, in canvas pixels.\n * @property canvasRectangle - Rectangle of the canvas, in canvas pixels.\n * @property canvasSize - Size of the canvas in canvas pixels (viewportSize*devicePixelRatio), as [width, height].\n * @property canvasResolution - Resolution of the canvas in canvas pixels (viewportSize*devicePixelRatio), as width * height.\n * @property canvasBbox - Bounding box of the canvas, in canvas pixels.\n * @property projectedGeoPerCanvasScale - Scale of the viewport, in projected geospatial coordinates per canvas pixel (projectedGeoPerViewportScale/devicePixelRatio).\n * @property projectedGeoToViewportHomogeneousTransform - Homogeneous Transform from projected geo coordinates to viewport pixels. Equivalent to OpenLayers coordinateToPixelTransform.\n * @property projectedGeoToCanvasHomogeneousTransform - Homogeneous Transform from projected geo coordinates to canvas pixels.\n * @property projectedGeoToClipHomogeneousTransform - Homogeneous Transform from projected geo coordinates to WebGL coordinates in the [-1, 1] range. Equivalent to OpenLayers projectionTransform.\n * @property viewportToClipHomogeneousTransform - Homogeneous Transform from viewport coordinates to WebGL coordinates in the [-1, 1] range.\n */\nexport class Viewport {\n  geoCenter: Point\n  geoRectangle: Rectangle\n  geoSize: Size\n  geoResolution: number\n  geoRectangleBbox: Bbox\n\n  projection: Projection\n\n  projectedGeoCenter: Point\n  projectedGeoRectangle: Rectangle\n  projectedGeoSize: Size\n  projectedGeoResolution: number\n  projectedGeoRectangleBbox: Bbox\n\n  rotation: number\n  projectedGeoPerViewportScale: number\n\n  viewportCenter: Point\n  viewportRectangle: Rectangle\n  viewportSize: Size\n  viewportResolution: number\n  viewportBbox: Bbox\n\n  devicePixelRatio: number\n  canvasCenter: Point\n  canvasRectangle: Rectangle\n  canvasSize: Size\n  canvasResolution: number\n  canvasBbox: Bbox\n\n  projectedGeoPerCanvasScale: number\n  projectedGeoToViewportHomogeneousTransform: HomogeneousTransform = [\n    1, 0, 0, 1, 0, 0\n  ]\n  projectedGeoToCanvasHomogeneousTransform: HomogeneousTransform = [\n    1, 0, 0, 1, 0, 0\n  ]\n  projectedGeoToClipHomogeneousTransform: HomogeneousTransform = [\n    1, 0, 0, 1, 0, 0\n  ]\n  viewportToClipHomogeneousTransform: HomogeneousTransform = [1, 0, 0, 1, 0, 0]\n\n  /**\n   * Creates a new Viewport\n   *\n   * @constructor\n   * @param viewportSize - Size of the viewport in viewport pixels, as [width, height].\n   * @param projectedGeoCenter - Center point of the viewport, in projected geospatial coordinates.\n   * @param projectedGeoPerViewportScale - Scale of the viewport, in projection coordinates per viewport pixel.\n   * @param rotation - Rotation of the viewport with respect to the projected geo coordinate system. Positive values rotate the viewport positively (i.e. counter-clockwise) w.r.t. the map in projected geospatial coordinates. This is equivalent to rotating the map negatively (i.e. clockwise) within the viewport.\n   * @param devicePixelRatio - The devicePixelRatio of the viewport.\n   * @param projection - The projection the projected coordinates are in .\n   */\n  constructor(\n    viewportSize: Size,\n    projectedGeoCenter: Point,\n    projectedGeoPerViewportScale: number,\n    partialViewportOptions?: Partial<ViewportOptions>\n  ) {\n    const viewportOptions = mergeOptions(\n      defaultViewportOptions,\n      partialViewportOptions\n    )\n\n    this.projectedGeoCenter = projectedGeoCenter\n    this.projectedGeoPerViewportScale = projectedGeoPerViewportScale\n    this.rotation = viewportOptions.rotation\n    this.viewportSize = [\n      Math.round(viewportSize[0]),\n      Math.round(viewportSize[1])\n    ] // Note: assure integer values for viewport size, so they can be stored in arrays\n    this.devicePixelRatio = viewportOptions.devicePixelRatio\n\n    this.projection = viewportOptions.projection\n\n    this.projectedGeoRectangle = this.computeProjectedGeoRectangle(\n      this.viewportSize,\n      this.projectedGeoPerViewportScale,\n      this.rotation,\n      this.projectedGeoCenter\n    )\n    this.projectedGeoRectangleBbox = computeBbox(this.projectedGeoRectangle)\n    this.projectedGeoSize = scaleSize(\n      this.viewportSize,\n      projectedGeoPerViewportScale\n    )\n    this.projectedGeoResolution = sizeToResolution(this.projectedGeoSize)\n\n    // TODO: improve this with an interpolated back-projection, resulting in a ring\n    this.geoRectangle = this.projectedGeoRectangle.map((point) => {\n      return proj4(\n        this.projection.definition,\n        lonLatProjection.definition,\n        point\n      )\n    }) as Rectangle\n    this.geoRectangleBbox = computeBbox(this.geoRectangle)\n    this.geoCenter = bboxToCenter(this.geoRectangleBbox)\n    this.geoSize = bboxToSize(this.geoRectangleBbox)\n    this.geoResolution = sizeToResolution(this.geoSize)\n\n    this.viewportResolution = sizeToResolution(this.viewportSize)\n    this.viewportCenter = sizeToCenter(this.viewportSize)\n    this.viewportBbox = sizeToBbox(this.viewportSize)\n    this.viewportRectangle = bboxToRectangle(this.viewportBbox)\n\n    this.canvasCenter = scalePoint(this.viewportCenter, this.devicePixelRatio)\n    this.canvasSize = scaleSize(this.viewportSize, this.devicePixelRatio)\n    this.canvasResolution = sizeToResolution(this.canvasSize)\n    this.canvasBbox = sizeToBbox(this.canvasSize)\n    this.canvasRectangle = bboxToRectangle(this.canvasBbox)\n\n    this.projectedGeoPerCanvasScale =\n      this.projectedGeoPerViewportScale / this.devicePixelRatio\n\n    this.projectedGeoToViewportHomogeneousTransform =\n      this.composeProjectedGeoToViewportHomogeneousTransform()\n    this.projectedGeoToCanvasHomogeneousTransform =\n      this.composeProjectedGeoToCanvasHomogeneousTransform()\n    this.projectedGeoToClipHomogeneousTransform =\n      this.composeProjectedGeoToClipHomogeneousTransform()\n    this.viewportToClipHomogeneousTransform =\n      this.composeViewportToClipHomogeneousTransform()\n  }\n\n  /**\n   * Static method that creates a Viewport from a size and maps.\n   *\n   * Optionally specify a projection, to be used both when obtaining the extent of selected warped maps in projected geospatial coordinates, as well as when create a viewport\n   *\n   * @param viewportSize - Size of the viewport in viewport pixels, as [width, height].\n   * @param warpedMapList - A WarpedMapList.\n   * @param partialExtendedViewportOptions - Optional viewport options\n   * @returns A new Viewport object.\n   */\n  static fromSizeAndMaps<W extends WarpedMap>(\n    viewportSize: Size,\n    warpedMapList: WarpedMapList<W>,\n    partialExtendedViewportOptions?: Partial<\n      ViewportOptions & ZoomOptions & FitOptions & SelectionOptions\n    >\n  ): Viewport {\n    const projectedGeoConvexHull = warpedMapList.getMapsConvexHull(\n      partialExtendedViewportOptions\n    )\n\n    if (!projectedGeoConvexHull) {\n      throw new Error(\n        'Maps have no projected convex hull. Possibly because WarpedMapList or Array is empty.'\n      )\n    }\n\n    return this.fromSizeAndProjectedGeoPolygon(\n      viewportSize,\n      [projectedGeoConvexHull],\n      partialExtendedViewportOptions\n    )\n  }\n\n  /**\n   * Static method that creates a Viewport from a size and a polygon in geospatial coordinates, i.e. lon-lat `EPSG:4326`.\n   *\n   * @static\n   * @param viewportSize - Size of the viewport in viewport pixels, as [width, height].\n   * @param geoPolygon - A polygon in geospatial coordinates.\n   * @param partialExtendedViewportOptions - Optional viewport options\n   * @returns A new Viewport object.\n   */\n  static fromSizeAndGeoPolygon(\n    viewportSize: Size,\n    geoPolygon: Polygon,\n    partialExtendedViewportOptions?: Partial<\n      ViewportOptions & ZoomOptions & FitOptions\n    >\n  ): Viewport {\n    const extendedViewportOptions = mergeOptions(\n      {\n        ...defaultViewportOptions,\n        ...defaultZoomOptions,\n        ...defaultFitOptions\n      },\n      partialExtendedViewportOptions\n    )\n\n    const projectedGeoPolygon = geoPolygon.map((ring) =>\n      ring.map((point) =>\n        proj4(extendedViewportOptions.projection.definition, point)\n      )\n    )\n\n    return this.fromSizeAndProjectedGeoPolygon(\n      viewportSize,\n      projectedGeoPolygon,\n      partialExtendedViewportOptions\n    )\n  }\n\n  /**\n   * Static method that creates a Viewport from a size and a polygon in projected geospatial coordinates.\n   *\n   * @static\n   * @param viewportSize - Size of the viewport in viewport pixels, as [width, height].\n   * @param projectedGeoPolygon - A polygon in projected geospatial coordinates.\n   * @param partialExtendedViewportOptions - Optional viewport options\n   * @returns A new Viewport object.\n   */\n  static fromSizeAndProjectedGeoPolygon(\n    viewportSize: Size,\n    projectedGeoPolygon: Polygon,\n    partialExtendedViewportOptions?: Partial<\n      ViewportOptions & ZoomOptions & FitOptions\n    >\n  ): Viewport {\n    const extendedViewportOptions = mergeOptions(\n      {\n        ...defaultViewportOptions,\n        ...defaultZoomOptions,\n        ...defaultFitOptions\n      },\n      partialExtendedViewportOptions\n    )\n\n    const projectedGeoRing = projectedGeoPolygon[0]\n    const rotatedProjectedGeoRing = rotatePoints(\n      projectedGeoRing,\n      -extendedViewportOptions.rotation\n    )\n    const rotatedProjectedGeoBbox = computeBbox(rotatedProjectedGeoRing)\n    const rotatedProjectedGeoSize = bboxToSize(rotatedProjectedGeoBbox)\n    const rotatedProjectedGeoCenter = bboxToCenter(rotatedProjectedGeoBbox)\n    const projectedGeoPerViewportScale = sizesToScale(\n      rotatedProjectedGeoSize,\n      viewportSize,\n      extendedViewportOptions.fit\n    )\n\n    const projectedGeoCenter = rotatePoint(\n      rotatedProjectedGeoCenter,\n      extendedViewportOptions.rotation\n    )\n\n    return new Viewport(\n      viewportSize,\n      projectedGeoCenter,\n      projectedGeoPerViewportScale * extendedViewportOptions.zoom,\n      extendedViewportOptions\n    )\n  }\n\n  /**\n   * Static method that creates a Viewport from a scale and maps.\n   *\n   * Optionally specify a projection, to be used both when obtaining the extent of selected warped maps in projected geospatial coordinates, as well as when create a viewport\n   *\n   * @param projectedGeoPerViewportScale - Scale of the viewport, in projected geospatial coordinates per viewport pixel.\n   * @param warpedMapList - A WarpedMapList.\n   * @param partialExtendedViewportOptions - Optional viewport options.\n   * @returns A new Viewport object.\n   */\n  static fromScaleAndMaps<W extends WarpedMap>(\n    projectedGeoPerViewportScale: number,\n    warpedMapList: WarpedMapList<W>,\n    partialExtendedViewportOptions?: Partial<\n      ViewportOptions & ZoomOptions & SelectionOptions\n    >\n  ): Viewport {\n    const projectedGeoConvexHull = warpedMapList.getMapsConvexHull(\n      partialExtendedViewportOptions\n    )\n\n    if (!projectedGeoConvexHull) {\n      throw new Error(\n        'Maps have no projected convex hull. Possibly because WarpedMapList or Array is empty.'\n      )\n    }\n\n    return this.fromScaleAndProjectedGeoPolygon(\n      projectedGeoPerViewportScale,\n      [projectedGeoConvexHull],\n      partialExtendedViewportOptions\n    )\n  }\n\n  /**\n   * Static method that creates a Viewport from a scale and a polygon in geospatial coordinates, i.e. lon-lat `EPSG:4326`.\n   *\n   * Note: the scale is still in *projected* geospatial per viewport pixel!\n   *\n   * @param projectedGeoPerViewportScale - Scale of the viewport, in projected geospatial coordinates per viewport pixel.\n   * @param geoPolygon - A polygon in geospatial coordinates.\n   * @param partialViewportOptions - Optional viewport options.\n   * @returns A new Viewport object.\n   */\n  static fromScaleAndGeoPolygon(\n    projectedGeoPerViewportScale: number,\n    geoPolygon: Polygon,\n    partialExtendedViewportOptions?: Partial<ViewportOptions & ZoomOptions>\n  ): Viewport {\n    const extendedViewportOptions = mergeOptions(\n      {\n        ...defaultViewportOptions,\n        ...defaultZoomOptions,\n        ...defaultFitOptions\n      },\n      partialExtendedViewportOptions\n    )\n\n    const projectedGeoPolygon = geoPolygon.map((ring) =>\n      ring.map((point) =>\n        proj4(extendedViewportOptions.projection.definition, point)\n      )\n    )\n\n    return this.fromScaleAndProjectedGeoPolygon(\n      projectedGeoPerViewportScale,\n      projectedGeoPolygon,\n      partialExtendedViewportOptions\n    )\n  }\n\n  /**\n   * Static method that creates a Viewport from a scale and a polygon in projected geospatial coordinates.\n   *\n   * @param projectedGeoPerViewportScale - Scale of the viewport, in projected geospatial coordinates per viewport pixel.\n   * @param projectedGeoPolygon - A polygon in projected geospatial coordinates.\n   * @param partialViewportOptions - Optional viewport options.\n   * @returns A new Viewport object.\n   */\n  static fromScaleAndProjectedGeoPolygon(\n    projectedGeoPerViewportScale: number,\n    projectedGeoPolygon: Polygon,\n    partialExtendedViewportOptions?: Partial<ViewportOptions & ZoomOptions>\n  ): Viewport {\n    const extendedViewportOptions = mergeOptions(\n      {\n        ...defaultViewportOptions,\n        ...defaultZoomOptions\n      },\n      partialExtendedViewportOptions\n    )\n\n    const projectedGeoRing = projectedGeoPolygon[0]\n    const viewportRing = scalePoints(\n      rotatePoints(projectedGeoRing, -extendedViewportOptions.rotation),\n      1 / projectedGeoPerViewportScale\n    )\n    const viewportBbox = computeBbox(viewportRing)\n    const viewportSize = bboxToSize(viewportBbox)\n    const viewportCenter = bboxToCenter(viewportBbox)\n    const projectedGeoCenter = rotatePoint(\n      scalePoint(viewportCenter, projectedGeoPerViewportScale),\n      extendedViewportOptions.rotation\n    )\n\n    return new Viewport(\n      viewportSize,\n      projectedGeoCenter,\n      projectedGeoPerViewportScale * extendedViewportOptions.zoom,\n      extendedViewportOptions\n    )\n  }\n\n  getProjectedGeoBufferedRectangle(bufferFraction: number): Rectangle {\n    const viewportBufferedBbox = bufferBboxByRatio(\n      this.viewportBbox,\n      bufferFraction\n    )\n    const viewportBufferedRectangle = bboxToRectangle(viewportBufferedBbox)\n    return viewportBufferedRectangle.map((point) =>\n      applyHomogeneousTransform(\n        invertHomogeneousTransform(\n          this.projectedGeoToViewportHomogeneousTransform\n        ),\n        point\n      )\n    ) as Rectangle\n  }\n\n  private composeProjectedGeoToViewportHomogeneousTransform(): HomogeneousTransform {\n    return composeHomogeneousTransform(\n      this.viewportCenter[0],\n      this.viewportCenter[1],\n      1 / this.projectedGeoPerViewportScale,\n      -1 / this.projectedGeoPerViewportScale, // '-' for handedness\n      -this.rotation,\n      -this.projectedGeoCenter[0],\n      -this.projectedGeoCenter[1]\n    )\n  }\n\n  private composeProjectedGeoToCanvasHomogeneousTransform(): HomogeneousTransform {\n    return composeHomogeneousTransform(\n      this.canvasCenter[0],\n      this.canvasCenter[1],\n      1 / this.projectedGeoPerCanvasScale,\n      -1 / this.projectedGeoPerCanvasScale, // '-' for handedness\n      -this.rotation,\n      -this.projectedGeoCenter[0],\n      -this.projectedGeoCenter[1]\n    )\n  }\n\n  private composeProjectedGeoToClipHomogeneousTransform(): HomogeneousTransform {\n    return composeHomogeneousTransform(\n      0,\n      0,\n      2 / (this.projectedGeoPerViewportScale * this.viewportSize[0]),\n      2 / (this.projectedGeoPerViewportScale * this.viewportSize[1]),\n      -this.rotation,\n      -this.projectedGeoCenter[0],\n      -this.projectedGeoCenter[1]\n    )\n  }\n\n  private composeViewportToClipHomogeneousTransform(): HomogeneousTransform {\n    return composeHomogeneousTransform(\n      0,\n      0,\n      2 / this.viewportSize[0],\n      -2 / this.viewportSize[1], // '-' for handedness\n      0,\n      -this.viewportCenter[0],\n      -this.viewportCenter[1]\n    )\n  }\n\n  /**\n   * Returns a rectangle in projected geospatial coordinates\n   *\n   * The rectangle is the result of a horizontal rectangle in Viewport space of size 'viewportSize',\n   * scaled using projectedGeoPerViewportScale, centered,\n   * rotated using 'rotation' and translated to 'projectedGeoCenter'.\n   *\n   * @private\n   * @param viewportSize\n   * @param projectedGeoPerViewportScale\n   * @param rotation\n   * @param projectedGeoCenter\n   */\n  private computeProjectedGeoRectangle(\n    viewportSize: Size,\n    projectedGeoPerViewportScale: number,\n    rotation: number,\n    projectedGeoCenter: Point\n  ): Rectangle {\n    const scaled = scaleSize(viewportSize, projectedGeoPerViewportScale)\n    const rectangle = sizeToRectangle(scaled)\n    const centered = translatePoints(\n      rectangle,\n      midPoint(...rectangle),\n      'substract'\n    ) as Rectangle\n    const rotated = rotatePoints(centered, rotation) as Rectangle\n    const translated = translatePoints(rotated, projectedGeoCenter) as Rectangle\n\n    return translated\n  }\n}\n", "#version 300 es\n\nprecision highp float;\n\n#include ../helpers.frag;\n\nuniform mat4 u_renderHomogeneousTransform;\nuniform float u_animationProgress;\n\nin vec2 a_resourceTrianglePoint;\nin vec2 a_clipPreviousTrianglePoint;\nin vec2 a_clipTrianglePoint;\nin float a_previousTrianglePointDistortion;\nin float a_trianglePointDistortion;\nin float a_trianglePointIndex;\n\nout vec2 v_resourceTrianglePoint;\nout float v_trianglePointDistortion;\nout float v_trianglePointIndex;\nout vec4 v_trianglePointBarycentric;\n\nvoid main() {\n  // Mixing previous and new triangle points\n  vec2 clipTrianglePoint = mix(a_clipPreviousTrianglePoint, a_clipTrianglePoint, easing(u_animationProgress));\n  float trianglePointDistortion = mix(a_previousTrianglePointDistortion, a_trianglePointDistortion, easing(u_animationProgress));\n\n  // Set triangle points coordinates\n  // Variables that start with gl_ are special global variables\n  // gl_Position stores the vertex (or 'point') positions (or 'coordinates') in clip coordinates (which go from -1 to 1.)\n\n  gl_Position = u_renderHomogeneousTransform * vec4(clipTrianglePoint, 0.0f, 1.0f);\n\n  // Pass attributes as varyings to fragment shader\n  v_resourceTrianglePoint = a_resourceTrianglePoint;\n  v_trianglePointDistortion = trianglePointDistortion;\n  v_trianglePointIndex = a_trianglePointIndex;\n\n  float trianglePointLocalIndex = mod(a_trianglePointIndex, 3.0f);\n  if(trianglePointLocalIndex == 0.0f)\n    v_trianglePointBarycentric = vec4(1.0f, 0, 0, 1.0f);\n  if(trianglePointLocalIndex == 1.0f)\n    v_trianglePointBarycentric = vec4(0.0f, 1.0f, 0, 1.0f);\n  if(trianglePointLocalIndex == 2.0f)\n    v_trianglePointBarycentric = vec4(0.0f, 0, 1.0f, 1.0f);\n}\n", "#version 300 es\n\nprecision highp float;\nprecision highp isampler2D;\n\n#include ../helpers.frag;\n\nuniform float u_debug;\n\nuniform bool u_removeColor;\nuniform vec3 u_removeColorOptionsColor;\nuniform float u_removeColorOptionsThreshold;\nuniform float u_removeColorOptionsHardness;\n\nuniform bool u_colorize;\nuniform vec3 u_colorizeOptionsColor;\n\nuniform bool u_grid;\n\nuniform float u_opacity;\nuniform float u_saturation;\n\nuniform bool u_distortion;\nuniform int u_distortionOptionsdistortionMeasure;\n\nuniform int u_scaleFactorForViewport;\n\nuniform lowp sampler2DArray u_cachedTilesTextureArray;\nuniform isampler2D u_cachedTilesResourceOriginPointsAndDimensionsTexture;\nuniform isampler2D u_cachedTilesScaleFactorsTexture;\n\nuniform vec4 u_colorDistortion00;\nuniform vec4 u_colorDistortion01;\nuniform vec4 u_colorDistortion1;\nuniform vec4 u_colorDistortion2;\nuniform vec4 u_colorDistortion3;\nuniform vec4 u_colorGrid;\n\nin vec2 v_resourceTrianglePoint;\nin float v_trianglePointDistortion;\nin float v_trianglePointIndex;\nin vec4 v_trianglePointBarycentric;\n\nout vec4 color;\n\nvoid main() {\n  float resourceTrianglePointX = v_resourceTrianglePoint.x;\n  float resourceTrianglePointY = v_resourceTrianglePoint.y;\n\n  // Reading information on cached tiles from textures\n  ivec3 cachedTilesTextureSize = textureSize(u_cachedTilesTextureArray, 0);\n  int cachedTilesCount = cachedTilesTextureSize.z;\n\n  // Setting references for the for loop\n  int smallestScaleFactor;\n  bool found = false;\n  int foundIndex;\n\n  // Prepare storage for the resulting cached tiles texture point that corresponds to the triangle point\n  vec3 cachedTilesTexturePoint = vec3(0.0f, 0.0f, 0.0f);\n\n  // Set the initial values\n  color = vec4(0.0f, 0.0f, 0.0f, 0.0f);\n\n  // Loop through all cached tiles\n  for(int index = 0; index < cachedTilesCount; index += 1) {\n\n    // Read the information of the tile\n    float cachedTileResourceOriginPointX = float(texelFetch(u_cachedTilesResourceOriginPointsAndDimensionsTexture, ivec2(0, (index * 4)), 0));\n    float cachedTileResourceOriginPointY = float(texelFetch(u_cachedTilesResourceOriginPointsAndDimensionsTexture, ivec2(0, (index * 4) + 1), 0));\n    float cachedTileDimensionWidth = float(texelFetch(u_cachedTilesResourceOriginPointsAndDimensionsTexture, ivec2(0, (index * 4) + 2), 0));\n    float cachedTileDimensionHeight = float(texelFetch(u_cachedTilesResourceOriginPointsAndDimensionsTexture, ivec2(0, (index * 4) + 3), 0));\n\n    int cachedTileScaleFactor = texelFetch(u_cachedTilesScaleFactorsTexture, ivec2(0, index), 0).r;\n\n    // If the triangle point is inside the tile, consider to use the tile:\n    if(resourceTrianglePointX >= cachedTileResourceOriginPointX &&\n      resourceTrianglePointX < cachedTileResourceOriginPointX + cachedTileDimensionWidth &&\n      resourceTrianglePointY >= cachedTileResourceOriginPointY &&\n      resourceTrianglePointY < cachedTileResourceOriginPointY + cachedTileDimensionHeight) {\n\n      // If the smallest scale factor currently known is not set yet,\n      // or if the scale factor of this tile is smaller (more detailed) then the scale factor currently known\n      // update the smallest scale factor\n      // and compute the cached tiles texture point that corresponds to the triangle point\n      // Note: we can safely take the most detailed tile, since the depth is limited when we gather texture tiles\n      if(!(smallestScaleFactor > 0) || cachedTileScaleFactor <= smallestScaleFactor) {\n        smallestScaleFactor = cachedTileScaleFactor;\n        found = true;\n        foundIndex = index;\n\n        float cachedTilePointX = (resourceTrianglePointX - cachedTileResourceOriginPointX) / float(cachedTileScaleFactor);\n        float cachedTilePointY = (resourceTrianglePointY - cachedTileResourceOriginPointY) / float(cachedTileScaleFactor);\n\n        float cachedTilesTexturePointX = cachedTilePointX / float(cachedTilesTextureSize.x);\n        float cachedTilesTexturePointY = cachedTilePointY / float(cachedTilesTextureSize.y);\n\n        cachedTilesTexturePoint = vec3(cachedTilesTexturePointX, cachedTilesTexturePointY, index);\n      }\n    }\n  }\n\n  if(found == true) {\n    // Read color of the point at its chached tiles texture point coordinates in the cached tiles texture array\n    color = texture(u_cachedTilesTextureArray, cachedTilesTexturePoint);\n\n    #include post.frag;\n    #include distortion.frag;\n    #include debug.frag;\n  }\n}\n", "#version 300 es\n\nprecision highp float;\n\n#include ../helpers.frag;\n\nuniform mat4 u_renderHomogeneousTransform;\nuniform mat4 u_viewportToClipHomogeneousTransform;\nuniform mat4 u_clipToViewportHomogeneousTransform;\nuniform float u_animationProgress;\n\nin vec2 a_clipPoint;\nin vec2 a_clipOtherPoint;\nin vec2 a_clipPreviousPoint;\nin vec2 a_clipPreviousOtherPoint;\nin float a_isOtherPoint;\nin float a_normalSign;\nin float a_viewportSize;\nin vec4 a_color;\nin float a_viewportBorderSize;\nin vec4 a_borderColor;\n\nout float v_viewportLineLength;\nout vec2 v_linePoint;\nout float v_viewportSize;\nout vec4 v_color;\nout float v_viewportBorderSize;\nout vec4 v_borderColor;\nout float v_viewportFeatherSize;\nout float v_viewportTotalSize;\n\nvoid main() {\n  vec2 clipPoint = mix(a_clipPreviousPoint, a_clipPoint, easing(u_animationProgress));\n  vec2 clipOtherPoint = mix(a_clipPreviousOtherPoint, a_clipOtherPoint, easing(u_animationProgress));\n\n  vec2 viewportPoint = (u_clipToViewportHomogeneousTransform * u_renderHomogeneousTransform * vec4(clipPoint, 0.0f, 1.0f)).xy;\n  vec2 viewportOtherPoint = (u_clipToViewportHomogeneousTransform * u_renderHomogeneousTransform * vec4(clipOtherPoint, 0.0f, 1.0f)).xy;\n\n  vec2 viewportLine = vec2(viewportOtherPoint.x-viewportPoint.x, viewportOtherPoint.y-viewportPoint.y);\n  vec2 viewportNormalizedLine = normalize(viewportLine);\n  vec2 viewportNormalizedLineNormal = vec2(viewportNormalizedLine.y, -viewportNormalizedLine.x);\n  v_viewportLineLength = length(viewportLine);\n\n  v_viewportFeatherSize = 1.0;\n\n  // TODO: figure out why size lines need to be devided by two\n  // to have the same effect as point sizes\n  // this could be related to dpr (but then one would expert multiplication by two?)\n  float viewportSize = a_viewportSize / 2.0;\n  float viewportBorderSize = a_viewportBorderSize / 2.0;\n  v_viewportFeatherSize = v_viewportFeatherSize / 2.0;\n\n  v_viewportTotalSize = viewportSize + viewportBorderSize + v_viewportFeatherSize;\n  float lineX = -1.0 * v_viewportTotalSize / 2.0 + a_isOtherPoint * (v_viewportLineLength + 2.0 * (v_viewportTotalSize / 2.0));\n  float lineY = a_normalSign * v_viewportTotalSize / 2.0;\n  v_linePoint = vec2(lineX, lineY);\n  // The border is centered on the edge of a line with diameter = size\n  // so adding half a border left and half a border right\n  // results in adding a full border to the total size.\n  // Also adding half an outside feather left and half an outside feather right,\n  // which also serves as minimal size.\n  // Note: there seems to be a maximum size of 512? Could be due to graphics card (or Float32Array)?\n\n  v_viewportSize = viewportSize;\n  v_color = a_color;\n  v_viewportBorderSize = viewportBorderSize;\n  v_borderColor = a_borderColor;\n\n  gl_Position =  u_viewportToClipHomogeneousTransform * vec4(viewportPoint + lineX * viewportNormalizedLine + lineY * viewportNormalizedLineNormal, 0, 1);\n}\n", "#version 300 es\n\nprecision highp float;\nprecision highp isampler2D;\n\nin float v_viewportLineLength;\nin vec2 v_linePoint;\nin float v_viewportSize;\nin vec4 v_color;\nin float v_viewportBorderSize;\nin vec4 v_borderColor;\nin float v_viewportFeatherSize;\nin float v_viewportTotalSize;\n\nout vec4 color;\n\nvoid main() {\n  float distance;\n  if (v_linePoint.x < 0.0) {\n    distance = length(v_linePoint - vec2(0.0,0.0)) / (v_viewportTotalSize / 2.0);\n  } else if (v_linePoint.x > v_viewportLineLength) {\n    distance = length(v_linePoint - vec2(v_viewportLineLength,0.0)) / (v_viewportTotalSize / 2.0);\n  } else {\n    distance = abs(v_linePoint.y) / (v_viewportTotalSize / 2.0);\n  }\n  if (distance > 1.0) {\n    discard;\n  }\n  float viewportDistance = distance * v_viewportTotalSize / 2.0;\n\n  // Apply color\n  color = vec4(0, 0, 0, 0);\n  if (v_viewportSize >= v_viewportFeatherSize) {\n    color = v_color;\n  }\n\n  // Apply border\n  // Border starts at radius = size / 2 - border size / 2 until outside starts\n  // with step of size feather size\n  float borderSmoothStep;\n  if(v_viewportBorderSize >= v_viewportFeatherSize) {\n    borderSmoothStep = smoothstep(\n      v_viewportSize / 2.0 - v_viewportBorderSize / 2.0 - v_viewportFeatherSize / 2.0,\n      v_viewportSize / 2.0 - v_viewportBorderSize / 2.0 + v_viewportFeatherSize / 2.0,\n      viewportDistance\n    );\n    color = ((1.0 - borderSmoothStep) * color) + (borderSmoothStep * v_borderColor);\n  }\n\n  // Apply outside feather\n  // Outside starts at radius = size / 2 + border size / 2 until total size\n  // with step of size feather size\n  borderSmoothStep = smoothstep(\n      v_viewportSize / 2.0 + v_viewportBorderSize / 2.0 - v_viewportFeatherSize / 2.0,\n      v_viewportSize / 2.0 + v_viewportBorderSize / 2.0 + v_viewportFeatherSize / 2.0,\n      viewportDistance\n  );\n  color = ((1.0 - borderSmoothStep) * color) + (borderSmoothStep * vec4(0, 0, 0, 0));\n}\n", "#version 300 es\n\nprecision highp float;\n\n#include ../helpers.frag;\n\nuniform mat4 u_renderHomogeneousTransform;\nuniform float u_animationProgress;\n\nin float a_viewportSize;\nin vec4 a_color;\nin float a_viewportBorderSize;\nin vec4 a_borderColor;\n\nin vec2 a_clipPoint;\nin vec2 a_clipPreviousPoint;\n\nout float v_viewportSize;\nout vec4 v_color;\nout float v_viewportBorderSize;\nout vec4 v_borderColor;\nout float v_viewportFeatherSize;\nout float v_viewportTotalSize;\n\nvoid main() {\n  vec2 clipPoint = mix(a_clipPreviousPoint, a_clipPoint, easing(u_animationProgress));\n\n  gl_Position = u_renderHomogeneousTransform * vec4(clipPoint, 0.0f, 1.0f);\n\n  v_viewportFeatherSize = 1.0;\n\n  v_viewportTotalSize = a_viewportSize + a_viewportBorderSize + v_viewportFeatherSize;\n  gl_PointSize = v_viewportTotalSize;\n  // gl_PointSize is the diameter of the point.\n  // The border is centered on the edge of a point with diameter = size\n  // so adding half a border left and half a border right\n  // results in adding a full border to the total size.\n  // Also adding half an outside feather left and half an outside feather right,\n  // which also serves as minimal size.\n  // Note: there seems to be a maximum size of 512? Could be due to graphics card (or Float32Array)?\n\n  v_viewportSize = a_viewportSize;\n  v_color = a_color;\n  v_viewportBorderSize = a_viewportBorderSize;\n  v_borderColor = a_borderColor;\n}\n", "#version 300 es\n\nprecision highp float;\nprecision highp isampler2D;\n\nin float v_viewportSize;\nin vec4 v_color;\nin float v_viewportBorderSize;\nin vec4 v_borderColor;\nin float v_viewportFeatherSize;\nin float v_viewportTotalSize;\n\nout vec4 color;\n\nvoid main() {\n  // gl_PointCoord is a vec2 .x and .y between -1.0 and 1.0.\n  float distance = length(2.0 * gl_PointCoord - 1.0);\n  if (distance > 1.0) {\n    discard;\n  }\n  float viewportDistance = distance * v_viewportTotalSize / 2.0;\n\n  // Apply color\n  color = vec4(0, 0, 0, 0);\n  if (v_viewportSize >= v_viewportFeatherSize) {\n    color = v_color;\n  }\n\n  // Apply border\n  // Border starts at radius = size / 2 - border size / 2 until outside starts\n  // with step of size feather size\n  float borderSmoothStep;\n  if(v_viewportBorderSize >= v_viewportFeatherSize) {\n    borderSmoothStep = smoothstep(\n      v_viewportSize / 2.0 - v_viewportBorderSize / 2.0 - v_viewportFeatherSize / 2.0,\n      v_viewportSize / 2.0 - v_viewportBorderSize / 2.0 + v_viewportFeatherSize / 2.0,\n      viewportDistance\n    );\n    color = ((1.0 - borderSmoothStep) * color) + (borderSmoothStep * v_borderColor);\n  }\n\n  // Apply outside feather\n  // Outside starts at radius = size / 2 + border size / 2 until total size\n  // with step of size feather size\n  borderSmoothStep = smoothstep(\n      v_viewportSize / 2.0 + v_viewportBorderSize / 2.0 - v_viewportFeatherSize / 2.0,\n      v_viewportSize / 2.0 + v_viewportBorderSize / 2.0 + v_viewportFeatherSize / 2.0,\n      viewportDistance\n  );\n  color = ((1.0 - borderSmoothStep) * color) + (borderSmoothStep * vec4(0, 0, 0, 0));\n}\n", "const encodedJs = \"LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMKICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjAKICovCmNvbnN0IHByb3h5TWFya2VyID0gU3ltYm9sKCJDb21saW5rLnByb3h5Iik7CmNvbnN0IGNyZWF0ZUVuZHBvaW50ID0gU3ltYm9sKCJDb21saW5rLmVuZHBvaW50Iik7CmNvbnN0IHJlbGVhc2VQcm94eSA9IFN5bWJvbCgiQ29tbGluay5yZWxlYXNlUHJveHkiKTsKY29uc3QgZmluYWxpemVyID0gU3ltYm9sKCJDb21saW5rLmZpbmFsaXplciIpOwpjb25zdCB0aHJvd01hcmtlciA9IFN5bWJvbCgiQ29tbGluay50aHJvd24iKTsKY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAib2JqZWN0IiAmJiB2YWwgIT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gImZ1bmN0aW9uIjsKY29uc3QgcHJveHlUcmFuc2ZlckhhbmRsZXIgPSB7CiAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sCiAgc2VyaWFsaXplKG9iaikgewogICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOwogICAgZXhwb3NlKG9iaiwgcG9ydDEpOwogICAgcmV0dXJuIFtwb3J0MiwgW3BvcnQyXV07CiAgfSwKICBkZXNlcmlhbGl6ZShwb3J0KSB7CiAgICBwb3J0LnN0YXJ0KCk7CiAgICByZXR1cm4gd3JhcChwb3J0KTsKICB9Cn07CmNvbnN0IHRocm93VHJhbnNmZXJIYW5kbGVyID0gewogIGNhbkhhbmRsZTogKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgJiYgdGhyb3dNYXJrZXIgaW4gdmFsdWUsCiAgc2VyaWFsaXplKHsgdmFsdWUgfSkgewogICAgbGV0IHNlcmlhbGl6ZWQ7CiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICBzZXJpYWxpemVkID0gewogICAgICAgIGlzRXJyb3I6IHRydWUsCiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsCiAgICAgICAgICBuYW1lOiB2YWx1ZS5uYW1lLAogICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrCiAgICAgICAgfQogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgc2VyaWFsaXplZCA9IHsgaXNFcnJvcjogZmFsc2UsIHZhbHVlIH07CiAgICB9CiAgICByZXR1cm4gW3NlcmlhbGl6ZWQsIFtdXTsKICB9LAogIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQpIHsKICAgIGlmIChzZXJpYWxpemVkLmlzRXJyb3IpIHsKICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3Ioc2VyaWFsaXplZC52YWx1ZS5tZXNzYWdlKSwgc2VyaWFsaXplZC52YWx1ZSk7CiAgICB9CiAgICB0aHJvdyBzZXJpYWxpemVkLnZhbHVlOwogIH0KfTsKY29uc3QgdHJhbnNmZXJIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFsKICBbInByb3h5IiwgcHJveHlUcmFuc2ZlckhhbmRsZXJdLAogIFsidGhyb3ciLCB0aHJvd1RyYW5zZmVySGFuZGxlcl0KXSk7CmZ1bmN0aW9uIGlzQWxsb3dlZE9yaWdpbihhbGxvd2VkT3JpZ2lucywgb3JpZ2luKSB7CiAgZm9yIChjb25zdCBhbGxvd2VkT3JpZ2luIG9mIGFsbG93ZWRPcmlnaW5zKSB7CiAgICBpZiAob3JpZ2luID09PSBhbGxvd2VkT3JpZ2luIHx8IGFsbG93ZWRPcmlnaW4gPT09ICIqIikgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGlmIChhbGxvd2VkT3JpZ2luIGluc3RhbmNlb2YgUmVnRXhwICYmIGFsbG93ZWRPcmlnaW4udGVzdChvcmlnaW4pKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KZnVuY3Rpb24gZXhwb3NlKG9iaiwgZXAgPSBnbG9iYWxUaGlzLCBhbGxvd2VkT3JpZ2lucyA9IFsiKiJdKSB7CiAgZXAuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGZ1bmN0aW9uIGNhbGxiYWNrKGV2KSB7CiAgICBpZiAoIWV2IHx8ICFldi5kYXRhKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghaXNBbGxvd2VkT3JpZ2luKGFsbG93ZWRPcmlnaW5zLCBldi5vcmlnaW4pKSB7CiAgICAgIGNvbnNvbGUud2FybihgSW52YWxpZCBvcmlnaW4gJyR7ZXYub3JpZ2lufScgZm9yIGNvbWxpbmsgcHJveHlgKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgeyBpZCwgdHlwZSwgcGF0aCB9ID0gT2JqZWN0LmFzc2lnbih7IHBhdGg6IFtdIH0sIGV2LmRhdGEpOwogICAgY29uc3QgYXJndW1lbnRMaXN0ID0gKGV2LmRhdGEuYXJndW1lbnRMaXN0IHx8IFtdKS5tYXAoZnJvbVdpcmVWYWx1ZSk7CiAgICBsZXQgcmV0dXJuVmFsdWU7CiAgICB0cnkgewogICAgICBjb25zdCBwYXJlbnQgPSBwYXRoLnNsaWNlKDAsIC0xKS5yZWR1Y2UoKG9iajIsIHByb3ApID0+IG9iajJbcHJvcF0sIG9iaik7CiAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGF0aC5yZWR1Y2UoKG9iajIsIHByb3ApID0+IG9iajJbcHJvcF0sIG9iaik7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgIkdFVCI6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJTRVQiOgogICAgICAgICAgewogICAgICAgICAgICBwYXJlbnRbcGF0aC5zbGljZSgtMSlbMF1dID0gZnJvbVdpcmVWYWx1ZShldi5kYXRhLnZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiQVBQTFkiOgogICAgICAgICAgewogICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJhd1ZhbHVlLmFwcGx5KHBhcmVudCwgYXJndW1lbnRMaXN0KTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIkNPTlNUUlVDVCI6CiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHJhd1ZhbHVlKC4uLmFyZ3VtZW50TGlzdCk7CiAgICAgICAgICAgIHJldHVyblZhbHVlID0gcHJveHkodmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiRU5EUE9JTlQiOgogICAgICAgICAgewogICAgICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7CiAgICAgICAgICAgIGV4cG9zZShvYmosIHBvcnQyKTsKICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cmFuc2Zlcihwb3J0MSwgW3BvcnQxXSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSRUxFQVNFIjoKICAgICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB2b2lkIDA7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9IGNhdGNoICh2YWx1ZSkgewogICAgICByZXR1cm5WYWx1ZSA9IHsgdmFsdWUsIFt0aHJvd01hcmtlcl06IDAgfTsKICAgIH0KICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSkuY2F0Y2goKHZhbHVlKSA9PiB7CiAgICAgIHJldHVybiB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07CiAgICB9KS50aGVuKChyZXR1cm5WYWx1ZTIpID0+IHsKICAgICAgY29uc3QgW3dpcmVWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZShyZXR1cm5WYWx1ZTIpOwogICAgICBlcC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHdpcmVWYWx1ZSksIHsgaWQgfSksIHRyYW5zZmVyYWJsZXMpOwogICAgICBpZiAodHlwZSA9PT0gIlJFTEVBU0UiKSB7CiAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGNhbGxiYWNrKTsKICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTsKICAgICAgICBpZiAoZmluYWxpemVyIGluIG9iaiAmJiB0eXBlb2Ygb2JqW2ZpbmFsaXplcl0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIG9ialtmaW5hbGl6ZXJdKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc3QgW3dpcmVWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZSh7CiAgICAgICAgdmFsdWU6IG5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpLAogICAgICAgIFt0aHJvd01hcmtlcl06IDAKICAgICAgfSk7CiAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2lyZVZhbHVlKSwgeyBpZCB9KSwgdHJhbnNmZXJhYmxlcyk7CiAgICB9KTsKICB9KTsKICBpZiAoZXAuc3RhcnQpIHsKICAgIGVwLnN0YXJ0KCk7CiAgfQp9CmZ1bmN0aW9uIGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpIHsKICByZXR1cm4gZW5kcG9pbnQuY29uc3RydWN0b3IubmFtZSA9PT0gIk1lc3NhZ2VQb3J0IjsKfQpmdW5jdGlvbiBjbG9zZUVuZFBvaW50KGVuZHBvaW50KSB7CiAgaWYgKGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpKQogICAgZW5kcG9pbnQuY2xvc2UoKTsKfQpmdW5jdGlvbiB3cmFwKGVwLCB0YXJnZXQpIHsKICBjb25zdCBwZW5kaW5nTGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBlcC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShldikgewogICAgY29uc3QgeyBkYXRhIH0gPSBldjsKICAgIGlmICghZGF0YSB8fCAhZGF0YS5pZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCByZXNvbHZlciA9IHBlbmRpbmdMaXN0ZW5lcnMuZ2V0KGRhdGEuaWQpOwogICAgaWYgKCFyZXNvbHZlcikgewogICAgICByZXR1cm47CiAgICB9CiAgICB0cnkgewogICAgICByZXNvbHZlcihkYXRhKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHBlbmRpbmdMaXN0ZW5lcnMuZGVsZXRlKGRhdGEuaWQpOwogICAgfQogIH0pOwogIHJldHVybiBjcmVhdGVQcm94eShlcCwgcGVuZGluZ0xpc3RlbmVycywgW10sIHRhcmdldCk7Cn0KZnVuY3Rpb24gdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNSZWxlYXNlZCkgewogIGlmIChpc1JlbGVhc2VkKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpOwogIH0KfQpmdW5jdGlvbiByZWxlYXNlRW5kcG9pbnQoZXApIHsKICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgewogICAgdHlwZTogIlJFTEVBU0UiCiAgfSkudGhlbigoKSA9PiB7CiAgICBjbG9zZUVuZFBvaW50KGVwKTsKICB9KTsKfQpjb25zdCBwcm94eUNvdW50ZXIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTsKY29uc3QgcHJveHlGaW5hbGl6ZXJzID0gIkZpbmFsaXphdGlvblJlZ2lzdHJ5IiBpbiBnbG9iYWxUaGlzICYmIG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoZXApID0+IHsKICBjb25zdCBuZXdDb3VudCA9IChwcm94eUNvdW50ZXIuZ2V0KGVwKSB8fCAwKSAtIDE7CiAgcHJveHlDb3VudGVyLnNldChlcCwgbmV3Q291bnQpOwogIGlmIChuZXdDb3VudCA9PT0gMCkgewogICAgcmVsZWFzZUVuZHBvaW50KGVwKTsKICB9Cn0pOwpmdW5jdGlvbiByZWdpc3RlclByb3h5KHByb3h5MiwgZXApIHsKICBjb25zdCBuZXdDb3VudCA9IChwcm94eUNvdW50ZXIuZ2V0KGVwKSB8fCAwKSArIDE7CiAgcHJveHlDb3VudGVyLnNldChlcCwgbmV3Q291bnQpOwogIGlmIChwcm94eUZpbmFsaXplcnMpIHsKICAgIHByb3h5RmluYWxpemVycy5yZWdpc3Rlcihwcm94eTIsIGVwLCBwcm94eTIpOwogIH0KfQpmdW5jdGlvbiB1bnJlZ2lzdGVyUHJveHkocHJveHkyKSB7CiAgaWYgKHByb3h5RmluYWxpemVycykgewogICAgcHJveHlGaW5hbGl6ZXJzLnVucmVnaXN0ZXIocHJveHkyKTsKICB9Cn0KZnVuY3Rpb24gY3JlYXRlUHJveHkoZXAsIHBlbmRpbmdMaXN0ZW5lcnMsIHBhdGggPSBbXSwgdGFyZ2V0ID0gZnVuY3Rpb24oKSB7Cn0pIHsKICBsZXQgaXNQcm94eVJlbGVhc2VkID0gZmFsc2U7CiAgY29uc3QgcHJveHkyID0gbmV3IFByb3h5KHRhcmdldCwgewogICAgZ2V0KF90YXJnZXQsIHByb3ApIHsKICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTsKICAgICAgaWYgKHByb3AgPT09IHJlbGVhc2VQcm94eSkgewogICAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgICB1bnJlZ2lzdGVyUHJveHkocHJveHkyKTsKICAgICAgICAgIHJlbGVhc2VFbmRwb2ludChlcCk7CiAgICAgICAgICBwZW5kaW5nTGlzdGVuZXJzLmNsZWFyKCk7CiAgICAgICAgICBpc1Byb3h5UmVsZWFzZWQgPSB0cnVlOwogICAgICAgIH07CiAgICAgIH0KICAgICAgaWYgKHByb3AgPT09ICJ0aGVuIikgewogICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIHsgdGhlbjogKCkgPT4gcHJveHkyIH07CiAgICAgICAgfQogICAgICAgIGNvbnN0IHIgPSByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCBwZW5kaW5nTGlzdGVuZXJzLCB7CiAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpCiAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTsKICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7CiAgICAgIH0KICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwZW5kaW5nTGlzdGVuZXJzLCBbLi4ucGF0aCwgcHJvcF0pOwogICAgfSwKICAgIHNldChfdGFyZ2V0LCBwcm9wLCByYXdWYWx1ZSkgewogICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpOwogICAgICBjb25zdCBbdmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmF3VmFsdWUpOwogICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgcGVuZGluZ0xpc3RlbmVycywgewogICAgICAgIHR5cGU6ICJTRVQiLAogICAgICAgIHBhdGg6IFsuLi5wYXRoLCBwcm9wXS5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksCiAgICAgICAgdmFsdWUKICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTsKICAgIH0sCiAgICBhcHBseShfdGFyZ2V0LCBfdGhpc0FyZywgcmF3QXJndW1lbnRMaXN0KSB7CiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7CiAgICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07CiAgICAgIGlmIChsYXN0ID09PSBjcmVhdGVFbmRwb2ludCkgewogICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCBwZW5kaW5nTGlzdGVuZXJzLCB7CiAgICAgICAgICB0eXBlOiAiRU5EUE9JTlQiCiAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTsKICAgICAgfQogICAgICBpZiAobGFzdCA9PT0gImJpbmQiKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwZW5kaW5nTGlzdGVuZXJzLCBwYXRoLnNsaWNlKDAsIC0xKSk7CiAgICAgIH0KICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7CiAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCBwZW5kaW5nTGlzdGVuZXJzLCB7CiAgICAgICAgdHlwZTogIkFQUExZIiwKICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSwKICAgICAgICBhcmd1bWVudExpc3QKICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTsKICAgIH0sCiAgICBjb25zdHJ1Y3QoX3RhcmdldCwgcmF3QXJndW1lbnRMaXN0KSB7CiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7CiAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpOwogICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgcGVuZGluZ0xpc3RlbmVycywgewogICAgICAgIHR5cGU6ICJDT05TVFJVQ1QiLAogICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLAogICAgICAgIGFyZ3VtZW50TGlzdAogICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpOwogICAgfQogIH0pOwogIHJlZ2lzdGVyUHJveHkocHJveHkyLCBlcCk7CiAgcmV0dXJuIHByb3h5MjsKfQpmdW5jdGlvbiBteUZsYXQoYXJyKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycik7Cn0KZnVuY3Rpb24gcHJvY2Vzc0FyZ3VtZW50cyhhcmd1bWVudExpc3QpIHsKICBjb25zdCBwcm9jZXNzZWQgPSBhcmd1bWVudExpc3QubWFwKHRvV2lyZVZhbHVlKTsKICByZXR1cm4gW3Byb2Nlc3NlZC5tYXAoKHYpID0+IHZbMF0pLCBteUZsYXQocHJvY2Vzc2VkLm1hcCgodikgPT4gdlsxXSkpXTsKfQpjb25zdCB0cmFuc2ZlckNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7CmZ1bmN0aW9uIHRyYW5zZmVyKG9iaiwgdHJhbnNmZXJzKSB7CiAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpOwogIHJldHVybiBvYmo7Cn0KZnVuY3Rpb24gcHJveHkob2JqKSB7CiAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtwcm94eU1hcmtlcl06IHRydWUgfSk7Cn0KZnVuY3Rpb24gdG9XaXJlVmFsdWUodmFsdWUpIHsKICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7CiAgICBpZiAoaGFuZGxlci5jYW5IYW5kbGUodmFsdWUpKSB7CiAgICAgIGNvbnN0IFtzZXJpYWxpemVkVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gaGFuZGxlci5zZXJpYWxpemUodmFsdWUpOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICJIQU5ETEVSIiwKICAgICAgICAgIG5hbWUsCiAgICAgICAgICB2YWx1ZTogc2VyaWFsaXplZFZhbHVlCiAgICAgICAgfSwKICAgICAgICB0cmFuc2ZlcmFibGVzCiAgICAgIF07CiAgICB9CiAgfQogIHJldHVybiBbCiAgICB7CiAgICAgIHR5cGU6ICJSQVciLAogICAgICB2YWx1ZQogICAgfSwKICAgIHRyYW5zZmVyQ2FjaGUuZ2V0KHZhbHVlKSB8fCBbXQogIF07Cn0KZnVuY3Rpb24gZnJvbVdpcmVWYWx1ZSh2YWx1ZSkgewogIHN3aXRjaCAodmFsdWUudHlwZSkgewogICAgY2FzZSAiSEFORExFUiI6CiAgICAgIHJldHVybiB0cmFuc2ZlckhhbmRsZXJzLmdldCh2YWx1ZS5uYW1lKS5kZXNlcmlhbGl6ZSh2YWx1ZS52YWx1ZSk7CiAgICBjYXNlICJSQVciOgogICAgICByZXR1cm4gdmFsdWUudmFsdWU7CiAgfQp9CmZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHBlbmRpbmdMaXN0ZW5lcnMsIG1zZywgdHJhbnNmZXJzKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpOwogICAgcGVuZGluZ0xpc3RlbmVycy5zZXQoaWQsIHJlc29sdmUpOwogICAgaWYgKGVwLnN0YXJ0KSB7CiAgICAgIGVwLnN0YXJ0KCk7CiAgICB9CiAgICBlcC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKHsgaWQgfSwgbXNnKSwgdHJhbnNmZXJzKTsKICB9KTsKfQpmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7CiAgcmV0dXJuIG5ldyBBcnJheSg0KS5maWxsKDApLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKS5qb2luKCItIik7Cn0KYXN5bmMgZnVuY3Rpb24gZmV0Y2hVcmwoaW5wdXQsIGluaXQsIGZldGNoRm4pIHsKICBsZXQgcmVzcG9uc2U7CiAgaWYgKHR5cGVvZiBmZXRjaEZuID09PSAiZnVuY3Rpb24iKSB7CiAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoRm4oaW5wdXQsIGluaXQpOwogIH0gZWxzZSB7CiAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKGlucHV0LCBpbml0KTsKICB9CiAgaWYgKCFyZXNwb25zZS5vaykgewogICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGlmIChqc29uICYmIGpzb24uZXJyb3IpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGpzb24uZXJyb3IpOwogICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNUZXh0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTsKICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgZm91bmQ6ICR7aW5wdXR9ICg0MDQpYCk7CiAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiSW50ZXJuYWwgc2VydmVyIGVycm9yICg1MDApIik7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaDogJHtpbnB1dH0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKTsKICAgIH0KICB9CiAgcmV0dXJuIHJlc3BvbnNlOwp9CmNvbnN0IGZldGNoQW5kR2V0SW1hZ2VEYXRhV29ya2VyID0gewogIGFzeW5jIGdldEltYWdlRGF0YSh0aWxlVXJsLCBvbkFib3J0LCBmZXRjaEZuLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICBjb25zdCB3b3JrZXJBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CiAgICBvbkFib3J0KCk7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoVXJsKAogICAgICB0aWxlVXJsLAogICAgICB7CiAgICAgICAgc2lnbmFsOiB3b3JrZXJBYm9ydENvbnRyb2xsZXIuc2lnbmFsCiAgICAgIH0sCiAgICAgIGZldGNoRm4KICAgICk7CiAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpOwogICAgY29uc3QgaW1hZ2VCaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChibG9iLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7CiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICBpZiAoIWNvbnRleHQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY3JlYXRlIE9mZnNjcmVlbkNhbnZhcyBjb250ZXh0Iik7CiAgICB9CiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZUJpdG1hcCwgMCwgMCk7CiAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgIHJldHVybiB0cmFuc2ZlcihpbWFnZURhdGEsIFtpbWFnZURhdGEuZGF0YS5idWZmZXJdKTsKICB9Cn07CmV4cG9zZShmZXRjaEFuZEdldEltYWdlRGF0YVdvcmtlcik7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLWFuZC1nZXQtaW1hZ2UtZGF0YS1CQzRZc0lHNy5qcy5tYXAK\";\nconst decodeBase64 = (base64) => Uint8Array.from(atob(base64), (c) => c.charCodeAt(0));\nconst blob = typeof self !== \"undefined\" && self.Blob && new Blob([\"URL.revokeObjectURL(import.meta.url);\", decodeBase64(encodedJs)], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper(options) {\n  let objURL;\n  try {\n    objURL = blob && (self.URL || self.webkitURL).createObjectURL(blob);\n    if (!objURL) throw \"\";\n    const worker = new Worker(objURL, {\n      type: \"module\",\n      name: options?.name\n    });\n    worker.addEventListener(\"error\", () => {\n      (self.URL || self.webkitURL).revokeObjectURL(objURL);\n    });\n    return worker;\n  } catch (e) {\n    return new Worker(\n      \"data:text/javascript;base64,\" + encodedJs,\n      {\n        type: \"module\",\n        name: options?.name\n      }\n    );\n  }\n}\nexport {\n  WorkerWrapper as default\n};\n//# sourceMappingURL=fetch-and-get-image-data.js.map\n", "import { throttle } from 'lodash-es'\nimport { wrap as comlinkWtap } from 'comlink'\n\nimport {\n  hexToFractionalRgb,\n  maxOfNumberOrUndefined,\n  mergeOptions,\n  squaredDistance\n} from '@allmaps/stdlib'\nimport { supportedDistortionMeasures } from '@allmaps/transform'\nimport { red, green, darkblue, yellow, black } from '@allmaps/tailwind'\n\nimport { BaseRenderer } from './BaseRenderer.js'\nimport {\n  WebGL2WarpedMap,\n  createWebGL2WarpedMapFactory\n} from '../maps/WebGL2WarpedMap.js'\nimport { CacheableWorkerImageDataTile } from '../tilecache/CacheableWorkerImageDataTile.js'\nimport {\n  WarpedMapEvent,\n  WarpedMapEventType,\n  WarpedMapTileEventDetail\n} from '../shared/events.js'\nimport {\n  multiplyHomogeneousTransform,\n  invertHomogeneousTransform,\n  homogeneousTransformToMatrix4\n} from '../shared/homogeneous-transform.js'\nimport { createShader, createProgram } from '../shared/webgl2.js'\nimport { Viewport } from '../viewport/Viewport.js'\n\nimport mapVertexShaderSource from '../shaders/map/vertex-shader.glsl'\nimport mapFragmentShaderSource from '../shaders/map/fragment-shader.glsl'\nimport linesVertexShaderSource from '../shaders/lines/vertex-shader.glsl'\nimport linesFragmentShaderSource from '../shaders/lines/fragment-shader.glsl'\nimport pointsVertexShaderSource from '../shaders/points/vertex-shader.glsl'\nimport pointsFragmentShaderSource from '../shaders/points/fragment-shader.glsl'\n\n// Using the recommended URL constructor -\n// See https://vite.dev/guide/features.html#import-with-constructors -\n// leads to import errors when publising on platforms like jsdelivr.\n// Using the inline query parameter solves this.\nimport FetchAndGetImageDataWorker from '../workers/fetch-and-get-image-data.js?worker&inline'\n\nimport type { DebouncedFunc } from 'lodash-es'\n\nimport type { FetchableTile } from '../tilecache/FetchableTile.js'\n\nimport type { FetchAndGetImageDataWorkerType } from '../workers/fetch-and-get-image-data.js'\n\nimport type {\n  Renderer,\n  RenderOptions,\n  RemoveColorOptions,\n  ColorizeOptions,\n  GridOptions,\n  WebGL2RendererOptions\n} from '../shared/types.js'\n\nconst THROTTLE_PREPARE_RENDER_WAIT_MS = 200\nconst THROTTLE_PREPARE_RENDER_OPTIONS = {\n  leading: true,\n  trailing: true\n}\n\nconst THROTTLE_CHANGED_WAIT_MS = 50\nconst THROTTLE_CHANGED_OPTIONS = {\n  leading: true,\n  trailing: true\n}\n\nconst defaultWebgl2RendererOptions = {\n  debugMaps: false,\n  renderMaps: true,\n  renderLines: true,\n  renderPoints: true\n}\n\nconst DEFAULT_OPACITY = 1\nconst DEFAULT_SATURATION = 1\nconst DEFAULT_REMOVE_COLOR_THRESHOLD = 0\nconst DEFAULT_REMOVE_COLOR_HARDNESS = 0.7\nconst SIGNIFICANT_VIEWPORT_EPSILON = 100 * Number.EPSILON\nconst SIGNIFICANT_VIEWPORT_DISTANCE = 5\nconst ANIMATION_DURATION = 750\n\n/**\n * Class that renders WarpedMaps to a WebGL 2 context\n */\nexport class WebGL2Renderer\n  extends BaseRenderer<WebGL2WarpedMap, ImageData>\n  implements Renderer\n{\n  #worker: Worker\n\n  gl: WebGL2RenderingContext\n\n  partialWebgl2RendererOptions: Partial<WebGL2RendererOptions>\n\n  mapProgram: WebGLProgram\n  linesProgram: WebGLProgram\n  pointsProgram: WebGLProgram\n\n  previousSignificantViewport: Viewport | undefined\n\n  opacity: number = DEFAULT_OPACITY\n  saturation: number = DEFAULT_SATURATION\n  renderOptions: RenderOptions = {}\n\n  lastAnimationFrameRequestId: number | undefined\n  animating = false\n  transformaterTransitionStart: number | undefined\n  animationProgress = 0\n\n  disableRender = false\n\n  private throttledPrepareRenderInternal: DebouncedFunc<\n    typeof this.prepareRenderInternal\n  >\n\n  private throttledChanged: DebouncedFunc<typeof this.changed>\n\n  /**\n   * Creates an instance of WebGL2Renderer.\n   *\n   * @constructor\n   * @param gl - WebGL 2 rendering context\n   * @param options - options\n   */\n  constructor(\n    gl: WebGL2RenderingContext,\n    options?: Partial<WebGL2RendererOptions>\n  ) {\n    const mapVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      mapVertexShaderSource\n    )\n    const mapFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      mapFragmentShaderSource\n    )\n\n    const linesVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      linesVertexShaderSource\n    )\n    const linesFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      linesFragmentShaderSource\n    )\n\n    const pointsVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      pointsVertexShaderSource\n    )\n    const pointsFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      pointsFragmentShaderSource\n    )\n\n    const mapProgram = createProgram(gl, mapVertexShader, mapFragmentShader)\n    const linesProgram = createProgram(\n      gl,\n      linesVertexShader,\n      linesFragmentShader\n    )\n    const pointsProgram = createProgram(\n      gl,\n      pointsVertexShader,\n      pointsFragmentShader\n    )\n\n    const worker = new FetchAndGetImageDataWorker()\n    const wrappedWorker = comlinkWtap<FetchAndGetImageDataWorkerType>(worker)\n\n    super(\n      CacheableWorkerImageDataTile.createFactory(wrappedWorker),\n      createWebGL2WarpedMapFactory(gl, mapProgram, linesProgram, pointsProgram),\n      options\n    )\n\n    this.#worker = worker\n    this.gl = gl\n\n    this.partialWebgl2RendererOptions = mergeOptions(\n      defaultWebgl2RendererOptions,\n      options\n    )\n\n    this.mapProgram = mapProgram\n    this.linesProgram = linesProgram\n    this.pointsProgram = pointsProgram\n\n    // Unclear how to remove shaders, possibly already after linking to program, see:\n    // https://stackoverflow.com/questions/9113154/proper-way-to-delete-glsl-shader\n    // https://stackoverflow.com/questions/27237696/webgl-detach-and-delete-shaders-after-linking\n    gl.deleteShader(mapVertexShader)\n    gl.deleteShader(mapFragmentShader)\n    gl.deleteShader(mapVertexShader)\n    gl.deleteShader(mapFragmentShader)\n    gl.deleteShader(mapVertexShader)\n    gl.deleteShader(mapFragmentShader)\n\n    gl.disable(gl.DEPTH_TEST)\n\n    this.addEventListeners()\n\n    this.throttledPrepareRenderInternal = throttle(\n      this.prepareRenderInternal.bind(this),\n      THROTTLE_PREPARE_RENDER_WAIT_MS,\n      THROTTLE_PREPARE_RENDER_OPTIONS\n    )\n\n    this.throttledChanged = throttle(\n      this.changed.bind(this),\n      THROTTLE_CHANGED_WAIT_MS,\n      THROTTLE_CHANGED_OPTIONS\n    )\n  }\n\n  initializeWebGL(gl: WebGL2RenderingContext) {\n    // This code is duplicated from the constructor to allow for context loss and restoration\n    // Can't call this function in the constructor, because 'super' must be called before accessing 'this'\n    const mapVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      mapVertexShaderSource\n    )\n    const mapFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      mapFragmentShaderSource\n    )\n\n    const linesVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      linesVertexShaderSource\n    )\n    const linesFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      linesFragmentShaderSource\n    )\n\n    const pointsVertexShader = createShader(\n      gl,\n      gl.VERTEX_SHADER,\n      pointsVertexShaderSource\n    )\n    const pointsFragmentShader = createShader(\n      gl,\n      gl.FRAGMENT_SHADER,\n      pointsFragmentShaderSource\n    )\n\n    const mapProgram = createProgram(gl, mapVertexShader, mapFragmentShader)\n    const linesProgram = createProgram(\n      gl,\n      linesVertexShader,\n      linesFragmentShader\n    )\n    const pointsProgram = createProgram(\n      gl,\n      pointsVertexShader,\n      pointsFragmentShader\n    )\n\n    this.gl = gl\n    this.mapProgram = mapProgram\n    this.linesProgram = linesProgram\n    this.pointsProgram = pointsProgram\n\n    gl.disable(gl.DEPTH_TEST)\n\n    for (const webgl2WarpedMap of this.warpedMapList.getWarpedMaps()) {\n      webgl2WarpedMap.initializeWebGL(mapProgram, linesProgram, pointsProgram)\n    }\n  }\n\n  /**\n   * Get the opacity of the renderer\n   *\n   * @returns\n   */\n  getOpacity(): number | undefined {\n    return this.opacity\n  }\n\n  /**\n   * Set the opacity of the renderer\n   *\n   * @param opacity - opacity to set\n   */\n  setOpacity(opacity: number): void {\n    this.opacity = opacity\n  }\n\n  /**\n   * Reset the opacity of the renderer\n   */\n  resetOpacity(): void {\n    this.opacity = DEFAULT_OPACITY\n  }\n\n  /**\n   * Get the opacity of a map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapOpacity(mapId: string): number | undefined {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n    if (webgl2WarpedMap) {\n      return webgl2WarpedMap.opacity\n    }\n  }\n\n  /**\n   * Set the opacity of a map\n   *\n   * @param mapId - ID of the map\n   * @param opacity - opacity to set\n   */\n  setMapOpacity(mapId: string, opacity: number): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.opacity = Math.min(Math.max(opacity, 0), 1)\n    }\n  }\n\n  /**\n   * Rreset the opacity of a map\n   *\n   * @param mapId - ID of the map\n   */\n  resetMapOpacity(mapId: string): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.opacity = DEFAULT_OPACITY\n    }\n  }\n\n  /**\n   * Get the remove color options of the renderer\n   *\n   * @returns\n   */\n  getRemoveColorOptions(): Partial<RemoveColorOptions> | undefined {\n    return this.renderOptions.removeColorOptions\n  }\n\n  /**\n   * Set the remove color options of the renderer\n   *\n   * @param removeColorOptions\n   */\n  setRemoveColorOptions(removeColorOptions: RemoveColorOptions) {\n    this.renderOptions.removeColorOptions = removeColorOptions\n  }\n\n  /**\n   * Reset the remove color options of the renderer\n   */\n  resetRemoveColorOptions() {\n    this.renderOptions.removeColorOptions = undefined\n  }\n\n  /**\n   * Get the remove color options of a map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapRemoveColorOptions(\n    mapId: string\n  ): Partial<RemoveColorOptions> | undefined {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      return webgl2WarpedMap.renderOptions.removeColorOptions\n    }\n  }\n\n  /**\n   * Set the WebGL2 Renderer options\n   *\n   * @param partialWebgl2RendererOptions - Options\n   */\n  setOptions(\n    partialWebgl2RendererOptions?: Partial<WebGL2RendererOptions>\n  ): void {\n    this.partialWebgl2RendererOptions = mergeOptions(\n      this.partialWebgl2RendererOptions,\n      partialWebgl2RendererOptions\n    )\n    super.setOptions(partialWebgl2RendererOptions)\n  }\n\n  /**\n   * Set the remove color options of a map\n   *\n   * @param mapId - ID of the map\n   * @param removeColorOptions - the 'remove color options' to set\n   */\n  setMapRemoveColorOptions(\n    mapId: string,\n    removeColorOptions: RemoveColorOptions\n  ): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.removeColorOptions = removeColorOptions\n    }\n  }\n\n  /**\n   * Reset the remove color options of a map\n   *\n   * @param mapId - ID of the map\n   */\n  resetMapRemoveColorOptions(mapId: string): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.removeColorOptions = undefined\n    }\n  }\n\n  /**\n   * Get the colorize options of the renderer\n   *\n   * @returns\n   */\n  getColorizeOptions(): Partial<ColorizeOptions> | undefined {\n    return this.renderOptions.colorizeOptions\n  }\n\n  /**\n   * Set the colorize options of the renderer\n   *\n   * @param colorizeOptions - the colorize options to set\n   */\n  setColorizeOptions(colorizeOptions: ColorizeOptions): void {\n    this.renderOptions.colorizeOptions = colorizeOptions\n  }\n\n  /**\n   * Reset the colorize options of the renderer\n   */\n  resetColorizeOptions(): void {\n    this.renderOptions.colorizeOptions = undefined\n  }\n\n  /**\n   * Get the colorize options of a map\n   *\n   * @param mapId - ID of the map\n   * @returns Colorize options\n   */\n  getMapColorizeOptions(mapId: string): Partial<ColorizeOptions> | undefined {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      return webgl2WarpedMap.renderOptions.colorizeOptions\n    }\n  }\n\n  /**\n   * Set the colorize options of a map\n   *\n   * @param mapId - ID of the map\n   * @param colorizeOptions - the colorize options to set\n   */\n  setMapColorizeOptions(mapId: string, colorizeOptions: ColorizeOptions): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.colorizeOptions = colorizeOptions\n    }\n  }\n\n  /**\n   * Reset the colorize options of a map\n   *\n   * @param mapId - ID of the map\n   */\n  resetMapColorizeOptions(mapId: string): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.colorizeOptions = undefined\n    }\n  }\n\n  /**\n   * Get the grid options of the renderer\n   *\n   * @returns\n   */\n  getGridOptions(): Partial<GridOptions> | undefined {\n    return this.renderOptions.gridOptions\n  }\n\n  /**\n   * Set the grid options of the renderer\n   *\n   * @param gridOptions - the grid options to set\n   */\n  setGridOptions(gridOptions: GridOptions): void {\n    this.renderOptions.gridOptions = gridOptions\n  }\n\n  /**\n   * Reset the grid options of the renderer\n   */\n  resetGridOptions(): void {\n    this.renderOptions.gridOptions = undefined\n  }\n\n  /**\n   * Get the grid options of a map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapGridOptions(mapId: string): Partial<GridOptions> | undefined {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      return webgl2WarpedMap.renderOptions.gridOptions\n    }\n  }\n\n  /**\n   * Set the grid options of a map\n   *\n   * @param mapId - ID of the map\n   * @param gridOptions - the grid options to set\n   */\n  setMapGridOptions(mapId: string, gridOptions: GridOptions): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.gridOptions = gridOptions\n    }\n  }\n\n  /**\n   * Reset the grid options of a map\n   *\n   * @param mapId - ID of the map\n   */\n  resetMapGridOptions(mapId: string): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.renderOptions.gridOptions = undefined\n    }\n  }\n\n  /**\n   * Get the saturation of the renderer\n   *\n   * @returns\n   */\n  getSaturation(): number {\n    return this.saturation\n  }\n\n  /**\n   * Set the saturation of the renderer\n   *\n   * 0 - grayscale, 1 - original colors\n   *\n   * @param saturation - the satuation to set\n   */\n  setSaturation(saturation: number): void {\n    this.saturation = saturation\n  }\n\n  /**\n   * Reset the satuation of the renderer\n   */\n  resetSaturation(): void {\n    this.saturation = DEFAULT_SATURATION\n  }\n\n  /**\n   * Get the saturation of a map\n   *\n   * @param mapId - ID of the map\n   * @returns\n   */\n  getMapSaturation(mapId: string): number | undefined {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      return webgl2WarpedMap.saturation\n    }\n  }\n\n  /**\n   * Set the saturation of a map\n   *\n   * 0 - grayscale, 1 - original colors\n   *\n   * @param mapId - ID of the map\n   * @param saturation - the saturation to set\n   */\n  setMapSaturation(mapId: string, saturation: number): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.saturation = saturation\n    }\n  }\n\n  /**\n   * Reset the saturation of a map\n   *\n   * @param mapId - ID of the map\n   */\n  resetMapSaturation(mapId: string): void {\n    const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webgl2WarpedMap) {\n      webgl2WarpedMap.saturation = DEFAULT_SATURATION\n    }\n  }\n\n  /**\n   * Render the map for a given viewport.\n   *\n   * If no viewport is specified the current viewport is rerendered.\n   * If no current viewport is known, a viewport is deduced based on the WarpedMapList and canvas width and hight.\n   *\n   * @param viewport - the current viewport\n   */\n  render(viewport?: Viewport): void {\n    if (this.disableRender) {\n      return\n    }\n\n    this.viewport =\n      viewport ||\n      this.viewport ||\n      Viewport.fromSizeAndMaps(\n        [this.gl.canvas.width, this.gl.canvas.width],\n        this.warpedMapList\n      )\n\n    // Not awaiting this, using events to trigger new render calls\n    this.loadMissingImageInfosInViewport()\n\n    // Don't fire throttled function unless it could result in something\n    // Otherwise we have to wait for that cycle to finish before useful cycle can be started\n    if (this.someImageInfosInViewport()) {\n      this.throttledPrepareRenderInternal()\n    }\n\n    this.renderInternal()\n  }\n\n  clear() {\n    this.warpedMapList.clear()\n    this.mapsInViewport = new Set()\n    this.mapsWithRequestedTilesForViewport = new Set()\n    this.gl.clear(this.gl.DEPTH_BUFFER_BIT | this.gl.COLOR_BUFFER_BIT)\n    this.tileCache.clear()\n  }\n\n  cancelThrottledFunctions() {\n    this.throttledPrepareRenderInternal.cancel()\n    this.throttledChanged.cancel()\n  }\n\n  destroy() {\n    this.cancelThrottledFunctions()\n\n    for (const webgl2WarpedMap of this.warpedMapList.getWarpedMaps()) {\n      this.removeEventListenersFromWebGL2WarpedMap(webgl2WarpedMap)\n    }\n\n    this.removeEventListeners()\n\n    super.destroy()\n\n    this.gl.deleteProgram(this.mapProgram)\n    this.gl.deleteProgram(this.linesProgram)\n    this.gl.deleteProgram(this.pointsProgram)\n\n    this.#worker.terminate()\n    // Can't delete context, see:\n    // https://stackoverflow.com/questions/14970206/deleting-webgl-contexts\n  }\n\n  protected updateMapsForViewport(tiles: FetchableTile[]): {\n    mapsEnteringViewport: string[]\n    mapsLeavingViewport: string[]\n  } {\n    const { mapsEnteringViewport, mapsLeavingViewport } =\n      super.updateMapsForViewport(tiles)\n\n    this.updateVertexBuffers(mapsEnteringViewport)\n\n    return { mapsEnteringViewport, mapsLeavingViewport }\n  }\n\n  protected resetPrevious(mapIds?: string[]) {\n    const webgl2WarpedMaps = this.warpedMapList.getWarpedMaps({ mapIds })\n    for (const webgl2WarpedMap of webgl2WarpedMaps) {\n      webgl2WarpedMap.resetPrevious()\n    }\n  }\n\n  protected updateVertexBuffers(mapIds?: string[]) {\n    if (!this.viewport) {\n      return\n    }\n\n    const webgl2WarpedMaps = this.warpedMapList.getWarpedMaps({ mapIds })\n    for (const webgl2WarpedMap of webgl2WarpedMaps) {\n      webgl2WarpedMap.updateVertexBuffers(\n        this.viewport.projectedGeoToClipHomogeneousTransform,\n        this.partialWebgl2RendererOptions\n      )\n    }\n  }\n\n  private prepareRenderInternal(): void {\n    this.assureProjection()\n    this.requestFetchableTiles()\n  }\n\n  protected shouldRequestFetchableTiles(): boolean {\n    // Returns whether requested tiles should be updated\n\n    // Returns true when the viewport moved significantly\n    // > to prevent updating requested tiles on minimal movements/\n    // Returns true when the viewport didn't move at all\n    // > since this function is called (possibly multiple times) during startup, without changes to the viewport\n    // Returns false in other cases\n\n    // TODO: this could be a problem if the viewport is quickly and continuously moved\n    // within the tolerance during initial loading.\n    // Possible solution: adding a 'allrendered' event and listening to it.\n\n    if (!this.viewport) {\n      return false\n    }\n    if (this.animating) {\n      return false\n    }\n    if (!this.previousSignificantViewport) {\n      this.previousSignificantViewport = this.viewport\n      return true\n    } else {\n      const rectangleSquaredDistances = []\n      for (let i = 0; i < 4; i++) {\n        rectangleSquaredDistances.push(\n          squaredDistance(\n            this.previousSignificantViewport.projectedGeoRectangle[i],\n            this.viewport.projectedGeoRectangle[i]\n          ) / Math.pow(this.viewport.projectedGeoPerViewportScale, 2)\n        )\n      }\n      const maxSquaredDistance = Math.max(...rectangleSquaredDistances)\n      if (maxSquaredDistance < SIGNIFICANT_VIEWPORT_EPSILON) {\n        return true\n      }\n      if (maxSquaredDistance > Math.pow(SIGNIFICANT_VIEWPORT_DISTANCE, 2)) {\n        this.previousSignificantViewport = this.viewport\n        return true\n      } else {\n        return false\n      }\n    }\n  }\n\n  protected shouldAnticipateInteraction() {\n    // Get a map's overview tiles only for this render\n    return true\n  }\n\n  private renderInternal(): void {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height)\n    gl.enable(gl.BLEND)\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA)\n\n    if (this.partialWebgl2RendererOptions.renderMaps) {\n      this.renderMapsInternal()\n    }\n    if (this.partialWebgl2RendererOptions.renderLines) {\n      this.renderLinesInternal()\n    }\n    if (this.partialWebgl2RendererOptions.renderPoints) {\n      this.renderPointsInternal()\n    }\n  }\n\n  private renderMapsInternal(): void {\n    if (!this.viewport) {\n      return\n    }\n\n    this.setMapProgramUniforms()\n\n    for (const mapId of this.mapsWithRequestedTilesForViewport) {\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n      if (!webgl2WarpedMap) {\n        continue\n      }\n\n      this.setMapProgramRenderOptionsUniforms(\n        this.renderOptions,\n        webgl2WarpedMap.renderOptions\n      )\n      this.setMapProgramMapUniforms(webgl2WarpedMap)\n\n      // Draw map\n      const count = webgl2WarpedMap.resourceTrianglePoints.length\n      const primitiveType = this.gl.TRIANGLES\n      const offset = 0\n      this.gl.bindVertexArray(webgl2WarpedMap.mapVao)\n      this.gl.drawArrays(primitiveType, offset, count)\n    }\n  }\n\n  private renderLinesInternal(): void {\n    this.setLinesProgramUniforms()\n\n    for (const mapId of this.mapsInViewport) {\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n      if (!webgl2WarpedMap) {\n        continue\n      }\n\n      this.setLinesProgramMapUniforms(webgl2WarpedMap)\n\n      // Draw lines for each map\n      const count =\n        webgl2WarpedMap.lineLayers.reduce(\n          (accumulator: number, lineLayer) =>\n            accumulator + lineLayer.projectedGeoLines.length,\n          0\n        ) * 6\n      const primitiveType = this.gl.TRIANGLES\n      const offset = 0\n      this.gl.bindVertexArray(webgl2WarpedMap.linesVao)\n      this.gl.drawArrays(primitiveType, offset, count)\n    }\n  }\n\n  private renderPointsInternal(): void {\n    this.setPointsProgramUniforms()\n\n    for (const mapId of this.mapsInViewport) {\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n      if (!webgl2WarpedMap) {\n        continue\n      }\n\n      this.setPointsProgramMapUniforms(webgl2WarpedMap)\n\n      // Draw points for each map\n      const count = webgl2WarpedMap.pointLayers.reduce(\n        (accumulator: number, pointLayer) =>\n          accumulator + pointLayer.projectedGeoPoints.length,\n        0\n      )\n      const primitiveType = this.gl.POINTS\n      const offset = 0\n      this.gl.bindVertexArray(webgl2WarpedMap.pointsVao)\n      this.gl.drawArrays(primitiveType, offset, count)\n    }\n  }\n\n  private setMapProgramUniforms() {\n    const program = this.mapProgram\n    const gl = this.gl\n    gl.useProgram(program)\n\n    // Debug\n    const debugLocation = gl.getUniformLocation(program, 'u_debug')\n    gl.uniform1f(\n      debugLocation,\n      this.partialWebgl2RendererOptions.debugMaps ? 1 : 0\n    )\n\n    // Animation progress\n    const animationProgressLocation = gl.getUniformLocation(\n      program,\n      'u_animationProgress'\n    )\n    gl.uniform1f(animationProgressLocation, this.animationProgress)\n\n    // Distortion colors\n    // TODO: make these colors pickable\n    const colorDistortion00 = gl.getUniformLocation(\n      program,\n      'u_colorDistortion00'\n    )\n    gl.uniform4f(colorDistortion00, ...hexToFractionalRgb(red), 1)\n\n    const colorDistortion01 = gl.getUniformLocation(\n      program,\n      'u_colorDistortion01'\n    )\n    gl.uniform4f(colorDistortion01, ...hexToFractionalRgb(darkblue), 1)\n\n    const colorDistortion1 = gl.getUniformLocation(\n      program,\n      'u_colorDistortion1'\n    )\n    gl.uniform4f(colorDistortion1, ...hexToFractionalRgb(green), 1)\n\n    const colorDistortion2 = gl.getUniformLocation(\n      program,\n      'u_colorDistortion2'\n    )\n    gl.uniform4f(colorDistortion2, ...hexToFractionalRgb(yellow), 1)\n\n    const colorDistortion3 = gl.getUniformLocation(\n      program,\n      'u_colorDistortion3'\n    )\n    gl.uniform4f(colorDistortion3, ...hexToFractionalRgb(red), 1)\n\n    const colorGrid = gl.getUniformLocation(program, 'u_colorGrid')\n    gl.uniform4f(colorGrid, ...hexToFractionalRgb(black), 1)\n  }\n\n  private setMapProgramRenderOptionsUniforms(\n    layerRenderOptions: RenderOptions,\n    mapRenderOptions: RenderOptions\n  ) {\n    const gl = this.gl\n    const program = this.mapProgram\n    gl.useProgram(program)\n\n    const renderOptions: RenderOptions = {\n      removeColorOptions: {\n        color:\n          mapRenderOptions.removeColorOptions?.color ||\n          layerRenderOptions.removeColorOptions?.color,\n        hardness: maxOfNumberOrUndefined(\n          mapRenderOptions.removeColorOptions?.hardness,\n          layerRenderOptions.removeColorOptions?.hardness\n        ),\n        threshold: maxOfNumberOrUndefined(\n          mapRenderOptions.removeColorOptions?.threshold,\n          layerRenderOptions.removeColorOptions?.threshold\n        )\n      },\n      colorizeOptions: {\n        ...layerRenderOptions.colorizeOptions,\n        ...mapRenderOptions.colorizeOptions\n      },\n      gridOptions: {\n        ...layerRenderOptions.gridOptions,\n        ...mapRenderOptions.gridOptions\n      }\n    }\n\n    // Remove color uniforms\n    const removeColorOptionsColor = renderOptions.removeColorOptions?.color\n\n    const removeColorLocation = gl.getUniformLocation(program, 'u_removeColor')\n    gl.uniform1f(removeColorLocation, removeColorOptionsColor ? 1 : 0)\n\n    if (removeColorOptionsColor) {\n      const removeColorOptionsColorLocation = gl.getUniformLocation(\n        program,\n        'u_removeColorOptionsColor'\n      )\n      gl.uniform3fv(removeColorOptionsColorLocation, removeColorOptionsColor)\n\n      const removeColorOptionsThresholdLocation = gl.getUniformLocation(\n        program,\n        'u_removeColorOptionsThreshold'\n      )\n      gl.uniform1f(\n        removeColorOptionsThresholdLocation,\n        renderOptions.removeColorOptions?.threshold ||\n          DEFAULT_REMOVE_COLOR_THRESHOLD\n      )\n\n      const removeColorOptionsHardnessLocation = gl.getUniformLocation(\n        program,\n        'u_removeColorOptionsHardness'\n      )\n      gl.uniform1f(\n        removeColorOptionsHardnessLocation,\n        renderOptions.removeColorOptions?.hardness ||\n          DEFAULT_REMOVE_COLOR_HARDNESS\n      )\n    }\n\n    // Colorize uniforms\n    const colorizeOptionsColor = renderOptions.colorizeOptions?.color\n\n    const colorizeLocation = gl.getUniformLocation(program, 'u_colorize')\n    gl.uniform1f(colorizeLocation, colorizeOptionsColor ? 1 : 0)\n\n    if (colorizeOptionsColor) {\n      const colorizeOptionsColorLocation = gl.getUniformLocation(\n        program,\n        'u_colorizeOptionsColor'\n      )\n      gl.uniform3fv(colorizeOptionsColorLocation, colorizeOptionsColor)\n    }\n\n    // Grid uniforms\n    const gridOptionsGrid = renderOptions.gridOptions?.enabled\n\n    const gridLocation = gl.getUniformLocation(program, 'u_grid')\n    gl.uniform1f(gridLocation, gridOptionsGrid ? 1 : 0)\n  }\n\n  private setMapProgramMapUniforms(webgl2WarpedMap: WebGL2WarpedMap) {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.mapProgram\n    gl.useProgram(program)\n\n    // Render Transform\n    const renderHomogeneousTransform = multiplyHomogeneousTransform(\n      this.viewport.projectedGeoToClipHomogeneousTransform,\n      webgl2WarpedMap.invertedRenderHomogeneousTransform\n    )\n    const renderHomogeneousTransformLocation = gl.getUniformLocation(\n      program,\n      'u_renderHomogeneousTransform'\n    )\n    gl.uniformMatrix4fv(\n      renderHomogeneousTransformLocation,\n      false,\n      homogeneousTransformToMatrix4(renderHomogeneousTransform)\n    )\n\n    // Opacity\n    const opacityLocation = gl.getUniformLocation(program, 'u_opacity')\n    gl.uniform1f(opacityLocation, this.opacity * webgl2WarpedMap.opacity)\n\n    // Saturation\n    const saturationLocation = gl.getUniformLocation(program, 'u_saturation')\n    gl.uniform1f(\n      saturationLocation,\n      this.saturation * webgl2WarpedMap.saturation\n    )\n\n    // Distortion\n    const distortionLocation = gl.getUniformLocation(program, 'u_distortion')\n    gl.uniform1f(distortionLocation, webgl2WarpedMap.distortionMeasure ? 1 : 0)\n\n    const distortionOptionsDistortionMeasureLocation = gl.getUniformLocation(\n      program,\n      'u_distortionOptionsdistortionMeasure'\n    )\n    gl.uniform1i(\n      distortionOptionsDistortionMeasureLocation,\n      webgl2WarpedMap.distortionMeasure\n        ? supportedDistortionMeasures.indexOf(webgl2WarpedMap.distortionMeasure)\n        : 0\n    )\n\n    // Best scale factor\n    const scaleFactorForViewportLocation = gl.getUniformLocation(\n      program,\n      'u_scaleFactorForViewport'\n    )\n    const scaleFactorForViewport = webgl2WarpedMap.tileZoomLevelForViewport\n      ? webgl2WarpedMap.tileZoomLevelForViewport.scaleFactor\n      : 1\n    gl.uniform1i(scaleFactorForViewportLocation, scaleFactorForViewport)\n\n    // Cached tiles texture array\n    const cachedTilesTextureArrayLocation = gl.getUniformLocation(\n      program,\n      'u_cachedTilesTextureArray'\n    )\n    gl.uniform1i(cachedTilesTextureArrayLocation, 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D_ARRAY, webgl2WarpedMap.cachedTilesTextureArray)\n\n    // Cached tiles resource origin points and dimensions texture\n    const cachedTilesResourceOriginPointsAndDimensionsLocation =\n      gl.getUniformLocation(\n        program,\n        'u_cachedTilesResourceOriginPointsAndDimensionsTexture'\n      )\n    gl.uniform1i(cachedTilesResourceOriginPointsAndDimensionsLocation, 1)\n    gl.activeTexture(gl.TEXTURE1)\n\n    gl.bindTexture(\n      gl.TEXTURE_2D,\n      webgl2WarpedMap.cachedTilesResourceOriginPointsAndDimensionsTexture\n    )\n\n    // Cached tiles scale factors texture\n    const cachedTileScaleFactorsTextureLocation = gl.getUniformLocation(\n      program,\n      'u_cachedTilesScaleFactorsTexture'\n    )\n    gl.uniform1i(cachedTileScaleFactorsTextureLocation, 2)\n    gl.activeTexture(gl.TEXTURE2)\n    gl.bindTexture(\n      gl.TEXTURE_2D,\n      webgl2WarpedMap.cachedTilesScaleFactorsTexture\n    )\n  }\n\n  private setLinesProgramUniforms() {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.linesProgram\n    gl.useProgram(program)\n\n    // ViewportToClip Transform\n    const viewportToClipHomogeneousTransformLocation = gl.getUniformLocation(\n      program,\n      'u_viewportToClipHomogeneousTransform'\n    )\n    gl.uniformMatrix4fv(\n      viewportToClipHomogeneousTransformLocation,\n      false,\n      homogeneousTransformToMatrix4(\n        this.viewport.viewportToClipHomogeneousTransform\n      )\n    )\n\n    // clipToViewport Transform\n    const clipToViewportHomogeneousTransformLocation = gl.getUniformLocation(\n      program,\n      'u_clipToViewportHomogeneousTransform'\n    )\n    gl.uniformMatrix4fv(\n      clipToViewportHomogeneousTransformLocation,\n      false,\n      homogeneousTransformToMatrix4(\n        invertHomogeneousTransform(\n          this.viewport.viewportToClipHomogeneousTransform\n        )\n      )\n    )\n\n    // Animation progress\n    const animationProgressLocation = gl.getUniformLocation(\n      program,\n      'u_animationProgress'\n    )\n    gl.uniform1f(animationProgressLocation, this.animationProgress)\n  }\n\n  private setLinesProgramMapUniforms(webgl2WarpedMap: WebGL2WarpedMap) {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.linesProgram\n    gl.useProgram(program)\n\n    // Render Transform\n    const renderHomogeneousTransform = multiplyHomogeneousTransform(\n      this.viewport.projectedGeoToClipHomogeneousTransform,\n      webgl2WarpedMap.invertedRenderHomogeneousTransform\n    )\n    const renderHomogeneousTransformLocation = gl.getUniformLocation(\n      program,\n      'u_renderHomogeneousTransform'\n    )\n    gl.uniformMatrix4fv(\n      renderHomogeneousTransformLocation,\n      false,\n      homogeneousTransformToMatrix4(renderHomogeneousTransform)\n    )\n  }\n\n  private setPointsProgramUniforms() {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.pointsProgram\n    gl.useProgram(program)\n\n    // Animation progress\n    const animationProgressLocation = gl.getUniformLocation(\n      program,\n      'u_animationProgress'\n    )\n    gl.uniform1f(animationProgressLocation, this.animationProgress)\n  }\n\n  private setPointsProgramMapUniforms(webgl2WarpedMap: WebGL2WarpedMap) {\n    if (!this.viewport) {\n      return\n    }\n\n    const gl = this.gl\n    const program = this.pointsProgram\n    gl.useProgram(program)\n\n    // Render Transform\n    const renderHomogeneousTransform = multiplyHomogeneousTransform(\n      this.viewport.projectedGeoToClipHomogeneousTransform,\n      webgl2WarpedMap.invertedRenderHomogeneousTransform\n    )\n    const renderHomogeneousTransformLocation = gl.getUniformLocation(\n      program,\n      'u_renderHomogeneousTransform'\n    )\n    gl.uniformMatrix4fv(\n      renderHomogeneousTransformLocation,\n      false,\n      homogeneousTransformToMatrix4(renderHomogeneousTransform)\n    )\n  }\n\n  private startTransformerTransition(mapIds: string[]) {\n    this.updateVertexBuffers(mapIds)\n\n    if (this.lastAnimationFrameRequestId !== undefined) {\n      cancelAnimationFrame(this.lastAnimationFrameRequestId)\n    }\n\n    this.animating = true\n    this.transformaterTransitionStart = undefined\n    this.lastAnimationFrameRequestId = requestAnimationFrame(\n      ((now: number) => this.transformerTransitionFrame(now, mapIds)).bind(this)\n    )\n  }\n\n  private transformerTransitionFrame(now: number, mapIds: string[]) {\n    if (!this.transformaterTransitionStart) {\n      this.transformaterTransitionStart = now\n    }\n\n    if (now - this.transformaterTransitionStart < ANIMATION_DURATION) {\n      // Animation is ongoing\n      // animationProgress goes from 0 to 1 throughout animation\n      this.animationProgress =\n        (now - this.transformaterTransitionStart) / ANIMATION_DURATION\n\n      // First trigger a general repaint to clear canvas\n      this.changed()\n\n      this.renderInternal()\n\n      this.lastAnimationFrameRequestId = requestAnimationFrame(\n        ((now: number) => this.transformerTransitionFrame(now, mapIds)).bind(\n          this\n        )\n      )\n    } else {\n      // Animation ended\n      this.finishTransformerTransition(mapIds)\n    }\n  }\n\n  private finishTransformerTransition(mapIds: string[]) {\n    this.resetPrevious(mapIds)\n    this.updateVertexBuffers(mapIds)\n\n    this.animating = false\n    this.animationProgress = 0\n    this.transformaterTransitionStart = undefined\n\n    this.changed()\n  }\n\n  private changed() {\n    this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.CHANGED))\n  }\n\n  protected imageInfoLoaded(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      this.dispatchEvent(new WarpedMapEvent(WarpedMapEventType.IMAGEINFOLOADED))\n    }\n  }\n\n  protected clearMap(mapId: string) {\n    const webGL2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n    if (webGL2WarpedMap) {\n      webGL2WarpedMap.clearTextures()\n    }\n  }\n\n  protected mapTileLoaded(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const { mapId, tileUrl } = event.data as WarpedMapTileEventDetail\n      const tile = this.tileCache.getCacheableTile(tileUrl)\n\n      if (!tile) {\n        return\n      }\n\n      if (!tile.isCachedTile()) {\n        return\n      }\n\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n      if (!webgl2WarpedMap) {\n        return\n      }\n\n      webgl2WarpedMap.addCachedTileAndUpdateTextures(tile)\n    }\n  }\n\n  protected mapTileRemoved(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const { mapId, tileUrl } = event.data as WarpedMapTileEventDetail\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n\n      if (!webgl2WarpedMap) {\n        return\n      }\n\n      webgl2WarpedMap.removeCachedTileAndUpdateTextures(tileUrl)\n    }\n  }\n\n  protected warpedMapAdded(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapId = event.data as string\n      const webgl2WarpedMap = this.warpedMapList.getWarpedMap(mapId)\n      if (webgl2WarpedMap) {\n        this.addEventListenersToWebGL2WarpedMap(webgl2WarpedMap)\n      }\n    }\n  }\n\n  protected preChange(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      for (const webgl2WarpedMap of this.warpedMapList.getWarpedMaps({\n        mapIds\n      })) {\n        if (this.animating) {\n          webgl2WarpedMap.mixPreviousAndNew(1 - this.animationProgress)\n        }\n      }\n    }\n  }\n\n  protected optionsChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.finishTransformerTransition(mapIds)\n    }\n    this.changed()\n  }\n\n  protected gcpsChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.finishTransformerTransition(mapIds)\n    }\n    this.changed()\n  }\n\n  protected resourceMaskChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.finishTransformerTransition(mapIds)\n    }\n    this.changed()\n  }\n\n  protected transformationChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.startTransformerTransition(mapIds)\n    }\n  }\n\n  protected distortionChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.startTransformerTransition(mapIds)\n    }\n  }\n\n  protected internalProjectionChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.startTransformerTransition(mapIds)\n    }\n  }\n\n  protected projectionChanged(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const mapIds = event.data as string[]\n      this.finishTransformerTransition(mapIds)\n    }\n    this.changed()\n  }\n\n  private addEventListenersToWebGL2WarpedMap(webgl2WarpedMap: WebGL2WarpedMap) {\n    webgl2WarpedMap.addEventListener(\n      WarpedMapEventType.TEXTURESUPDATED,\n      this.throttledChanged.bind(this)\n    )\n  }\n\n  private removeEventListenersFromWebGL2WarpedMap(\n    webgl2WarpedMap: WebGL2WarpedMap\n  ) {\n    webgl2WarpedMap.removeEventListener(\n      WarpedMapEventType.TEXTURESUPDATED,\n      this.throttledChanged.bind(this)\n    )\n  }\n\n  contextLost() {\n    this.disableRender = true\n\n    this.cancelThrottledFunctions()\n    for (const webgl2WarpedMap of this.warpedMapList.getWarpedMaps()) {\n      webgl2WarpedMap.cancelThrottledFunctions()\n    }\n\n    this.tileCache.clear()\n  }\n\n  contextRestored() {\n    this.initializeWebGL(this.gl)\n\n    this.disableRender = false\n  }\n}\n", "import Event from 'ol/events/Event.js'\n\nexport class OLWarpedMapEvent extends Event {\n  data: unknown\n\n  constructor(type: string, data: unknown) {\n    super(type)\n\n    this.data = data\n  }\n}\n", "import Layer from 'ol/layer/Layer.js'\n\nimport { WebGL2Renderer, WebGL2WarpedMap } from '@allmaps/render/webgl2'\nimport {\n  Viewport,\n  WarpedMapList,\n  WarpedMapEvent,\n  WarpedMapEventType\n} from '@allmaps/render'\nimport { hexToFractionalRgb } from '@allmaps/stdlib'\nimport { OLWarpedMapEvent } from './OLWarpedMapEvent.js'\n\nimport type { FrameState } from 'ol/Map.js'\nimport type { Extent } from 'ol/extent'\n\nimport type { DistortionMeasure, TransformationType } from '@allmaps/transform'\nimport type { WarpedMapLayerOptions } from '@allmaps/render'\nimport type { Ring, ImageInformations, Gcp } from '@allmaps/types'\n\nexport type OpenLayersWarpedMapLayerOptions = WarpedMapLayerOptions\n\n/**\n * WarpedMapLayer class.\n *\n * This class renders georeferenced maps from a Georeference Annotation on an OpenLayers map.\n * WarpedMapLayer is a subclass of [Layer](https://openlayers.org/en/latest/apidoc/module-ol_layer_Layer-Layer.html).\n */\nexport class WarpedMapLayer extends Layer {\n  container: HTMLElement\n\n  canvas: HTMLCanvasElement\n  gl: WebGL2RenderingContext\n\n  canvasSize: [number, number] = [0, 0]\n\n  renderer: WebGL2Renderer\n\n  private resizeObserver: ResizeObserver\n\n  /**\n   * Creates a WarpedMapLayer instance\n   * @param options - the WebGL2 renderer options\n   */\n  constructor(options?: Partial<OpenLayersWarpedMapLayerOptions>) {\n    super({})\n\n    const container = document.createElement('div')\n    this.container = container\n\n    container.style.position = 'absolute'\n    container.style.width = '100%'\n    container.style.height = '100%'\n    container.classList.add('ol-layer')\n    container.classList.add('allmaps-warped-map-layer')\n    const canvas = document.createElement('canvas')\n\n    canvas.style.position = 'absolute'\n    canvas.style.left = '0'\n\n    canvas.style.width = '100%'\n    canvas.style.height = '100%'\n\n    container.appendChild(canvas)\n\n    const gl = canvas.getContext('webgl2', {\n      premultipliedAlpha: true\n    })\n\n    if (!gl) {\n      throw new Error('WebGL 2 not available')\n    }\n\n    this.resizeObserver = new ResizeObserver(this.resized.bind(this))\n    this.resizeObserver.observe(canvas, { box: 'content-box' })\n\n    this.canvas = canvas\n    this.gl = gl\n\n    this.renderer = new WebGL2Renderer(this.gl, options)\n\n    this.addEventListeners()\n  }\n\n  /**\n   * Adds a [Georeference Annotation](https://iiif.io/api/extension/georef/).\n   * @param annotation - Georeference Annotation\n   * @returns - the map IDs of the maps that were added, or an error per map\n   */\n  async addGeoreferenceAnnotation(\n    annotation: unknown\n  ): Promise<(string | Error)[]> {\n    const results =\n      await this.renderer.warpedMapList.addGeoreferenceAnnotation(annotation)\n    this.changed()\n\n    return results\n  }\n\n  /**\n   * Removes a [Georeference Annotation](https://iiif.io/api/extension/georef/).\n   * @param annotation - Georeference Annotation\n   * @returns - the map IDs of the maps that were removed, or an error per map\n   */\n  async removeGeoreferenceAnnotation(\n    annotation: unknown\n  ): Promise<(string | Error)[]> {\n    const results =\n      await this.renderer.warpedMapList.removeGeoreferenceAnnotation(annotation)\n    this.changed()\n\n    return results\n  }\n\n  /**\n   * Adds a [Georeference Annotation](https://iiif.io/api/extension/georef/) by URL.\n   * @param annotationUrl - Georeference Annotation\n   * @returns - the map IDs of the maps that were added, or an error per map\n   */\n  async addGeoreferenceAnnotationByUrl(\n    annotationUrl: string\n  ): Promise<(string | Error)[]> {\n    const annotation = await fetch(annotationUrl).then((response) =>\n      response.json()\n    )\n    const results = this.addGeoreferenceAnnotation(annotation)\n\n    return results\n  }\n\n  /**\n   * Removes a [Georeference Annotation](https://iiif.io/api/extension/georef/) by URL.\n   * @param annotationUrl - Georeference Annotation\n   * @returns - the map IDs of the maps that were removed, or an error per map\n   */\n  async removeGeoreferenceAnnotationByUrl(\n    annotationUrl: string\n  ): Promise<(string | Error)[]> {\n    const annotation = await fetch(annotationUrl).then((response) =>\n      response.json()\n    )\n    const results = this.removeGeoreferenceAnnotation(annotation)\n\n    return results\n  }\n\n  /**\n   * Adds a Georeferenced map.\n   * @param georeferencedMap - Georeferenced map\n   * @returns - the map ID of the map that was added, or an error\n   */\n  async addGeoreferencedMap(\n    georeferencedMap: unknown\n  ): Promise<string | Error> {\n    const result =\n      this.renderer.warpedMapList.addGeoreferencedMap(georeferencedMap)\n    this.changed()\n\n    return result\n  }\n\n  /**\n   * Removes a Georeferenced map.\n   * @param georeferencedMap - Georeferenced map\n   * @returns - the map ID of the map that was remvoed, or an error\n   */\n  async removeGeoreferencedMap(\n    georeferencedMap: unknown\n  ): Promise<string | Error> {\n    const result =\n      this.renderer.warpedMapList.removeGeoreferencedMap(georeferencedMap)\n    this.changed()\n\n    return result\n  }\n\n  /**\n   * Returns the WarpedMapList object that contains a list of the warped maps of all loaded maps\n   * @returns the warped map list\n   */\n  getWarpedMapList(): WarpedMapList<WebGL2WarpedMap> {\n    return this.renderer.warpedMapList\n  }\n\n  /**\n   * Returns a single map's warped map\n   * @param mapId - ID of the map\n   * @returns the warped map\n   */\n  getWarpedMap(mapId: string): WebGL2WarpedMap | undefined {\n    return this.renderer.warpedMapList.getWarpedMap(mapId)\n  }\n\n  /**\n   * Make a single map visible\n   * @param mapId - ID of the map\n   */\n  showMap(mapId: string) {\n    this.renderer.warpedMapList.showMaps([mapId])\n    this.changed()\n  }\n\n  /**\n   * Make multiple maps visible\n   * @param mapIds - IDs of the maps\n   */\n  showMaps(mapIds: Iterable<string>) {\n    this.renderer.warpedMapList.showMaps(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Make a single map invisible\n   * @param mapId - ID of the map\n   */\n  hideMap(mapId: string) {\n    this.renderer.warpedMapList.hideMaps([mapId])\n    this.changed()\n  }\n\n  /**\n   * Make multiple maps invisible\n   * @param mapIds - IDs of the maps\n   */\n  hideMaps(mapIds: Iterable<string>) {\n    this.renderer.warpedMapList.hideMaps(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Returns the visibility of a single map\n   * @returns - whether the map is visible\n   */\n  isMapVisible(mapId: string): boolean | undefined {\n    const warpedMap = this.renderer.warpedMapList.getWarpedMap(mapId)\n    return warpedMap?.visible\n  }\n\n  /**\n   * Sets the resource mask of a single map\n   * @param mapId - ID of the map\n   * @param resourceMask - new resource mask\n   */\n  setMapResourceMask(mapId: string, resourceMask: Ring) {\n    this.renderer.warpedMapList.setMapResourceMask(resourceMask, mapId)\n    this.changed()\n  }\n\n  /**\n   * Sets the GCOs of a single map\n   * @param mapId - ID of the map\n   * @param gcos - new GCPs\n   */\n  setMapGcps(mapId: string, gcps: Gcp[]) {\n    this.renderer.warpedMapList.setMapGcps(gcps, mapId)\n    this.changed()\n  }\n\n  /**\n   * Sets the transformation type of multiple maps\n   * @param mapIds - IDs of the maps\n   * @param transformation - new transformation type\n   */\n  setMapsTransformationType(\n    mapIds: Iterable<string>,\n    transformation: TransformationType\n  ) {\n    this.renderer.warpedMapList.setMapsTransformationType(transformation, {\n      mapIds\n    })\n    this.changed()\n  }\n\n  /**\n   * Sets the transformation type of a single map\n   * @param mapId - ID of the map\n   * @param transformation - new transformation type\n   */\n  setMapTransformationType(mapId: string, transformation: TransformationType) {\n    this.renderer.warpedMapList.setMapTransformationType(transformation, mapId)\n    this.changed()\n  }\n\n  /**\n   * Sets the distortion measure of multiple maps\n   * @param mapIds - IDs of the maps\n   * @param distortionMeasure - new distortion measure\n   */\n  setMapsDistortionMeasure(\n    mapIds: Iterable<string>,\n    distortionMeasure?: DistortionMeasure\n  ) {\n    this.renderer.warpedMapList.setMapsDistortionMeasure(distortionMeasure, {\n      mapIds\n    })\n    this.changed()\n  }\n\n  removeGeoreferencedMapById(mapId: string) {\n    this.renderer.warpedMapList.removeGeoreferencedMapById(mapId)\n    this.changed()\n  }\n\n  /**\n   * Return the bounding box of all visible maps in the layer (inside or outside of the Viewport), in longitude/latitude coordinates.\n   * @returns - Bounding box of all warped maps\n   */\n  getLonLatExtent(): Extent | undefined {\n    return this.renderer.warpedMapList.getMapsBbox({\n      projection: { definition: 'EPSG:4326' }\n    })\n  }\n\n  /**\n   * Return the bounding box of all visible maps in the layer (inside or outside of the Viewport), in projected coordinates.\n   * @returns - bounding box of all warped maps\n   */\n  getExtent(): Extent | undefined {\n    return this.renderer.warpedMapList.getMapsBbox()\n  }\n\n  /**\n   * Bring maps to front\n   * @param mapIds - IDs of the maps\n   */\n  bringMapsToFront(mapIds: Iterable<string>) {\n    this.renderer.warpedMapList.bringMapsToFront(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Send maps to back\n   * @param mapIds - IDs of the maps\n   */\n  sendMapsToBack(mapIds: string[]) {\n    this.renderer.warpedMapList.sendMapsToBack(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Bring maps forward\n   * @param mapIds - IDs of the maps\n   */\n  bringMapsForward(mapIds: Iterable<string>) {\n    this.renderer.warpedMapList.bringMapsForward(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Send maps backward\n   * @param mapIds - IDs of the maps\n   */\n  sendMapsBackward(mapIds: Iterable<string>) {\n    this.renderer.warpedMapList.sendMapsBackward(mapIds)\n    this.changed()\n  }\n\n  /**\n   * Returns the z-index of a single map\n   * @param mapId - ID of the warped map\n   * @returns - z-index of the warped map\n   */\n  getMapZIndex(mapId: string): number | undefined {\n    return this.renderer.warpedMapList.getMapZIndex(mapId)\n  }\n\n  /**\n   * Sets the object that caches image information\n   * @param imageInformations - Object that caches image information\n   */\n  setImageInformations(imageInformations: ImageInformations) {\n    this.renderer.warpedMapList.setImageInformations(imageInformations)\n  }\n\n  /**\n   * Gets the HTML container element of the layer\n   * @returns HTML element\n   */\n  getContainer(): HTMLElement {\n    return this.container\n  }\n\n  /**\n   * Gets the HTML canvas element of the layer\n   * @returns HTML Canvas element\n   */\n  getCanvas(): HTMLCanvasElement | null {\n    return this.canvas\n  }\n\n  /**\n   * Sets the options\n   *\n   * @param options - Options\n   */\n  setOptions(options?: Partial<OpenLayersWarpedMapLayerOptions>) {\n    this.renderer.setOptions(options)\n  }\n\n  // No setOpacity() and getOpacity() here since default for OL Layer class\n\n  /**\n   * Gets the opacity of a single map\n   * @param mapId - ID of the map\n   * @returns Opacity of the map\n   */\n  getMapOpacity(mapId: string): number | undefined {\n    return this.renderer.getMapOpacity(mapId)\n  }\n\n  /**\n   * Sets the opacity of a single map\n   * @param mapId - ID of the map\n   * @param opacity - opacity between 0 and 1, where 0 is fully transparent and 1 is fully opaque\n   */\n  setMapOpacity(mapId: string, opacity: number) {\n    this.renderer.setMapOpacity(mapId, opacity)\n    this.changed()\n  }\n\n  /**\n   * Resets the opacity of a single map to fully opaque\n   * @param mapId - ID of the map\n   */\n  resetMapOpacity(mapId: string) {\n    this.renderer.resetMapOpacity(mapId)\n    this.changed()\n  }\n\n  /**\n   * Sets the saturation of a single map\n   * @param saturation - saturation between 0 and 1, where 0 is grayscale and 1 are the original colors\n   */\n  setSaturation(saturation: number) {\n    this.renderer.setSaturation(saturation)\n    this.changed()\n  }\n\n  /**\n   * Resets the saturation of a single map to the original colors\n   */\n  resetSaturation() {\n    this.renderer.resetSaturation()\n    this.changed()\n  }\n\n  /**\n   * Sets the saturation of a single map\n   * @param mapId - ID of the map\n   * @param saturation - saturation between 0 and 1, where 0 is grayscale and 1 are the original colors\n   */\n  setMapSaturation(mapId: string, saturation: number) {\n    this.renderer.setMapSaturation(mapId, saturation)\n    this.changed()\n  }\n\n  /**\n   * Resets the saturation of a single map to the original colors\n   * @param mapId - ID of the map\n   */\n  resetMapSaturation(mapId: string) {\n    this.renderer.resetMapSaturation(mapId)\n    this.changed()\n  }\n\n  /**\n   * Removes a color from all maps\n   * @param transformOptions - remove color options\n   * @param transformOptions.hexColor - hex color to remove\n   * @param transformOptions.threshold - threshold between 0 and 1\n   * @param transformOptions.hardness - hardness between 0 and 1\n   */\n  setRemoveColor(\n    options: Partial<{ hexColor: string; threshold: number; hardness: number }>\n  ) {\n    const color = options.hexColor\n      ? hexToFractionalRgb(options.hexColor)\n      : undefined\n\n    this.renderer.setRemoveColorOptions({\n      color,\n      threshold: options.threshold,\n      hardness: options.hardness\n    })\n    this.changed()\n  }\n\n  /**\n   * Resets the color removal for all maps\n   */\n  resetRemoveColor() {\n    this.renderer.resetRemoveColorOptions()\n    this.changed()\n  }\n\n  /**\n   * Removes a color from a single map\n   * @param mapId - ID of the map\n   * @param transformOptions - remove color options\n   * @param transformOptions.hexColor] - hex color to remove\n   * @param transformOptions.threshold] - threshold between 0 and 1\n   * @param transformOptions.hardness] - hardness between 0 and 1\n   */\n  setMapRemoveColor(\n    mapId: string,\n    options: Partial<{ hexColor: string; threshold: number; hardness: number }>\n  ) {\n    const color = options.hexColor\n      ? hexToFractionalRgb(options.hexColor)\n      : undefined\n\n    this.renderer.setMapRemoveColorOptions(mapId, {\n      color,\n      threshold: options.threshold,\n      hardness: options.hardness\n    })\n    this.changed()\n  }\n\n  /**\n   * Resets the color for a single map\n   * @param mapId - ID of the map\n   */\n  resetMapRemoveColor(mapId: string) {\n    this.renderer.resetMapRemoveColorOptions(mapId)\n  }\n\n  /**\n   * Sets the colorization for all maps\n   * @param hexColor - desired hex color\n   */\n  setColorize(hexColor: string) {\n    const color = hexToFractionalRgb(hexColor)\n    if (color) {\n      this.renderer.setColorizeOptions({ color })\n      this.changed()\n    }\n  }\n\n  /**\n   * Resets the colorization for all maps\n   */\n  resetColorize() {\n    this.renderer.resetColorizeOptions()\n    this.changed()\n  }\n\n  /**\n   * Sets the colorization for a single mapID of the map\n   * @param mapId - ID of the map\n   * @param hexColor - desired hex color\n   */\n  setMapColorize(mapId: string, hexColor: string) {\n    const color = hexToFractionalRgb(hexColor)\n    if (color) {\n      this.renderer.setMapColorizeOptions(mapId, { color })\n      this.changed()\n    }\n  }\n\n  /**\n   * Resets the colorization of a single map\n   * @param mapId - ID of the map\n   */\n  resetMapColorize(mapId: string) {\n    this.renderer.resetMapColorizeOptions(mapId)\n    this.changed()\n  }\n\n  /**\n   * Sets the grid for all maps\n   * @param enabled - whether to show the grid\n   */\n  setGrid(enabled: boolean) {\n    this.renderer.setGridOptions({ enabled })\n    this.changed()\n  }\n\n  /**\n   * Resets the grid for all maps\n   */\n  resetGrid() {\n    this.renderer.resetGridOptions()\n    this.changed()\n  }\n\n  /**\n   * Sets the grid for a single mapID of the map\n   * @param mapId - ID of the map\n   * @param enabled - whether to show the grid\n   */\n  setMapGrid(mapId: string, enabled: boolean) {\n    this.renderer.setMapGridOptions(mapId, { enabled })\n    this.changed()\n  }\n\n  /**\n   * Resets the grid of a single map\n   * @param mapId - ID of the map\n   */\n  resetMapGrid(mapId: string) {\n    this.renderer.resetMapGridOptions(mapId)\n    this.changed()\n  }\n\n  /**\n   * Disposes all WebGL resources and cached tiles\n   */\n  dispose() {\n    this.renderer.destroy()\n\n    const extension = this.gl.getExtension('WEBGL_lose_context')\n\n    if (extension) {\n      extension.loseContext()\n    }\n    const canvas = this.gl.canvas\n    canvas.width = 1\n    canvas.height = 1\n\n    this.resizeObserver.disconnect()\n\n    this.removeEventListeners()\n\n    super.disposeInternal()\n  }\n\n  /**\n   * Clears: removes all maps\n   */\n  clear() {\n    this.renderer.warpedMapList.clear()\n    this.changed()\n  }\n\n  /**\n   * Render the layer.\n   * @param frameState - OpenLayers frame state\n   * @returns The rendered element\n   */\n  render(frameState: FrameState): HTMLElement {\n    if (this.canvas) {\n      this.resizeCanvas(this.canvas, this.canvasSize)\n    }\n\n    this.renderer.setOpacity(Math.min(Math.max(this.getOpacity(), 0), 1))\n\n    const viewport = new Viewport(\n      frameState.size as [number, number],\n      frameState.viewState.center as [number, number],\n      frameState.viewState.resolution,\n      {\n        rotation: frameState.viewState.rotation,\n        devicePixelRatio: window.devicePixelRatio,\n        projection: { definition: frameState.viewState.projection.getCode() }\n        // TODO: add a way for viewport and renderer to understand other codes then the two default ones\n      }\n    )\n\n    this.renderer.render(viewport)\n\n    return this.container\n  }\n\n  private resized(entries: ResizeObserverEntry[]) {\n    // From https://webgl2fundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n    // TODO: read + understand https://web.dev/device-pixel-content-box/\n    for (const entry of entries) {\n      const width = entry.contentRect.width\n      const height = entry.contentRect.height\n      const dpr = window.devicePixelRatio\n\n      // if (entry.devicePixelContentBoxSize) {\n      //   // NOTE: Only this path gives the correct answer\n      //   // The other paths are imperfect fallbacks\n      //   // for browsers that don't provide anyway to do this\n      //   width = entry.devicePixelContentBoxSize[0].inlineSize\n      //   height = entry.devicePixelContentBoxSize[0].blockSize\n      //   dpr = 1 // it's already in width and height\n      // } else if (entry.contentBoxSize) {\n      //   if (entry.contentBoxSize[0]) {\n      //     width = entry.contentBoxSize[0].inlineSize\n      //     height = entry.contentBoxSize[0].blockSize\n      //   }\n      // }\n\n      const displayWidth = Math.round(width * dpr)\n      const displayHeight = Math.round(height * dpr)\n\n      this.canvasSize = [displayWidth, displayHeight]\n    }\n    this.changed()\n  }\n\n  private resizeCanvas(\n    canvas: HTMLCanvasElement,\n    [width, height]: [number, number]\n  ) {\n    const needResize = canvas.width !== width || canvas.height !== height\n\n    if (needResize) {\n      canvas.width = width\n      canvas.height = height\n    }\n\n    return needResize\n  }\n\n  private contextLost(event: Event) {\n    event.preventDefault()\n    this.renderer.contextLost()\n  }\n\n  private contextRestored(event: Event) {\n    event.preventDefault()\n    this.renderer.contextRestored()\n  }\n\n  private addEventListeners() {\n    this.canvas.addEventListener(\n      'webglcontextlost',\n      this.contextLost.bind(this)\n    )\n\n    this.canvas.addEventListener(\n      'webglcontextrestored',\n      this.contextRestored.bind(this)\n    )\n\n    this.renderer.addEventListener(\n      WarpedMapEventType.CHANGED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.addEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.addEventListener(\n      WarpedMapEventType.WARPEDMAPENTER,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.addEventListener(\n      WarpedMapEventType.WARPEDMAPLEAVE,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.tileCache.addEventListener(\n      WarpedMapEventType.FIRSTMAPTILELOADED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.tileCache.addEventListener(\n      WarpedMapEventType.ALLREQUESTEDTILESLOADED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.addEventListener(\n      WarpedMapEventType.GEOREFERENCEANNOTATIONADDED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.addEventListener(\n      WarpedMapEventType.WARPEDMAPADDED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.addEventListener(\n      WarpedMapEventType.WARPEDMAPREMOVED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.addEventListener(\n      WarpedMapEventType.VISIBILITYCHANGED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.warpedMapList.addEventListener(\n      WarpedMapEventType.CLEARED,\n      this.changed.bind(this)\n    )\n  }\n\n  private removeEventListeners() {\n    this.canvas.removeEventListener(\n      'webglcontextlost',\n      this.contextLost.bind(this)\n    )\n\n    this.canvas.removeEventListener(\n      'webglcontextrestored',\n      this.contextRestored.bind(this)\n    )\n\n    this.renderer.removeEventListener(\n      WarpedMapEventType.CHANGED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.removeEventListener(\n      WarpedMapEventType.IMAGEINFOLOADED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.removeEventListener(\n      WarpedMapEventType.WARPEDMAPENTER,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.removeEventListener(\n      WarpedMapEventType.WARPEDMAPLEAVE,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.tileCache.removeEventListener(\n      WarpedMapEventType.FIRSTMAPTILELOADED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.tileCache.removeEventListener(\n      WarpedMapEventType.ALLREQUESTEDTILESLOADED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.removeEventListener(\n      WarpedMapEventType.GEOREFERENCEANNOTATIONADDED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.removeEventListener(\n      WarpedMapEventType.WARPEDMAPADDED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.removeEventListener(\n      WarpedMapEventType.WARPEDMAPREMOVED,\n      this.passWarpedMapEvent.bind(this)\n    )\n\n    this.renderer.warpedMapList.removeEventListener(\n      WarpedMapEventType.VISIBILITYCHANGED,\n      this.changed.bind(this)\n    )\n\n    this.renderer.warpedMapList.removeEventListener(\n      WarpedMapEventType.CLEARED,\n      this.changed.bind(this)\n    )\n  }\n\n  private passWarpedMapEvent(event: Event) {\n    if (event instanceof WarpedMapEvent) {\n      const olEvent = new OLWarpedMapEvent(event.type, event.data)\n      this.dispatchEvent(olEvent)\n    }\n  }\n}\n"],
  "mappings": "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IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,aAAa;AAAA,IACX,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,aAAa;AAAA,IACX,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,aAAa;AAAA,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AAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,aAAa;AAAA,IACX,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,YAAY;AAAA,IACV,SAAS;AAAA,EACX;AAAA,EACA,YAAY;AAAA,IACV,SAAS;AAAA,EACX;AAAA,EACA,YAAY;AAAA,IACV,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,aAAa;AAAA,IACX,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,eAAe;AAAA,IACb,SAAS;AAAA,EACX;AAAA,EACA,eAAe;AAAA,IACb,SAAS;AAAA,EACX;AAAA,EACA,iBAAiB;AAAA,IACf,SAAS;AAAA,EACX;AAAA,EACA,kBAAkB;AAAA,IAChB,SAAS;AAAA,EACX;AAAA,EACA,gBAAgB;AAAA,IACd,SAAS;AAAA,EACX;AAAA,EACA,YAAY;AAAA,IACV,SAAS;AAAA,EACX;AAAA,EACA,cAAc;AAAA,IACZ,SAAS;AAAA,EACX;AAAA,EACA,cAAc;AAAA,IACZ,SAAS;AAAA,EACX;AAAA,EACA,eAAe;AAAA,IACb,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACT,SAAS;AAAA,EACX;AAAA,EACA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",
  "names": ["toString", "max", "min", "init_lib_es6", "min", "max", "init_lib_es6", "exports", "isAnyArray", "rescale", "matrix", "result", "AbstractMatrix", "Matrix", "add", "xor", "ceil", "floor", "round", "max", "sum", "v", "mean", "sum2", "size", "scale", "random", "min", "bb", "r", "c", "last", "SymmetricMatrix", "compact", "DistanceMatrix", "MatrixColumnView", "MatrixColumnSelectionView", "MatrixFlipColumnView", "MatrixFlipRowView", "MatrixRowView", "MatrixRowSelectionView", "MatrixSelectionView", "MatrixSubView", "MatrixTransposeView", "WrapperMatrix1D", "WrapperMatrix2D", "wrap", "LuDecomposition", "determinant", "QrDecomposition", "SingularValueDecomposition", "V", "inverse", "solve", "range", "linearDependencies", "pseudoInverse", "covariance", "correlation", "EigenvalueDecomposition", "CholeskyDecomposition", "B", "u", "property", "isString", "once", "keys", "values", "min", "max", "squaredDistance", "EventType_default", "global", "point", "RADIUS", "EXTENT", "METERS_PER_UNIT", "PROJECTIONS", "add", "destination", "get", "transform", "offset", "offset", "size", "isEmpty", "start", "intersects", "isEmpty", "coordinates", "add", "equals", "disable", "add", "get", "destination", "add", "get", "get", "destination", "equals", "PROJECTIONS", "size", "result", "size", "offset", "none", "transform", "offset", "transform", "rotate", "transform", "clone", "point", "extent", "destination", "get", "scale", "coordinates", "rotate", "offset", "max", "squaredDistance", "offset", "squaredDistance", "offset", "coordinates", "offset", "last", "squaredDistance", "offset", "offset", "coordinates", "offset", "coordinates", "coordinates", "point", "squaredDistance", "offset", "offset", "offset", "offset", "offset", "offset", "offset", "offset", "reverse", "coordinates", "linearRing", "linearRings", "offset", "isEmpty", "start", "now", "size", "add", "max", "offset", "isEmpty", "userProjection", "equals", "none", "map", "layerState", "EventType_default", "Symbol", "result", "objectProto", "nativeObjectToString", "symToStringTag", "iteratee", "result", "result", "result", "add", "NAN", "INFINITY", "result", "funcProto", "objectProto", "funcToString", "hasOwnProperty", "WeakMap", "result", "result", "result", "nativeMax", "result", "offset", "result", "objectProto", "hasOwnProperty", "result", "result", "objectProto", "hasOwnProperty", "match", "iteratee", "WRAP_BIND_FLAG", "WRAP_BIND_FLAG", "WRAP_BIND_KEY_FLAG", "WRAP_CURRY_FLAG", "WRAP_PARTIAL_FLAG", "WRAP_PARTIAL_RIGHT_FLAG", "ary", "result", "result", "WRAP_BIND_FLAG", "WRAP_BIND_KEY_FLAG", "WRAP_CURRY_FLAG", "WRAP_CURRY_RIGHT_FLAG", "WRAP_ARY_FLAG", "WRAP_FLIP_FLAG", "ary", "WRAP_BIND_FLAG", "PLACEHOLDER", "WRAP_BIND_FLAG", "WRAP_BIND_KEY_FLAG", "WRAP_CURRY_BOUND_FLAG", "WRAP_CURRY_FLAG", "WRAP_ARY_FLAG", "WRAP_REARG_FLAG", "nativeMin", "FUNC_ERROR_TEXT", "WRAP_BIND_FLAG", "WRAP_BIND_KEY_FLAG", "WRAP_CURRY_FLAG", "WRAP_CURRY_RIGHT_FLAG", "WRAP_PARTIAL_FLAG", "WRAP_PARTIAL_RIGHT_FLAG", "nativeMax", "ary", "result", "WRAP_ARY_FLAG", "objectProto", "hasOwnProperty", "nativeMax", "start", "transform", "start", "MAX_SAFE_INTEGER", "objectProto", "iteratee", "result", "objectProto", "hasOwnProperty", "argsTag", "funcTag", "freeExports", "freeModule", "moduleExports", "objectProto", "hasOwnProperty", "result", "transform", "objectProto", "hasOwnProperty", "result", "objectProto", "hasOwnProperty", "result", "objectProto", "hasOwnProperty", "result", "result", "objectProto", "hasOwnProperty", "result", "objectProto", "hasOwnProperty", "HASH_UNDEFINED", "Map", "map", "result", "size", "FUNC_ERROR_TEXT", "cache", "result", "result", "cache", "result", "match", "INFINITY", "result", "get", "result", "result", "values", "offset", "result", "objectTag", "funcProto", "objectProto", "funcToString", "hasOwnProperty", "errorTag", "FUNC_ERROR_TEXT", "result", "WRAP_BIND_FLAG", "WRAP_PARTIAL_FLAG", "WRAP_BIND_FLAG", "WRAP_BIND_KEY_FLAG", "WRAP_PARTIAL_FLAG", "start", "result", "start", "rsAstralRange", "rsComboMarksRange", "reComboHalfMarksRange", "rsComboSymbolsRange", "rsComboRange", "rsVarRange", "rsZWJ", "iteratee", "rsComboMarksRange", "reComboHalfMarksRange", "rsComboSymbolsRange", "rsComboRange", "rsCombo", "rsAstralRange", "rsComboMarksRange", "reComboHalfMarksRange", "rsComboSymbolsRange", "rsComboRange", "rsVarRange", "rsCombo", "rsFitz", "rsModifier", "rsNonAstral", "rsRegional", "rsSurrPair", "rsZWJ", "reOptMod", "rsOptVar", "rsOptJoin", "rsSeq", "rsApos", "result", "nativeMin", "result", "nativeMax", "size", "result", "clamp", "result", "freeExports", "freeModule", "moduleExports", "Buffer", "result", "result", "objectProto", "propertyIsEnumerable", "nativeGetSymbols", "result", "result", "DataView", "Promise", "Set", "mapTag", "objectTag", "setTag", "weakMapTag", "dataViewTag", "result", "objectProto", "hasOwnProperty", "result", "Uint8Array", "result", "result", "symbolProto", "boolTag", "dateTag", "mapTag", "numberTag", "regexpTag", "setTag", "stringTag", "symbolTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "mapTag", "setTag", "argsTag", "arrayTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "objectTag", "regexpTag", "setTag", "stringTag", "symbolTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "result", "key", "CLONE_SYMBOLS_FLAG", "CLONE_DEEP_FLAG", "CLONE_SYMBOLS_FLAG", "CLONE_DEEP_FLAG", "CLONE_SYMBOLS_FLAG", "CLONE_SYMBOLS_FLAG", "result", "HASH_UNDEFINED", "values", "cache", "result", "othValue", "map", "result", "set", "result", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "boolTag", "dateTag", "errorTag", "mapTag", "numberTag", "regexpTag", "setTag", "stringTag", "symbolTag", "arrayBufferTag", "dataViewTag", "symbolProto", "symbolValueOf", "result", "COMPARE_PARTIAL_FLAG", "objectProto", "hasOwnProperty", "result", "COMPARE_PARTIAL_FLAG", "argsTag", "arrayTag", "objectTag", "objectProto", "hasOwnProperty", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "result", "result", "result", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "FUNC_ERROR_TEXT", "CLONE_DEEP_FLAG", "iteratee", "iteratee", "iteratee", "iteratee", "iteratee", "collection", "iteratee", "objectProto", "hasOwnProperty", "result", "create", "result", "WRAP_CURRY_FLAG", "result", "WRAP_CURRY_RIGHT_FLAG", "result", "FUNC_ERROR_TEXT", "nativeMax", "nativeMin", "result", "objectProto", "hasOwnProperty", "FUNC_ERROR_TEXT", "LARGE_ARRAY_SIZE", "values", "iteratee", "includes", "result", "values", "values", "iteratee", "values", "forEach", "iteratee", "iteratee", "iteratee", "iteratee", "set", "result", "mapTag", "setTag", "reRegExpChar", "result", "collection", "MAX_ARRAY_LENGTH", "start", "start", "result", "collection", "iteratee", "nativeMax", "result", "collection", "nativeMax", "nativeMin", "iteratee", "result", "collection", "iteratee", "iteratee", "INFINITY", "iteratee", "iteratee", "INFINITY", "WRAP_FLIP_FLAG", "FUNC_ERROR_TEXT", "WRAP_CURRY_FLAG", "WRAP_PARTIAL_FLAG", "WRAP_ARY_FLAG", "WRAP_REARG_FLAG", "index", "result", "iteratee", "iteratee", "iteratee", "iteratee", "result", "objectProto", "hasOwnProperty", "result", "objectProto", "hasOwnProperty", "nativeMax", "nativeMin", "start", "start", "stringTag", "nativeMax", "nativeMax", "nativeMin", "iteratee", "includes", "result", "cache", "iteratee", "iteratee", "object", "iteratee", "objectProto", "nativeObjectToString", "result", "objectProto", "hasOwnProperty", "nativeObjectToString", "result", "result", "arrayBufferTag", "boolTag", "dateTag", "mapTag", "setTag", "objectProto", "hasOwnProperty", "isEmpty", "result", "nativeIsFinite", "isFinite", "numberTag", "isNaN", "regexpTag", "MAX_SAFE_INTEGER", "weakMapTag", "CLONE_DEEP_FLAG", "arrayProto", "result", "result", "nativeMax", "nativeMin", "result", "iteratee", "result", "object", "iteratee", "result", "object", "CLONE_DEEP_FLAG", "CLONE_DEEP_FLAG", "iteratee", "current", "result", "iteratee", "iteratee", "result", "current", "NAN", "iteratee", "iteratee", "iteratee", "chain", "result", "FUNC_ERROR_TEXT", "result", "mapTag", "setTag", "CLONE_DEEP_FLAG", "CLONE_FLAT_FLAG", "CLONE_SYMBOLS_FLAG", "result", "result", "result", "iteratee", "result", "collection", "iteratee", "nativeMin", "transforms", "MAX_SAFE_INTEGER", "result", "rsAstralRange", "rsComboMarksRange", "reComboHalfMarksRange", "rsComboSymbolsRange", "rsComboRange", "rsVarRange", "rsAstral", "rsCombo", "rsFitz", "rsModifier", "rsNonAstral", "rsRegional", "rsSurrPair", "rsZWJ", "reOptMod", "rsOptVar", "rsOptJoin", "rsSeq", "rsSymbol", "reUnicode", "result", "nativeCeil", "result", "nativeCeil", "nativeFloor", "reTrimStart", "parseInt", "WRAP_PARTIAL_FLAG", "WRAP_PARTIAL_RIGHT_FLAG", "result", "result", "parent", "clone", "arrayProto", "splice", "values", "iteratee", "indexOf", "values", "values", "iteratee", "values", "arrayProto", "splice", "result", "nativeFloor", "nativeMin", "nativeRandom", "nativeCeil", "nativeMax", "start", "result", "start", "WRAP_REARG_FLAG", "iteratee", "collection", "iteratee", "iteratee", "iteratee", "result", "FUNC_ERROR_TEXT", "start", "arrayProto", "size", "mapTag", "setTag", "start", "result", "result", "collection", "MAX_ARRAY_LENGTH", "nativeFloor", "nativeMin", "iteratee", "MAX_ARRAY_LENGTH", "iteratee", "iteratee", "iteratee", "result", "iteratee", "MAX_ARRAY_LENGTH", "FUNC_ERROR_TEXT", "nativeMax", "start", "result", "iteratee", "objectProto", "hasOwnProperty", "objectProto", "hasOwnProperty", "match", "offset", "result", "FUNC_ERROR_TEXT", "MAX_SAFE_INTEGER", "MAX_ARRAY_LENGTH", "nativeMin", "iteratee", "result", "result", "MAX_SAFE_INTEGER", "transform", "iteratee", "object", "start", "reTrimStart", "start", "reFlags", "result", "match", "INFINITY", "values", "LARGE_ARRAY_SIZE", "iteratee", "includes", "result", "set", "iteratee", "iteratee", "nativeMax", "iteratee", "result", "result", "values", "start", "iteratee", "result", "iteratee", "values", "result", "values", "values", "iteratee", "result", "result", "nativeMax", "nativeMin", "start", "transforms", "size", "nativeMin", "start", "result", "iteratee", "WRAP_BIND_KEY_FLAG", "LAZY_FILTER_FLAG", "MAX_ARRAY_LENGTH", "arrayProto", "objectProto", "hasOwnProperty", "symIterator", "nativeMax", "nativeMin", "mixin", "result", "iteratee", "start", "value", "isObject", "wrap", "parent", "obj", "returnValue", "proxy", "last", "v", "SingularValueDecomposition", "inverse", "pseudoInverse", "pseudoInverse", "matrix", "inverse", "SingularValueDecomposition", "scale", "point", "epsilon", "sum", "dist", "start", "distance", "bearing", "distance", "dist", "distance", "midpoint", "point", "point", "point", "destination", "transformer", "svg", "shades", "WarpedMapEventType", "point", "tileZoomLevel", "TEXTURES_MAX_LOWER_LOG2_SCALE_FACTOR_DIFF", "TEXTURES_MAX_HIGHER_LOG2_SCALE_FACTOR_DIFF", "tileUrl", "keys", "SvgSelectorSchema", "TargetSchema", "FeaturePropertiesSchema", "BodySchema", "AnnotationSchema", "AnnotationPageSchema", "AnnotationSchema", "AnnotationPageSchema", "FeaturePropertiesSchema", "svg", "result", "point", "AnnotationPageSchema", "AnnotationSchema", "GCPSchema", "GeoreferencedMapSchema", "GeoreferencedMapsSchema", "GeoreferencedMapSchema", "GeoreferencedMapsSchema", "GCPSchema", "svg", "point", "GeoreferencedMapsSchema", "GeoreferencedMapSchema", "GeoreferencedMapsSchema", "GeoreferencedMapSchema", "defs", "keys", "self", "v", "split", "params", "result", "unit", "result", "result", "root", "v", "D2R", "result", "params", "keys", "v", "destination", "property", "inverse", "init", "identity", "names", "init", "identity", "names", "add", "get", "sphere", "datum", "nadgrid", "degreesToRadians", "degreesToRadians", "start", "offset", "Projection", "Z", "point", "inverse", "epsilon", "point", "v", "point", "transform", "point", "wgs84", "keys", "transform", "forward", "inverse", "inverse", "A", "M", "C1", "D", "result", "set", "Point", "forward", "Point_default", "init", "forward", "inverse", "names", "B", "init", "Z", "forward", "inverse", "names", "init", "names", "MAX_ITER", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "A", "inverse", "ce", "names", "init", "forward", "I", "inverse", "names", "init", "D", "forward", "V", "u", "v", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "u", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "ab", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "MAX_ITER", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "MAX_ITER", "init", "forward", "V", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "A", "B", "init", "forward", "inverse", "M", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "offset", "names", "start", "init", "forward", "inverse", "names", "init", "forward", "point", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "forward", "inverse", "names", "init", "names", "proj4", "proj4", "Point_default", "transform", "sum", "scale", "C1", "u3", "sum", "u", "bc", "ca", "ab", "u", "abt", "bct", "cat", "_8", "_16", "fin", "fin2", "sum", "u3", "scale", "ab", "bc", "_8", "_8b", "_16", "_48", "fin", "u2", "point", "map", "point", "point", "v", "dist", "result", "pointInPolygon", "point", "start", "n", "v", "start", "edg", "distance", "point", "pointInPolygon", "determinant", "point", "Image", "point", "resourceResolution", "size", "offset", "point", "size", "cachedTile", "comlinkProxy", "point", "vertex_shader_default", "fragment_shader_default", "vertex_shader_default", "fragment_shader_default", "DEFAULT_OPACITY", "DEFAULT_SATURATION", "mapVertexShaderSource", "mapFragmentShaderSource", "linesVertexShaderSource", "linesFragmentShaderSource", "pointsVertexShaderSource", "pointsFragmentShaderSource", "FetchAndGetImageDataWorker", "comlinkWtap", "offset", "now", "result"]
}
